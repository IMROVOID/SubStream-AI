var v_=Object.defineProperty;var Af=t=>{throw TypeError(t)};var __=(t,e,n)=>e in t?v_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ke=(t,e,n)=>__(t,typeof e!="symbol"?e+"":e,n),Nf=(t,e,n)=>e.has(t)||Af("Cannot "+n);var K=(t,e,n)=>(Nf(t,e,"read from private field"),n?n.call(t):e.get(t)),xn=(t,e,n)=>e.has(t)?Af("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Vo=(t,e,n,r)=>(Nf(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function w_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vm={exports:{}},Ll={},$m={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vi=Symbol.for("react.element"),x_=Symbol.for("react.portal"),E_=Symbol.for("react.fragment"),S_=Symbol.for("react.strict_mode"),T_=Symbol.for("react.profiler"),C_=Symbol.for("react.provider"),I_=Symbol.for("react.context"),A_=Symbol.for("react.forward_ref"),N_=Symbol.for("react.suspense"),R_=Symbol.for("react.memo"),P_=Symbol.for("react.lazy"),Rf=Symbol.iterator;function k_(t){return t===null||typeof t!="object"?null:(t=Rf&&t[Rf]||t["@@iterator"],typeof t=="function"?t:null)}var Bm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Om=Object.assign,Hm={};function xo(t,e,n){this.props=t,this.context=e,this.refs=Hm,this.updater=n||Bm}xo.prototype.isReactComponent={};xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qm(){}qm.prototype=xo.prototype;function Nc(t,e,n){this.props=t,this.context=e,this.refs=Hm,this.updater=n||Bm}var Rc=Nc.prototype=new qm;Rc.constructor=Nc;Om(Rc,xo.prototype);Rc.isPureReactComponent=!0;var Pf=Array.isArray,zm=Object.prototype.hasOwnProperty,Pc={current:null},Jm={key:!0,ref:!0,__self:!0,__source:!0};function Wm(t,e,n){var r,o={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)zm.call(e,r)&&!Jm.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];o.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Vi,type:t,key:i,ref:s,props:o,_owner:Pc.current}}function M_(t,e){return{$$typeof:Vi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vi}function D_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kf=/\/+/g;function Sa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?D_(""+t.key):e.toString(36)}function Rs(t,e,n,r,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Vi:case x_:s=!0}}if(s)return s=t,o=o(s),t=r===""?"."+Sa(s,0):r,Pf(o)?(n="",t!=null&&(n=t.replace(kf,"$&/")+"/"),Rs(o,e,n,"",function(d){return d})):o!=null&&(kc(o)&&(o=M_(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(kf,"$&/")+"/")+t)),e.push(o)),1;if(s=0,r=r===""?".":r+":",Pf(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Sa(i,a);s+=Rs(i,e,n,c,o)}else if(c=k_(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Sa(i,a++),s+=Rs(i,e,n,c,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ts(t,e,n){if(t==null)return t;var r=[],o=0;return Rs(t,r,"","",function(i){return e.call(n,i,o++)}),r}function L_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var je={current:null},Ps={transition:null},b_={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:Ps,ReactCurrentOwner:Pc};function Ym(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:ts,forEach:function(t,e,n){ts(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ts(t,function(){e++}),e},toArray:function(t){return ts(t,function(e){return e})||[]},only:function(t){if(!kc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=xo;Q.Fragment=E_;Q.Profiler=T_;Q.PureComponent=Nc;Q.StrictMode=S_;Q.Suspense=N_;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b_;Q.act=Ym;Q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Om({},t.props),o=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=Pc.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)zm.call(e,c)&&!Jm.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Vi,type:t.type,key:o,ref:i,props:r,_owner:s}};Q.createContext=function(t){return t={$$typeof:I_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:C_,_context:t},t.Consumer=t};Q.createElement=Wm;Q.createFactory=function(t){var e=Wm.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:A_,render:t}};Q.isValidElement=kc;Q.lazy=function(t){return{$$typeof:P_,_payload:{_status:-1,_result:t},_init:L_}};Q.memo=function(t,e){return{$$typeof:R_,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=Ps.transition;Ps.transition={};try{t()}finally{Ps.transition=e}};Q.unstable_act=Ym;Q.useCallback=function(t,e){return je.current.useCallback(t,e)};Q.useContext=function(t){return je.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return je.current.useDeferredValue(t)};Q.useEffect=function(t,e){return je.current.useEffect(t,e)};Q.useId=function(){return je.current.useId()};Q.useImperativeHandle=function(t,e,n){return je.current.useImperativeHandle(t,e,n)};Q.useInsertionEffect=function(t,e){return je.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return je.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return je.current.useMemo(t,e)};Q.useReducer=function(t,e,n){return je.current.useReducer(t,e,n)};Q.useRef=function(t){return je.current.useRef(t)};Q.useState=function(t){return je.current.useState(t)};Q.useSyncExternalStore=function(t,e,n){return je.current.useSyncExternalStore(t,e,n)};Q.useTransition=function(){return je.current.useTransition()};Q.version="18.3.1";$m.exports=Q;var P=$m.exports;const U_=w_(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_=P,G_=Symbol.for("react.element"),V_=Symbol.for("react.fragment"),$_=Object.prototype.hasOwnProperty,B_=F_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O_={key:!0,ref:!0,__self:!0,__source:!0};function Km(t,e,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)$_.call(e,r)&&!O_.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:G_,type:t,key:i,ref:s,props:o,_owner:B_.current}}Ll.Fragment=V_;Ll.jsx=Km;Ll.jsxs=Km;Vm.exports=Ll;var p=Vm.exports,au={},Xm={exports:{}},_t={},Qm={exports:{}},Zm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,$){var U=b.length;b.push($);e:for(;0<U;){var le=U-1>>>1,j=b[le];if(0<o(j,$))b[le]=$,b[U]=j,U=le;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var $=b[0],U=b.pop();if(U!==$){b[0]=U;e:for(var le=0,j=b.length,H=j>>>1;le<H;){var W=2*(le+1)-1,xe=b[W],se=W+1,ke=b[se];if(0>o(xe,U))se<j&&0>o(ke,xe)?(b[le]=ke,b[se]=U,le=se):(b[le]=xe,b[W]=U,le=W);else if(se<j&&0>o(ke,U))b[le]=ke,b[se]=U,le=se;else break e}}return $}function o(b,$){var U=b.sortIndex-$.sortIndex;return U!==0?U:b.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],d=[],f=1,h=null,m=3,g=!1,x=!1,w=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(b){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=b)r(d),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(d)}}function E(b){if(w=!1,_(b),!x)if(n(c)!==null)x=!0,Ce(I);else{var $=n(d);$!==null&&Ue(E,$.startTime-b)}}function I(b,$){x=!1,w&&(w=!1,v(R),R=-1),g=!0;var U=m;try{for(_($),h=n(c);h!==null&&(!(h.expirationTime>$)||b&&!G());){var le=h.callback;if(typeof le=="function"){h.callback=null,m=h.priorityLevel;var j=le(h.expirationTime<=$);$=t.unstable_now(),typeof j=="function"?h.callback=j:h===n(c)&&r(c),_($)}else r(c);h=n(c)}if(h!==null)var H=!0;else{var W=n(d);W!==null&&Ue(E,W.startTime-$),H=!1}return H}finally{h=null,m=U,g=!1}}var C=!1,A=null,R=-1,M=5,N=-1;function G(){return!(t.unstable_now()-N<M)}function q(){if(A!==null){var b=t.unstable_now();N=b;var $=!0;try{$=A(!0,b)}finally{$?ne():(C=!1,A=null)}}else C=!1}var ne;if(typeof y=="function")ne=function(){y(q)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Se=Ye.port2;Ye.port1.onmessage=q,ne=function(){Se.postMessage(null)}}else ne=function(){T(q,0)};function Ce(b){A=b,C||(C=!0,ne())}function Ue(b,$){R=T(function(){b(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,Ce(I))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(b){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var U=m;m=$;try{return b()}finally{m=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,$){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var U=m;m=b;try{return $()}finally{m=U}},t.unstable_scheduleCallback=function(b,$,U){var le=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?le+U:le):U=le,b){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=U+j,b={id:f++,callback:$,priorityLevel:b,startTime:U,expirationTime:j,sortIndex:-1},U>le?(b.sortIndex=U,e(d,b),n(c)===null&&b===n(d)&&(w?(v(R),R=-1):w=!0,Ue(E,U-le))):(b.sortIndex=j,e(c,b),x||g||(x=!0,Ce(I))),b},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(b){var $=m;return function(){var U=m;m=$;try{return b.apply(this,arguments)}finally{m=U}}}})(Zm);Qm.exports=Zm;var H_=Qm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_=P,vt=H_;function k(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jm=new Set,wi={};function xr(t,e){po(t,e),po(t+"Capture",e)}function po(t,e){for(wi[t]=e,t=0;t<e.length;t++)jm.add(e[t])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uu=Object.prototype.hasOwnProperty,z_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mf={},Df={};function J_(t){return uu.call(Df,t)?!0:uu.call(Mf,t)?!1:z_.test(t)?Df[t]=!0:(Mf[t]=!0,!1)}function W_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Y_(t,e,n,r){if(e===null||typeof e>"u"||W_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function et(t,e,n,r,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$e[t]=new et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$e[e]=new et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$e[t]=new et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$e[t]=new et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$e[t]=new et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$e[t]=new et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$e[t]=new et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$e[t]=new et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$e[t]=new et(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mc=/[\-:]([a-z])/g;function Dc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mc,Dc);$e[e]=new et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mc,Dc);$e[e]=new et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mc,Dc);$e[e]=new et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$e[t]=new et(t,1,!1,t.toLowerCase(),null,!1,!1)});$e.xlinkHref=new et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$e[t]=new et(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lc(t,e,n,r){var o=$e.hasOwnProperty(e)?$e[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Y_(e,n,o,r)&&(n=null),r||o===null?J_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mn=q_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ns=Symbol.for("react.element"),Vr=Symbol.for("react.portal"),$r=Symbol.for("react.fragment"),bc=Symbol.for("react.strict_mode"),cu=Symbol.for("react.profiler"),eg=Symbol.for("react.provider"),tg=Symbol.for("react.context"),Uc=Symbol.for("react.forward_ref"),du=Symbol.for("react.suspense"),fu=Symbol.for("react.suspense_list"),Fc=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),ng=Symbol.for("react.offscreen"),Lf=Symbol.iterator;function $o(t){return t===null||typeof t!="object"?null:(t=Lf&&t[Lf]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,Ta;function Zo(t){if(Ta===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ta=e&&e[1]||""}return`
`+Ta+t}var Ca=!1;function Ia(t,e){if(!t||Ca)return"";Ca=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var c=`
`+o[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{Ca=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zo(t):""}function K_(t){switch(t.tag){case 5:return Zo(t.type);case 16:return Zo("Lazy");case 13:return Zo("Suspense");case 19:return Zo("SuspenseList");case 0:case 2:case 15:return t=Ia(t.type,!1),t;case 11:return t=Ia(t.type.render,!1),t;case 1:return t=Ia(t.type,!0),t;default:return""}}function pu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $r:return"Fragment";case Vr:return"Portal";case cu:return"Profiler";case bc:return"StrictMode";case du:return"Suspense";case fu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tg:return(t.displayName||"Context")+".Consumer";case eg:return(t._context.displayName||"Context")+".Provider";case Uc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fc:return e=t.displayName||null,e!==null?e:pu(t.type)||"Memo";case In:e=t._payload,t=t._init;try{return pu(t(e))}catch{}}return null}function X_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pu(e);case 8:return e===bc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q_(t){var e=rg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rs(t){t._valueTracker||(t._valueTracker=Q_(t))}function og(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hu(t,e){var n=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ig(t,e){e=e.checked,e!=null&&Lc(t,"checked",e,!1)}function mu(t,e){ig(t,e);var n=Hn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gu(t,e.type,n):e.hasOwnProperty("defaultValue")&&gu(t,e.type,Hn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gu(t,e,n){(e!=="number"||Qs(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jo=Array.isArray;function eo(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hn(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function yu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(k(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ff(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(k(92));if(jo(n)){if(1<n.length)throw Error(k(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hn(n)}}function sg(t,e){var n=Hn(e.value),r=Hn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var os,ag=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(os=os||document.createElement("div"),os.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=os.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z_=["Webkit","ms","Moz","O"];Object.keys(ai).forEach(function(t){Z_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ai[e]=ai[t]})});function ug(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ai.hasOwnProperty(t)&&ai[t]?(""+e).trim():e+"px"}function cg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=ug(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var j_=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _u(t,e){if(e){if(j_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(k(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(k(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(k(61))}if(e.style!=null&&typeof e.style!="object")throw Error(k(62))}}function wu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xu=null;function Gc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Eu=null,to=null,no=null;function Vf(t){if(t=Oi(t)){if(typeof Eu!="function")throw Error(k(280));var e=t.stateNode;e&&(e=Vl(e),Eu(t.stateNode,t.type,e))}}function dg(t){to?no?no.push(t):no=[t]:to=t}function fg(){if(to){var t=to,e=no;if(no=to=null,Vf(t),e)for(t=0;t<e.length;t++)Vf(e[t])}}function pg(t,e){return t(e)}function hg(){}var Aa=!1;function mg(t,e,n){if(Aa)return t(e,n);Aa=!0;try{return pg(t,e,n)}finally{Aa=!1,(to!==null||no!==null)&&(hg(),fg())}}function Ei(t,e){var n=t.stateNode;if(n===null)return null;var r=Vl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(k(231,e,typeof n));return n}var Su=!1;if(cn)try{var Bo={};Object.defineProperty(Bo,"passive",{get:function(){Su=!0}}),window.addEventListener("test",Bo,Bo),window.removeEventListener("test",Bo,Bo)}catch{Su=!1}function ew(t,e,n,r,o,i,s,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ui=!1,Zs=null,js=!1,Tu=null,tw={onError:function(t){ui=!0,Zs=t}};function nw(t,e,n,r,o,i,s,a,c){ui=!1,Zs=null,ew.apply(tw,arguments)}function rw(t,e,n,r,o,i,s,a,c){if(nw.apply(this,arguments),ui){if(ui){var d=Zs;ui=!1,Zs=null}else throw Error(k(198));js||(js=!0,Tu=d)}}function Er(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $f(t){if(Er(t)!==t)throw Error(k(188))}function ow(t){var e=t.alternate;if(!e){if(e=Er(t),e===null)throw Error(k(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return $f(o),t;if(i===r)return $f(o),e;i=i.sibling}throw Error(k(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error(k(189))}}if(n.alternate!==r)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?t:e}function yg(t){return t=ow(t),t!==null?vg(t):null}function vg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vg(t);if(e!==null)return e;t=t.sibling}return null}var _g=vt.unstable_scheduleCallback,Bf=vt.unstable_cancelCallback,iw=vt.unstable_shouldYield,sw=vt.unstable_requestPaint,Ee=vt.unstable_now,lw=vt.unstable_getCurrentPriorityLevel,Vc=vt.unstable_ImmediatePriority,wg=vt.unstable_UserBlockingPriority,el=vt.unstable_NormalPriority,aw=vt.unstable_LowPriority,xg=vt.unstable_IdlePriority,bl=null,Qt=null;function uw(t){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(bl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:fw,cw=Math.log,dw=Math.LN2;function fw(t){return t>>>=0,t===0?32:31-(cw(t)/dw|0)|0}var is=64,ss=4194304;function ei(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~o;a!==0?r=ei(a):(i&=s,i!==0&&(r=ei(i)))}else s=n&~o,s!==0?r=ei(s):i!==0&&(r=ei(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ut(e),o=1<<n,r|=t[n],e&=~o;return r}function pw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Ut(i),a=1<<s,c=o[s];c===-1?(!(a&n)||a&r)&&(o[s]=pw(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Cu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Eg(){var t=is;return is<<=1,!(is&4194240)&&(is=64),t}function Na(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $i(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function mw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Ut(n),i=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~i}}function $c(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ut(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var oe=0;function Sg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tg,Bc,Cg,Ig,Ag,Iu=!1,ls=[],Ln=null,bn=null,Un=null,Si=new Map,Ti=new Map,Nn=[],gw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Of(t,e){switch(t){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Si.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ti.delete(e.pointerId)}}function Oo(t,e,n,r,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=Oi(e),e!==null&&Bc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function yw(t,e,n,r,o){switch(e){case"focusin":return Ln=Oo(Ln,t,e,n,r,o),!0;case"dragenter":return bn=Oo(bn,t,e,n,r,o),!0;case"mouseover":return Un=Oo(Un,t,e,n,r,o),!0;case"pointerover":var i=o.pointerId;return Si.set(i,Oo(Si.get(i)||null,t,e,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Ti.set(i,Oo(Ti.get(i)||null,t,e,n,r,o)),!0}return!1}function Ng(t){var e=lr(t.target);if(e!==null){var n=Er(e);if(n!==null){if(e=n.tag,e===13){if(e=gg(n),e!==null){t.blockedOn=e,Ag(t.priority,function(){Cg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ks(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Au(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xu=r,n.target.dispatchEvent(r),xu=null}else return e=Oi(n),e!==null&&Bc(e),t.blockedOn=n,!1;e.shift()}return!0}function Hf(t,e,n){ks(t)&&n.delete(e)}function vw(){Iu=!1,Ln!==null&&ks(Ln)&&(Ln=null),bn!==null&&ks(bn)&&(bn=null),Un!==null&&ks(Un)&&(Un=null),Si.forEach(Hf),Ti.forEach(Hf)}function Ho(t,e){t.blockedOn===e&&(t.blockedOn=null,Iu||(Iu=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,vw)))}function Ci(t){function e(o){return Ho(o,t)}if(0<ls.length){Ho(ls[0],t);for(var n=1;n<ls.length;n++){var r=ls[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ln!==null&&Ho(Ln,t),bn!==null&&Ho(bn,t),Un!==null&&Ho(Un,t),Si.forEach(e),Ti.forEach(e),n=0;n<Nn.length;n++)r=Nn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)Ng(n),n.blockedOn===null&&Nn.shift()}var ro=mn.ReactCurrentBatchConfig,nl=!0;function _w(t,e,n,r){var o=oe,i=ro.transition;ro.transition=null;try{oe=1,Oc(t,e,n,r)}finally{oe=o,ro.transition=i}}function ww(t,e,n,r){var o=oe,i=ro.transition;ro.transition=null;try{oe=4,Oc(t,e,n,r)}finally{oe=o,ro.transition=i}}function Oc(t,e,n,r){if(nl){var o=Au(t,e,n,r);if(o===null)Ga(t,e,r,rl,n),Of(t,r);else if(yw(o,t,e,n,r))r.stopPropagation();else if(Of(t,r),e&4&&-1<gw.indexOf(t)){for(;o!==null;){var i=Oi(o);if(i!==null&&Tg(i),i=Au(t,e,n,r),i===null&&Ga(t,e,r,rl,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Ga(t,e,r,null,n)}}var rl=null;function Au(t,e,n,r){if(rl=null,t=Gc(r),t=lr(t),t!==null)if(e=Er(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rl=t,null}function Rg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lw()){case Vc:return 1;case wg:return 4;case el:case aw:return 16;case xg:return 536870912;default:return 16}default:return 16}}var kn=null,Hc=null,Ms=null;function Pg(){if(Ms)return Ms;var t,e=Hc,n=e.length,r,o="value"in kn?kn.value:kn.textContent,i=o.length;for(t=0;t<n&&e[t]===o[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===o[i-r];r++);return Ms=o.slice(t,1<r?1-r:void 0)}function Ds(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function as(){return!0}function qf(){return!1}function wt(t){function e(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?as:qf,this.isPropagationStopped=qf,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),e}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qc=wt(Eo),Bi=ve({},Eo,{view:0,detail:0}),xw=wt(Bi),Ra,Pa,qo,Ul=ve({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qo&&(qo&&t.type==="mousemove"?(Ra=t.screenX-qo.screenX,Pa=t.screenY-qo.screenY):Pa=Ra=0,qo=t),Ra)},movementY:function(t){return"movementY"in t?t.movementY:Pa}}),zf=wt(Ul),Ew=ve({},Ul,{dataTransfer:0}),Sw=wt(Ew),Tw=ve({},Bi,{relatedTarget:0}),ka=wt(Tw),Cw=ve({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),Iw=wt(Cw),Aw=ve({},Eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nw=wt(Aw),Rw=ve({},Eo,{data:0}),Jf=wt(Rw),Pw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mw[t])?!!e[t]:!1}function zc(){return Dw}var Lw=ve({},Bi,{key:function(t){if(t.key){var e=Pw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ds(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zc,charCode:function(t){return t.type==="keypress"?Ds(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ds(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bw=wt(Lw),Uw=ve({},Ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wf=wt(Uw),Fw=ve({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zc}),Gw=wt(Fw),Vw=ve({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),$w=wt(Vw),Bw=ve({},Ul,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ow=wt(Bw),Hw=[9,13,27,32],Jc=cn&&"CompositionEvent"in window,ci=null;cn&&"documentMode"in document&&(ci=document.documentMode);var qw=cn&&"TextEvent"in window&&!ci,kg=cn&&(!Jc||ci&&8<ci&&11>=ci),Yf=" ",Kf=!1;function Mg(t,e){switch(t){case"keyup":return Hw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Br=!1;function zw(t,e){switch(t){case"compositionend":return Dg(e);case"keypress":return e.which!==32?null:(Kf=!0,Yf);case"textInput":return t=e.data,t===Yf&&Kf?null:t;default:return null}}function Jw(t,e){if(Br)return t==="compositionend"||!Jc&&Mg(t,e)?(t=Pg(),Ms=Hc=kn=null,Br=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kg&&e.locale!=="ko"?null:e.data;default:return null}}var Ww={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ww[t.type]:e==="textarea"}function Lg(t,e,n,r){dg(r),e=ol(e,"onChange"),0<e.length&&(n=new qc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var di=null,Ii=null;function Yw(t){zg(t,0)}function Fl(t){var e=qr(t);if(og(e))return t}function Kw(t,e){if(t==="change")return e}var bg=!1;if(cn){var Ma;if(cn){var Da="oninput"in document;if(!Da){var Qf=document.createElement("div");Qf.setAttribute("oninput","return;"),Da=typeof Qf.oninput=="function"}Ma=Da}else Ma=!1;bg=Ma&&(!document.documentMode||9<document.documentMode)}function Zf(){di&&(di.detachEvent("onpropertychange",Ug),Ii=di=null)}function Ug(t){if(t.propertyName==="value"&&Fl(Ii)){var e=[];Lg(e,Ii,t,Gc(t)),mg(Yw,e)}}function Xw(t,e,n){t==="focusin"?(Zf(),di=e,Ii=n,di.attachEvent("onpropertychange",Ug)):t==="focusout"&&Zf()}function Qw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fl(Ii)}function Zw(t,e){if(t==="click")return Fl(e)}function jw(t,e){if(t==="input"||t==="change")return Fl(e)}function ex(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gt=typeof Object.is=="function"?Object.is:ex;function Ai(t,e){if(Gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!uu.call(e,o)||!Gt(t[o],e[o]))return!1}return!0}function jf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ep(t,e){var n=jf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jf(n)}}function Fg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Fg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gg(){for(var t=window,e=Qs();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qs(t.document)}return e}function Wc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tx(t){var e=Gg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Fg(n.ownerDocument.documentElement,n)){if(r!==null&&Wc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!t.extend&&i>r&&(o=r,r=i,i=o),o=ep(n,i);var s=ep(n,r);o&&s&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nx=cn&&"documentMode"in document&&11>=document.documentMode,Or=null,Nu=null,fi=null,Ru=!1;function tp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ru||Or==null||Or!==Qs(r)||(r=Or,"selectionStart"in r&&Wc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fi&&Ai(fi,r)||(fi=r,r=ol(Nu,"onSelect"),0<r.length&&(e=new qc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Or)))}function us(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hr={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionend:us("Transition","TransitionEnd")},La={},Vg={};cn&&(Vg=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function Gl(t){if(La[t])return La[t];if(!Hr[t])return t;var e=Hr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Vg)return La[t]=e[n];return t}var $g=Gl("animationend"),Bg=Gl("animationiteration"),Og=Gl("animationstart"),Hg=Gl("transitionend"),qg=new Map,np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zn(t,e){qg.set(t,e),xr(e,[t])}for(var ba=0;ba<np.length;ba++){var Ua=np[ba],rx=Ua.toLowerCase(),ox=Ua[0].toUpperCase()+Ua.slice(1);zn(rx,"on"+ox)}zn($g,"onAnimationEnd");zn(Bg,"onAnimationIteration");zn(Og,"onAnimationStart");zn("dblclick","onDoubleClick");zn("focusin","onFocus");zn("focusout","onBlur");zn(Hg,"onTransitionEnd");po("onMouseEnter",["mouseout","mouseover"]);po("onMouseLeave",["mouseout","mouseover"]);po("onPointerEnter",["pointerout","pointerover"]);po("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ix=new Set("cancel close invalid load scroll toggle".split(" ").concat(ti));function rp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rw(r,e,void 0,t),t.currentTarget=null}function zg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&o.isPropagationStopped())break e;rp(o,a,d),i=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&o.isPropagationStopped())break e;rp(o,a,d),i=c}}}if(js)throw t=Tu,js=!1,Tu=null,t}function ue(t,e){var n=e[Lu];n===void 0&&(n=e[Lu]=new Set);var r=t+"__bubble";n.has(r)||(Jg(e,t,2,!1),n.add(r))}function Fa(t,e,n){var r=0;e&&(r|=4),Jg(n,t,r,e)}var cs="_reactListening"+Math.random().toString(36).slice(2);function Ni(t){if(!t[cs]){t[cs]=!0,jm.forEach(function(n){n!=="selectionchange"&&(ix.has(n)||Fa(n,!1,t),Fa(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cs]||(e[cs]=!0,Fa("selectionchange",!1,e))}}function Jg(t,e,n,r){switch(Rg(e)){case 1:var o=_w;break;case 4:o=ww;break;default:o=Oc}n=o.bind(null,e,n,t),o=void 0,!Su||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Ga(t,e,n,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;s=s.return}for(;a!==null;){if(s=lr(a),s===null)return;if(c=s.tag,c===5||c===6){r=i=s;continue e}a=a.parentNode}}r=r.return}mg(function(){var d=i,f=Gc(n),h=[];e:{var m=qg.get(t);if(m!==void 0){var g=qc,x=t;switch(t){case"keypress":if(Ds(n)===0)break e;case"keydown":case"keyup":g=bw;break;case"focusin":x="focus",g=ka;break;case"focusout":x="blur",g=ka;break;case"beforeblur":case"afterblur":g=ka;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=zf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Sw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Gw;break;case $g:case Bg:case Og:g=Iw;break;case Hg:g=$w;break;case"scroll":g=xw;break;case"wheel":g=Ow;break;case"copy":case"cut":case"paste":g=Nw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Wf}var w=(e&4)!==0,T=!w&&t==="scroll",v=w?m!==null?m+"Capture":null:m;w=[];for(var y=d,_;y!==null;){_=y;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,v!==null&&(E=Ei(y,v),E!=null&&w.push(Ri(y,E,_)))),T)break;y=y.return}0<w.length&&(m=new g(m,x,null,n,f),h.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==xu&&(x=n.relatedTarget||n.fromElement)&&(lr(x)||x[dn]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=d,x=x?lr(x):null,x!==null&&(T=Er(x),x!==T||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=d),g!==x)){if(w=zf,E="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=Wf,E="onPointerLeave",v="onPointerEnter",y="pointer"),T=g==null?m:qr(g),_=x==null?m:qr(x),m=new w(E,y+"leave",g,n,f),m.target=T,m.relatedTarget=_,E=null,lr(f)===d&&(w=new w(v,y+"enter",x,n,f),w.target=_,w.relatedTarget=T,E=w),T=E,g&&x)t:{for(w=g,v=x,y=0,_=w;_;_=Rr(_))y++;for(_=0,E=v;E;E=Rr(E))_++;for(;0<y-_;)w=Rr(w),y--;for(;0<_-y;)v=Rr(v),_--;for(;y--;){if(w===v||v!==null&&w===v.alternate)break t;w=Rr(w),v=Rr(v)}w=null}else w=null;g!==null&&op(h,m,g,w,!1),x!==null&&T!==null&&op(h,T,x,w,!0)}}e:{if(m=d?qr(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var I=Kw;else if(Xf(m))if(bg)I=jw;else{I=Qw;var C=Xw}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(I=Zw);if(I&&(I=I(t,d))){Lg(h,I,n,f);break e}C&&C(t,m,d),t==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&gu(m,"number",m.value)}switch(C=d?qr(d):window,t){case"focusin":(Xf(C)||C.contentEditable==="true")&&(Or=C,Nu=d,fi=null);break;case"focusout":fi=Nu=Or=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,tp(h,n,f);break;case"selectionchange":if(nx)break;case"keydown":case"keyup":tp(h,n,f)}var A;if(Jc)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Br?Mg(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(kg&&n.locale!=="ko"&&(Br||R!=="onCompositionStart"?R==="onCompositionEnd"&&Br&&(A=Pg()):(kn=f,Hc="value"in kn?kn.value:kn.textContent,Br=!0)),C=ol(d,R),0<C.length&&(R=new Jf(R,t,null,n,f),h.push({event:R,listeners:C}),A?R.data=A:(A=Dg(n),A!==null&&(R.data=A)))),(A=qw?zw(t,n):Jw(t,n))&&(d=ol(d,"onBeforeInput"),0<d.length&&(f=new Jf("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:d}),f.data=A))}zg(h,e)})}function Ri(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ol(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=Ei(t,n),i!=null&&r.unshift(Ri(t,i,o)),i=Ei(t,e),i!=null&&r.push(Ri(t,i,o))),t=t.return}return r}function Rr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function op(t,e,n,r,o){for(var i=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,o?(c=Ei(n,i),c!=null&&s.unshift(Ri(n,c,a))):o||(c=Ei(n,i),c!=null&&s.push(Ri(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var sx=/\r\n?/g,lx=/\u0000|\uFFFD/g;function ip(t){return(typeof t=="string"?t:""+t).replace(sx,`
`).replace(lx,"")}function ds(t,e,n){if(e=ip(e),ip(t)!==e&&n)throw Error(k(425))}function il(){}var Pu=null,ku=null;function Mu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Du=typeof setTimeout=="function"?setTimeout:void 0,ax=typeof clearTimeout=="function"?clearTimeout:void 0,sp=typeof Promise=="function"?Promise:void 0,ux=typeof queueMicrotask=="function"?queueMicrotask:typeof sp<"u"?function(t){return sp.resolve(null).then(t).catch(cx)}:Du;function cx(t){setTimeout(function(){throw t})}function Va(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),Ci(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ci(e)}function Fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var So=Math.random().toString(36).slice(2),Kt="__reactFiber$"+So,Pi="__reactProps$"+So,dn="__reactContainer$"+So,Lu="__reactEvents$"+So,dx="__reactListeners$"+So,fx="__reactHandles$"+So;function lr(t){var e=t[Kt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dn]||n[Kt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lp(t);t!==null;){if(n=t[Kt])return n;t=lp(t)}return e}t=n,n=t.parentNode}return null}function Oi(t){return t=t[Kt]||t[dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(k(33))}function Vl(t){return t[Pi]||null}var bu=[],zr=-1;function Jn(t){return{current:t}}function de(t){0>zr||(t.current=bu[zr],bu[zr]=null,zr--)}function ae(t,e){zr++,bu[zr]=t.current,t.current=e}var qn={},We=Jn(qn),at=Jn(!1),mr=qn;function ho(t,e){var n=t.type.contextTypes;if(!n)return qn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function ut(t){return t=t.childContextTypes,t!=null}function sl(){de(at),de(We)}function ap(t,e,n){if(We.current!==qn)throw Error(k(168));ae(We,e),ae(at,n)}function Wg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(k(108,X_(t)||"Unknown",o));return ve({},n,r)}function ll(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qn,mr=We.current,ae(We,t),ae(at,at.current),!0}function up(t,e,n){var r=t.stateNode;if(!r)throw Error(k(169));n?(t=Wg(t,e,mr),r.__reactInternalMemoizedMergedChildContext=t,de(at),de(We),ae(We,t)):de(at),ae(at,n)}var on=null,$l=!1,$a=!1;function Yg(t){on===null?on=[t]:on.push(t)}function px(t){$l=!0,Yg(t)}function Wn(){if(!$a&&on!==null){$a=!0;var t=0,e=oe;try{var n=on;for(oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}on=null,$l=!1}catch(o){throw on!==null&&(on=on.slice(t+1)),_g(Vc,Wn),o}finally{oe=e,$a=!1}}return null}var Jr=[],Wr=0,al=null,ul=0,xt=[],Et=0,gr=null,ln=1,an="";function or(t,e){Jr[Wr++]=ul,Jr[Wr++]=al,al=t,ul=e}function Kg(t,e,n){xt[Et++]=ln,xt[Et++]=an,xt[Et++]=gr,gr=t;var r=ln;t=an;var o=32-Ut(r)-1;r&=~(1<<o),n+=1;var i=32-Ut(e)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,ln=1<<32-Ut(e)+o|n<<o|r,an=i+t}else ln=1<<i|n<<o|r,an=t}function Yc(t){t.return!==null&&(or(t,1),Kg(t,1,0))}function Kc(t){for(;t===al;)al=Jr[--Wr],Jr[Wr]=null,ul=Jr[--Wr],Jr[Wr]=null;for(;t===gr;)gr=xt[--Et],xt[Et]=null,an=xt[--Et],xt[Et]=null,ln=xt[--Et],xt[Et]=null}var yt=null,gt=null,fe=!1,Lt=null;function Xg(t,e){var n=St(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yt=t,gt=Fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yt=t,gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gr!==null?{id:ln,overflow:an}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=St(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yt=t,gt=null,!0):!1;default:return!1}}function Uu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fu(t){if(fe){var e=gt;if(e){var n=e;if(!cp(t,e)){if(Uu(t))throw Error(k(418));e=Fn(n.nextSibling);var r=yt;e&&cp(t,e)?Xg(r,n):(t.flags=t.flags&-4097|2,fe=!1,yt=t)}}else{if(Uu(t))throw Error(k(418));t.flags=t.flags&-4097|2,fe=!1,yt=t}}}function dp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yt=t}function fs(t){if(t!==yt)return!1;if(!fe)return dp(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mu(t.type,t.memoizedProps)),e&&(e=gt)){if(Uu(t))throw Qg(),Error(k(418));for(;e;)Xg(t,e),e=Fn(e.nextSibling)}if(dp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gt=Fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gt=null}}else gt=yt?Fn(t.stateNode.nextSibling):null;return!0}function Qg(){for(var t=gt;t;)t=Fn(t.nextSibling)}function mo(){gt=yt=null,fe=!1}function Xc(t){Lt===null?Lt=[t]:Lt.push(t)}var hx=mn.ReactCurrentBatchConfig;function zo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(k(309));var r=n.stateNode}if(!r)throw Error(k(147,t));var o=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var a=o.refs;s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(k(284));if(!n._owner)throw Error(k(290,t))}return t}function ps(t,e){throw t=Object.prototype.toString.call(e),Error(k(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fp(t){var e=t._init;return e(t._payload)}function Zg(t){function e(v,y){if(t){var _=v.deletions;_===null?(v.deletions=[y],v.flags|=16):_.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function o(v,y){return v=Bn(v,y),v.index=0,v.sibling=null,v}function i(v,y,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<y?(v.flags|=2,y):_):(v.flags|=2,y)):(v.flags|=1048576,y)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,_,E){return y===null||y.tag!==6?(y=Wa(_,v.mode,E),y.return=v,y):(y=o(y,_),y.return=v,y)}function c(v,y,_,E){var I=_.type;return I===$r?f(v,y,_.props.children,E,_.key):y!==null&&(y.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===In&&fp(I)===y.type)?(E=o(y,_.props),E.ref=zo(v,y,_),E.return=v,E):(E=$s(_.type,_.key,_.props,null,v.mode,E),E.ref=zo(v,y,_),E.return=v,E)}function d(v,y,_,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=Ya(_,v.mode,E),y.return=v,y):(y=o(y,_.children||[]),y.return=v,y)}function f(v,y,_,E,I){return y===null||y.tag!==7?(y=hr(_,v.mode,E,I),y.return=v,y):(y=o(y,_),y.return=v,y)}function h(v,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Wa(""+y,v.mode,_),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ns:return _=$s(y.type,y.key,y.props,null,v.mode,_),_.ref=zo(v,null,y),_.return=v,_;case Vr:return y=Ya(y,v.mode,_),y.return=v,y;case In:var E=y._init;return h(v,E(y._payload),_)}if(jo(y)||$o(y))return y=hr(y,v.mode,_,null),y.return=v,y;ps(v,y)}return null}function m(v,y,_,E){var I=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return I!==null?null:a(v,y,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ns:return _.key===I?c(v,y,_,E):null;case Vr:return _.key===I?d(v,y,_,E):null;case In:return I=_._init,m(v,y,I(_._payload),E)}if(jo(_)||$o(_))return I!==null?null:f(v,y,_,E,null);ps(v,_)}return null}function g(v,y,_,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(_)||null,a(y,v,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ns:return v=v.get(E.key===null?_:E.key)||null,c(y,v,E,I);case Vr:return v=v.get(E.key===null?_:E.key)||null,d(y,v,E,I);case In:var C=E._init;return g(v,y,_,C(E._payload),I)}if(jo(E)||$o(E))return v=v.get(_)||null,f(y,v,E,I,null);ps(y,E)}return null}function x(v,y,_,E){for(var I=null,C=null,A=y,R=y=0,M=null;A!==null&&R<_.length;R++){A.index>R?(M=A,A=null):M=A.sibling;var N=m(v,A,_[R],E);if(N===null){A===null&&(A=M);break}t&&A&&N.alternate===null&&e(v,A),y=i(N,y,R),C===null?I=N:C.sibling=N,C=N,A=M}if(R===_.length)return n(v,A),fe&&or(v,R),I;if(A===null){for(;R<_.length;R++)A=h(v,_[R],E),A!==null&&(y=i(A,y,R),C===null?I=A:C.sibling=A,C=A);return fe&&or(v,R),I}for(A=r(v,A);R<_.length;R++)M=g(A,v,R,_[R],E),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?R:M.key),y=i(M,y,R),C===null?I=M:C.sibling=M,C=M);return t&&A.forEach(function(G){return e(v,G)}),fe&&or(v,R),I}function w(v,y,_,E){var I=$o(_);if(typeof I!="function")throw Error(k(150));if(_=I.call(_),_==null)throw Error(k(151));for(var C=I=null,A=y,R=y=0,M=null,N=_.next();A!==null&&!N.done;R++,N=_.next()){A.index>R?(M=A,A=null):M=A.sibling;var G=m(v,A,N.value,E);if(G===null){A===null&&(A=M);break}t&&A&&G.alternate===null&&e(v,A),y=i(G,y,R),C===null?I=G:C.sibling=G,C=G,A=M}if(N.done)return n(v,A),fe&&or(v,R),I;if(A===null){for(;!N.done;R++,N=_.next())N=h(v,N.value,E),N!==null&&(y=i(N,y,R),C===null?I=N:C.sibling=N,C=N);return fe&&or(v,R),I}for(A=r(v,A);!N.done;R++,N=_.next())N=g(A,v,R,N.value,E),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?R:N.key),y=i(N,y,R),C===null?I=N:C.sibling=N,C=N);return t&&A.forEach(function(q){return e(v,q)}),fe&&or(v,R),I}function T(v,y,_,E){if(typeof _=="object"&&_!==null&&_.type===$r&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ns:e:{for(var I=_.key,C=y;C!==null;){if(C.key===I){if(I=_.type,I===$r){if(C.tag===7){n(v,C.sibling),y=o(C,_.props.children),y.return=v,v=y;break e}}else if(C.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===In&&fp(I)===C.type){n(v,C.sibling),y=o(C,_.props),y.ref=zo(v,C,_),y.return=v,v=y;break e}n(v,C);break}else e(v,C);C=C.sibling}_.type===$r?(y=hr(_.props.children,v.mode,E,_.key),y.return=v,v=y):(E=$s(_.type,_.key,_.props,null,v.mode,E),E.ref=zo(v,y,_),E.return=v,v=E)}return s(v);case Vr:e:{for(C=_.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(v,y.sibling),y=o(y,_.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=Ya(_,v.mode,E),y.return=v,v=y}return s(v);case In:return C=_._init,T(v,y,C(_._payload),E)}if(jo(_))return x(v,y,_,E);if($o(_))return w(v,y,_,E);ps(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(v,y.sibling),y=o(y,_),y.return=v,v=y):(n(v,y),y=Wa(_,v.mode,E),y.return=v,v=y),s(v)):n(v,y)}return T}var go=Zg(!0),jg=Zg(!1),cl=Jn(null),dl=null,Yr=null,Qc=null;function Zc(){Qc=Yr=dl=null}function jc(t){var e=cl.current;de(cl),t._currentValue=e}function Gu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oo(t,e){dl=t,Qc=Yr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(lt=!0),t.firstContext=null)}function At(t){var e=t._currentValue;if(Qc!==t)if(t={context:t,memoizedValue:e,next:null},Yr===null){if(dl===null)throw Error(k(308));Yr=t,dl.dependencies={lanes:0,firstContext:t}}else Yr=Yr.next=t;return e}var ar=null;function ed(t){ar===null?ar=[t]:ar.push(t)}function ey(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,ed(e)):(n.next=o.next,o.next=n),e.interleaved=n,fn(t,r)}function fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var An=!1;function td(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ty(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,fn(t,n)}return o=r.interleaved,o===null?(e.next=e,ed(r)):(e.next=o.next,o.next=e),r.interleaved=e,fn(t,n)}function Ls(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$c(t,n)}}function pp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=e:i=i.next=e}else o=i=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fl(t,e,n,r){var o=t.updateQueue;An=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,d=c.next;c.next=null,s===null?i=d:s.next=d,s=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(i!==null){var h=o.baseState;s=0,f=d=c=null,a=i;do{var m=a.lane,g=a.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,w=a;switch(m=e,g=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){h=x.call(g,h,m);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,m=typeof x=="function"?x.call(g,h,m):x,m==null)break e;h=ve({},h,m);break e;case 2:An=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=o.effects,m===null?o.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=g,c=h):f=f.next=g,s|=m;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;m=a,a=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(!0);if(f===null&&(c=h),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=f,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);vr|=s,t.lanes=s,t.memoizedState=h}}function hp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(k(191,o));o.call(r)}}}var Hi={},Zt=Jn(Hi),ki=Jn(Hi),Mi=Jn(Hi);function ur(t){if(t===Hi)throw Error(k(174));return t}function nd(t,e){switch(ae(Mi,e),ae(ki,t),ae(Zt,Hi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vu(e,t)}de(Zt),ae(Zt,e)}function yo(){de(Zt),de(ki),de(Mi)}function ny(t){ur(Mi.current);var e=ur(Zt.current),n=vu(e,t.type);e!==n&&(ae(ki,t),ae(Zt,n))}function rd(t){ki.current===t&&(de(Zt),de(ki))}var ge=Jn(0);function pl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ba=[];function od(){for(var t=0;t<Ba.length;t++)Ba[t]._workInProgressVersionPrimary=null;Ba.length=0}var bs=mn.ReactCurrentDispatcher,Oa=mn.ReactCurrentBatchConfig,yr=0,ye=null,Ne=null,Le=null,hl=!1,pi=!1,Di=0,mx=0;function Oe(){throw Error(k(321))}function id(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gt(t[n],e[n]))return!1;return!0}function sd(t,e,n,r,o,i){if(yr=i,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bs.current=t===null||t.memoizedState===null?_x:wx,t=n(r,o),pi){i=0;do{if(pi=!1,Di=0,25<=i)throw Error(k(301));i+=1,Le=Ne=null,e.updateQueue=null,bs.current=xx,t=n(r,o)}while(pi)}if(bs.current=ml,e=Ne!==null&&Ne.next!==null,yr=0,Le=Ne=ye=null,hl=!1,e)throw Error(k(300));return t}function ld(){var t=Di!==0;return Di=0,t}function Jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?ye.memoizedState=Le=t:Le=Le.next=t,Le}function Nt(){if(Ne===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=Ne.next;var e=Le===null?ye.memoizedState:Le.next;if(e!==null)Le=e,Ne=t;else{if(t===null)throw Error(k(310));Ne=t,t={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},Le===null?ye.memoizedState=Le=t:Le=Le.next=t}return Le}function Li(t,e){return typeof e=="function"?e(t):e}function Ha(t){var e=Nt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=Ne,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=s=null,c=null,d=i;do{var f=d.lane;if((yr&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var h={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=h,s=r):c=c.next=h,ye.lanes|=f,vr|=f}d=d.next}while(d!==null&&d!==i);c===null?s=r:c.next=a,Gt(r,e.memoizedState)||(lt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do i=o.lane,ye.lanes|=i,vr|=i,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qa(t){var e=Nt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,i=e.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=t(i,s.action),s=s.next;while(s!==o);Gt(i,e.memoizedState)||(lt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ry(){}function oy(t,e){var n=ye,r=Nt(),o=e(),i=!Gt(r.memoizedState,o);if(i&&(r.memoizedState=o,lt=!0),r=r.queue,ad(ly.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,bi(9,sy.bind(null,n,r,o,e),void 0,null),be===null)throw Error(k(349));yr&30||iy(n,e,o)}return o}function iy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sy(t,e,n,r){e.value=n,e.getSnapshot=r,ay(e)&&uy(t)}function ly(t,e,n){return n(function(){ay(e)&&uy(t)})}function ay(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gt(t,n)}catch{return!0}}function uy(t){var e=fn(t,1);e!==null&&Ft(e,t,1,-1)}function mp(t){var e=Jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Li,lastRenderedState:t},e.queue=t,t=t.dispatch=vx.bind(null,ye,t),[e.memoizedState,t]}function bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cy(){return Nt().memoizedState}function Us(t,e,n,r){var o=Jt();ye.flags|=t,o.memoizedState=bi(1|e,n,void 0,r===void 0?null:r)}function Bl(t,e,n,r){var o=Nt();r=r===void 0?null:r;var i=void 0;if(Ne!==null){var s=Ne.memoizedState;if(i=s.destroy,r!==null&&id(r,s.deps)){o.memoizedState=bi(e,n,i,r);return}}ye.flags|=t,o.memoizedState=bi(1|e,n,i,r)}function gp(t,e){return Us(8390656,8,t,e)}function ad(t,e){return Bl(2048,8,t,e)}function dy(t,e){return Bl(4,2,t,e)}function fy(t,e){return Bl(4,4,t,e)}function py(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hy(t,e,n){return n=n!=null?n.concat([t]):null,Bl(4,4,py.bind(null,e,t),n)}function ud(){}function my(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&id(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gy(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&id(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yy(t,e,n){return yr&21?(Gt(n,e)||(n=Eg(),ye.lanes|=n,vr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,lt=!0),t.memoizedState=n)}function gx(t,e){var n=oe;oe=n!==0&&4>n?n:4,t(!0);var r=Oa.transition;Oa.transition={};try{t(!1),e()}finally{oe=n,Oa.transition=r}}function vy(){return Nt().memoizedState}function yx(t,e,n){var r=$n(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_y(t))wy(e,n);else if(n=ey(t,e,n,r),n!==null){var o=Ze();Ft(n,t,r,o),xy(n,e,r)}}function vx(t,e,n){var r=$n(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_y(t))wy(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,Gt(a,s)){var c=e.interleaved;c===null?(o.next=o,ed(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}n=ey(t,e,o,r),n!==null&&(o=Ze(),Ft(n,t,r,o),xy(n,e,r))}}function _y(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function wy(t,e){pi=hl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$c(t,n)}}var ml={readContext:At,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useInsertionEffect:Oe,useLayoutEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useMutableSource:Oe,useSyncExternalStore:Oe,useId:Oe,unstable_isNewReconciler:!1},_x={readContext:At,useCallback:function(t,e){return Jt().memoizedState=[t,e===void 0?null:e],t},useContext:At,useEffect:gp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Us(4194308,4,py.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Us(4194308,4,t,e)},useInsertionEffect:function(t,e){return Us(4,2,t,e)},useMemo:function(t,e){var n=Jt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yx.bind(null,ye,t),[r.memoizedState,t]},useRef:function(t){var e=Jt();return t={current:t},e.memoizedState=t},useState:mp,useDebugValue:ud,useDeferredValue:function(t){return Jt().memoizedState=t},useTransition:function(){var t=mp(!1),e=t[0];return t=gx.bind(null,t[1]),Jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ye,o=Jt();if(fe){if(n===void 0)throw Error(k(407));n=n()}else{if(n=e(),be===null)throw Error(k(349));yr&30||iy(r,e,n)}o.memoizedState=n;var i={value:n,getSnapshot:e};return o.queue=i,gp(ly.bind(null,r,i,t),[t]),r.flags|=2048,bi(9,sy.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Jt(),e=be.identifierPrefix;if(fe){var n=an,r=ln;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Di++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wx={readContext:At,useCallback:my,useContext:At,useEffect:ad,useImperativeHandle:hy,useInsertionEffect:dy,useLayoutEffect:fy,useMemo:gy,useReducer:Ha,useRef:cy,useState:function(){return Ha(Li)},useDebugValue:ud,useDeferredValue:function(t){var e=Nt();return yy(e,Ne.memoizedState,t)},useTransition:function(){var t=Ha(Li)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:ry,useSyncExternalStore:oy,useId:vy,unstable_isNewReconciler:!1},xx={readContext:At,useCallback:my,useContext:At,useEffect:ad,useImperativeHandle:hy,useInsertionEffect:dy,useLayoutEffect:fy,useMemo:gy,useReducer:qa,useRef:cy,useState:function(){return qa(Li)},useDebugValue:ud,useDeferredValue:function(t){var e=Nt();return Ne===null?e.memoizedState=t:yy(e,Ne.memoizedState,t)},useTransition:function(){var t=qa(Li)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:ry,useSyncExternalStore:oy,useId:vy,unstable_isNewReconciler:!1};function kt(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ol={isMounted:function(t){return(t=t._reactInternals)?Er(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ze(),o=$n(t),i=un(r,o);i.payload=e,n!=null&&(i.callback=n),e=Gn(t,i,o),e!==null&&(Ft(e,t,o,r),Ls(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ze(),o=$n(t),i=un(r,o);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Gn(t,i,o),e!==null&&(Ft(e,t,o,r),Ls(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ze(),r=$n(t),o=un(n,r);o.tag=2,e!=null&&(o.callback=e),e=Gn(t,o,r),e!==null&&(Ft(e,t,r,n),Ls(e,t,r))}};function yp(t,e,n,r,o,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!Ai(n,r)||!Ai(o,i):!0}function Ey(t,e,n){var r=!1,o=qn,i=e.contextType;return typeof i=="object"&&i!==null?i=At(i):(o=ut(e)?mr:We.current,r=e.contextTypes,i=(r=r!=null)?ho(t,o):qn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ol,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function vp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ol.enqueueReplaceState(e,e.state,null)}function $u(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},td(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=At(i):(i=ut(e)?mr:We.current,o.context=ho(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Vu(t,e,i,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Ol.enqueueReplaceState(o,o.state,null),fl(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function vo(t,e){try{var n="",r=e;do n+=K_(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function za(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ex=typeof WeakMap=="function"?WeakMap:Map;function Sy(t,e,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yl||(yl=!0,Qu=r),Bu(t,e)},n}function Ty(t,e,n){n=un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){Bu(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Bu(t,e),typeof r!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function _p(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ex;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=Ux.bind(null,t,e,n),e.then(t,t))}function wp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xp(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=un(-1,1),e.tag=2,Gn(n,e,1))),n.lanes|=1),t)}var Sx=mn.ReactCurrentOwner,lt=!1;function Qe(t,e,n,r){e.child=t===null?jg(e,null,n,r):go(e,t.child,n,r)}function Ep(t,e,n,r,o){n=n.render;var i=e.ref;return oo(e,o),r=sd(t,e,n,r,i,o),n=ld(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,pn(t,e,o)):(fe&&n&&Yc(e),e.flags|=1,Qe(t,e,r,o),e.child)}function Sp(t,e,n,r,o){if(t===null){var i=n.type;return typeof i=="function"&&!yd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Cy(t,e,i,r,o)):(t=$s(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ai,n(s,r)&&t.ref===e.ref)return pn(t,e,o)}return e.flags|=1,t=Bn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Cy(t,e,n,r,o){if(t!==null){var i=t.memoizedProps;if(Ai(i,r)&&t.ref===e.ref)if(lt=!1,e.pendingProps=r=i,(t.lanes&o)!==0)t.flags&131072&&(lt=!0);else return e.lanes=t.lanes,pn(t,e,o)}return Ou(t,e,n,r,o)}function Iy(t,e,n){var r=e.pendingProps,o=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(Xr,mt),mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ae(Xr,mt),mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ae(Xr,mt),mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ae(Xr,mt),mt|=r;return Qe(t,e,o,n),e.child}function Ay(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ou(t,e,n,r,o){var i=ut(n)?mr:We.current;return i=ho(e,i),oo(e,o),n=sd(t,e,n,r,i,o),r=ld(),t!==null&&!lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,pn(t,e,o)):(fe&&r&&Yc(e),e.flags|=1,Qe(t,e,n,o),e.child)}function Tp(t,e,n,r,o){if(ut(n)){var i=!0;ll(e)}else i=!1;if(oo(e,o),e.stateNode===null)Fs(t,e),Ey(e,n,r),$u(e,n,r,o),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=At(d):(d=ut(n)?mr:We.current,d=ho(e,d));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==d)&&vp(e,s,r,d),An=!1;var m=e.memoizedState;s.state=m,fl(e,r,s,o),c=e.memoizedState,a!==r||m!==c||at.current||An?(typeof f=="function"&&(Vu(e,n,f,r),c=e.memoizedState),(a=An||yp(e,n,a,r,m,c,d))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=d,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,ty(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:kt(e.type,a),s.props=d,h=e.pendingProps,m=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=At(c):(c=ut(n)?mr:We.current,c=ho(e,c));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||m!==c)&&vp(e,s,r,c),An=!1,m=e.memoizedState,s.state=m,fl(e,r,s,o);var x=e.memoizedState;a!==h||m!==x||at.current||An?(typeof g=="function"&&(Vu(e,n,g,r),x=e.memoizedState),(d=An||yp(e,n,d,r,m,x,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,x,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,x,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),s.props=r,s.state=x,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Hu(t,e,n,r,i,o)}function Hu(t,e,n,r,o,i){Ay(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return o&&up(e,n,!1),pn(t,e,i);r=e.stateNode,Sx.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=go(e,t.child,null,i),e.child=go(e,null,a,i)):Qe(t,e,a,i),e.memoizedState=r.state,o&&up(e,n,!0),e.child}function Ny(t){var e=t.stateNode;e.pendingContext?ap(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ap(t,e.context,!1),nd(t,e.containerInfo)}function Cp(t,e,n,r,o){return mo(),Xc(o),e.flags|=256,Qe(t,e,n,r),e.child}var qu={dehydrated:null,treeContext:null,retryLane:0};function zu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ry(t,e,n){var r=e.pendingProps,o=ge.current,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),ae(ge,o&1),t===null)return Fu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,i?(r=e.mode,i=e.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=zl(s,r,0,null),t=hr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zu(n),e.memoizedState=qu,t):cd(e,s));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return Tx(t,e,s,r,a,o,n);if(i){i=r.fallback,s=e.mode,o=t.child,a=o.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Bn(o,c),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=Bn(a,i):(i=hr(i,s,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,s=t.child.memoizedState,s=s===null?zu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=qu,r}return i=t.child,t=i.sibling,r=Bn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cd(t,e){return e=zl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hs(t,e,n,r){return r!==null&&Xc(r),go(e,t.child,null,n),t=cd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tx(t,e,n,r,o,i,s){if(n)return e.flags&256?(e.flags&=-257,r=za(Error(k(422))),hs(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=zl({mode:"visible",children:r.children},o,0,null),i=hr(i,o,s,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&go(e,t.child,null,s),e.child.memoizedState=zu(s),e.memoizedState=qu,i);if(!(e.mode&1))return hs(t,e,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(k(419)),r=za(i,r,void 0),hs(t,e,s,r)}if(a=(s&t.childLanes)!==0,lt||a){if(r=be,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,fn(t,o),Ft(r,t,o,-1))}return gd(),r=za(Error(k(421))),hs(t,e,s,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=Fx.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,gt=Fn(o.nextSibling),yt=e,fe=!0,Lt=null,t!==null&&(xt[Et++]=ln,xt[Et++]=an,xt[Et++]=gr,ln=t.id,an=t.overflow,gr=e),e=cd(e,r.children),e.flags|=4096,e)}function Ip(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gu(t.return,e,n)}function Ja(t,e,n,r,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Py(t,e,n){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(Qe(t,e,r.children,n),r=ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ip(t,n,e);else if(t.tag===19)Ip(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ae(ge,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&pl(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Ja(e,!1,o,n,i);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&pl(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Ja(e,!0,n,null,i);break;case"together":Ja(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(k(153));if(e.child!==null){for(t=e.child,n=Bn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Cx(t,e,n){switch(e.tag){case 3:Ny(e),mo();break;case 5:ny(e);break;case 1:ut(e.type)&&ll(e);break;case 4:nd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;ae(cl,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ae(ge,ge.current&1),e.flags|=128,null):n&e.child.childLanes?Ry(t,e,n):(ae(ge,ge.current&1),t=pn(t,e,n),t!==null?t.sibling:null);ae(ge,ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Py(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ae(ge,ge.current),r)break;return null;case 22:case 23:return e.lanes=0,Iy(t,e,n)}return pn(t,e,n)}var ky,Ju,My,Dy;ky=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ju=function(){};My=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,ur(Zt.current);var i=null;switch(n){case"input":o=hu(t,o),r=hu(t,r),i=[];break;case"select":o=ve({},o,{value:void 0}),r=ve({},r,{value:void 0}),i=[];break;case"textarea":o=yu(t,o),r=yu(t,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=il)}_u(n,r);var s;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var a=o[d];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(wi.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(a=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(wi.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ue("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Dy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jo(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function He(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ix(t,e,n){var r=e.pendingProps;switch(Kc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(e),null;case 1:return ut(e.type)&&sl(),He(e),null;case 3:return r=e.stateNode,yo(),de(at),de(We),od(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lt!==null&&(ec(Lt),Lt=null))),Ju(t,e),He(e),null;case 5:rd(e);var o=ur(Mi.current);if(n=e.type,t!==null&&e.stateNode!=null)My(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(k(166));return He(e),null}if(t=ur(Zt.current),fs(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Kt]=e,r[Pi]=i,t=(e.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(o=0;o<ti.length;o++)ue(ti[o],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":bf(r,i),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ue("invalid",r);break;case"textarea":Ff(r,i),ue("invalid",r)}_u(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ds(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ds(r.textContent,a,t),o=["children",""+a]):wi.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ue("scroll",r)}switch(n){case"input":rs(r),Uf(r,i,!0);break;case"textarea":rs(r),Gf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=il)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Kt]=e,t[Pi]=r,ky(t,e,!1,!1),e.stateNode=t;e:{switch(s=wu(n,r),n){case"dialog":ue("cancel",t),ue("close",t),o=r;break;case"iframe":case"object":case"embed":ue("load",t),o=r;break;case"video":case"audio":for(o=0;o<ti.length;o++)ue(ti[o],t);o=r;break;case"source":ue("error",t),o=r;break;case"img":case"image":case"link":ue("error",t),ue("load",t),o=r;break;case"details":ue("toggle",t),o=r;break;case"input":bf(t,r),o=hu(t,r),ue("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=ve({},r,{value:void 0}),ue("invalid",t);break;case"textarea":Ff(t,r),o=yu(t,r),ue("invalid",t);break;default:o=r}_u(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?cg(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ag(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xi(t,c):typeof c=="number"&&xi(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ue("scroll",t):c!=null&&Lc(t,i,c,s))}switch(n){case"input":rs(t),Uf(t,r,!1);break;case"textarea":rs(t),Gf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?eo(t,!!r.multiple,i,!1):r.defaultValue!=null&&eo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=il)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return He(e),null;case 6:if(t&&e.stateNode!=null)Dy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(k(166));if(n=ur(Mi.current),ur(Zt.current),fs(e)){if(r=e.stateNode,n=e.memoizedProps,r[Kt]=e,(i=r.nodeValue!==n)&&(t=yt,t!==null))switch(t.tag){case 3:ds(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ds(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kt]=e,e.stateNode=r}return He(e),null;case 13:if(de(ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&gt!==null&&e.mode&1&&!(e.flags&128))Qg(),mo(),e.flags|=98560,i=!1;else if(i=fs(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(k(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(k(317));i[Kt]=e}else mo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),i=!1}else Lt!==null&&(ec(Lt),Lt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?Re===0&&(Re=3):gd())),e.updateQueue!==null&&(e.flags|=4),He(e),null);case 4:return yo(),Ju(t,e),t===null&&Ni(e.stateNode.containerInfo),He(e),null;case 10:return jc(e.type._context),He(e),null;case 17:return ut(e.type)&&sl(),He(e),null;case 19:if(de(ge),i=e.memoizedState,i===null)return He(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)Jo(i,!1);else{if(Re!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=pl(t),s!==null){for(e.flags|=128,Jo(i,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ae(ge,ge.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ee()>_o&&(e.flags|=128,r=!0,Jo(i,!1),e.lanes=4194304)}else{if(!r)if(t=pl(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!fe)return He(e),null}else 2*Ee()-i.renderingStartTime>_o&&n!==1073741824&&(e.flags|=128,r=!0,Jo(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ee(),e.sibling=null,n=ge.current,ae(ge,r?n&1|2:n&1),e):(He(e),null);case 22:case 23:return md(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mt&1073741824&&(He(e),e.subtreeFlags&6&&(e.flags|=8192)):He(e),null;case 24:return null;case 25:return null}throw Error(k(156,e.tag))}function Ax(t,e){switch(Kc(e),e.tag){case 1:return ut(e.type)&&sl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yo(),de(at),de(We),od(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rd(e),null;case 13:if(de(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(k(340));mo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(ge),null;case 4:return yo(),null;case 10:return jc(e.type._context),null;case 22:case 23:return md(),null;case 24:return null;default:return null}}var ms=!1,ze=!1,Nx=typeof WeakSet=="function"?WeakSet:Set,F=null;function Kr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){we(t,e,r)}else n.current=null}function Wu(t,e,n){try{n()}catch(r){we(t,e,r)}}var Ap=!1;function Rx(t,e){if(Pu=nl,t=Gg(),Wc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,d=0,f=0,h=t,m=null;t:for(;;){for(var g;h!==n||o!==0&&h.nodeType!==3||(a=s+o),h!==i||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===n&&++d===o&&(a=s),m===i&&++f===r&&(c=s),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ku={focusedElem:t,selectionRange:n},nl=!1,F=e;F!==null;)if(e=F,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,F=t;else for(;F!==null;){e=F;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,T=x.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:kt(e.type,w),T);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(k(163))}}catch(E){we(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,F=t;break}F=e.return}return x=Ap,Ap=!1,x}function hi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&Wu(e,n,i)}o=o.next}while(o!==r)}}function Hl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Yu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ly(t){var e=t.alternate;e!==null&&(t.alternate=null,Ly(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kt],delete e[Pi],delete e[Lu],delete e[dx],delete e[fx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function by(t){return t.tag===5||t.tag===3||t.tag===4}function Np(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||by(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ku(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=il));else if(r!==4&&(t=t.child,t!==null))for(Ku(t,e,n),t=t.sibling;t!==null;)Ku(t,e,n),t=t.sibling}function Xu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xu(t,e,n),t=t.sibling;t!==null;)Xu(t,e,n),t=t.sibling}var Fe=null,Dt=!1;function En(t,e,n){for(n=n.child;n!==null;)Uy(t,e,n),n=n.sibling}function Uy(t,e,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(bl,n)}catch{}switch(n.tag){case 5:ze||Kr(n,e);case 6:var r=Fe,o=Dt;Fe=null,En(t,e,n),Fe=r,Dt=o,Fe!==null&&(Dt?(t=Fe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Fe.removeChild(n.stateNode));break;case 18:Fe!==null&&(Dt?(t=Fe,n=n.stateNode,t.nodeType===8?Va(t.parentNode,n):t.nodeType===1&&Va(t,n),Ci(t)):Va(Fe,n.stateNode));break;case 4:r=Fe,o=Dt,Fe=n.stateNode.containerInfo,Dt=!0,En(t,e,n),Fe=r,Dt=o;break;case 0:case 11:case 14:case 15:if(!ze&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Wu(n,e,s),o=o.next}while(o!==r)}En(t,e,n);break;case 1:if(!ze&&(Kr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){we(n,e,a)}En(t,e,n);break;case 21:En(t,e,n);break;case 22:n.mode&1?(ze=(r=ze)||n.memoizedState!==null,En(t,e,n),ze=r):En(t,e,n);break;default:En(t,e,n)}}function Rp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Nx),e.forEach(function(r){var o=Gx.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Rt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Fe=a.stateNode,Dt=!1;break e;case 3:Fe=a.stateNode.containerInfo,Dt=!0;break e;case 4:Fe=a.stateNode.containerInfo,Dt=!0;break e}a=a.return}if(Fe===null)throw Error(k(160));Uy(i,s,o),Fe=null,Dt=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(d){we(o,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fy(e,t),e=e.sibling}function Fy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rt(e,t),qt(t),r&4){try{hi(3,t,t.return),Hl(3,t)}catch(w){we(t,t.return,w)}try{hi(5,t,t.return)}catch(w){we(t,t.return,w)}}break;case 1:Rt(e,t),qt(t),r&512&&n!==null&&Kr(n,n.return);break;case 5:if(Rt(e,t),qt(t),r&512&&n!==null&&Kr(n,n.return),t.flags&32){var o=t.stateNode;try{xi(o,"")}catch(w){we(t,t.return,w)}}if(r&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&ig(o,i),wu(a,s);var d=wu(a,i);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];f==="style"?cg(o,h):f==="dangerouslySetInnerHTML"?ag(o,h):f==="children"?xi(o,h):Lc(o,f,h,d)}switch(a){case"input":mu(o,i);break;case"textarea":sg(o,i);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?eo(o,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?eo(o,!!i.multiple,i.defaultValue,!0):eo(o,!!i.multiple,i.multiple?[]:"",!1))}o[Pi]=i}catch(w){we(t,t.return,w)}}break;case 6:if(Rt(e,t),qt(t),r&4){if(t.stateNode===null)throw Error(k(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(w){we(t,t.return,w)}}break;case 3:if(Rt(e,t),qt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ci(e.containerInfo)}catch(w){we(t,t.return,w)}break;case 4:Rt(e,t),qt(t);break;case 13:Rt(e,t),qt(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(pd=Ee())),r&4&&Rp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ze=(d=ze)||f,Rt(e,t),ze=d):Rt(e,t),qt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(F=t,f=t.child;f!==null;){for(h=F=f;F!==null;){switch(m=F,g=m.child,m.tag){case 0:case 11:case 14:case 15:hi(4,m,m.return);break;case 1:Kr(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){we(r,n,w)}}break;case 5:Kr(m,m.return);break;case 22:if(m.memoizedState!==null){kp(h);continue}}g!==null?(g.return=m,F=g):kp(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{o=h.stateNode,d?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=ug("display",s))}catch(w){we(t,t.return,w)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(w){we(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Rt(e,t),qt(t),r&4&&Rp(t);break;case 21:break;default:Rt(e,t),qt(t)}}function qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(by(n)){var r=n;break e}n=n.return}throw Error(k(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(xi(o,""),r.flags&=-33);var i=Np(t);Xu(t,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Np(t);Ku(t,a,s);break;default:throw Error(k(161))}}catch(c){we(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Px(t,e,n){F=t,Gy(t)}function Gy(t,e,n){for(var r=(t.mode&1)!==0;F!==null;){var o=F,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||ms;if(!s){var a=o.alternate,c=a!==null&&a.memoizedState!==null||ze;a=ms;var d=ze;if(ms=s,(ze=c)&&!d)for(F=o;F!==null;)s=F,c=s.child,s.tag===22&&s.memoizedState!==null?Mp(o):c!==null?(c.return=s,F=c):Mp(o);for(;i!==null;)F=i,Gy(i),i=i.sibling;F=o,ms=a,ze=d}Pp(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,F=i):Pp(t)}}function Pp(t){for(;F!==null;){var e=F;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ze||Hl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ze)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:kt(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&hp(e,i,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hp(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Ci(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(k(163))}ze||e.flags&512&&Yu(e)}catch(m){we(e,e.return,m)}}if(e===t){F=null;break}if(n=e.sibling,n!==null){n.return=e.return,F=n;break}F=e.return}}function kp(t){for(;F!==null;){var e=F;if(e===t){F=null;break}var n=e.sibling;if(n!==null){n.return=e.return,F=n;break}F=e.return}}function Mp(t){for(;F!==null;){var e=F;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hl(4,e)}catch(c){we(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(c){we(e,o,c)}}var i=e.return;try{Yu(e)}catch(c){we(e,i,c)}break;case 5:var s=e.return;try{Yu(e)}catch(c){we(e,s,c)}}}catch(c){we(e,e.return,c)}if(e===t){F=null;break}var a=e.sibling;if(a!==null){a.return=e.return,F=a;break}F=e.return}}var kx=Math.ceil,gl=mn.ReactCurrentDispatcher,dd=mn.ReactCurrentOwner,Ct=mn.ReactCurrentBatchConfig,ee=0,be=null,Te=null,Ve=0,mt=0,Xr=Jn(0),Re=0,Ui=null,vr=0,ql=0,fd=0,mi=null,st=null,pd=0,_o=1/0,rn=null,yl=!1,Qu=null,Vn=null,gs=!1,Mn=null,vl=0,gi=0,Zu=null,Gs=-1,Vs=0;function Ze(){return ee&6?Ee():Gs!==-1?Gs:Gs=Ee()}function $n(t){return t.mode&1?ee&2&&Ve!==0?Ve&-Ve:hx.transition!==null?(Vs===0&&(Vs=Eg()),Vs):(t=oe,t!==0||(t=window.event,t=t===void 0?16:Rg(t.type)),t):1}function Ft(t,e,n,r){if(50<gi)throw gi=0,Zu=null,Error(k(185));$i(t,n,r),(!(ee&2)||t!==be)&&(t===be&&(!(ee&2)&&(ql|=n),Re===4&&Rn(t,Ve)),ct(t,r),n===1&&ee===0&&!(e.mode&1)&&(_o=Ee()+500,$l&&Wn()))}function ct(t,e){var n=t.callbackNode;hw(t,e);var r=tl(t,t===be?Ve:0);if(r===0)n!==null&&Bf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bf(n),e===1)t.tag===0?px(Dp.bind(null,t)):Yg(Dp.bind(null,t)),ux(function(){!(ee&6)&&Wn()}),n=null;else{switch(Sg(r)){case 1:n=Vc;break;case 4:n=wg;break;case 16:n=el;break;case 536870912:n=xg;break;default:n=el}n=Jy(n,Vy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Vy(t,e){if(Gs=-1,Vs=0,ee&6)throw Error(k(327));var n=t.callbackNode;if(io()&&t.callbackNode!==n)return null;var r=tl(t,t===be?Ve:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_l(t,r);else{e=r;var o=ee;ee|=2;var i=By();(be!==t||Ve!==e)&&(rn=null,_o=Ee()+500,pr(t,e));do try{Lx();break}catch(a){$y(t,a)}while(!0);Zc(),gl.current=i,ee=o,Te!==null?e=0:(be=null,Ve=0,e=Re)}if(e!==0){if(e===2&&(o=Cu(t),o!==0&&(r=o,e=ju(t,o))),e===1)throw n=Ui,pr(t,0),Rn(t,r),ct(t,Ee()),n;if(e===6)Rn(t,r);else{if(o=t.current.alternate,!(r&30)&&!Mx(o)&&(e=_l(t,r),e===2&&(i=Cu(t),i!==0&&(r=i,e=ju(t,i))),e===1))throw n=Ui,pr(t,0),Rn(t,r),ct(t,Ee()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(k(345));case 2:ir(t,st,rn);break;case 3:if(Rn(t,r),(r&130023424)===r&&(e=pd+500-Ee(),10<e)){if(tl(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Ze(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Du(ir.bind(null,t,st,rn),e);break}ir(t,st,rn);break;case 4:if(Rn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var s=31-Ut(r);i=1<<s,s=e[s],s>o&&(o=s),r&=~i}if(r=o,r=Ee()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kx(r/1960))-r,10<r){t.timeoutHandle=Du(ir.bind(null,t,st,rn),r);break}ir(t,st,rn);break;case 5:ir(t,st,rn);break;default:throw Error(k(329))}}}return ct(t,Ee()),t.callbackNode===n?Vy.bind(null,t):null}function ju(t,e){var n=mi;return t.current.memoizedState.isDehydrated&&(pr(t,e).flags|=256),t=_l(t,e),t!==2&&(e=st,st=n,e!==null&&ec(e)),t}function ec(t){st===null?st=t:st.push.apply(st,t)}function Mx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Gt(i(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rn(t,e){for(e&=~fd,e&=~ql,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),r=1<<n;t[n]=-1,e&=~r}}function Dp(t){if(ee&6)throw Error(k(327));io();var e=tl(t,0);if(!(e&1))return ct(t,Ee()),null;var n=_l(t,e);if(t.tag!==0&&n===2){var r=Cu(t);r!==0&&(e=r,n=ju(t,r))}if(n===1)throw n=Ui,pr(t,0),Rn(t,e),ct(t,Ee()),n;if(n===6)throw Error(k(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ir(t,st,rn),ct(t,Ee()),null}function hd(t,e){var n=ee;ee|=1;try{return t(e)}finally{ee=n,ee===0&&(_o=Ee()+500,$l&&Wn())}}function _r(t){Mn!==null&&Mn.tag===0&&!(ee&6)&&io();var e=ee;ee|=1;var n=Ct.transition,r=oe;try{if(Ct.transition=null,oe=1,t)return t()}finally{oe=r,Ct.transition=n,ee=e,!(ee&6)&&Wn()}}function md(){mt=Xr.current,de(Xr)}function pr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ax(n)),Te!==null)for(n=Te.return;n!==null;){var r=n;switch(Kc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sl();break;case 3:yo(),de(at),de(We),od();break;case 5:rd(r);break;case 4:yo();break;case 13:de(ge);break;case 19:de(ge);break;case 10:jc(r.type._context);break;case 22:case 23:md()}n=n.return}if(be=t,Te=t=Bn(t.current,null),Ve=mt=e,Re=0,Ui=null,fd=ql=vr=0,st=mi=null,ar!==null){for(e=0;e<ar.length;e++)if(n=ar[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}ar=null}return t}function $y(t,e){do{var n=Te;try{if(Zc(),bs.current=ml,hl){for(var r=ye.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}hl=!1}if(yr=0,Le=Ne=ye=null,pi=!1,Di=0,dd.current=null,n===null||n.return===null){Re=1,Ui=e,Te=null;break}e:{var i=t,s=n.return,a=n,c=e;if(e=Ve,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=wp(s);if(g!==null){g.flags&=-257,xp(g,s,a,i,e),g.mode&1&&_p(i,d,e),e=g,c=d;var x=e.updateQueue;if(x===null){var w=new Set;w.add(c),e.updateQueue=w}else x.add(c);break e}else{if(!(e&1)){_p(i,d,e),gd();break e}c=Error(k(426))}}else if(fe&&a.mode&1){var T=wp(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),xp(T,s,a,i,e),Xc(vo(c,a));break e}}i=c=vo(c,a),Re!==4&&(Re=2),mi===null?mi=[i]:mi.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Sy(i,c,e);pp(i,v);break e;case 1:a=c;var y=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Vn===null||!Vn.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=Ty(i,a,e);pp(i,E);break e}}i=i.return}while(i!==null)}Hy(n)}catch(I){e=I,Te===n&&n!==null&&(Te=n=n.return);continue}break}while(!0)}function By(){var t=gl.current;return gl.current=ml,t===null?ml:t}function gd(){(Re===0||Re===3||Re===2)&&(Re=4),be===null||!(vr&268435455)&&!(ql&268435455)||Rn(be,Ve)}function _l(t,e){var n=ee;ee|=2;var r=By();(be!==t||Ve!==e)&&(rn=null,pr(t,e));do try{Dx();break}catch(o){$y(t,o)}while(!0);if(Zc(),ee=n,gl.current=r,Te!==null)throw Error(k(261));return be=null,Ve=0,Re}function Dx(){for(;Te!==null;)Oy(Te)}function Lx(){for(;Te!==null&&!iw();)Oy(Te)}function Oy(t){var e=zy(t.alternate,t,mt);t.memoizedProps=t.pendingProps,e===null?Hy(t):Te=e,dd.current=null}function Hy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ax(n,e),n!==null){n.flags&=32767,Te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Re=6,Te=null;return}}else if(n=Ix(n,e,mt),n!==null){Te=n;return}if(e=e.sibling,e!==null){Te=e;return}Te=e=t}while(e!==null);Re===0&&(Re=5)}function ir(t,e,n){var r=oe,o=Ct.transition;try{Ct.transition=null,oe=1,bx(t,e,n,r)}finally{Ct.transition=o,oe=r}return null}function bx(t,e,n,r){do io();while(Mn!==null);if(ee&6)throw Error(k(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(k(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(mw(t,i),t===be&&(Te=be=null,Ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gs||(gs=!0,Jy(el,function(){return io(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ct.transition,Ct.transition=null;var s=oe;oe=1;var a=ee;ee|=4,dd.current=null,Rx(t,n),Fy(n,t),tx(ku),nl=!!Pu,ku=Pu=null,t.current=n,Px(n),sw(),ee=a,oe=s,Ct.transition=i}else t.current=n;if(gs&&(gs=!1,Mn=t,vl=o),i=t.pendingLanes,i===0&&(Vn=null),uw(n.stateNode),ct(t,Ee()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(yl)throw yl=!1,t=Qu,Qu=null,t;return vl&1&&t.tag!==0&&io(),i=t.pendingLanes,i&1?t===Zu?gi++:(gi=0,Zu=t):gi=0,Wn(),null}function io(){if(Mn!==null){var t=Sg(vl),e=Ct.transition,n=oe;try{if(Ct.transition=null,oe=16>t?16:t,Mn===null)var r=!1;else{if(t=Mn,Mn=null,vl=0,ee&6)throw Error(k(331));var o=ee;for(ee|=4,F=t.current;F!==null;){var i=F,s=i.child;if(F.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(F=d;F!==null;){var f=F;switch(f.tag){case 0:case 11:case 15:hi(8,f,i)}var h=f.child;if(h!==null)h.return=f,F=h;else for(;F!==null;){f=F;var m=f.sibling,g=f.return;if(Ly(f),f===d){F=null;break}if(m!==null){m.return=g,F=m;break}F=g}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var T=w.sibling;w.sibling=null,w=T}while(w!==null)}}F=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,F=s;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:hi(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,F=v;break e}F=i.return}}var y=t.current;for(F=y;F!==null;){s=F;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,F=_;else e:for(s=y;F!==null;){if(a=F,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hl(9,a)}}catch(I){we(a,a.return,I)}if(a===s){F=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,F=E;break e}F=a.return}}if(ee=o,Wn(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(bl,t)}catch{}r=!0}return r}finally{oe=n,Ct.transition=e}}return!1}function Lp(t,e,n){e=vo(n,e),e=Sy(t,e,1),t=Gn(t,e,1),e=Ze(),t!==null&&($i(t,1,e),ct(t,e))}function we(t,e,n){if(t.tag===3)Lp(t,t,n);else for(;e!==null;){if(e.tag===3){Lp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vn===null||!Vn.has(r))){t=vo(n,t),t=Ty(e,t,1),e=Gn(e,t,1),t=Ze(),e!==null&&($i(e,1,t),ct(e,t));break}}e=e.return}}function Ux(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ze(),t.pingedLanes|=t.suspendedLanes&n,be===t&&(Ve&n)===n&&(Re===4||Re===3&&(Ve&130023424)===Ve&&500>Ee()-pd?pr(t,0):fd|=n),ct(t,e)}function qy(t,e){e===0&&(t.mode&1?(e=ss,ss<<=1,!(ss&130023424)&&(ss=4194304)):e=1);var n=Ze();t=fn(t,e),t!==null&&($i(t,e,n),ct(t,n))}function Fx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qy(t,n)}function Gx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(k(314))}r!==null&&r.delete(e),qy(t,n)}var zy;zy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||at.current)lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return lt=!1,Cx(t,e,n);lt=!!(t.flags&131072)}else lt=!1,fe&&e.flags&1048576&&Kg(e,ul,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fs(t,e),t=e.pendingProps;var o=ho(e,We.current);oo(e,n),o=sd(null,e,r,t,o,n);var i=ld();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ut(r)?(i=!0,ll(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,td(e),o.updater=Ol,e.stateNode=o,o._reactInternals=e,$u(e,r,t,n),e=Hu(null,e,r,!0,i,n)):(e.tag=0,fe&&i&&Yc(e),Qe(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fs(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=$x(r),t=kt(r,t),o){case 0:e=Ou(null,e,r,t,n);break e;case 1:e=Tp(null,e,r,t,n);break e;case 11:e=Ep(null,e,r,t,n);break e;case 14:e=Sp(null,e,r,kt(r.type,t),n);break e}throw Error(k(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:kt(r,o),Ou(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:kt(r,o),Tp(t,e,r,o,n);case 3:e:{if(Ny(e),t===null)throw Error(k(387));r=e.pendingProps,i=e.memoizedState,o=i.element,ty(t,e),fl(e,r,null,n);var s=e.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=vo(Error(k(423)),e),e=Cp(t,e,r,n,o);break e}else if(r!==o){o=vo(Error(k(424)),e),e=Cp(t,e,r,n,o);break e}else for(gt=Fn(e.stateNode.containerInfo.firstChild),yt=e,fe=!0,Lt=null,n=jg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mo(),r===o){e=pn(t,e,n);break e}Qe(t,e,r,n)}e=e.child}return e;case 5:return ny(e),t===null&&Fu(e),r=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,s=o.children,Mu(r,o)?s=null:i!==null&&Mu(r,i)&&(e.flags|=32),Ay(t,e),Qe(t,e,s,n),e.child;case 6:return t===null&&Fu(e),null;case 13:return Ry(t,e,n);case 4:return nd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=go(e,null,r,n):Qe(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:kt(r,o),Ep(t,e,r,o,n);case 7:return Qe(t,e,e.pendingProps,n),e.child;case 8:return Qe(t,e,e.pendingProps.children,n),e.child;case 12:return Qe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,ae(cl,r._currentValue),r._currentValue=s,i!==null)if(Gt(i.value,s)){if(i.children===o.children&&!at.current){e=pn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=un(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Gu(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(k(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Gu(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Qe(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,oo(e,n),o=At(o),r=r(o),e.flags|=1,Qe(t,e,r,n),e.child;case 14:return r=e.type,o=kt(r,e.pendingProps),o=kt(r.type,o),Sp(t,e,r,o,n);case 15:return Cy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:kt(r,o),Fs(t,e),e.tag=1,ut(r)?(t=!0,ll(e)):t=!1,oo(e,n),Ey(e,r,o),$u(e,r,o,n),Hu(null,e,r,!0,t,n);case 19:return Py(t,e,n);case 22:return Iy(t,e,n)}throw Error(k(156,e.tag))};function Jy(t,e){return _g(t,e)}function Vx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(t,e,n,r){return new Vx(t,e,n,r)}function yd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $x(t){if(typeof t=="function")return yd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uc)return 11;if(t===Fc)return 14}return 2}function Bn(t,e){var n=t.alternate;return n===null?(n=St(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $s(t,e,n,r,o,i){var s=2;if(r=t,typeof t=="function")yd(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case $r:return hr(n.children,o,i,e);case bc:s=8,o|=8;break;case cu:return t=St(12,n,e,o|2),t.elementType=cu,t.lanes=i,t;case du:return t=St(13,n,e,o),t.elementType=du,t.lanes=i,t;case fu:return t=St(19,n,e,o),t.elementType=fu,t.lanes=i,t;case ng:return zl(n,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eg:s=10;break e;case tg:s=9;break e;case Uc:s=11;break e;case Fc:s=14;break e;case In:s=16,r=null;break e}throw Error(k(130,t==null?t:typeof t,""))}return e=St(s,n,e,o),e.elementType=t,e.type=r,e.lanes=i,e}function hr(t,e,n,r){return t=St(7,t,r,e),t.lanes=n,t}function zl(t,e,n,r){return t=St(22,t,r,e),t.elementType=ng,t.lanes=n,t.stateNode={isHidden:!1},t}function Wa(t,e,n){return t=St(6,t,null,e),t.lanes=n,t}function Ya(t,e,n){return e=St(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bx(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Na(0),this.expirationTimes=Na(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Na(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function vd(t,e,n,r,o,i,s,a,c){return t=new Bx(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=St(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},td(i),t}function Ox(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Wy(t){if(!t)return qn;t=t._reactInternals;e:{if(Er(t)!==t||t.tag!==1)throw Error(k(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(k(171))}if(t.tag===1){var n=t.type;if(ut(n))return Wg(t,n,e)}return e}function Yy(t,e,n,r,o,i,s,a,c){return t=vd(n,r,!0,t,o,i,s,a,c),t.context=Wy(null),n=t.current,r=Ze(),o=$n(n),i=un(r,o),i.callback=e??null,Gn(n,i,o),t.current.lanes=o,$i(t,o,r),ct(t,r),t}function Jl(t,e,n,r){var o=e.current,i=Ze(),s=$n(o);return n=Wy(n),e.context===null?e.context=n:e.pendingContext=n,e=un(i,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gn(o,e,s),t!==null&&(Ft(t,o,s,i),Ls(t,o,s)),s}function wl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _d(t,e){bp(t,e),(t=t.alternate)&&bp(t,e)}function Hx(){return null}var Ky=typeof reportError=="function"?reportError:function(t){console.error(t)};function wd(t){this._internalRoot=t}Wl.prototype.render=wd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(k(409));Jl(t,e,null,null)};Wl.prototype.unmount=wd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_r(function(){Jl(null,t,null,null)}),e[dn]=null}};function Wl(t){this._internalRoot=t}Wl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ig();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nn.length&&e!==0&&e<Nn[n].priority;n++);Nn.splice(n,0,t),n===0&&Ng(t)}};function xd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Up(){}function qx(t,e,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var d=wl(s);i.call(d)}}var s=Yy(e,r,t,0,null,!1,!1,"",Up);return t._reactRootContainer=s,t[dn]=s.current,Ni(t.nodeType===8?t.parentNode:t),_r(),s}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var d=wl(c);a.call(d)}}var c=vd(t,0,!1,null,null,!1,!1,"",Up);return t._reactRootContainer=c,t[dn]=c.current,Ni(t.nodeType===8?t.parentNode:t),_r(function(){Jl(e,c,n,r)}),c}function Kl(t,e,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var c=wl(s);a.call(c)}}Jl(e,s,t,o)}else s=qx(n,e,t,o,r);return wl(s)}Tg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ei(e.pendingLanes);n!==0&&($c(e,n|1),ct(e,Ee()),!(ee&6)&&(_o=Ee()+500,Wn()))}break;case 13:_r(function(){var r=fn(t,1);if(r!==null){var o=Ze();Ft(r,t,1,o)}}),_d(t,1)}};Bc=function(t){if(t.tag===13){var e=fn(t,134217728);if(e!==null){var n=Ze();Ft(e,t,134217728,n)}_d(t,134217728)}};Cg=function(t){if(t.tag===13){var e=$n(t),n=fn(t,e);if(n!==null){var r=Ze();Ft(n,t,e,r)}_d(t,e)}};Ig=function(){return oe};Ag=function(t,e){var n=oe;try{return oe=t,e()}finally{oe=n}};Eu=function(t,e,n){switch(e){case"input":if(mu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=Vl(r);if(!o)throw Error(k(90));og(r),mu(r,o)}}}break;case"textarea":sg(t,n);break;case"select":e=n.value,e!=null&&eo(t,!!n.multiple,e,!1)}};pg=hd;hg=_r;var zx={usingClientEntryPoint:!1,Events:[Oi,qr,Vl,dg,fg,hd]},Wo={findFiberByHostInstance:lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jx={bundleType:Wo.bundleType,version:Wo.version,rendererPackageName:Wo.rendererPackageName,rendererConfig:Wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yg(t),t===null?null:t.stateNode},findFiberByHostInstance:Wo.findFiberByHostInstance||Hx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ys=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ys.isDisabled&&ys.supportsFiber)try{bl=ys.inject(Jx),Qt=ys}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zx;_t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xd(e))throw Error(k(200));return Ox(t,e,null,n)};_t.createRoot=function(t,e){if(!xd(t))throw Error(k(299));var n=!1,r="",o=Ky;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=vd(t,1,!1,null,null,n,!1,r,o),t[dn]=e.current,Ni(t.nodeType===8?t.parentNode:t),new wd(e)};_t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(k(188)):(t=Object.keys(t).join(","),Error(k(268,t)));return t=yg(e),t=t===null?null:t.stateNode,t};_t.flushSync=function(t){return _r(t)};_t.hydrate=function(t,e,n){if(!Yl(e))throw Error(k(200));return Kl(null,t,e,!0,n)};_t.hydrateRoot=function(t,e,n){if(!xd(t))throw Error(k(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=Ky;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Yy(e,null,t,1,n??null,o,!1,i,s),t[dn]=e.current,Ni(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Wl(e)};_t.render=function(t,e,n){if(!Yl(e))throw Error(k(200));return Kl(null,t,e,!1,n)};_t.unmountComponentAtNode=function(t){if(!Yl(t))throw Error(k(40));return t._reactRootContainer?(_r(function(){Kl(null,null,t,!1,function(){t._reactRootContainer=null,t[dn]=null})}),!0):!1};_t.unstable_batchedUpdates=hd;_t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yl(n))throw Error(k(200));if(t==null||t._reactInternals===void 0)throw Error(k(38));return Kl(t,e,n,!1,r)};_t.version="18.3.1-next-f1338f8080-20240426";function Xy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xy)}catch(t){console.error(t)}}Xy(),Xm.exports=_t;var Wx=Xm.exports,Fp=Wx;au.createRoot=Fp.createRoot,au.hydrateRoot=Fp.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),X=(t,e)=>{const n=P.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:a="",children:c,...d},f)=>P.createElement("svg",{ref:f,...Yx,width:o,height:o,stroke:r,strokeWidth:s?Number(i)*24/Number(o):i,className:["lucide",`lucide-${Kx(t)}`,a].join(" "),...d},[...e.map(([h,m])=>P.createElement(h,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=X("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=X("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=X("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M8 7h6",key:"1f0q6e"}],["path",{d:"M8 11h8",key:"vwpz6n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=X("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=X("Clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=X("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=X("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=X("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=X("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=X("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=X("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=X("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=X("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=X("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=X("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=X("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=X("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=X("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=X("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=X("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=X("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=X("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=X("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=X("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=X("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=X("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=X("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function gE(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[o,i]=P.useState(!1),s=P.useRef(n);s.current=n;const a=P.useRef(r);return a.current=r,P.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var d;i(!0),(d=s.current)===null||d===void 0||d.call(s)},c.onerror=()=>{var d;i(!1),(d=a.current)===null||d===void 0||d.call(a)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),o}const yE=P.createContext(null);function vE({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:o}){const i=gE({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),s=P.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:i}),[t,i]);return U_.createElement(yE.Provider,{value:s},o)}function _E(){var t,e,n;(n=(e=(t=window==null?void 0:window.google)===null||t===void 0?void 0:t.accounts)===null||e===void 0?void 0:e.id)===null||n===void 0||n.disableAutoSelect()}var me=(t=>(t.IDLE="IDLE",t.PARSING="PARSING",t.TRANSLATING="TRANSLATING",t.COMPLETED="COMPLETED",t.ERROR="ERROR",t))(me||{}),J=(t=>(t.IDLE="IDLE",t.LOADING_FFMPEG="LOADING_FFMPEG",t.ANALYZING="ANALYZING",t.EXTRACTING_AUDIO="EXTRACTING_AUDIO",t.TRANSCRIBING="TRANSCRIBING",t.EXTRACTING_SUBTITLES="EXTRACTING_SUBTITLES",t.MUXING="MUXING",t.DONE="DONE",t.ERROR="ERROR",t.UPLOADING_TO_YOUTUBE="UPLOADING_TO_YOUTUBE",t.AWAITING_YOUTUBE_CAPTIONS="AWAITING_YOUTUBE_CAPTIONS",t.DOWNLOADING_FROM_URL="DOWNLOADING_FROM_URL",t.FETCHING_YOUTUBE_INFO="FETCHING_YOUTUBE_INFO",t.DOWNLOADING_VIDEO="DOWNLOADING_VIDEO",t))(J||{});const rt=[{id:"youtube-auto",name:"YouTube Auto-Caption",description:"Uploads video to YouTube (Unlisted) to generate captions via Google speech recognition. Best for free, high-accuracy transcription.",tags:["Free","Cloud","Transcription Only"],provider:"youtube"},{id:"gemini-3-pro-preview",name:"Gemini 3 Pro",description:"Highest reasoning capability. Best for complex dialogue, cultural nuances, and context retention.",tags:["Best Quality","Slower"],provider:"google"},{id:"gemini-2.5-pro-preview",name:"Gemini 2.5 Pro",description:"Balanced performance with advanced reasoning capabilities. Great for most subtitles.",tags:["Balanced","High Quality"],provider:"google"},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Next-generation high-speed model. Ideal for large files and quick turnaround.",tags:["Ultra Fast","New"],provider:"google"},{id:"gemini-2.0-pro-exp-02-05",name:"Gemini 2.0 Pro",description:"Previous generation high-intelligence model. Reliable for standard translation tasks.",tags:["Reliable","Smart"],provider:"google"},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Optimized for speed and efficiency. Good for straightforward content and quick results.",tags:["Fast","Efficient"],provider:"google"},{id:"gpt-5.1",name:"GPT-5.1",description:"The latest iteration, offering cutting-edge performance and multimodal capabilities.",tags:["Bleeding-Edge","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5-pro",name:"GPT-5 Pro",description:"A professional-grade model from the GPT-5 series with top-tier reasoning.",tags:["Pro","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5",name:"GPT-5",description:"The foundational next-gen model for advanced understanding and generation.",tags:["Next-Gen","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5-mini",name:"GPT-5 Mini",description:"A balanced and efficient model from the GPT-5 series, ideal for speed.",tags:["Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5-nano",name:"GPT-5 Nano",description:"The most compact and fastest model in the GPT-5 family for lightweight tasks.",tags:["Ultra-Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4.1",name:"GPT-4.1",description:"An enhanced version of GPT-4 with improved speed and context handling.",tags:["Advanced","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4.1-mini",name:"GPT-4.1 Mini",description:"A faster, more efficient variant of the GPT-4.1 architecture.",tags:["Efficient","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4.1-nano",name:"GPT-4.1 Nano",description:"The smallest and quickest model from the GPT-4.1 series for rapid responses.",tags:["Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4o",name:"GPT-4o",description:"OpenAI's flagship Omni model. Excellent for nuanced understanding and generation.",tags:["Flagship","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"A smaller, faster, and more affordable version of GPT-4o with strong performance.",tags:["Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"}],br=[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"nl",name:"Dutch"},{code:"pl",name:"Polish"},{code:"ru",name:"Russian"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"zh",name:"Chinese (Simplified)"},{code:"ar",name:"Arabic"},{code:"tr",name:"Turkish"},{code:"hi",name:"Hindi"},{code:"fa",name:"Persian"}],Vp=["video/mp4","video/x-matroska","video/quicktime","video/x-ms-wmv","video/webm","video/x-msvideo"],Ka=[{value:2,label:"Low",description:"Best for avoiding strict rate limits on free tiers (2 RPM)."},{value:15,label:"Medium",description:"Recommended default. Good balance of speed and safety (15 RPM)."},{value:30,label:"High",description:"Faster, but higher risk of rate limits (30 RPM)."},{value:"unlimited",label:"Unlimited",description:"No artificial delay. Only for high-tier paid keys."}],$p=t=>{const[e,n]=t.split(","),[r,o,i]=e.split(":").map(Number),s=Number(n);return r*36e5+o*6e4+i*1e3+s},Ko=t=>{var a,c;const n=t.replace(/\r\n/g,`
`).trim().replace(/^WEBVTT.*\n+/,"");let r=[];const o=n.split(/\n\n+/);let i=1;o.forEach(d=>{const f=d.split(`
`);if(f.length===0)return;const h=f.findIndex(m=>m.includes("-->"));if(h!==-1){const g=f[h].split(" --> ");if(g.length===2){const T=f.slice(h+1).filter(v=>v.trim()!==""&&!v.trim().match(/^NOTE/)).join(`
`).trim();if(T){const v=T.replace(/<[^>]*>/g,""),y=g[0].trim().replace(".",","),_=g[1].trim().replace(".",",");r.push({id:i++,startTime:y,endTime:_,text:v,originalText:v})}}}});const s=[];for(let d=0;d<r.length;d++){const f=r[d],h=r[d+1];if(h){const m=$p(f.startTime),g=$p(h.startTime);if(Math.abs(g-m)<500){const x=((a=f.originalText)==null?void 0:a.toLowerCase().trim())||"";if((((c=h.originalText)==null?void 0:c.toLowerCase().trim())||"").startsWith(x))continue}}s.push({...f,id:s.length+1})}return s},Xa=t=>t.map(e=>`${e.id}
${e.startTime} --> ${e.endTime}
${e.text}`).join(`

`),oc=(t,e)=>{const n=document.createElement("a"),r=typeof e=="string"?new Blob([e],{type:"text/plain"}):e;n.href=URL.createObjectURL(r),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wE,xE;function EE(){return{geminiUrl:wE,vertexUrl:xE}}function SE(t,e,n,r){var o,i;if(!(t!=null&&t.baseUrl)){const s=EE();return e?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(i=s.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gn{}function L(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function u(t,e,n){for(let i=0;i<e.length-1;i++){const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];u(f,e.slice(i+1),n[d])}else for(const d of c)u(d,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];u(c[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],o=t[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const o=e[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(a=>l(a,e.slice(r+1),n)):n}else return n}else t=t[o]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function TE(t,e){for(const[n,r]of Object.entries(e)){const o=n.split("."),i=r.split("."),s=new Set;let a=-1;for(let c=0;c<o.length;c++)if(o[c]==="*"){a=c;break}if(a!==-1&&i.length>a)for(let c=a;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}ic(t,o,i,0,s)}}function ic(t,e,n,r,o){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const c of a[s])ic(c,e,n,r+1,o)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(d=>!d.startsWith("_")&&!o.has(d)),c={};for(const d of a)c[d]=s[d];for(const[d,f]of Object.entries(c)){const h=[];for(const m of n.slice(r))m==="*"?h.push(d):h.push(m);u(s,h,f)}for(const d of a)delete s[d]}}else{const s=t;i in s&&ic(s[i],e,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ed(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CE(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["operationName"],n);const r=l(t,["resourceName"]);return r!=null&&u(e,["_url","resourceName"],r),e}function IE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],NE(s)),e}function AE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],RE(s)),e}function NE(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>PE(s))),u(e,["generatedVideos"],i)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function RE(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>kE(s))),u(e,["generatedVideos"],i)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function PE(t){const e={},n=l(t,["video"]);return n!=null&&u(e,["video"],FE(n)),e}function kE(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],GE(n)),e}function ME(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function DE(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function LE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],bE(s)),e}function bE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function n0(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],UE(s)),e}function UE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function FE(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&u(e,["videoBytes"],Ed(r));const o=l(t,["encoding"]);return o!=null&&u(e,["mimeType"],o),e}function GE(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],Ed(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Bp;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Bp||(Bp={}));var Op;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Op||(Op={}));var Hp;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Hp||(Hp={}));var Dn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Dn||(Dn={}));var qp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(qp||(qp={}));var zp;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zp||(zp={}));var Jp;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Jp||(Jp={}));var Wp;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Wp||(Wp={}));var Yp;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Yp||(Yp={}));var Kp;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Kp||(Kp={}));var Xp;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Xp||(Xp={}));var Qp;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Qp||(Qp={}));var Zp;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Zp||(Zp={}));var jp;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(jp||(jp={}));var eh;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(eh||(eh={}));var th;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(th||(th={}));var nh;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(nh||(nh={}));var rh;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(rh||(rh={}));var oh;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(oh||(oh={}));var Cl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Cl||(Cl={}));var ih;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ih||(ih={}));var sh;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(sh||(sh={}));var lh;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(lh||(lh={}));var sc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(sc||(sc={}));var ah;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ah||(ah={}));var uh;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(uh||(uh={}));var ch;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(ch||(ch={}));var dh;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(dh||(dh={}));var fh;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(fh||(fh={}));var ph;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ph||(ph={}));var hh;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(hh||(hh={}));var mh;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(mh||(mh={}));var gh;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(gh||(gh={}));var yh;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(yh||(yh={}));var vh;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(vh||(vh={}));var _h;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(_h||(_h={}));var wh;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wh||(wh={}));var xh;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xh||(xh={}));var Eh;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Eh||(Eh={}));var Sh;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Sh||(Sh={}));var Th;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Th||(Th={}));var Ch;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Ch||(Ch={}));var Ih;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ih||(Ih={}));var Ah;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Ah||(Ah={}));var Nh;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Nh||(Nh={}));var Rh;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Rh||(Rh={}));var Ph;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ph||(Ph={}));var kh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(kh||(kh={}));var Mh;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Mh||(Mh={}));var Dh;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Dh||(Dh={}));var Lh;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Lh||(Lh={}));var bh;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(bh||(bh={}));var Uh;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Uh||(Uh={}));var Fh;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Fh||(Fh={}));var Zr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Zr||(Zr={}));class lc{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Xo{get text(){var e,n,r,o,i,s,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const h=[];for(const m of(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[g,x]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(x!==null||x!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,d+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,r,o,i,s,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const h of(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&f.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,o,i,s,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,o,i,s,a,c,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,o,i,s,a,c,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class Gh{}class Vh{}class VE{}class $E{}class BE{}class OE{}class $h{}class Bh{}class Oh{}class HE{}class Il{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Il;let o;const i=e;return n?o=AE(i):o=IE(i),Object.assign(r,o),r}}class Hh{}class qh{}class zh{}class qE{}class zE{}class JE{}class Sd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Sd,i=LE(e);return Object.assign(r,i),r}}class WE{}class YE{}class KE{}class Jh{}class XE{get text(){var e,n,r;let o="",i=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(a))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,o+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var e,n,r;let o="";const i=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,c]of Object.entries(s))a!=="inlineData"&&c!==null&&i.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class QE{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Td{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Td,i=n0(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function te(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function r0(t,e){const n=te(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function o0(t){return Array.isArray(t)?t.map(e=>Al(e)):[Al(t)]}function Al(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function i0(t){const e=Al(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function s0(t){const e=Al(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Wh(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function l0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Wh(e)):[Wh(t)]}function ac(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Yh(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Kh(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Je(t){if(t==null)throw new Error("ContentUnion is required");return ac(t)?t:{role:"user",parts:l0(t)}}function Cd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Je(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Je(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Je(n)):[Je(e)]}function It(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Yh(t)||Kh(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Je(t)]}const e=[],n=[],r=ac(t[0]);for(const o of t){const i=ac(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(o);else{if(Yh(o)||Kh(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||e.push({role:"user",parts:l0(n)}),e}function ZE(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Dn).includes(n[0].toUpperCase())?n[0].toUpperCase():Dn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Dn).includes(r.toUpperCase())?r.toUpperCase():Dn.TYPE_UNSPECIFIED})}}function so(t){const e={},n=["items"],r=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&ZE(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Dn).includes(a.toUpperCase())?a.toUpperCase():Dn.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=so(a);else if(r.includes(s)){const c=[];for(const d of a){if(d.type=="null"){e.nullable=!0;continue}c.push(so(d))}e[s]=c}else if(o.includes(s)){const c={};for(const[d,f]of Object.entries(a))c[d]=so(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=a}return e}function Id(t){return so(t)}function Ad(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Nd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function To(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=so(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=so(e.response));return t}function Co(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function jE(t,e,n,r=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function yn(t,e){if(typeof e!="string")throw new Error("name must be a string");return jE(t,e,"cachedContents")}function a0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Yn(t){return Ed(t)}function eS(t){return t!=null&&typeof t=="object"&&"name"in t}function tS(t){return t!=null&&typeof t=="object"&&"video"in t}function nS(t){return t!=null&&typeof t=="object"&&"uri"in t}function u0(t){var e;let n;if(eS(t)&&(n=t.name),!(nS(t)&&(n=t.uri,n===void 0))&&!(tS(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function c0(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function d0(t){for(const e of["models","tunedModels","publisherModels"])if(rS(t,e))return t[e];return[]}function rS(t,e){return t!==null&&typeof t=="object"&&e in t}function oS(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function iS(t,e={}){const n=[],r=new Set;for(const o of t){const i=o.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const s=oS(o,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function f0(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function sS(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function p0(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let i=!1;for(const s of o){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Io(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function h0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lS(t){const e={},n=l(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>BS(s))),u(e,["inlinedResponses"],i)}const o=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["inlinedEmbedContentResponses"],i)}return e}function aS(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&u(e,["gcsUri"],r);const o=l(t,["bigqueryDestination","outputUri"]);return o!=null&&u(e,["bigqueryUri"],o),e}function uS(t){const e={},n=l(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsDestination","outputUriPrefix"],r);const o=l(t,["bigqueryUri"]);if(o!=null&&u(e,["bigqueryDestination","outputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Bs(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["metadata","state"]);o!=null&&u(e,["state"],h0(o));const i=l(t,["metadata","createTime"]);i!=null&&u(e,["createTime"],i);const s=l(t,["metadata","endTime"]);s!=null&&u(e,["endTime"],s);const a=l(t,["metadata","updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["metadata","model"]);c!=null&&u(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&u(e,["dest"],lS(p0(d))),e}function uc(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["state"]);o!=null&&u(e,["state"],h0(o));const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["startTime"]);a!=null&&u(e,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(e,["updateTime"],d);const f=l(t,["model"]);f!=null&&u(e,["model"],f);const h=l(t,["inputConfig"]);h!=null&&u(e,["src"],cS(h));const m=l(t,["outputConfig"]);m!=null&&u(e,["dest"],aS(p0(m)));const g=l(t,["completionStats"]);return g!=null&&u(e,["completionStats"],g),e}function cS(t){const e={},n=l(t,["instancesFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&u(e,["gcsUri"],r);const o=l(t,["bigquerySource","inputUri"]);return o!=null&&u(e,["bigqueryUri"],o),e}function dS(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&u(n,["fileName"],r);const o=l(e,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>$S(t,s))),u(n,["requests","requests"],i)}return n}function fS(t){const e={},n=l(t,["format"]);n!=null&&u(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsSource","uris"],r);const o=l(t,["bigqueryUri"]);if(o!=null&&u(e,["bigquerySource","inputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function pS(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function hS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Io(t,r)),n}function mS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Io(t,r)),n}function gS(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],yS(r));const o=l(t,["tokenCount"]);o!=null&&u(e,["tokenCount"],o);const i=l(t,["finishReason"]);i!=null&&u(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&u(e,["avgLogprobs"],s);const a=l(t,["groundingMetadata"]);a!=null&&u(e,["groundingMetadata"],a);const c=l(t,["index"]);c!=null&&u(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),u(e,["safetyRatings"],m)}const h=l(t,["urlContextMetadata"]);return h!=null&&u(e,["urlContextMetadata"],h),e}function yS(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["citations"],r)}return e}function m0(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>YS(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function vS(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&u(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function _S(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["dest"]);return e!==void 0&&o!=null&&u(e,["outputConfig"],uS(sS(o))),n}function Xh(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["src"]);o!=null&&u(n,["batch","inputConfig"],dS(t,f0(t,o)));const i=l(e,["config"]);return i!=null&&vS(i,n),n}function wS(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],te(t,r));const o=l(e,["src"]);o!=null&&u(n,["inputConfig"],fS(f0(t,o)));const i=l(e,["config"]);return i!=null&&_S(i,n),n}function xS(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&u(e,["batch","displayName"],r),n}function ES(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["src"]);o!=null&&u(n,["batch","inputConfig"],RS(t,o));const i=l(e,["config"]);return i!=null&&xS(i,n),n}function SS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Io(t,r)),n}function TS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Io(t,r)),n}function CS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);return i!=null&&u(e,["error"],i),e}function IS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);return i!=null&&u(e,["error"],i),e}function AS(t,e){const n={},r=l(e,["contents"]);if(r!=null){let i=Cd(t,r);Array.isArray(i)&&(i=i.map(s=>s)),u(n,["requests[]","request","content"],i)}const o=l(e,["config"]);return o!=null&&(u(n,["_self"],NS(o,n)),TE(n,{"requests[].*":"requests[].request.*"})),n}function NS(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const o=l(t,["title"]);e!==void 0&&o!=null&&u(e,["requests[]","title"],o);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&u(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function RS(t,e){const n={},r=l(e,["fileName"]);r!=null&&u(n,["file_name"],r);const o=l(e,["inlinedRequests"]);return o!=null&&u(n,["requests"],AS(t,o)),n}function PS(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function kS(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function MS(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function DS(t,e,n){const r={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],m0(Je(o)));const i=l(e,["temperature"]);i!=null&&u(r,["temperature"],i);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&u(r,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&u(r,["presencePenalty"],g);const x=l(e,["frequencyPenalty"]);x!=null&&u(r,["frequencyPenalty"],x);const w=l(e,["seed"]);w!=null&&u(r,["seed"],w);const T=l(e,["responseMimeType"]);T!=null&&u(r,["responseMimeType"],T);const v=l(e,["responseSchema"]);v!=null&&u(r,["responseSchema"],Id(v));const y=l(e,["responseJsonSchema"]);if(y!=null&&u(r,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=l(e,["safetySettings"]);if(n!==void 0&&_!=null){let q=_;Array.isArray(q)&&(q=q.map(ne=>KS(ne))),u(n,["safetySettings"],q)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let q=Co(E);Array.isArray(q)&&(q=q.map(ne=>QS(To(ne)))),u(n,["tools"],q)}const I=l(e,["toolConfig"]);if(n!==void 0&&I!=null&&u(n,["toolConfig"],XS(I)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=l(e,["cachedContent"]);n!==void 0&&C!=null&&u(n,["cachedContent"],yn(t,C));const A=l(e,["responseModalities"]);A!=null&&u(r,["responseModalities"],A);const R=l(e,["mediaResolution"]);R!=null&&u(r,["mediaResolution"],R);const M=l(e,["speechConfig"]);if(M!=null&&u(r,["speechConfig"],Ad(M)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=l(e,["thinkingConfig"]);N!=null&&u(r,["thinkingConfig"],N);const G=l(e,["imageConfig"]);return G!=null&&u(r,["imageConfig"],VS(G)),r}function LS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>gS(d))),u(e,["candidates"],c)}const o=l(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const i=l(t,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function bS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Io(t,r)),n}function US(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Io(t,r)),n}function FS(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function GS(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function VS(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&u(e,["imageSize"],r),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function $S(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["request","model"],te(t,r));const o=l(e,["contents"]);if(o!=null){let a=It(o);Array.isArray(a)&&(a=a.map(c=>m0(c))),u(n,["request","contents"],a)}const i=l(e,["metadata"]);i!=null&&u(n,["metadata"],i);const s=l(e,["config"]);return s!=null&&u(n,["request","generationConfig"],DS(t,s,l(n,["request"],{}))),n}function BS(t){const e={},n=l(t,["response"]);n!=null&&u(e,["response"],LS(n));const r=l(t,["error"]);return r!=null&&u(e,["error"],r),e}function OS(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);if(e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function HS(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);e!==void 0&&o!=null&&u(e,["_query","pageToken"],o);const i=l(t,["filter"]);return e!==void 0&&i!=null&&u(e,["_query","filter"],i),n}function qS(t){const e={},n=l(t,["config"]);return n!=null&&OS(n,e),e}function zS(t){const e={},n=l(t,["config"]);return n!=null&&HS(n,e),e}function JS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Bs(s))),u(e,["batchJobs"],i)}return e}function WS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>uc(s))),u(e,["batchJobs"],i)}return e}function YS(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],PS(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],kS(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],pS(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&u(e,["videoMetadata"],m),e}function KS(t){const e={},n=l(t,["category"]);if(n!=null&&u(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function XS(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],MS(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function QS(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const i=l(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],FS(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],GS(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var hn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(hn||(hn={}));class Sr{constructor(e,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,o)}init(e,n,r){var o,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ZS=class extends gn{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Sr(hn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Xh(this.apiClient,e),r=n._url,o=L("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,c=a.requests,d=[];for(const f of c){const h=Object.assign({},f);if(h.systemInstruction){const m=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=m,h.request=g}d.push(h)}return a.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${o}`;else if(s)r.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=wS(this.apiClient,e);return a=L("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>uc(f))}else{const d=Xh(this.apiClient,e);return a=L("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Bs(f))}}async createEmbeddingsInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ES(this.apiClient,e);return i=L("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>Bs(c))}}async get(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=US(this.apiClient,e);return a=L("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>uc(f))}else{const d=bS(this.apiClient,e);return a=L("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Bs(f))}}async cancel(e){var n,r,o,i;let s="",a={};if(this.apiClient.isVertexAI()){const c=mS(this.apiClient,e);s=L("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=hS(this.apiClient,e);s=L("batches/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=zS(e);return a=L("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=WS(f),m=new Jh;return Object.assign(m,h),m})}else{const d=qS(e);return a=L("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=JS(f),m=new Jh;return Object.assign(m,h),m})}}async delete(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=TS(this.apiClient,e);return a=L("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>IS(f))}else{const d=SS(this.apiClient,e);return a=L("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>CS(f))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jS(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Qh(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>ET(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function eT(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);e!==void 0&&o!=null&&u(e,["expireTime"],o);const i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let f=It(s);Array.isArray(f)&&(f=f.map(h=>Qh(h))),u(e,["contents"],f)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],Qh(Je(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>TT(h))),u(e,["tools"],f)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&u(e,["toolConfig"],ST(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function tT(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);e!==void 0&&o!=null&&u(e,["expireTime"],o);const i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let h=It(s);Array.isArray(h)&&(h=h.map(m=>m)),u(e,["contents"],h)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],Je(a));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(m=>CT(m))),u(e,["tools"],h)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&u(e,["toolConfig"],d);const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&u(e,["encryption_spec","kmsKeyName"],f),n}function nT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],r0(t,r));const o=l(e,["config"]);return o!=null&&eT(o,n),n}function rT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],r0(t,r));const o=l(e,["config"]);return o!=null&&tT(o,n),n}function oT(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],yn(t,r)),n}function iT(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],yn(t,r)),n}function sT(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function lT(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function aT(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function uT(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cT(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dT(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const i=l(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function fT(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],yn(t,r)),n}function pT(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],yn(t,r)),n}function hT(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function mT(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function gT(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function yT(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function vT(t){const e={},n=l(t,["config"]);return n!=null&&gT(n,e),e}function _T(t){const e={},n=l(t,["config"]);return n!=null&&yT(n,e),e}function wT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function xT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function ET(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],aT(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],uT(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],jS(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&u(e,["videoMetadata"],m),e}function ST(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],cT(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function TT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const i=l(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],hT(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],mT(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function CT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>dT(m))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);const i=l(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function IT(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);return e!==void 0&&o!=null&&u(e,["expireTime"],o),n}function AT(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);return e!==void 0&&o!=null&&u(e,["expireTime"],o),n}function NT(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],yn(t,r));const o=l(e,["config"]);return o!=null&&IT(o,n),n}function RT(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],yn(t,r));const o=l(e,["config"]);return o!=null&&AT(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PT extends gn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Sr(hn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=rT(this.apiClient,e);return a=L("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=nT(this.apiClient,e);return a=L("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=pT(this.apiClient,e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=fT(this.apiClient,e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=iT(this.apiClient,e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=lT(f),m=new qh;return Object.assign(m,h),m})}else{const d=oT(this.apiClient,e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=sT(f),m=new qh;return Object.assign(m,h),m})}}async update(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=RT(this.apiClient,e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=NT(this.apiClient,e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=_T(e);return a=L("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=xT(f),m=new zh;return Object.assign(m,h),m})}else{const d=vT(e);return a=L("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=wT(f),m=new zh;return Object.assign(m,h),m})}}}function Zh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(t){return this instanceof ce?(this.v=t,this):new ce(t)}function lo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(g){return function(x){return Promise.resolve(x).then(g,h)}}function a(g,x){r[g]&&(o[g]=function(w){return new Promise(function(T,v){i.push([g,w,T,v])>1||c(g,w)})},x&&(o[g]=x(o[g])))}function c(g,x){try{d(r[g](x))}catch(w){m(i[0][3],w)}}function d(g){g.value instanceof ce?Promise.resolve(g.value.v).then(f,h):m(i[0][2],g)}function f(g){c("next",g)}function h(g){c("throw",g)}function m(g,x){g(x),i.shift(),i.length&&c(i[0][0],i[0][1])}}function yi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Zh=="function"?Zh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,c){s=t[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(d){i({value:d,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kT(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:g0(n)}function g0(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function MT(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function jh(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const o=[];let i=!0;for(;r<n&&t[r].role==="model";)o.push(t[r]),i&&!g0(t[r])&&(i=!1),r++;i?e.push(...o):e.pop()}return e}class DT{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new LT(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let LT=class{constructor(e,n,r,o={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),MT(i)}async sendMessage(e){var n;await this.sendPromise;const r=Je(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,a;const c=await o,d=(s=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];f!=null&&(m=(a=f.slice(h))!==null&&a!==void 0?a:[]);const g=d?[d]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const r=Je(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const i=await o;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?jh(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,o;return lo(this,arguments,function*(){var s,a,c,d;const f=[];try{for(var h=!0,m=yi(e),g;g=yield ce(m.next()),s=g.done,!s;h=!0){d=g.value,h=!1;const x=d;if(kT(x)){const w=(o=(r=x.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;w!==void 0&&f.push(w)}yield yield ce(x)}}catch(x){a={error:x}}finally{try{!h&&!s&&(c=m.return)&&(yield ce(c.call(m)))}finally{if(a)throw a.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let o=[];n.length>0&&n.every(i=>i.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...jh(r)):this.history.push(e),this.history.push(...o)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Xl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bT(t){const e={},n=l(t,["file"]);return n!=null&&u(e,["file"],n),e}function UT(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function FT(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],u0(n)),e}function GT(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function VT(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],u0(n)),e}function $T(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function BT(t){const e={},n=l(t,["config"]);return n!=null&&$T(n,e),e}function OT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let HT=class extends gn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Sr(hn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=BT(e);return i=L("files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=OT(c),f=new WE;return Object.assign(f,d),f})}}async createInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=bT(e);return i=L("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=UT(c),f=new YE;return Object.assign(f,d),f})}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=VT(e);return i=L("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=FT(e);return i=L("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=GT(c),f=new KE;return Object.assign(f,d),f})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Os(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function qT(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>sC(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function zT(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function JT(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WT(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const i=l(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function YT(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&u(e,["responseJsonSchema"],r);const o=l(t,["audioTimestamp"]);o!=null&&u(e,["audioTimestamp"],o);const i=l(t,["candidateCount"]);i!=null&&u(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&u(e,["enableAffectiveDialog"],s);const a=l(t,["frequencyPenalty"]);a!=null&&u(e,["frequencyPenalty"],a);const c=l(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&u(e,["mediaResolution"],f);const h=l(t,["presencePenalty"]);h!=null&&u(e,["presencePenalty"],h);const m=l(t,["responseLogprobs"]);m!=null&&u(e,["responseLogprobs"],m);const g=l(t,["responseMimeType"]);g!=null&&u(e,["responseMimeType"],g);const x=l(t,["responseModalities"]);x!=null&&u(e,["responseModalities"],x);const w=l(t,["responseSchema"]);w!=null&&u(e,["responseSchema"],w);const T=l(t,["routingConfig"]);T!=null&&u(e,["routingConfig"],T);const v=l(t,["seed"]);v!=null&&u(e,["seed"],v);const y=l(t,["speechConfig"]);y!=null&&u(e,["speechConfig"],y0(y));const _=l(t,["stopSequences"]);_!=null&&u(e,["stopSequences"],_);const E=l(t,["temperature"]);E!=null&&u(e,["temperature"],E);const I=l(t,["thinkingConfig"]);I!=null&&u(e,["thinkingConfig"],I);const C=l(t,["topK"]);C!=null&&u(e,["topK"],C);const A=l(t,["topP"]);if(A!=null&&u(e,["topP"],A),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function KT(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function XT(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function QT(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],Nd(h));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&u(e,["setup","systemInstruction"],qT(Je(x)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let C=Co(w);Array.isArray(C)&&(C=C.map(A=>aC(To(A)))),u(e,["setup","tools"],C)}const T=l(t,["sessionResumption"]);e!==void 0&&T!=null&&u(e,["setup","sessionResumption"],lC(T));const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],y);const _=l(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&u(e,["setup","realtimeInputConfig"],_);const E=l(t,["contextWindowCompression"]);e!==void 0&&E!=null&&u(e,["setup","contextWindowCompression"],E);const I=l(t,["proactivity"]);return e!==void 0&&I!=null&&u(e,["setup","proactivity"],I),n}function ZT(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],YT(r));const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],y0(Nd(h)));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&u(e,["setup","systemInstruction"],Je(x));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let C=Co(w);Array.isArray(C)&&(C=C.map(A=>uC(To(A)))),u(e,["setup","tools"],C)}const T=l(t,["sessionResumption"]);e!==void 0&&T!=null&&u(e,["setup","sessionResumption"],T);const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],y);const _=l(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&u(e,["setup","realtimeInputConfig"],_);const E=l(t,["contextWindowCompression"]);e!==void 0&&E!=null&&u(e,["setup","contextWindowCompression"],E);const I=l(t,["proactivity"]);return e!==void 0&&I!=null&&u(e,["setup","proactivity"],I),n}function jT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],te(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],QT(o,n)),n}function eC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],te(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],ZT(o,n)),n}function tC(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],n),e}function nC(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["weightedPrompts"],r)}return e}function rC(t){const e={},n=l(t,["media"]);if(n!=null){let d=o0(n);Array.isArray(d)&&(d=d.map(f=>Os(f))),u(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&u(e,["audio"],Os(s0(r)));const o=l(t,["audioStreamEnd"]);o!=null&&u(e,["audioStreamEnd"],o);const i=l(t,["video"]);i!=null&&u(e,["video"],Os(i0(i)));const s=l(t,["text"]);s!=null&&u(e,["text"],s);const a=l(t,["activityStart"]);a!=null&&u(e,["activityStart"],a);const c=l(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function oC(t){const e={},n=l(t,["media"]);if(n!=null){let d=o0(n);Array.isArray(d)&&(d=d.map(f=>f)),u(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&u(e,["audio"],s0(r));const o=l(t,["audioStreamEnd"]);o!=null&&u(e,["audioStreamEnd"],o);const i=l(t,["video"]);i!=null&&u(e,["video"],i0(i));const s=l(t,["text"]);s!=null&&u(e,["text"],s);const a=l(t,["activityStart"]);a!=null&&u(e,["activityStart"],a);const c=l(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function iC(t){const e={},n=l(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],n);const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],r);const o=l(t,["toolCall"]);o!=null&&u(e,["toolCall"],o);const i=l(t,["toolCallCancellation"]);i!=null&&u(e,["toolCallCancellation"],i);const s=l(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],cC(s));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],a);const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],c),e}function sC(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],zT(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],JT(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],Os(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&u(e,["videoMetadata"],m),e}function lC(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function y0(t){const e={},n=l(t,["languageCode"]);n!=null&&u(e,["languageCode"],n);const r=l(t,["voiceConfig"]);if(r!=null&&u(e,["voiceConfig"],r),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function aC(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const i=l(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],KT(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],XT(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function uC(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>WT(m))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);const i=l(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function cC(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const o=l(t,["candidatesTokenCount"]);o!=null&&u(e,["responseTokenCount"],o);const i=l(t,["toolUsePromptTokenCount"]);i!=null&&u(e,["toolUsePromptTokenCount"],i);const s=l(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(x=>x)),u(e,["promptTokensDetails"],g)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(x=>x)),u(e,["cacheTokensDetails"],g)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(x=>x)),u(e,["responseTokensDetails"],g)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(x=>x)),u(e,["toolUsePromptTokensDetails"],g)}const m=l(t,["trafficType"]);return m!=null&&u(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dC(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function fC(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],pC(r));const o=l(t,["tokenCount"]);o!=null&&u(e,["tokenCount"],o);const i=l(t,["finishReason"]);i!=null&&u(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&u(e,["avgLogprobs"],s);const a=l(t,["groundingMetadata"]);a!=null&&u(e,["groundingMetadata"],a);const c=l(t,["index"]);c!=null&&u(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),u(e,["safetyRatings"],m)}const h=l(t,["urlContextMetadata"]);return h!=null&&u(e,["urlContextMetadata"],h),e}function pC(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["citations"],r)}return e}function hC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["contents"]);if(o!=null){let i=It(o);Array.isArray(i)&&(i=i.map(s=>s)),u(n,["contents"],i)}return n}function mC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),u(e,["tokensInfo"],o)}return e}function gC(t){const e={},n=l(t,["values"]);n!=null&&u(e,["values"],n);const r=l(t,["statistics"]);return r!=null&&u(e,["statistics"],yC(r)),e}function yC(t){const e={},n=l(t,["truncated"]);n!=null&&u(e,["truncated"],n);const r=l(t,["token_count"]);return r!=null&&u(e,["tokenCount"],r),e}function Ql(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>II(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function vC(t){const e={},n=l(t,["controlType"]);n!=null&&u(e,["controlType"],n);const r=l(t,["enableControlImageComputation"]);return r!=null&&u(e,["computeControl"],r),e}function _C(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function wC(t,e){const n={},r=l(t,["systemInstruction"]);e!==void 0&&r!=null&&u(e,["systemInstruction"],Je(r));const o=l(t,["tools"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>E0(a))),u(e,["tools"],s)}const i=l(t,["generationConfig"]);return e!==void 0&&i!=null&&u(e,["generationConfig"],dI(i)),n}function xC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["contents"]);if(o!=null){let s=It(o);Array.isArray(s)&&(s=s.map(a=>Ql(a))),u(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&_C(i),n}function EC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["contents"]);if(o!=null){let s=It(o);Array.isArray(s)&&(s=s.map(a=>a)),u(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&wC(i,n),n}function SC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);r!=null&&u(e,["totalTokens"],r);const o=l(t,["cachedContentTokenCount"]);return o!=null&&u(e,["cachedContentTokenCount"],o),e}function TC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);return r!=null&&u(e,["totalTokens"],r),e}function CC(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],te(t,r)),n}function IC(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],te(t,r)),n}function AC(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function NC(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function RC(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(t,["negativePrompt"]);e!==void 0&&o!=null&&u(e,["parameters","negativePrompt"],o);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&u(e,["parameters","includeRaiReason"],m);const g=l(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);const x=l(t,["outputMimeType"]);e!==void 0&&x!=null&&u(e,["parameters","outputOptions","mimeType"],x);const w=l(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","compressionQuality"],w);const T=l(t,["addWatermark"]);e!==void 0&&T!=null&&u(e,["parameters","addWatermark"],T);const v=l(t,["labels"]);e!==void 0&&v!=null&&u(e,["labels"],v);const y=l(t,["editMode"]);e!==void 0&&y!=null&&u(e,["parameters","editMode"],y);const _=l(t,["baseSteps"]);return e!==void 0&&_!=null&&u(e,["parameters","editConfig","baseSteps"],_),n}function PC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const i=l(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>MI(c))),u(n,["instances[0]","referenceImages"],a)}const s=l(e,["config"]);return s!=null&&RC(s,n),n}function kC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Zl(i))),u(e,["generatedImages"],o)}return e}function MC(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const o=l(t,["title"]);e!==void 0&&o!=null&&u(e,["requests[]","title"],o);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&u(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function DC(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["instances[]","task_type"],r);const o=l(t,["title"]);e!==void 0&&o!=null&&u(e,["instances[]","title"],o);const i=l(t,["outputDimensionality"]);e!==void 0&&i!=null&&u(e,["parameters","outputDimensionality"],i);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&u(e,["instances[]","mimeType"],s);const a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&u(e,["parameters","autoTruncate"],a),n}function LC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["contents"]);if(o!=null){let a=Cd(t,o);Array.isArray(a)&&(a=a.map(c=>c)),u(n,["requests[]","content"],a)}const i=l(e,["config"]);i!=null&&MC(i,n);const s=l(e,["model"]);return s!==void 0&&u(n,["requests[]","model"],te(t,s)),n}function bC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["contents"]);if(o!=null){let s=Cd(t,o);Array.isArray(s)&&(s=s.map(a=>a)),u(n,["instances[]","content"],s)}const i=l(e,["config"]);return i!=null&&DC(i,n),n}function UC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["embeddings"],i)}const o=l(t,["metadata"]);return o!=null&&u(e,["metadata"],o),e}function FC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>gC(s))),u(e,["embeddings"],i)}const o=l(t,["metadata"]);return o!=null&&u(e,["metadata"],o),e}function GC(t){const e={},n=l(t,["endpoint"]);n!=null&&u(e,["name"],n);const r=l(t,["deployedModelId"]);return r!=null&&u(e,["deployedModelId"],r),e}function VC(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function $C(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function BC(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function OC(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const i=l(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function HC(t,e,n){const r={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],Ql(Je(o)));const i=l(e,["temperature"]);i!=null&&u(r,["temperature"],i);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&u(r,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&u(r,["presencePenalty"],g);const x=l(e,["frequencyPenalty"]);x!=null&&u(r,["frequencyPenalty"],x);const w=l(e,["seed"]);w!=null&&u(r,["seed"],w);const T=l(e,["responseMimeType"]);T!=null&&u(r,["responseMimeType"],T);const v=l(e,["responseSchema"]);v!=null&&u(r,["responseSchema"],Id(v));const y=l(e,["responseJsonSchema"]);if(y!=null&&u(r,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=l(e,["safetySettings"]);if(n!==void 0&&_!=null){let q=_;Array.isArray(q)&&(q=q.map(ne=>DI(ne))),u(n,["safetySettings"],q)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let q=Co(E);Array.isArray(q)&&(q=q.map(ne=>$I(To(ne)))),u(n,["tools"],q)}const I=l(e,["toolConfig"]);if(n!==void 0&&I!=null&&u(n,["toolConfig"],VI(I)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=l(e,["cachedContent"]);n!==void 0&&C!=null&&u(n,["cachedContent"],yn(t,C));const A=l(e,["responseModalities"]);A!=null&&u(r,["responseModalities"],A);const R=l(e,["mediaResolution"]);R!=null&&u(r,["mediaResolution"],R);const M=l(e,["speechConfig"]);if(M!=null&&u(r,["speechConfig"],Ad(M)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=l(e,["thinkingConfig"]);N!=null&&u(r,["thinkingConfig"],N);const G=l(e,["imageConfig"]);return G!=null&&u(r,["imageConfig"],gI(G)),r}function qC(t,e,n){const r={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],Je(o));const i=l(e,["temperature"]);i!=null&&u(r,["temperature"],i);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&u(r,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&u(r,["presencePenalty"],g);const x=l(e,["frequencyPenalty"]);x!=null&&u(r,["frequencyPenalty"],x);const w=l(e,["seed"]);w!=null&&u(r,["seed"],w);const T=l(e,["responseMimeType"]);T!=null&&u(r,["responseMimeType"],T);const v=l(e,["responseSchema"]);v!=null&&u(r,["responseSchema"],Id(v));const y=l(e,["responseJsonSchema"]);y!=null&&u(r,["responseJsonSchema"],y);const _=l(e,["routingConfig"]);_!=null&&u(r,["routingConfig"],_);const E=l(e,["modelSelectionConfig"]);E!=null&&u(r,["modelConfig"],E);const I=l(e,["safetySettings"]);if(n!==void 0&&I!=null){let Ce=I;Array.isArray(Ce)&&(Ce=Ce.map(Ue=>Ue)),u(n,["safetySettings"],Ce)}const C=l(e,["tools"]);if(n!==void 0&&C!=null){let Ce=Co(C);Array.isArray(Ce)&&(Ce=Ce.map(Ue=>E0(To(Ue)))),u(n,["tools"],Ce)}const A=l(e,["toolConfig"]);n!==void 0&&A!=null&&u(n,["toolConfig"],A);const R=l(e,["labels"]);n!==void 0&&R!=null&&u(n,["labels"],R);const M=l(e,["cachedContent"]);n!==void 0&&M!=null&&u(n,["cachedContent"],yn(t,M));const N=l(e,["responseModalities"]);N!=null&&u(r,["responseModalities"],N);const G=l(e,["mediaResolution"]);G!=null&&u(r,["mediaResolution"],G);const q=l(e,["speechConfig"]);q!=null&&u(r,["speechConfig"],x0(Ad(q)));const ne=l(e,["audioTimestamp"]);ne!=null&&u(r,["audioTimestamp"],ne);const Ye=l(e,["thinkingConfig"]);Ye!=null&&u(r,["thinkingConfig"],Ye);const Se=l(e,["imageConfig"]);return Se!=null&&u(r,["imageConfig"],yI(Se)),r}function em(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["contents"]);if(o!=null){let s=It(o);Array.isArray(s)&&(s=s.map(a=>Ql(a))),u(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&u(n,["generationConfig"],HC(t,i,n)),n}function tm(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["contents"]);if(o!=null){let s=It(o);Array.isArray(s)&&(s=s.map(a=>a)),u(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&u(n,["generationConfig"],qC(t,i,n)),n}function nm(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>fC(d))),u(e,["candidates"],c)}const o=l(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const i=l(t,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function rm(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),u(e,["candidates"],d)}const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const s=l(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const a=l(t,["responseId"]);a!=null&&u(e,["responseId"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function zC(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o);const i=l(t,["guidanceScale"]);if(e!==void 0&&i!=null&&u(e,["parameters","guidanceScale"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&u(e,["parameters","safetySetting"],s);const a=l(t,["personGeneration"]);e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&u(e,["parameters","includeRaiReason"],d);const f=l(t,["language"]);e!==void 0&&f!=null&&u(e,["parameters","language"],f);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","mimeType"],h);const m=l(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&u(e,["parameters","outputOptions","compressionQuality"],m),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=l(t,["imageSize"]);if(e!==void 0&&g!=null&&u(e,["parameters","sampleImageSize"],g),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function JC(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(t,["negativePrompt"]);e!==void 0&&o!=null&&u(e,["parameters","negativePrompt"],o);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&u(e,["parameters","includeRaiReason"],m);const g=l(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);const x=l(t,["outputMimeType"]);e!==void 0&&x!=null&&u(e,["parameters","outputOptions","mimeType"],x);const w=l(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","compressionQuality"],w);const T=l(t,["addWatermark"]);e!==void 0&&T!=null&&u(e,["parameters","addWatermark"],T);const v=l(t,["labels"]);e!==void 0&&v!=null&&u(e,["labels"],v);const y=l(t,["imageSize"]);e!==void 0&&y!=null&&u(e,["parameters","sampleImageSize"],y);const _=l(t,["enhancePrompt"]);return e!==void 0&&_!=null&&u(e,["parameters","enhancePrompt"],_),n}function WC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const i=l(e,["config"]);return i!=null&&zC(i,n),n}function YC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const i=l(e,["config"]);return i!=null&&JC(i,n),n}function KC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>lI(s))),u(e,["generatedImages"],i)}const o=l(t,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],_0(o)),e}function XC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Zl(s))),u(e,["generatedImages"],i)}const o=l(t,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],w0(o)),e}function QC(t,e){const n={},r=l(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(t,["durationSeconds"]);if(e!==void 0&&o!=null&&u(e,["parameters","durationSeconds"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);const s=l(t,["resolution"]);e!==void 0&&s!=null&&u(e,["parameters","resolution"],s);const a=l(t,["personGeneration"]);if(e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&u(e,["parameters","negativePrompt"],c);const d=l(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&u(e,["parameters","enhancePrompt"],d),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=l(t,["lastFrame"]);e!==void 0&&f!=null&&u(e,["instances[0]","lastFrame"],jl(f));const h=l(t,["referenceImages"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>jI(g))),u(e,["instances[0]","referenceImages"],m)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ZC(t,e){const n={},r=l(t,["numberOfVideos"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const i=l(t,["fps"]);e!==void 0&&i!=null&&u(e,["parameters","fps"],i);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s);const a=l(t,["seed"]);e!==void 0&&a!=null&&u(e,["parameters","seed"],a);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&u(e,["parameters","resolution"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const h=l(t,["pubsubTopic"]);e!==void 0&&h!=null&&u(e,["parameters","pubsubTopic"],h);const m=l(t,["negativePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","negativePrompt"],m);const g=l(t,["enhancePrompt"]);e!==void 0&&g!=null&&u(e,["parameters","enhancePrompt"],g);const x=l(t,["generateAudio"]);e!==void 0&&x!=null&&u(e,["parameters","generateAudio"],x);const w=l(t,["lastFrame"]);e!==void 0&&w!=null&&u(e,["instances[0]","lastFrame"],Vt(w));const T=l(t,["referenceImages"]);if(e!==void 0&&T!=null){let _=T;Array.isArray(_)&&(_=_.map(E=>eA(E))),u(e,["instances[0]","referenceImages"],_)}const v=l(t,["mask"]);e!==void 0&&v!=null&&u(e,["instances[0]","mask"],ZI(v));const y=l(t,["compressionQuality"]);return e!==void 0&&y!=null&&u(e,["parameters","compressionQuality"],y),n}function jC(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],rI(s)),e}function eI(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],oI(s)),e}function tI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const i=l(e,["image"]);i!=null&&u(n,["instances[0]","image"],jl(i));const s=l(e,["video"]);s!=null&&u(n,["instances[0]","video"],S0(s));const a=l(e,["source"]);a!=null&&iI(a,n);const c=l(e,["config"]);return c!=null&&QC(c,n),n}function nI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const i=l(e,["image"]);i!=null&&u(n,["instances[0]","image"],Vt(i));const s=l(e,["video"]);s!=null&&u(n,["instances[0]","video"],T0(s));const a=l(e,["source"]);a!=null&&sI(a,n);const c=l(e,["config"]);return c!=null&&ZC(c,n),n}function rI(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>uI(s))),u(e,["generatedVideos"],i)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function oI(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>cI(s))),u(e,["generatedVideos"],i)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function iI(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],jl(o));const i=l(t,["video"]);return e!==void 0&&i!=null&&u(e,["instances[0]","video"],S0(i)),n}function sI(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],Vt(o));const i=l(t,["video"]);return e!==void 0&&i!=null&&u(e,["instances[0]","video"],T0(i)),n}function lI(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],vI(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const o=l(t,["_self"]);return o!=null&&u(e,["safetyAttributes"],_0(o)),e}function Zl(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],v0(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const o=l(t,["_self"]);o!=null&&u(e,["safetyAttributes"],w0(o));const i=l(t,["prompt"]);return i!=null&&u(e,["enhancedPrompt"],i),e}function aI(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["mask"],v0(n));const r=l(t,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),u(e,["labels"],o)}return e}function uI(t){const e={},n=l(t,["video"]);return n!=null&&u(e,["video"],XI(n)),e}function cI(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],QI(n)),e}function dI(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&u(e,["responseJsonSchema"],r);const o=l(t,["audioTimestamp"]);o!=null&&u(e,["audioTimestamp"],o);const i=l(t,["candidateCount"]);i!=null&&u(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&u(e,["enableAffectiveDialog"],s);const a=l(t,["frequencyPenalty"]);a!=null&&u(e,["frequencyPenalty"],a);const c=l(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&u(e,["mediaResolution"],f);const h=l(t,["presencePenalty"]);h!=null&&u(e,["presencePenalty"],h);const m=l(t,["responseLogprobs"]);m!=null&&u(e,["responseLogprobs"],m);const g=l(t,["responseMimeType"]);g!=null&&u(e,["responseMimeType"],g);const x=l(t,["responseModalities"]);x!=null&&u(e,["responseModalities"],x);const w=l(t,["responseSchema"]);w!=null&&u(e,["responseSchema"],w);const T=l(t,["routingConfig"]);T!=null&&u(e,["routingConfig"],T);const v=l(t,["seed"]);v!=null&&u(e,["seed"],v);const y=l(t,["speechConfig"]);y!=null&&u(e,["speechConfig"],x0(y));const _=l(t,["stopSequences"]);_!=null&&u(e,["stopSequences"],_);const E=l(t,["temperature"]);E!=null&&u(e,["temperature"],E);const I=l(t,["thinkingConfig"]);I!=null&&u(e,["thinkingConfig"],I);const C=l(t,["topK"]);C!=null&&u(e,["topK"],C);const A=l(t,["topP"]);if(A!=null&&u(e,["topP"],A),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function fI(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],te(t,r)),n}function pI(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],te(t,r)),n}function hI(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function mI(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function gI(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&u(e,["imageSize"],r),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function yI(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);r!=null&&u(e,["imageSize"],r);const o=l(t,["outputMimeType"]);o!=null&&u(e,["imageOutputOptions","mimeType"],o);const i=l(t,["outputCompressionQuality"]);return i!=null&&u(e,["imageOutputOptions","compressionQuality"],i),e}function vI(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],Yn(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function v0(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["imageBytes"],Yn(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function jl(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],Yn(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Vt(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["imageBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Yn(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function _I(t,e,n){const r={},o=l(e,["pageSize"]);n!==void 0&&o!=null&&u(n,["_query","pageSize"],o);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&u(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],c0(t,a)),r}function wI(t,e,n){const r={},o=l(e,["pageSize"]);n!==void 0&&o!=null&&u(n,["_query","pageSize"],o);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&u(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],c0(t,a)),r}function xI(t,e){const n={},r=l(e,["config"]);return r!=null&&_I(t,r,n),n}function EI(t,e){const n={},r=l(e,["config"]);return r!=null&&wI(t,r,n),n}function SI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["_self"]);if(o!=null){let i=d0(o);Array.isArray(i)&&(i=i.map(s=>cc(s))),u(e,["models"],i)}return e}function TI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["_self"]);if(o!=null){let i=d0(o);Array.isArray(i)&&(i=i.map(s=>dc(s))),u(e,["models"],i)}return e}function CI(t){const e={},n=l(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);const r=l(t,["segmentationClasses"]);r!=null&&u(e,["maskClasses"],r);const o=l(t,["maskDilation"]);return o!=null&&u(e,["dilation"],o),e}function cc(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);o!=null&&u(e,["description"],o);const i=l(t,["version"]);i!=null&&u(e,["version"],i);const s=l(t,["_self"]);s!=null&&u(e,["tunedModelInfo"],BI(s));const a=l(t,["inputTokenLimit"]);a!=null&&u(e,["inputTokenLimit"],a);const c=l(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);d!=null&&u(e,["supportedActions"],d);const f=l(t,["temperature"]);f!=null&&u(e,["temperature"],f);const h=l(t,["maxTemperature"]);h!=null&&u(e,["maxTemperature"],h);const m=l(t,["topP"]);m!=null&&u(e,["topP"],m);const g=l(t,["topK"]);g!=null&&u(e,["topK"],g);const x=l(t,["thinking"]);return x!=null&&u(e,["thinking"],x),e}function dc(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);o!=null&&u(e,["description"],o);const i=l(t,["versionId"]);i!=null&&u(e,["version"],i);const s=l(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(m=>GC(m))),u(e,["endpoints"],h)}const a=l(t,["labels"]);a!=null&&u(e,["labels"],a);const c=l(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],OI(c));const d=l(t,["defaultCheckpointId"]);d!=null&&u(e,["defaultCheckpointId"],d);const f=l(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>m)),u(e,["checkpoints"],h)}return e}function II(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],VC(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],$C(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],dC(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&u(e,["videoMetadata"],m),e}function AI(t){const e={},n=l(t,["productImage"]);return n!=null&&u(e,["image"],Vt(n)),e}function NI(t,e){const n={},r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(t,["baseSteps"]);e!==void 0&&o!=null&&u(e,["parameters","baseSteps"],o);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const s=l(t,["seed"]);e!==void 0&&s!=null&&u(e,["parameters","seed"],s);const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&u(e,["parameters","safetySetting"],a);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&u(e,["parameters","addWatermark"],d);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","mimeType"],f);const h=l(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","compressionQuality"],h);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","enhancePrompt"],m);const g=l(t,["labels"]);return e!==void 0&&g!=null&&u(e,["labels"],g),n}function RI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["source"]);o!=null&&kI(o,n);const i=l(e,["config"]);return i!=null&&NI(i,n),n}function PI(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Zl(o))),u(e,["generatedImages"],r)}return e}function kI(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["personImage"]);e!==void 0&&o!=null&&u(e,["instances[0]","personImage","image"],Vt(o));const i=l(t,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>AI(a))),u(e,["instances[0]","productImages"],s)}return n}function MI(t){const e={},n=l(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],Vt(n));const r=l(t,["referenceId"]);r!=null&&u(e,["referenceId"],r);const o=l(t,["referenceType"]);o!=null&&u(e,["referenceType"],o);const i=l(t,["maskImageConfig"]);i!=null&&u(e,["maskImageConfig"],CI(i));const s=l(t,["controlImageConfig"]);s!=null&&u(e,["controlImageConfig"],vC(s));const a=l(t,["styleImageConfig"]);a!=null&&u(e,["styleImageConfig"],a);const c=l(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],c),e}function _0(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const o=l(t,["contentType"]);return o!=null&&u(e,["contentType"],o),e}function w0(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const o=l(t,["contentType"]);return o!=null&&u(e,["contentType"],o),e}function DI(t){const e={},n=l(t,["category"]);if(n!=null&&u(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function LI(t){const e={},n=l(t,["image"]);return n!=null&&u(e,["image"],Vt(n)),e}function bI(t,e){const n={},r=l(t,["mode"]);e!==void 0&&r!=null&&u(e,["parameters","mode"],r);const o=l(t,["maxPredictions"]);e!==void 0&&o!=null&&u(e,["parameters","maxPredictions"],o);const i=l(t,["confidenceThreshold"]);e!==void 0&&i!=null&&u(e,["parameters","confidenceThreshold"],i);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&u(e,["parameters","maskDilation"],s);const a=l(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&u(e,["parameters","binaryColorThreshold"],a);const c=l(t,["labels"]);return e!==void 0&&c!=null&&u(e,["labels"],c),n}function UI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["source"]);o!=null&&GI(o,n);const i=l(e,["config"]);return i!=null&&bI(i,n),n}function FI(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>aI(o))),u(e,["generatedMasks"],r)}return e}function GI(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],Vt(o));const i=l(t,["scribbleImage"]);return e!==void 0&&i!=null&&u(e,["instances[0]","scribble"],LI(i)),n}function x0(t){const e={},n=l(t,["languageCode"]);n!=null&&u(e,["languageCode"],n);const r=l(t,["voiceConfig"]);if(r!=null&&u(e,["voiceConfig"],r),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function VI(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],BC(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function $I(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const i=l(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],hI(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],mI(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function E0(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>OC(m))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);const i=l(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function BI(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(t,["updateTime"]);return o!=null&&u(e,["updateTime"],o),e}function OI(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(t,["updateTime"]);return o!=null&&u(e,["updateTime"],o),e}function HI(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);e!==void 0&&o!=null&&u(e,["description"],o);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&u(e,["defaultCheckpointId"],i),n}function qI(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);e!==void 0&&o!=null&&u(e,["description"],o);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&u(e,["defaultCheckpointId"],i),n}function zI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],te(t,r));const o=l(e,["config"]);return o!=null&&HI(o,n),n}function JI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["config"]);return o!=null&&qI(o,n),n}function WI(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&u(e,["parameters","safetySetting"],o);const i=l(t,["personGeneration"]);e!==void 0&&i!=null&&u(e,["parameters","personGeneration"],i);const s=l(t,["includeRaiReason"]);e!==void 0&&s!=null&&u(e,["parameters","includeRaiReason"],s);const a=l(t,["outputMimeType"]);e!==void 0&&a!=null&&u(e,["parameters","outputOptions","mimeType"],a);const c=l(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&u(e,["parameters","outputOptions","compressionQuality"],c);const d=l(t,["enhanceInputImage"]);e!==void 0&&d!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=l(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const h=l(t,["labels"]);e!==void 0&&h!=null&&u(e,["labels"],h);const m=l(t,["numberOfImages"]);e!==void 0&&m!=null&&u(e,["parameters","sampleCount"],m);const g=l(t,["mode"]);return e!==void 0&&g!=null&&u(e,["parameters","mode"],g),n}function YI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],te(t,r));const o=l(e,["image"]);o!=null&&u(n,["instances[0]","image"],Vt(o));const i=l(e,["upscaleFactor"]);i!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=l(e,["config"]);return s!=null&&WI(s,n),n}function KI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Zl(i))),u(e,["generatedImages"],o)}return e}function XI(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&u(e,["videoBytes"],Yn(r));const o=l(t,["encoding"]);return o!=null&&u(e,["mimeType"],o),e}function QI(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],Yn(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function ZI(t){const e={},n=l(t,["image"]);n!=null&&u(e,["_self"],Vt(n));const r=l(t,["maskMode"]);return r!=null&&u(e,["maskMode"],r),e}function jI(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],jl(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function eA(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],Vt(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function S0(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["encodedVideo"],Yn(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["encoding"],o),e}function T0(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Yn(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tA="Content-Type",nA="X-Server-Timeout",rA="User-Agent",fc="x-goog-api-client",oA="1.30.0",iA=`google-genai-sdk/${oA}`,sA="v1beta1",lA="v1beta",om=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class aA{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:sA,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:lA,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))o.searchParams.append(s,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.unaryApiCall(o,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[o,i]of Object.entries(n))typeof i=="object"?r[o]=Object.assign(Object.assign({},r[o]),i):i!==void 0&&(r[o]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.streamApiCall(o,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,o){if(n&&n.timeout||o){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&uA(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await im(o),new lc(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await im(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return lo(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="";for(;;){const{done:a,value:c}=yield ce(o.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=i.decode(c,{stream:!0});try{const h=JSON.parse(d);if("error"in h){const m=JSON.parse(JSON.stringify(h.error)),g=m.status,x=m.code,w=`got status: ${g}. ${JSON.stringify(h)}`;if(x>=400&&x<600)throw new Xl({message:w,status:x})}}catch(h){if(h.name==="ApiError")throw h}s+=d;let f=s.match(om);for(;f;){const h=f[1];try{const m=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ce(new lc(m)),s=s.slice(f[0].length),f=s.match(om)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=iA+" "+this.clientOptions.userAgentExtra;return e[rA]=n,e[fc]=n,e[tA]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[o,i]of Object.entries(e.headers))r.append(o,i);e.timeout&&e.timeout>0&&r.append(nA,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const i=this.clientOptions.uploader,s=await i.stat(e);o.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const c={file:o},d=this.getFileName(e),f=L("upload/v1beta/files",c._url),h=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,d,c,n==null?void 0:n.httpOptions);return i.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var o;const i=this.clientOptions.uploader,s=await i.stat(n),a=String(s.size),c=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),h={};r!=null&&r.customMetadata&&(h.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(h.chunkingConfig=r.chunkingConfig);const m=await this.fetchUploadUrl(d,a,c,f,h,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,o,i,s){var a;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(a=d==null?void 0:d.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function im(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new Xl({message:o,status:n}):new Error(o)}}function uA(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,s){const a=Object.assign({},i);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=a[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?a[c]=r(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),a[c]=d)}return a}const o=r(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cA="mcp_used/unknown";let dA=!1;function C0(t){for(const e of t)if(fA(e)||typeof e=="object"&&"inputSchema"in e)return!0;return dA}function I0(t){var e;const n=(e=t[fc])!==null&&e!==void 0?e:"";t[fc]=(n+` ${cA}`).trimStart()}function fA(t){return t!==null&&typeof t=="object"&&t instanceof Rd}function pA(t,e=100){return lo(this,arguments,function*(){let r,o=0;for(;o<e;){const i=yield ce(t.listTools({cursor:r}));for(const s of i.tools)yield yield ce(s),o++;if(!i.nextCursor)break;r=i.nextCursor}})}class Rd{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Rd(e,n)}async initialize(){var e,n,r,o;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var a=!0,c=(n=void 0,yi(pA(f))),d;d=await c.next(),e=d.done,!e;a=!0){o=d.value,a=!1;const h=o;s.push(h);const m=h.name;if(i[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);i[m]=f}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),iS(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await o.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function hA(t,e,n){const r=new QE;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),e(r)}class mA{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=vA(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let d=()=>{};const f=new Promise(_=>{d=_}),h=e.callbacks,m=function(){d({})},g=this.apiClient,x={onopen:m,onmessage:_=>{hA(g,h.onmessage,_)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(_){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(_){}},w=this.webSocketFactory.create(c,yA(s),x);w.connect(),await f;const y={setup:{model:te(this.apiClient,e.model)}};return w.send(JSON.stringify(y)),new gA(w,this.apiClient)}}class gA{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=nC(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=tC(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Zr.PLAY)}pause(){this.sendPlaybackControl(Zr.PAUSE)}stop(){this.sendPlaybackControl(Zr.STOP)}resetContext(){this.sendPlaybackControl(Zr.RESET_CONTEXT)}close(){this.conn.close()}}function yA(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function vA(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _A="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function wA(t,e,n){const r=new XE;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const i=JSON.parse(o);if(t.isVertexAI()){const s=iC(i);Object.assign(r,s)}else Object.assign(r,i);e(r)}class xA{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new mA(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,o,i,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&C0(e.config.tools)&&I0(h);const m=CA(h);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,f);else{const M=this.apiClient.getApiKey();let N="BidiGenerateContent",G="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",G="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${N}?${G}=${M}`}let g=()=>{};const x=new Promise(M=>{g=M}),w=e.callbacks,T=function(){var M;(M=w==null?void 0:w.onopen)===null||M===void 0||M.call(w),g({})},v=this.apiClient,y={onopen:T,onmessage:M=>{wA(v,w.onmessage,M)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(M){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(M){}},_=this.webSocketFactory.create(f,TA(m),y);_.connect(),await x;let E=te(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const M=this.apiClient.getProject(),N=this.apiClient.getLocation();E=`projects/${M}/locations/${N}/`+E}let I={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Cl.AUDIO]}:e.config.responseModalities=[Cl.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],A=[];for(const M of C)if(this.isCallableTool(M)){const N=M;A.push(await N.tool())}else A.push(M);A.length>0&&(e.config.tools=A);const R={model:E,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=eC(this.apiClient,R):I=jT(this.apiClient,R),delete I.config,_.send(JSON.stringify(I)),new SA(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const EA={turnComplete:!0};class SA{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=It(n.turns),e.isVertexAI()||(r=r.map(o=>Ql(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(_A)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},EA),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:oC(e)}:n={realtimeInput:rC(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function TA(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function CA(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sm=10;function lm(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ao(s)){o=!0;break}if(!o)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function ao(t){return"callTool"in t&&typeof t.callTool=="function"}function IA(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>ao(o)))!==null&&r!==void 0?r:!1}function am(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,o)=>{if(ao(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(o)}),n}function um(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let AA=class extends gn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,o,i,s,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!IA(n)||lm(n.config))return await this.generateContentInternal(c);const d=am(n);if(d.length>0){const w=d.map(T=>`tools[${T}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let f,h;const m=It(c.contents),g=(i=(o=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:sm;let x=0;for(;x<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const w=f.candidates[0].content,T=[];for(const v of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(ao(v)){const _=await v.callTool(f.functionCalls);T.push(..._)}x++,h={role:"user",parts:T},c.contents=It(c.contents),c.contents.push(w),c.contents.push(h),um(c.config)&&(m.push(w),m.push(h))}return um(c.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async n=>{var r,o,i,s,a;if(this.maybeMoveToResponseJsonSchem(n),lm(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const c=am(n);if(c.length>0){const h=c.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let i;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((o=c==null?void 0:c.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:s.push(c);let a;return i?a={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Sr(hn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,i,s,a,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,o;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const s=await Promise.all(i.map(async c=>ao(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&C0(e.config.tools)){const c=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),I0(d),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return a}async initAfcToolsMap(e){var n,r,o;const i=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ao(s)){const a=s,c=await a.tool();for(const d of(o=c.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,a)}}return i}async processAfcStream(e){var n,r,o;const i=(o=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:sm;let s=!1,a=0;const c=await this.initAfcToolsMap(e);return function(d,f,h){var m,g;return lo(this,arguments,function*(){for(var x,w,T,v;a<i;){s&&(a++,s=!1);const I=yield ce(d.processParamsMaybeAddMcpUsage(h)),C=yield ce(d.generateContentStreamInternal(I)),A=[],R=[];try{for(var y=!0,_=(w=void 0,yi(C)),E;E=yield ce(_.next()),x=E.done,!x;y=!0){v=E.value,y=!1;const M=v;if(yield yield ce(M),M.candidates&&(!((m=M.candidates[0])===null||m===void 0)&&m.content)){R.push(M.candidates[0].content);for(const N of(g=M.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(a<i&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(N.functionCall.name)){const G=yield ce(f.get(N.functionCall.name).callTool([N.functionCall]));A.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(M){w={error:M}}finally{try{!y&&!x&&(T=_.return)&&(yield ce(T.call(_)))}finally{if(w)throw w.error}}if(A.length>0){s=!0;const M=new Xo;M.candidates=[{content:{role:"user",parts:A}}],yield yield ce(M);const N=[];N.push(...R),N.push({role:"user",parts:A});const G=It(h.contents).concat(N);h.contents=G}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=tm(this.apiClient,e);return a=L("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=rm(f),m=new Xo;return Object.assign(m,h),m})}else{const d=em(this.apiClient,e);return a=L("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=nm(f),m=new Xo;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=tm(this.apiClient,e);return a=L("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return lo(this,arguments,function*(){var m,g,x,w;try{for(var T=!0,v=yi(h),y;y=yield ce(v.next()),m=y.done,!m;T=!0){w=y.value,T=!1;const _=w,E=rm(yield ce(_.json()));E.sdkHttpResponse={headers:_.headers};const I=new Xo;Object.assign(I,E),yield yield ce(I)}}catch(_){g={error:_}}finally{try{!T&&!m&&(x=v.return)&&(yield ce(x.call(v)))}finally{if(g)throw g.error}}})})}else{const d=em(this.apiClient,e);return a=L("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(h){return lo(this,arguments,function*(){var m,g,x,w;try{for(var T=!0,v=yi(h),y;y=yield ce(v.next()),m=y.done,!m;T=!0){w=y.value,T=!1;const _=w,E=nm(yield ce(_.json()));E.sdkHttpResponse={headers:_.headers};const I=new Xo;Object.assign(I,E),yield yield ce(I)}}catch(_){g={error:_}}finally{try{!T&&!m&&(x=v.return)&&(yield ce(x.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=bC(this.apiClient,e);return a=L("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=FC(f),m=new Gh;return Object.assign(m,h),m})}else{const d=LC(this.apiClient,e);return a=L("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=UC(f),m=new Gh;return Object.assign(m,h),m})}}async generateImagesInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=YC(this.apiClient,e);return a=L("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=XC(f),m=new Vh;return Object.assign(m,h),m})}else{const d=WC(this.apiClient,e);return a=L("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=KC(f),m=new Vh;return Object.assign(m,h),m})}}async editImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=PC(this.apiClient,e);return i=L("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=kC(c),f=new VE;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=YI(this.apiClient,e);return i=L("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=KI(c),f=new $E;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=RI(this.apiClient,e);return i=L("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=PI(c),f=new BE;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=UI(this.apiClient,e);return i=L("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=FI(c),f=new OE;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=pI(this.apiClient,e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>dc(f))}else{const d=fI(this.apiClient,e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>cc(f))}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=EI(this.apiClient,e);return a=L("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=TI(f),m=new $h;return Object.assign(m,h),m})}else{const d=xI(this.apiClient,e);return a=L("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=SI(f),m=new $h;return Object.assign(m,h),m})}}async update(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=JI(this.apiClient,e);return a=L("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>dc(f))}else{const d=zI(this.apiClient,e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>cc(f))}}async delete(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=IC(this.apiClient,e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=NC(f),m=new Bh;return Object.assign(m,h),m})}else{const d=CC(this.apiClient,e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=AC(f),m=new Bh;return Object.assign(m,h),m})}}async countTokens(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=EC(this.apiClient,e);return a=L("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=TC(f),m=new Oh;return Object.assign(m,h),m})}else{const d=xC(this.apiClient,e);return a=L("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=SC(f),m=new Oh;return Object.assign(m,h),m})}}async computeTokens(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=hC(this.apiClient,e);return i=L("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=mC(c),f=new HE;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=nI(this.apiClient,e);return a=L("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=eI(f),m=new Il;return Object.assign(m,h),m})}else{const d=tI(this.apiClient,e);return a=L("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=jC(f),m=new Il;return Object.assign(m,h),m})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NA extends gn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=DE(e);return a=L("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const d=ME(e);return a=L("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=CE(e);return i=L("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RA(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function PA(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>VA(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function kA(t,e,n){const r={},o=l(e,["expireTime"]);n!==void 0&&o!=null&&u(n,["expireTime"],o);const i=l(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&u(n,["newSessionExpireTime"],i);const s=l(e,["uses"]);n!==void 0&&s!=null&&u(n,["uses"],s);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&u(n,["bidiGenerateContentSetup"],GA(t,a));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),r}function MA(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],kA(t,r,n)),n}function DA(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function LA(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bA(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function UA(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function FA(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],Nd(h));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&u(e,["setup","systemInstruction"],PA(Je(x)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let C=Co(w);Array.isArray(C)&&(C=C.map(A=>BA(To(A)))),u(e,["setup","tools"],C)}const T=l(t,["sessionResumption"]);e!==void 0&&T!=null&&u(e,["setup","sessionResumption"],$A(T));const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],y);const _=l(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&u(e,["setup","realtimeInputConfig"],_);const E=l(t,["contextWindowCompression"]);e!==void 0&&E!=null&&u(e,["setup","contextWindowCompression"],E);const I=l(t,["proactivity"]);return e!==void 0&&I!=null&&u(e,["setup","proactivity"],I),n}function GA(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],te(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],FA(o,n)),n}function VA(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],DA(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],LA(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],RA(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&u(e,["videoMetadata"],m),e}function $A(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function BA(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const i=l(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],bA(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],UA(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OA(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(i=>`${n}.${i}`);e.push(...o)}else e.push(n)}return e.join(",")}function HA(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const i=OA(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class qA extends gn{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=MA(this.apiClient,e);i=L("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const c=HA(a,e.config);return o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zA(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&u(e,["displayName"],r),n}function JA(t){const e={},n=l(t,["config"]);return n!=null&&zA(n,e),e}function WA(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&u(e,["_query","force"],r),n}function YA(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&WA(r,e),e}function KA(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function XA(t,e){const n={},r=l(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["customMetadata"],i)}const o=l(t,["chunkingConfig"]);return e!==void 0&&o!=null&&u(e,["chunkingConfig"],o),n}function QA(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],jA(s)),e}function ZA(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);const r=l(t,["fileName"]);r!=null&&u(e,["fileName"],r);const o=l(t,["config"]);return o!=null&&XA(o,e),e}function jA(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function eN(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function tN(t){const e={},n=l(t,["config"]);return n!=null&&eN(n,e),e}function nN(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["fileSearchStores"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["fileSearchStores"],i)}return e}function rN(t,e){const n={},r=l(t,["mimeType"]);e!==void 0&&r!=null&&u(e,["mimeType"],r);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const i=l(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>c)),u(e,["customMetadata"],a)}const s=l(t,["chunkingConfig"]);return e!==void 0&&s!=null&&u(e,["chunkingConfig"],s),n}function oN(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);const r=l(t,["config"]);return r!=null&&rN(r,e),e}function iN(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sN(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&u(e,["_query","force"],r),n}function lN(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&sN(r,e),e}function aN(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function uN(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function cN(t){const e={},n=l(t,["parent"]);n!=null&&u(e,["_url","parent"],n);const r=l(t,["config"]);return r!=null&&uN(r,e),e}function dN(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["documents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fN extends gn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Sr(hn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=aN(e);return i=L("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=lN(e);o=L("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=cN(e);return i=L("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=dN(c),f=new qE;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pN extends gn{constructor(e,n=new fN(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Sr(hn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=JA(e);return i=L("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=KA(e);return i=L("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=YA(e);o=L("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tN(e);return i=L("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=nN(c),f=new zE;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=oN(e);return i=L("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=iN(c),f=new JE;return Object.assign(f,d),f})}}async importFile(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ZA(e);return i=L("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=QA(c),f=new Sd;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hN(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function mN(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function gN(t,e,n){const r={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=l(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&u(e,["displayName"],o),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&u(e,["tuningTask","hyperparameters","epochCount"],i);const s=l(t,["learningRateMultiplier"]);if(s!=null&&u(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=l(t,["batchSize"]);e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","batchSize"],a);const c=l(t,["learningRate"]);if(e!==void 0&&c!=null&&u(e,["tuningTask","hyperparameters","learningRate"],c),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function yN(t,e,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec"],cm(g))}else if(o==="PREFERENCE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec"],cm(g))}const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&u(e,["tunedModelDisplayName"],i);const s=l(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);let a=l(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=l(t,["labels"]);e!==void 0&&h!=null&&u(e,["labels"],h);const m=l(t,["beta"]);return e!==void 0&&m!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function vN(t,e){const n={},r=l(t,["baseModel"]);r!=null&&u(n,["baseModel"],r);const o=l(t,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const i=l(t,["trainingDataset"]);i!=null&&RN(i);const s=l(t,["config"]);return s!=null&&gN(s,n),n}function _N(t,e){const n={},r=l(t,["baseModel"]);r!=null&&u(n,["baseModel"],r);const o=l(t,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const i=l(t,["trainingDataset"]);i!=null&&PN(i,n,e);const s=l(t,["config"]);return s!=null&&yN(s,n,e),n}function wN(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function xN(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function EN(t,e,n){const r={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),r}function SN(t,e,n){const r={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),r}function TN(t,e){const n={},r=l(t,["config"]);return r!=null&&EN(r,n),n}function CN(t,e){const n={},r=l(t,["config"]);return r!=null&&SN(r,n),n}function IN(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const i=l(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>A0(a))),u(n,["tuningJobs"],s)}return n}function AN(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const i=l(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>pc(a))),u(n,["tuningJobs"],s)}return n}function NN(t,e){const n={},r=l(t,["name"]);r!=null&&u(n,["model"],r);const o=l(t,["name"]);return o!=null&&u(n,["endpoint"],o),n}function RN(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=l(t,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),u(n,["examples","examples"],o)}return n}function PN(t,e,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function A0(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const i=l(t,["state"]);i!=null&&u(n,["state"],a0(i));const s=l(t,["createTime"]);s!=null&&u(n,["createTime"],s);const a=l(t,["tuningTask","startTime"]);a!=null&&u(n,["startTime"],a);const c=l(t,["tuningTask","completeTime"]);c!=null&&u(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=l(t,["description"]);f!=null&&u(n,["description"],f);const h=l(t,["baseModel"]);h!=null&&u(n,["baseModel"],h);const m=l(t,["_self"]);return m!=null&&u(n,["tunedModel"],NN(m)),n}function pc(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const i=l(t,["state"]);i!=null&&u(n,["state"],a0(i));const s=l(t,["createTime"]);s!=null&&u(n,["createTime"],s);const a=l(t,["startTime"]);a!=null&&u(n,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=l(t,["error"]);f!=null&&u(n,["error"],f);const h=l(t,["description"]);h!=null&&u(n,["description"],h);const m=l(t,["baseModel"]);m!=null&&u(n,["baseModel"],m);const g=l(t,["tunedModel"]);g!=null&&u(n,["tunedModel"],g);const x=l(t,["preTunedModel"]);x!=null&&u(n,["preTunedModel"],x);const w=l(t,["supervisedTuningSpec"]);w!=null&&u(n,["supervisedTuningSpec"],w);const T=l(t,["preferenceOptimizationSpec"]);T!=null&&u(n,["preferenceOptimizationSpec"],T);const v=l(t,["tuningDataStats"]);v!=null&&u(n,["tuningDataStats"],v);const y=l(t,["encryptionSpec"]);y!=null&&u(n,["encryptionSpec"],y);const _=l(t,["partnerModelTuningSpec"]);_!=null&&u(n,["partnerModelTuningSpec"],_);const E=l(t,["customBaseModel"]);E!=null&&u(n,["customBaseModel"],E);const I=l(t,["experiment"]);I!=null&&u(n,["experiment"],I);const C=l(t,["labels"]);C!=null&&u(n,["labels"],C);const A=l(t,["outputUri"]);A!=null&&u(n,["outputUri"],A);const R=l(t,["pipelineJob"]);R!=null&&u(n,["pipelineJob"],R);const M=l(t,["serviceAccount"]);M!=null&&u(n,["serviceAccount"],M);const N=l(t,["tunedModelDisplayName"]);N!=null&&u(n,["tunedModelDisplayName"],N);const G=l(t,["veoTuningSpec"]);return G!=null&&u(n,["veoTuningSpec"],G),n}function kN(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const i=l(t,["metadata"]);i!=null&&u(n,["metadata"],i);const s=l(t,["done"]);s!=null&&u(n,["done"],s);const a=l(t,["error"]);return a!=null&&u(n,["error"],a),n}function cm(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["validationDatasetUri"],r);const o=l(t,["vertexDatasetResource"]);return o!=null&&u(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MN extends gn{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Sr(hn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),i=await this.tuneMldevInternal(o);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:sc.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=xN(e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>pc(f))}else{const d=wN(e);return a=L("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>A0(f))}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=CN(e);return a=L("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=AN(f),m=new Hh;return Object.assign(m,h),m})}else{const d=TN(e);return a=L("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const h=IN(f),m=new Hh;return Object.assign(m,h),m})}}async cancel(e){var n,r,o,i;let s="",a={};if(this.apiClient.isVertexAI()){const c=mN(e);s=L("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=hN(e);s=L("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=_N(e,e);return i=L("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>pc(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vN(e);return i=L("tunedModels",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>kN(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DN{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const LN=1024*1024*8,bN=3,UN=1e3,FN=2,Nl="x-goog-upload-status";async function GN(t,e,n){var r;const o=await N0(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Nl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function VN(t,e,n){var r;const o=await N0(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Nl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=n0(i),a=new Td;return Object.assign(a,s),a}async function N0(t,e,n){var r,o;let i=0,s=0,a=new lc(new Response),c="upload";for(i=t.size;s<i;){const d=Math.min(LN,i-s),f=t.slice(s,s+d);s+d>=i&&(c+=", finalize");let h=0,m=UN;for(;h<bN&&(a=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[Nl]));)h++,await BN(m),m=m*FN;if(s+=d,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[Nl])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function $N(t){return{size:t.size,type:t.type}}function BN(t){return new Promise(e=>setTimeout(e,t))}class ON{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await GN(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await VN(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $N(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HN{create(e,n,r){return new qN(e,n,r)}}class qN{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dm="x-goog-api-key";class zN{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(dm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(dm,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JN="gl-node/";class Pd{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=SE(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const o=new zN(this.apiKey);this.apiClient=new aA({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:JN+"web",uploader:new ON,downloader:new DN}),this.models=new AA(this.apiClient),this.live=new xA(this.apiClient,o,new HN),this.batches=new ZS(this.apiClient),this.chats=new DT(this.models,this.apiClient),this.caches=new PT(this.apiClient),this.files=new HT(this.apiClient),this.operations=new NA(this.apiClient),this.authTokens=new qA(this.apiClient),this.tunings=new MN(this.apiClient),this.fileSearchStores=new pN(this.apiClient)}}const hc="RFC3986",mc={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},WN="RFC1738",YN=Array.isArray,zt=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Qa=1024,KN=(t,e,n,r,o)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let s="";for(let a=0;a<i.length;a+=Qa){const c=i.length>=Qa?i.slice(a,a+Qa):i,d=[];for(let f=0;f<c.length;++f){let h=c.charCodeAt(f);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||o===WN&&(h===40||h===41)){d[d.length]=c.charAt(f);continue}if(h<128){d[d.length]=zt[h];continue}if(h<2048){d[d.length]=zt[192|h>>6]+zt[128|h&63];continue}if(h<55296||h>=57344){d[d.length]=zt[224|h>>12]+zt[128|h>>6&63]+zt[128|h&63];continue}f+=1,h=65536+((h&1023)<<10|c.charCodeAt(f)&1023),d[d.length]=zt[240|h>>18]+zt[128|h>>12&63]+zt[128|h>>6&63]+zt[128|h&63]}s+=d.join("")}return s};function XN(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function fm(t,e){if(YN(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const QN=Object.prototype.hasOwnProperty,R0={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Wt=Array.isArray,ZN=Array.prototype.push,P0=function(t,e){ZN.apply(t,Wt(e)?e:[e])},jN=Date.prototype.toISOString,Ae={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:KN,encodeValuesOnly:!1,format:hc,formatter:mc[hc],indices:!1,serializeDate(t){return jN.call(t)},skipNulls:!1,strictNullHandling:!1};function eR(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Za={};function k0(t,e,n,r,o,i,s,a,c,d,f,h,m,g,x,w,T,v){let y=t,_=v,E=0,I=!1;for(;(_=_.get(Za))!==void 0&&!I;){const N=_.get(t);if(E+=1,typeof N<"u"){if(N===E)throw new RangeError("Cyclic object value");I=!0}typeof _.get(Za)>"u"&&(E=0)}if(typeof d=="function"?y=d(e,y):y instanceof Date?y=m==null?void 0:m(y):n==="comma"&&Wt(y)&&(y=fm(y,function(N){return N instanceof Date?m==null?void 0:m(N):N})),y===null){if(i)return c&&!w?c(e,Ae.encoder,T,"key",g):e;y=""}if(eR(y)||XN(y)){if(c){const N=w?e:c(e,Ae.encoder,T,"key",g);return[(x==null?void 0:x(N))+"="+(x==null?void 0:x(c(y,Ae.encoder,T,"value",g)))]}return[(x==null?void 0:x(e))+"="+(x==null?void 0:x(String(y)))]}const C=[];if(typeof y>"u")return C;let A;if(n==="comma"&&Wt(y))w&&c&&(y=fm(y,c)),A=[{value:y.length>0?y.join(",")||null:void 0}];else if(Wt(d))A=d;else{const N=Object.keys(y);A=f?N.sort(f):N}const R=a?String(e).replace(/\./g,"%2E"):String(e),M=r&&Wt(y)&&y.length===1?R+"[]":R;if(o&&Wt(y)&&y.length===0)return M+"[]";for(let N=0;N<A.length;++N){const G=A[N],q=typeof G=="object"&&typeof G.value<"u"?G.value:y[G];if(s&&q===null)continue;const ne=h&&a?G.replace(/\./g,"%2E"):G,Ye=Wt(y)?typeof n=="function"?n(M,ne):M:M+(h?"."+ne:"["+ne+"]");v.set(t,E);const Se=new WeakMap;Se.set(Za,v),P0(C,k0(q,Ye,n,r,o,i,s,a,n==="comma"&&w&&Wt(y)?null:c,d,f,h,m,g,x,w,T,Se))}return C}function tR(t=Ae){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Ae.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=hc;if(typeof t.format<"u"){if(!QN.call(mc,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=mc[n];let o=Ae.filter;(typeof t.filter=="function"||Wt(t.filter))&&(o=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in R0?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Ae.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const s=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Ae.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ae.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ae.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ae.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ae.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ae.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ae.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ae.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ae.encodeValuesOnly,filter:o,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ae.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ae.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ae.strictNullHandling}}function nR(t,e={}){let n=t;const r=tR(e);let o,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):Wt(r.filter)&&(i=r.filter,o=i);const s=[];if(typeof n!="object"||n===null)return"";const a=R0[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;o||(o=Object.keys(n)),r.sort&&o.sort(r.sort);const d=new WeakMap;for(let m=0;m<o.length;++m){const g=o[m];r.skipNulls&&n[g]===null||P0(s,k0(n[g],g,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const f=s.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),f.length>0?h+f:""}const Ur="4.104.0";let pm=!1,vi,M0,D0,gc,L0,b0,U0,F0,G0;function rR(t,e={auto:!1}){if(pm)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(vi)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${vi}'\``);pm=e.auto,vi=t.kind,M0=t.fetch,D0=t.FormData,gc=t.File,L0=t.ReadableStream,b0=t.getMultipartRequestOptions,U0=t.getDefaultAgent,F0=t.fileFromPath,G0=t.isFsReadStream}class oR{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function iR({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,o,i;try{n=fetch,r=Request,o=Response,i=Headers}catch(s){throw new Error(`this environment is missing the following Web Fetch API type: ${s.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:o,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(s,a)=>({...a,body:new oR(s)}),getDefaultAgent:s=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:s=>!1}}const V0=()=>{vi||rR(iR(),{auto:!0})};V0();class B extends Error{}class Be extends B{constructor(e,n,r,o){super(`${Be.makeMessage(e,n,r)}`),this.status=e,this.headers=o,this.request_id=o==null?void 0:o["x-request-id"],this.error=n;const i=n;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,r){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,r,o){if(!e||!o)return new ea({message:r,cause:vc(n)});const i=n==null?void 0:n.error;return e===400?new $0(e,i,r,o):e===401?new B0(e,i,r,o):e===403?new O0(e,i,r,o):e===404?new H0(e,i,r,o):e===409?new q0(e,i,r,o):e===422?new z0(e,i,r,o):e===429?new J0(e,i,r,o):e>=500?new W0(e,i,r,o):new Be(e,i,r,o)}}class Tt extends Be{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ea extends Be{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class kd extends ea{constructor({message:e}={}){super({message:e??"Request timed out."})}}class $0 extends Be{}class B0 extends Be{}class O0 extends Be{}class H0 extends Be{}class q0 extends Be{}class z0 extends Be{}class J0 extends Be{}class W0 extends Be{}class Y0 extends B{constructor(){super("Could not parse response content as the length limit was reached")}}class K0 extends B{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var _s=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},rr=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ft;class ta{constructor(){ft.set(this,void 0),this.buffer=new Uint8Array,_s(this,ft,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const o=[];let i;for(;(i=sR(this.buffer,rr(this,ft,"f")))!=null;){if(i.carriage&&rr(this,ft,"f")==null){_s(this,ft,i.index,"f");continue}if(rr(this,ft,"f")!=null&&(i.index!==rr(this,ft,"f")+1||i.carriage)){o.push(this.decodeText(this.buffer.slice(0,rr(this,ft,"f")-1))),this.buffer=this.buffer.slice(rr(this,ft,"f")),_s(this,ft,null,"f");continue}const s=rr(this,ft,"f")!==null?i.preceding-1:i.preceding,a=this.decodeText(this.buffer.slice(0,s));o.push(a),this.buffer=this.buffer.slice(i.index),_s(this,ft,null,"f")}return o}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new B(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new B(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new B("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}ft=new WeakMap;ta.NEWLINE_CHARS=new Set([`
`,"\r"]);ta.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function sR(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function lR(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function X0(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Xt{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const s of aR(e,n))if(!i){if(s.data.startsWith("[DONE]")){i=!0;continue}if(s.event===null||s.event.startsWith("response.")||s.event.startsWith("transcript.")){let a;try{a=JSON.parse(s.data)}catch(c){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),c}if(a&&a.error)throw new Be(void 0,a.error,void 0,rv(e.headers));yield a}else{let a;try{a=JSON.parse(s.data)}catch(c){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),c}if(s.event=="error")throw new Be(void 0,a.error,a.message,void 0);yield{event:s.event,data:a}}}i=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{i||n.abort()}}return new Xt(o,n)}static fromReadableStream(e,n){let r=!1;async function*o(){const s=new ta,a=X0(e);for await(const c of a)for(const d of s.decode(c))yield d;for(const c of s.flush())yield c}async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const a of o())s||a&&(yield JSON.parse(a));s=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{s||n.abort()}}return new Xt(i,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),o=i=>({next:()=>{if(i.length===0){const s=r.next();e.push(s),n.push(s)}return i.shift()}});return[new Xt(()=>o(e),this.controller),new Xt(()=>o(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new L0({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:i,done:s}=await n.next();if(s)return o.close();const a=r.encode(JSON.stringify(i)+`
`);o.enqueue(a)}catch(i){o.error(i)}},async cancel(){var o;await((o=n.return)==null?void 0:o.call(n))}})}}async function*aR(t,e){if(!t.body)throw e.abort(),new B("Attempted to iterate over a response with no body");const n=new cR,r=new ta,o=X0(t.body);for await(const i of uR(o))for(const s of r.decode(i)){const a=n.decode(s);a&&(yield a)}for(const i of r.flush()){const s=n.decode(i);s&&(yield s)}}async function*uR(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let o=new Uint8Array(e.length+r.length);o.set(e),o.set(r,e.length),e=o;let i;for(;(i=lR(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class cR{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,o]=dR(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function dR(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const Q0=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",Z0=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&na(t),na=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",fR=t=>Z0(t)||Q0(t)||G0(t);async function j0(t,e,n){var o;if(t=await t,Z0(t))return t;if(Q0(t)){const i=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=na(i)?[await i.arrayBuffer()]:[i];return new gc(s,e,n)}const r=await pR(t);if(e||(e=mR(t)??"unknown_file"),!(n!=null&&n.type)){const i=(o=r[0])==null?void 0:o.type;typeof i=="string"&&(n={...n,type:i})}return new gc(r,e,n)}async function pR(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(na(t))e.push(await t.arrayBuffer());else if(gR(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${hR(t)}`);return e}function hR(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function mR(t){var e;return ja(t.name)||ja(t.filename)||((e=ja(t.path))==null?void 0:e.split(/[\\/]/).pop())}const ja=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},gR=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",hm=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",wr=async t=>{const e=await yR(t.body);return b0(e,t)},yR=async t=>{const e=new D0;return await Promise.all(Object.entries(t||{}).map(([n,r])=>yc(e,n,r))),e},yc=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(fR(n)){const r=await j0(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>yc(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,o])=>yc(t,`${e}[${r}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var uo={},vR=function(t,e,n,r,o){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},_R=function(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ws;V0();async function ev(t){var s;const{response:e}=t;if(t.options.stream)return On("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):Xt.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type"),r=(s=n==null?void 0:n.split(";")[0])==null?void 0:s.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const a=await e.json();return On("response",e.status,e.url,e.headers,a),tv(a,e)}const i=await e.text();return On("response",e.status,e.url,e.headers,i),i}function tv(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class ra extends Promise{constructor(e,n=ev){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new ra(this.responsePromise,async n=>tv(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class wR{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:o,fetch:i}){this.baseURL=e,this.maxRetries=eu("maxRetries",n),this.timeout=eu("timeout",r),this.httpAgent=o,this.fetch=i??M0}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...CR(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${RR()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async o=>{const i=o&&na(o==null?void 0:o.body)?new DataView(await o.body.arrayBuffer()):(o==null?void 0:o.body)instanceof DataView?o.body:(o==null?void 0:o.body)instanceof ArrayBuffer?new DataView(o.body):o&&ArrayBuffer.isView(o==null?void 0:o.body)?new DataView(o.body.buffer):o==null?void 0:o.body;return{method:e,path:n,...o,body:i}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var w;const r={...e},{method:o,path:i,query:s,headers:a={}}=r,c=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:hm(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,d=this.calculateContentLength(c),f=this.buildURL(i,s);"timeout"in r&&eu("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const h=r.httpAgent??this.httpAgent??U0(f),m=r.timeout+1e3;typeof((w=h==null?void 0:h.options)==null?void 0:w.timeout)=="number"&&m>(h.options.timeout??0)&&(h.options.timeout=m),this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const g=this.buildHeaders({options:r,headers:a,contentLength:d,retryCount:n});return{req:{method:o,...c&&{body:c},headers:g,...h&&{agent:h},signal:r.signal??null},url:f,timeout:r.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:o}){const i={};r&&(i["content-length"]=r);const s=this.defaultHeaders(e);return vm(i,s),vm(i,n),hm(e.body)&&vi!=="node"&&delete i["content-type"],Es(s,"x-stainless-retry-count")===void 0&&Es(n,"x-stainless-retry-count")===void 0&&(i["x-stainless-retry-count"]=String(o)),Es(s,"x-stainless-timeout")===void 0&&Es(n,"x-stainless-timeout")===void 0&&e.timeout&&(i["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(i,n),i}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,o){return Be.generate(e,n,r,o)}request(e,n=null){return new ra(this.makeRequest(e,n))}async makeRequest(e,n){var h,m;const r=await e,o=r.maxRetries??this.maxRetries;n==null&&(n=o),await this.prepareOptions(r);const{req:i,url:s,timeout:a}=this.buildRequest(r,{retryCount:o-n});if(await this.prepareRequest(i,{url:s,options:r}),On("request",s,r,i.headers),(h=r.signal)!=null&&h.aborted)throw new Tt;const c=new AbortController,d=await this.fetchWithTimeout(s,i,a,c).catch(vc);if(d instanceof Error){if((m=r.signal)!=null&&m.aborted)throw new Tt;if(n)return this.retryRequest(r,n);throw d.name==="AbortError"?new kd:new ea({cause:d})}const f=rv(d.headers);if(!d.ok){if(n&&this.shouldRetry(d)){const y=`retrying, ${n} attempts remaining`;return On(`response (error; ${y})`,d.status,s,f),this.retryRequest(r,n,f)}const g=await d.text().catch(y=>vc(y).message),x=IR(g),w=x?void 0:g;throw On(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,d.status,s,f,w),this.makeStatusError(d.status,x,w,f)}return{response:d,options:r,controller:c}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new xR(this,r,e)}buildURL(e,n){const r=NR(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return ov(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new B(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,o){const{signal:i,...s}=n||{};i&&i.addEventListener("abort",()=>o.abort());const a=setTimeout(()=>o.abort(),r),c={signal:o.signal,...s};return c.method&&(c.method=c.method.toUpperCase()),this.fetch.call(void 0,e,c).finally(()=>{clearTimeout(a)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let o;const i=r==null?void 0:r["retry-after-ms"];if(i){const a=parseFloat(i);Number.isNaN(a)||(o=a)}const s=r==null?void 0:r["retry-after"];if(s&&!o){const a=parseFloat(s);Number.isNaN(a)?o=Date.parse(s)-Date.now():o=a*1e3}if(!(o&&0<=o&&o<60*1e3)){const a=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,a)}return await zi(o),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,s=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return s*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Ur}`}}class nv{constructor(e,n,r,o){ws.set(this,void 0),vR(this,ws,e),this.options=o,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new B("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[o,i]of r)e.url.searchParams.set(o,i);n.query=void 0,n.path=e.url.toString()}return await _R(this,ws,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(ws=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class xR extends ra{constructor(e,n,r){super(n,async o=>new r(e,o.response,await ev(o),o.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const rv=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),ER={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},_e=t=>typeof t=="object"&&t!==null&&!ov(t)&&Object.keys(t).every(e=>iv(ER,e)),SR=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ur,"X-Stainless-OS":gm(Deno.build.os),"X-Stainless-Arch":mm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ur,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ur,"X-Stainless-OS":gm(process.platform),"X-Stainless-Arch":mm(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=TR();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ur,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ur,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function TR(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const o=r[1]||0,i=r[2]||0,s=r[3]||0;return{browser:e,version:`${o}.${i}.${s}`}}}return null}const mm=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",gm=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ym;const CR=()=>ym??(ym=SR()),IR=t=>{try{return JSON.parse(t)}catch{return}},AR=/^[a-z][a-z0-9+.-]*:/i,NR=t=>AR.test(t),zi=t=>new Promise(e=>setTimeout(e,t)),eu=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new B(`${t} must be an integer`);if(e<0)throw new B(`${t} must be a positive integer`);return e},vc=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},xs=t=>{var e,n,r,o;if(typeof process<"u")return((e=uo==null?void 0:uo[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(o=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:o.trim()};function ov(t){if(!t)return!0;for(const e in t)return!1;return!0}function iv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function vm(t,e){for(const n in e){if(!iv(e,n))continue;const r=n.toLowerCase();if(!r)continue;const o=e[n];o===null?delete t[r]:o!==void 0&&(t[r]=o)}}const _m=new Set(["authorization","api-key"]);function On(t,...e){if(typeof process<"u"&&(uo==null?void 0:uo.DEBUG)==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const i={...r,headers:{...r.headers}};for(const s in r.headers)_m.has(s.toLowerCase())&&(i.headers[s]="REDACTED");return i}let o=null;for(const i in r)_m.has(i.toLowerCase())&&(o??(o={...r}),o[i]="REDACTED");return o??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const RR=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),PR=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",kR=t=>typeof(t==null?void 0:t.get)=="function",Es=(t,e)=>{var r;const n=e.toLowerCase();if(kR(t)){const o=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(i,s,a)=>s+a.toUpperCase());for(const i of[e,n,e.toUpperCase(),o]){const s=t.get(i);if(s)return s}}for(const[o,i]of Object.entries(t))if(o.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i},MR=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.charCodeAt(o);return Array.from(new Float32Array(r.buffer))}};function tu(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class oa extends nv{constructor(e,n,r,o){super(e,n,r,o),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Pe extends nv{constructor(e,n,r,o){super(e,n,r,o),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const n=(r=e[e.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class O{constructor(e){this._client=e}}let sv=class extends O{list(e,n={},r){return _e(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,DR,{query:n,...r})}},ia=class extends O{constructor(){super(...arguments),this.messages=new sv(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return _e(e)?this.list({},e):this._client.getAPIList("/chat/completions",sa,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class sa extends Pe{}class DR extends Pe{}ia.ChatCompletionsPage=sa;ia.Messages=sv;let la=class extends O{constructor(){super(...arguments),this.completions=new ia(this._client)}};la.Completions=ia;la.ChatCompletionsPage=sa;class lv extends O{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class av extends O{create(e,n){return this._client.post("/audio/transcriptions",wr({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}}))}}class uv extends O{create(e,n){return this._client.post("/audio/translations",wr({body:e,...n,__metadata:{model:e.model}}))}}class Ji extends O{constructor(){super(...arguments),this.transcriptions=new av(this._client),this.translations=new uv(this._client),this.speech=new lv(this._client)}}Ji.Transcriptions=av;Ji.Translations=uv;Ji.Speech=lv;class Md extends O{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return _e(e)?this.list({},e):this._client.getAPIList("/batches",Dd,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class Dd extends Pe{}Md.BatchesPage=Dd;var Pt=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},he=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},_c,Hs,qs,ni,ri,zs,oi,nn,ii,Rl,Pl,Fr,cv;class Ld{constructor(){_c.add(this),this.controller=new AbortController,Hs.set(this,void 0),qs.set(this,()=>{}),ni.set(this,()=>{}),ri.set(this,void 0),zs.set(this,()=>{}),oi.set(this,()=>{}),nn.set(this,{}),ii.set(this,!1),Rl.set(this,!1),Pl.set(this,!1),Fr.set(this,!1),Pt(this,Hs,new Promise((e,n)=>{Pt(this,qs,e,"f"),Pt(this,ni,n,"f")}),"f"),Pt(this,ri,new Promise((e,n)=>{Pt(this,zs,e,"f"),Pt(this,oi,n,"f")}),"f"),he(this,Hs,"f").catch(()=>{}),he(this,ri,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},he(this,_c,"m",cv).bind(this))},0)}_connected(){this.ended||(he(this,qs,"f").call(this),this._emit("connect"))}get ended(){return he(this,ii,"f")}get errored(){return he(this,Rl,"f")}get aborted(){return he(this,Pl,"f")}abort(){this.controller.abort()}on(e,n){return(he(this,nn,"f")[e]||(he(this,nn,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=he(this,nn,"f")[e];if(!r)return this;const o=r.findIndex(i=>i.listener===n);return o>=0&&r.splice(o,1),this}once(e,n){return(he(this,nn,"f")[e]||(he(this,nn,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Pt(this,Fr,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Pt(this,Fr,!0,"f"),await he(this,ri,"f")}_emit(e,...n){if(he(this,ii,"f"))return;e==="end"&&(Pt(this,ii,!0,"f"),he(this,zs,"f").call(this));const r=he(this,nn,"f")[e];if(r&&(he(this,nn,"f")[e]=r.filter(o=>!o.once),r.forEach(({listener:o})=>o(...n))),e==="abort"){const o=n[0];!he(this,Fr,"f")&&!(r!=null&&r.length)&&Promise.reject(o),he(this,ni,"f").call(this,o),he(this,oi,"f").call(this,o),this._emit("end");return}if(e==="error"){const o=n[0];!he(this,Fr,"f")&&!(r!=null&&r.length)&&Promise.reject(o),he(this,ni,"f").call(this,o),he(this,oi,"f").call(this,o),this._emit("end")}}_emitFinal(){}}Hs=new WeakMap,qs=new WeakMap,ni=new WeakMap,ri=new WeakMap,zs=new WeakMap,oi=new WeakMap,nn=new WeakMap,ii=new WeakMap,Rl=new WeakMap,Pl=new WeakMap,Fr=new WeakMap,_c=new WeakSet,cv=function(e){if(Pt(this,Rl,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Tt),e instanceof Tt)return Pt(this,Pl,!0,"f"),this._emit("abort",e);if(e instanceof B)return this._emit("error",e);if(e instanceof Error){const n=new B(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new B(String(e)))};var V=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},dt=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Ge,wc,Yt,Js,Mt,cr,jr,sr,kl,pt,Ws,Ys,_i,si,li,wm,xm,Em,Sm,Tm,Cm,Im;class bt extends Ld{constructor(){super(...arguments),Ge.add(this),wc.set(this,[]),Yt.set(this,{}),Js.set(this,{}),Mt.set(this,void 0),cr.set(this,void 0),jr.set(this,void 0),sr.set(this,void 0),kl.set(this,void 0),pt.set(this,void 0),Ws.set(this,void 0),Ys.set(this,void 0),_i.set(this,void 0)}[(wc=new WeakMap,Yt=new WeakMap,Js=new WeakMap,Mt=new WeakMap,cr=new WeakMap,jr=new WeakMap,sr=new WeakMap,kl=new WeakMap,pt=new WeakMap,Ws=new WeakMap,Ys=new WeakMap,_i=new WeakMap,Ge=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",o=>{const i=n.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,s)=>n.push({resolve:i,reject:s})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new bt;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const o=Xt.fromReadableStream(e,this.controller);for await(const s of o)V(this,Ge,"m",si).call(this,s);if((i=o.controller.signal)!=null&&i.aborted)throw new Tt;return this._addRun(V(this,Ge,"m",li).call(this))}toReadableStream(){return new Xt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,o,i){const s=new bt;return s._run(()=>s._runToolAssistantStream(e,n,r,o,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,o,i){var d;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...o,stream:!0},c=await e.submitToolOutputs(n,r,a,{...i,signal:this.controller.signal});this._connected();for await(const f of c)V(this,Ge,"m",si).call(this,f);if((d=c.controller.signal)!=null&&d.aborted)throw new Tt;return this._addRun(V(this,Ge,"m",li).call(this))}static createThreadAssistantStream(e,n,r){const o=new bt;return o._run(()=>o._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}static createAssistantStream(e,n,r,o){const i=new bt;return i._run(()=>i._runAssistantStream(e,n,r,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return V(this,Ws,"f")}currentRun(){return V(this,Ys,"f")}currentMessageSnapshot(){return V(this,Mt,"f")}currentRunStepSnapshot(){return V(this,_i,"f")}async finalRunSteps(){return await this.done(),Object.values(V(this,Yt,"f"))}async finalMessages(){return await this.done(),Object.values(V(this,Js,"f"))}async finalRun(){if(await this.done(),!V(this,cr,"f"))throw Error("Final run was not received.");return V(this,cr,"f")}async _createThreadAssistantStream(e,n,r){var a;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},s=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const c of s)V(this,Ge,"m",si).call(this,c);if((a=s.controller.signal)!=null&&a.aborted)throw new Tt;return this._addRun(V(this,Ge,"m",li).call(this))}async _createAssistantStream(e,n,r,o){var c;const i=o==null?void 0:o.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},a=await e.create(n,s,{...o,signal:this.controller.signal});this._connected();for await(const d of a)V(this,Ge,"m",si).call(this,d);if((c=a.controller.signal)!=null&&c.aborted)throw new Tt;return this._addRun(V(this,Ge,"m",li).call(this))}static accumulateDelta(e,n){for(const[r,o]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=o;continue}let i=e[r];if(i==null){e[r]=o;continue}if(r==="index"||r==="type"){e[r]=o;continue}if(typeof i=="string"&&typeof o=="string")i+=o;else if(typeof i=="number"&&typeof o=="number")i+=o;else if(tu(i)&&tu(o))i=this.accumulateDelta(i,o);else if(Array.isArray(i)&&Array.isArray(o)){if(i.every(s=>typeof s=="string"||typeof s=="number")){i.push(...o);continue}for(const s of o){if(!tu(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);const a=s.index;if(a==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const c=i[a];c==null?i.push(s):i[a]=this.accumulateDelta(c,s)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${o}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,o){return await this._createAssistantStream(n,e,r,o)}async _runToolAssistantStream(e,n,r,o,i){return await this._createToolAssistantStream(r,e,n,o,i)}}si=function(e){if(!this.ended)switch(dt(this,Ws,e,"f"),V(this,Ge,"m",Em).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":V(this,Ge,"m",Im).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":V(this,Ge,"m",xm).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":V(this,Ge,"m",wm).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},li=function(){if(this.ended)throw new B("stream has ended, this shouldn't happen");if(!V(this,cr,"f"))throw Error("Final run has not been received");return V(this,cr,"f")},wm=function(e){const[n,r]=V(this,Ge,"m",Tm).call(this,e,V(this,Mt,"f"));dt(this,Mt,n,"f"),V(this,Js,"f")[n.id]=n;for(const o of r){const i=n.content[o.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const o of e.data.delta.content){if(o.type=="text"&&o.text){let i=o.text,s=n.content[o.index];if(s&&s.type=="text")this._emit("textDelta",i,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(o.index!=V(this,jr,"f")){if(V(this,sr,"f"))switch(V(this,sr,"f").type){case"text":this._emit("textDone",V(this,sr,"f").text,V(this,Mt,"f"));break;case"image_file":this._emit("imageFileDone",V(this,sr,"f").image_file,V(this,Mt,"f"));break}dt(this,jr,o.index,"f")}dt(this,sr,n.content[o.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(V(this,jr,"f")!==void 0){const o=e.data.content[V(this,jr,"f")];if(o)switch(o.type){case"image_file":this._emit("imageFileDone",o.image_file,V(this,Mt,"f"));break;case"text":this._emit("textDone",o.text,V(this,Mt,"f"));break}}V(this,Mt,"f")&&this._emit("messageDone",e.data),dt(this,Mt,void 0,"f")}},xm=function(e){const n=V(this,Ge,"m",Sm).call(this,e);switch(dt(this,_i,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==V(this,kl,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(V(this,pt,"f")&&this._emit("toolCallDone",V(this,pt,"f")),dt(this,kl,i.index,"f"),dt(this,pt,n.step_details.tool_calls[i.index],"f"),V(this,pt,"f")&&this._emit("toolCallCreated",V(this,pt,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":dt(this,_i,void 0,"f"),e.data.step_details.type=="tool_calls"&&V(this,pt,"f")&&(this._emit("toolCallDone",V(this,pt,"f")),dt(this,pt,void 0,"f")),this._emit("runStepDone",e.data,n);break}},Em=function(e){V(this,wc,"f").push(e),this._emit("event",e)},Sm=function(e){switch(e.event){case"thread.run.step.created":return V(this,Yt,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=V(this,Yt,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const o=bt.accumulateDelta(n,r.delta);V(this,Yt,"f")[e.data.id]=o}return V(this,Yt,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":V(this,Yt,"f")[e.data.id]=e.data;break}if(V(this,Yt,"f")[e.data.id])return V(this,Yt,"f")[e.data.id];throw new Error("No snapshot available")},Tm=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let o=e.data;if(o.delta.content)for(const i of o.delta.content)if(i.index in n.content){let s=n.content[i.index];n.content[i.index]=V(this,Ge,"m",Cm).call(this,i,s)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Cm=function(e,n){return bt.accumulateDelta(n,e)},Im=function(e){switch(dt(this,Ys,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":dt(this,cr,e.data,"f"),V(this,pt,"f")&&(this._emit("toolCallDone",V(this,pt,"f")),dt(this,pt,void 0,"f"));break}};class bd extends O{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return _e(e)?this.list({},e):this._client.getAPIList("/assistants",Ud,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Ud extends Pe{}bd.AssistantsPage=Ud;function Am(t){return typeof t.parse=="function"}const co=t=>(t==null?void 0:t.role)==="assistant",dv=t=>(t==null?void 0:t.role)==="function",fv=t=>(t==null?void 0:t.role)==="tool";function Fd(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Wi(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function LR(t,e){return!e||!pv(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Gd(t,e)}function Gd(t,e){const n=t.choices.map(r=>{var o;if(r.finish_reason==="length")throw new Y0;if(r.finish_reason==="content_filter")throw new K0;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((o=r.message.tool_calls)==null?void 0:o.map(i=>UR(e,i)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?bR(e,r.message.content):null}}});return{...t,choices:n}}function bR(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function UR(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(o=>{var i;return((i=o.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Wi(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function FR(t,e){var r;if(!t)return!1;const n=(r=t.tools)==null?void 0:r.find(o=>{var i;return((i=o.function)==null?void 0:i.name)===e.function.name});return Wi(n)||(n==null?void 0:n.function.strict)||!1}function pv(t){var e;return Fd(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Wi(n)||n.type==="function"&&n.function.strict===!0))??!1}function GR(t){for(const e of t??[]){if(e.type!=="function")throw new B(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new B(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var ot=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},qe,xc,Ml,Ec,Sc,Tc,hv,Cc;const Nm=10;class mv extends Ld{constructor(){super(...arguments),qe.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(dv(e)||fv(e))&&e.content)this._emit("functionCallResult",e.content);else if(co(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(co(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new B("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ot(this,qe,"m",xc).call(this)}async finalMessage(){return await this.done(),ot(this,qe,"m",Ml).call(this)}async finalFunctionCall(){return await this.done(),ot(this,qe,"m",Ec).call(this)}async finalFunctionCallResult(){return await this.done(),ot(this,qe,"m",Sc).call(this)}async totalUsage(){return await this.done(),ot(this,qe,"m",Tc).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=ot(this,qe,"m",Ml).call(this);n&&this._emit("finalMessage",n);const r=ot(this,qe,"m",xc).call(this);r&&this._emit("finalContent",r);const o=ot(this,qe,"m",Ec).call(this);o&&this._emit("finalFunctionCall",o);const i=ot(this,qe,"m",Sc).call(this);i!=null&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",ot(this,qe,"m",Tc).call(this))}async _createChatCompletion(e,n,r){const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),ot(this,qe,"m",hv).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Gd(i,n))}async _runChatCompletion(e,n,r){for(const o of n.messages)this._addMessage(o,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var m;const o="function",{function_call:i="auto",stream:s,...a}=n,c=typeof i!="string"&&(i==null?void 0:i.name),{maxChatCompletions:d=Nm}=r||{},f={};for(const g of n.functions)f[g.name||g.function.name]=g;const h=n.functions.map(g=>({name:g.name||g.function.name,parameters:g.parameters,description:g.description}));for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<d;++g){const w=(m=(await this._createChatCompletion(e,{...a,function_call:i,functions:h,messages:[...this.messages]},r)).choices[0])==null?void 0:m.message;if(!w)throw new B("missing message in ChatCompletion response");if(!w.function_call)return;const{name:T,arguments:v}=w.function_call,y=f[T];if(y){if(c&&c!==T){const C=`Invalid function_call: ${JSON.stringify(T)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:o,name:T,content:C});continue}}else{const C=`Invalid function_call: ${JSON.stringify(T)}. Available options are: ${h.map(A=>JSON.stringify(A.name)).join(", ")}. Please try again`;this._addMessage({role:o,name:T,content:C});continue}let _;try{_=Am(y)?await y.parse(v):v}catch(C){this._addMessage({role:o,name:T,content:C instanceof Error?C.message:String(C)});continue}const E=await y.function(_,this),I=ot(this,qe,"m",Cc).call(this,E);if(this._addMessage({role:o,name:T,content:I}),c)return}}async _runTools(e,n,r){var g,x,w;const o="tool",{tool_choice:i="auto",stream:s,...a}=n,c=typeof i!="string"&&((g=i==null?void 0:i.function)==null?void 0:g.name),{maxChatCompletions:d=Nm}=r||{},f=n.tools.map(T=>{if(Wi(T)){if(!T.$callback)throw new B("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:T.$callback,name:T.function.name,description:T.function.description||"",parameters:T.function.parameters,parse:T.$parseRaw,strict:!0}}}return T}),h={};for(const T of f)T.type==="function"&&(h[T.function.name||T.function.function.name]=T.function);const m="tools"in n?f.map(T=>T.type==="function"?{type:"function",function:{name:T.function.name||T.function.function.name,parameters:T.function.parameters,description:T.function.description,strict:T.function.strict}}:T):void 0;for(const T of n.messages)this._addMessage(T,!1);for(let T=0;T<d;++T){const y=(x=(await this._createChatCompletion(e,{...a,tool_choice:i,tools:m,messages:[...this.messages]},r)).choices[0])==null?void 0:x.message;if(!y)throw new B("missing message in ChatCompletion response");if(!((w=y.tool_calls)!=null&&w.length))return;for(const _ of y.tool_calls){if(_.type!=="function")continue;const E=_.id,{name:I,arguments:C}=_.function,A=h[I];if(A){if(c&&c!==I){const G=`Invalid tool_call: ${JSON.stringify(I)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:o,tool_call_id:E,content:G});continue}}else{const G=`Invalid tool_call: ${JSON.stringify(I)}. Available options are: ${Object.keys(h).map(q=>JSON.stringify(q)).join(", ")}. Please try again`;this._addMessage({role:o,tool_call_id:E,content:G});continue}let R;try{R=Am(A)?await A.parse(C):C}catch(G){const q=G instanceof Error?G.message:String(G);this._addMessage({role:o,tool_call_id:E,content:q});continue}const M=await A.function(R,this),N=ot(this,qe,"m",Cc).call(this,M);if(this._addMessage({role:o,tool_call_id:E,content:N}),c)return}}}}qe=new WeakSet,xc=function(){return ot(this,qe,"m",Ml).call(this).content??null},Ml=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(co(n)){const{function_call:r,...o}=n,i={...o,content:n.content??null,refusal:n.refusal??null};return r&&(i.function_call=r),i}}throw new B("stream ended without producing a ChatCompletionMessage with role=assistant")},Ec=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const o=this.messages[r];if(co(o)&&(o!=null&&o.function_call))return o.function_call;if(co(o)&&((e=o==null?void 0:o.tool_calls)!=null&&e.length))return(n=o.tool_calls.at(-1))==null?void 0:n.function}},Sc=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(dv(n)&&n.content!=null||fv(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var o;return r.role==="assistant"&&((o=r.tool_calls)==null?void 0:o.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},Tc=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},hv=function(e){if(e.n!=null&&e.n>1)throw new B("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Cc=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Fi extends mv{static runFunctions(e,n,r){const o=new Fi,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return o._run(()=>o._runFunctions(e,n,i)),o}static runTools(e,n,r){const o=new Fi,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,n,i)),o}_addMessage(e,n=!0){super._addMessage(e,n),co(e)&&e.content&&this._emit("content",e.content)}}const gv=1,yv=2,vv=4,_v=8,wv=16,xv=32,Ev=64,Sv=128,Tv=256,Cv=Sv|Tv,Iv=wv|xv|Cv|Ev,Av=gv|yv|Iv,Nv=vv|_v,VR=Av|Nv,De={STR:gv,NUM:yv,ARR:vv,OBJ:_v,NULL:wv,BOOL:xv,NAN:Ev,INFINITY:Sv,MINUS_INFINITY:Tv,INF:Cv,SPECIAL:Iv,ATOM:Av,COLLECTION:Nv,ALL:VR};class $R extends Error{}class BR extends Error{}function OR(t,e=De.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return HR(t.trim(),e)}const HR=(t,e)=>{const n=t.length;let r=0;const o=m=>{throw new $R(`${m} at position ${r}`)},i=m=>{throw new BR(`${m} at position ${r}`)},s=()=>(h(),r>=n&&o("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?c():t[r]==="["?d():t.substring(r,r+4)==="null"||De.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||De.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||De.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||De.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||De.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||De.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):f()),a=()=>{const m=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(m,++r-Number(g)))}catch(x){i(String(x))}else if(De.STR&e)try{return JSON.parse(t.substring(m,r-Number(g))+'"')}catch{return JSON.parse(t.substring(m,t.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},c=()=>{r++,h();const m={};try{for(;t[r]!=="}";){if(h(),r>=n&&De.OBJ&e)return m;const g=a();h(),r++;try{const x=s();Object.defineProperty(m,g,{value:x,writable:!0,enumerable:!0,configurable:!0})}catch(x){if(De.OBJ&e)return m;throw x}h(),t[r]===","&&r++}}catch{if(De.OBJ&e)return m;o("Expected '}' at end of object")}return r++,m},d=()=>{r++;const m=[];try{for(;t[r]!=="]";)m.push(s()),h(),t[r]===","&&r++}catch{if(De.ARR&e)return m;o("Expected ']' at end of array")}return r++,m},f=()=>{if(r===0){t==="-"&&De.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(De.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(g))}}const m=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(De.NUM&e)&&o("Unterminated number literal");try{return JSON.parse(t.substring(m,r))}catch{t.substring(m,r)==="-"&&De.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t.substring(m,t.lastIndexOf("e")))}catch(x){i(String(x))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return s()},Rm=t=>OR(t,De.ALL^De.NUM);var Pr=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},ie=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ie,tn,kr,Sn,nu,Ss,ru,ou,iu,Ts,su,Pm;class Gi extends mv{constructor(e){super(),Ie.add(this),tn.set(this,void 0),kr.set(this,void 0),Sn.set(this,void 0),Pr(this,tn,e,"f"),Pr(this,kr,[],"f")}get currentChatCompletionSnapshot(){return ie(this,Sn,"f")}static fromReadableStream(e){const n=new Gi(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const o=new Gi(n);return o._run(()=>o._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createChatCompletion(e,n,r){var s;super._createChatCompletion;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),ie(this,Ie,"m",nu).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of i)ie(this,Ie,"m",ru).call(this,a);if((s=i.controller.signal)!=null&&s.aborted)throw new Tt;return this._addChatCompletion(ie(this,Ie,"m",Ts).call(this))}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ie(this,Ie,"m",nu).call(this),this._connected();const o=Xt.fromReadableStream(e,this.controller);let i;for await(const a of o)i&&i!==a.id&&this._addChatCompletion(ie(this,Ie,"m",Ts).call(this)),ie(this,Ie,"m",ru).call(this,a),i=a.id;if((s=o.controller.signal)!=null&&s.aborted)throw new Tt;return this._addChatCompletion(ie(this,Ie,"m",Ts).call(this))}[(tn=new WeakMap,kr=new WeakMap,Sn=new WeakMap,Ie=new WeakSet,nu=function(){this.ended||Pr(this,Sn,void 0,"f")},Ss=function(n){let r=ie(this,kr,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},ie(this,kr,"f")[n.index]=r,r)},ru=function(n){var o,i,s,a,c,d,f,h,m,g,x,w,T,v,y;if(this.ended)return;const r=ie(this,Ie,"m",Pm).call(this,n);this._emit("chunk",n,r);for(const _ of n.choices){const E=r.choices[_.index];_.delta.content!=null&&((o=E.message)==null?void 0:o.role)==="assistant"&&((i=E.message)!=null&&i.content)&&(this._emit("content",_.delta.content,E.message.content),this._emit("content.delta",{delta:_.delta.content,snapshot:E.message.content,parsed:E.message.parsed})),_.delta.refusal!=null&&((s=E.message)==null?void 0:s.role)==="assistant"&&((a=E.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:_.delta.refusal,snapshot:E.message.refusal}),((c=_.logprobs)==null?void 0:c.content)!=null&&((d=E.message)==null?void 0:d.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(f=_.logprobs)==null?void 0:f.content,snapshot:((h=E.logprobs)==null?void 0:h.content)??[]}),((m=_.logprobs)==null?void 0:m.refusal)!=null&&((g=E.message)==null?void 0:g.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(x=_.logprobs)==null?void 0:x.refusal,snapshot:((w=E.logprobs)==null?void 0:w.refusal)??[]});const I=ie(this,Ie,"m",Ss).call(this,E);E.finish_reason&&(ie(this,Ie,"m",iu).call(this,E),I.current_tool_call_index!=null&&ie(this,Ie,"m",ou).call(this,E,I.current_tool_call_index));for(const C of _.delta.tool_calls??[])I.current_tool_call_index!==C.index&&(ie(this,Ie,"m",iu).call(this,E),I.current_tool_call_index!=null&&ie(this,Ie,"m",ou).call(this,E,I.current_tool_call_index)),I.current_tool_call_index=C.index;for(const C of _.delta.tool_calls??[]){const A=(T=E.message.tool_calls)==null?void 0:T[C.index];A!=null&&A.type&&((A==null?void 0:A.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(v=A.function)==null?void 0:v.name,index:C.index,arguments:A.function.arguments,parsed_arguments:A.function.parsed_arguments,arguments_delta:((y=C.function)==null?void 0:y.arguments)??""}):(A==null||A.type,void 0))}}},ou=function(n,r){var s,a,c;if(ie(this,Ie,"m",Ss).call(this,n).done_tool_calls.has(r))return;const i=(s=n.message.tool_calls)==null?void 0:s[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const d=(c=(a=ie(this,tn,"f"))==null?void 0:a.tools)==null?void 0:c.find(f=>f.type==="function"&&f.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:Wi(d)?d.$parseRaw(i.function.arguments):d!=null&&d.function.strict?JSON.parse(i.function.arguments):null})}else i.type},iu=function(n){var o,i;const r=ie(this,Ie,"m",Ss).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=ie(this,Ie,"m",su).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(o=n.logprobs)!=null&&o.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Ts=function(){if(this.ended)throw new B("stream has ended, this shouldn't happen");const n=ie(this,Sn,"f");if(!n)throw new B("request ended without sending any chunks");return Pr(this,Sn,void 0,"f"),Pr(this,kr,[],"f"),qR(n,ie(this,tn,"f"))},su=function(){var r;const n=(r=ie(this,tn,"f"))==null?void 0:r.response_format;return Fd(n)?n:null},Pm=function(n){var r,o,i,s;let a=ie(this,Sn,"f");const{choices:c,...d}=n;a?Object.assign(a,d):a=Pr(this,Sn,{...d,choices:[]},"f");for(const{delta:f,finish_reason:h,index:m,logprobs:g=null,...x}of n.choices){let w=a.choices[m];if(w||(w=a.choices[m]={finish_reason:h,index:m,message:{},logprobs:g,...x}),g)if(!w.logprobs)w.logprobs=Object.assign({},g);else{const{content:C,refusal:A,...R}=g;Object.assign(w.logprobs,R),C&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...C)),A&&((o=w.logprobs).refusal??(o.refusal=[]),w.logprobs.refusal.push(...A))}if(h&&(w.finish_reason=h,ie(this,tn,"f")&&pv(ie(this,tn,"f")))){if(h==="length")throw new Y0;if(h==="content_filter")throw new K0}if(Object.assign(w,x),!f)continue;const{content:T,refusal:v,function_call:y,role:_,tool_calls:E,...I}=f;if(Object.assign(w.message,I),v&&(w.message.refusal=(w.message.refusal||"")+v),_&&(w.message.role=_),y&&(w.message.function_call?(y.name&&(w.message.function_call.name=y.name),y.arguments&&((i=w.message.function_call).arguments??(i.arguments=""),w.message.function_call.arguments+=y.arguments)):w.message.function_call=y),T&&(w.message.content=(w.message.content||"")+T,!w.message.refusal&&ie(this,Ie,"m",su).call(this)&&(w.message.parsed=Rm(w.message.content))),E){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:C,id:A,type:R,function:M,...N}of E){const G=(s=w.message.tool_calls)[C]??(s[C]={});Object.assign(G,N),A&&(G.id=A),R&&(G.type=R),M&&(G.function??(G.function={name:M.name??"",arguments:""})),M!=null&&M.name&&(G.function.name=M.name),M!=null&&M.arguments&&(G.function.arguments+=M.arguments,FR(ie(this,tn,"f"),G)&&(G.function.parsed_arguments=Rm(G.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",o=>{const i=n.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,s)=>n.push({resolve:i,reject:s})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Xt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function qR(t,e){const{id:n,choices:r,created:o,model:i,system_fingerprint:s,...a}=t,c={...a,id:n,choices:r.map(({message:d,finish_reason:f,index:h,logprobs:m,...g})=>{if(!f)throw new B(`missing finish_reason for choice ${h}`);const{content:x=null,function_call:w,tool_calls:T,...v}=d,y=d.role;if(!y)throw new B(`missing role for choice ${h}`);if(w){const{arguments:_,name:E}=w;if(_==null)throw new B(`missing function_call.arguments for choice ${h}`);if(!E)throw new B(`missing function_call.name for choice ${h}`);return{...g,message:{content:x,function_call:{arguments:_,name:E},role:y,refusal:d.refusal??null},finish_reason:f,index:h,logprobs:m}}return T?{...g,index:h,finish_reason:f,logprobs:m,message:{...v,role:y,content:x,refusal:d.refusal??null,tool_calls:T.map((_,E)=>{const{function:I,type:C,id:A,...R}=_,{arguments:M,name:N,...G}=I||{};if(A==null)throw new B(`missing choices[${h}].tool_calls[${E}].id
${Cs(t)}`);if(C==null)throw new B(`missing choices[${h}].tool_calls[${E}].type
${Cs(t)}`);if(N==null)throw new B(`missing choices[${h}].tool_calls[${E}].function.name
${Cs(t)}`);if(M==null)throw new B(`missing choices[${h}].tool_calls[${E}].function.arguments
${Cs(t)}`);return{...R,id:A,type:C,function:{...G,name:N,arguments:M}}})}}:{...g,message:{...v,content:x,role:y,refusal:d.refusal??null},finish_reason:f,index:h,logprobs:m}}),created:o,model:i,object:"chat.completion",...s?{system_fingerprint:s}:{}};return LR(c,e)}function Cs(t){return JSON.stringify(t)}class fo extends Gi{static fromReadableStream(e){const n=new fo(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const o=new fo(null),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return o._run(()=>o._runFunctions(e,n,i)),o}static runTools(e,n,r){const o=new fo(n),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,n,i)),o}}let Rv=class extends O{parse(e,n){return GR(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>Gd(r,e))}runFunctions(e,n){return e.stream?fo.runFunctions(this._client,e,n):Fi.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?fo.runTools(this._client,e,n):Fi.runTools(this._client,e,n)}stream(e,n){return Gi.createChatCompletion(this._client,e,n)}};class Ic extends O{constructor(){super(...arguments),this.completions=new Rv(this._client)}}(function(t){t.Completions=Rv})(Ic||(Ic={}));class Pv extends O{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class kv extends O{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class aa extends O{constructor(){super(...arguments),this.sessions=new Pv(this._client),this.transcriptionSessions=new kv(this._client)}}aa.Sessions=Pv;aa.TranscriptionSessions=kv;class Vd extends O{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,o){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,n={},r){return _e(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,$d,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class $d extends Pe{}Vd.MessagesPage=$d;class Bd extends O{retrieve(e,n,r,o={},i){return _e(o)?this.retrieve(e,n,r,{},o):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:o,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n,r={},o){return _e(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,Od,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}}class Od extends Pe{}Bd.RunStepsPage=Od;let Yi=class extends O{constructor(){super(...arguments),this.steps=new Bd(this._client)}create(e,n,r){const{include:o,...i}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:o},body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,o){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,n={},r){return _e(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,Hd,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const o=await this.create(e,n,r);return await this.poll(e,o.id,r)}createAndStream(e,n,r){return bt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:s}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...o}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await zi(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,n,r){return bt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,o){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,o){const i=await this.submitToolOutputs(e,n,r,o);return await this.poll(e,i.id,o)}submitToolOutputsStream(e,n,r,o){return bt.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,o)}};class Hd extends Pe{}Yi.RunsPage=Hd;Yi.Steps=Bd;Yi.RunStepsPage=Od;class Ao extends O{constructor(){super(...arguments),this.runs=new Yi(this._client),this.messages=new Vd(this._client)}create(e={},n){return _e(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return bt.createThreadAssistantStream(e,this._client.beta.threads,n)}}Ao.Runs=Yi;Ao.RunsPage=Hd;Ao.Messages=Vd;Ao.MessagesPage=$d;class No extends O{constructor(){super(...arguments),this.realtime=new aa(this._client),this.chat=new Ic(this._client),this.assistants=new bd(this._client),this.threads=new Ao(this._client)}}No.Realtime=aa;No.Assistants=bd;No.AssistantsPage=Ud;No.Threads=Ao;class Mv extends O{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class Dv extends O{retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}}let ua=class extends O{constructor(){super(...arguments),this.content=new Dv(this._client)}create(e,n,r){return this._client.post(`/containers/${e}/files`,wr({body:n,...r}))}retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}`,r)}list(e,n={},r){return _e(n)?this.list(e,{},n):this._client.getAPIList(`/containers/${e}/files`,qd,{query:n,...r})}del(e,n,r){return this._client.delete(`/containers/${e}/files/${n}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}};class qd extends Pe{}ua.FileListResponsesPage=qd;ua.Content=Dv;class Ki extends O{constructor(){super(...arguments),this.files=new ua(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(`/containers/${e}`,n)}list(e={},n){return _e(e)?this.list({},e):this._client.getAPIList("/containers",zd,{query:e,...n})}del(e,n){return this._client.delete(`/containers/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class zd extends Pe{}Ki.ContainerListResponsesPage=zd;Ki.Files=ua;Ki.FileListResponsesPage=qd;class Lv extends O{create(e,n){const r=!!e.encoding_format;let o=r?e.encoding_format:"base64";r&&On("Request","User defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:o},...n});return r?i:(On("response","Decoding base64 embeddings to float32 array"),i._thenUnwrap(s=>(s&&s.data&&s.data.forEach(a=>{const c=a.embedding;a.embedding=MR(c)}),s)))}}class Jd extends O{retrieve(e,n,r,o){return this._client.get(`/evals/${e}/runs/${n}/output_items/${r}`,o)}list(e,n,r={},o){return _e(r)?this.list(e,n,{},r):this._client.getAPIList(`/evals/${e}/runs/${n}/output_items`,Wd,{query:r,...o})}}class Wd extends Pe{}Jd.OutputItemListResponsesPage=Wd;class Xi extends O{constructor(){super(...arguments),this.outputItems=new Jd(this._client)}create(e,n,r){return this._client.post(`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){return this._client.get(`/evals/${e}/runs/${n}`,r)}list(e,n={},r){return _e(n)?this.list(e,{},n):this._client.getAPIList(`/evals/${e}/runs`,Yd,{query:n,...r})}del(e,n,r){return this._client.delete(`/evals/${e}/runs/${n}`,r)}cancel(e,n,r){return this._client.post(`/evals/${e}/runs/${n}`,r)}}class Yd extends Pe{}Xi.RunListResponsesPage=Yd;Xi.OutputItems=Jd;Xi.OutputItemListResponsesPage=Wd;class Qi extends O{constructor(){super(...arguments),this.runs=new Xi(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(`/evals/${e}`,n)}update(e,n,r){return this._client.post(`/evals/${e}`,{body:n,...r})}list(e={},n){return _e(e)?this.list({},e):this._client.getAPIList("/evals",Kd,{query:e,...n})}del(e,n){return this._client.delete(`/evals/${e}`,n)}}class Kd extends Pe{}Qi.EvalListResponsesPage=Kd;Qi.Runs=Xi;Qi.RunListResponsesPage=Yd;let Xd=class extends O{create(e,n){return this._client.post("/files",wr({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return _e(e)?this.list({},e):this._client.getAPIList("/files",Qd,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const o=new Set(["processed","error","deleted"]),i=Date.now();let s=await this.retrieve(e);for(;!s.status||!o.has(s.status);)if(await zi(n),s=await this.retrieve(e),Date.now()-i>r)throw new kd({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return s}};class Qd extends Pe{}Xd.FileObjectsPage=Qd;class bv extends O{}let Uv=class extends O{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Zd extends O{constructor(){super(...arguments),this.graders=new Uv(this._client)}}Zd.Graders=Uv;class jd extends O{create(e,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,ef,{body:n,method:"post",...r})}retrieve(e,n={},r){return _e(n)?this.retrieve(e,{},n):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}del(e,n,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${n}`,r)}}class ef extends oa{}jd.PermissionCreateResponsesPage=ef;let ca=class extends O{constructor(){super(...arguments),this.permissions=new jd(this._client)}};ca.Permissions=jd;ca.PermissionCreateResponsesPage=ef;class tf extends O{list(e,n={},r){return _e(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,nf,{query:n,...r})}}class nf extends Pe{}tf.FineTuningJobCheckpointsPage=nf;class Ro extends O{constructor(){super(...arguments),this.checkpoints=new tf(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return _e(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",rf,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return _e(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,of,{query:n,...r})}pause(e,n){return this._client.post(`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(`/fine_tuning/jobs/${e}/resume`,n)}}class rf extends Pe{}class of extends Pe{}Ro.FineTuningJobsPage=rf;Ro.FineTuningJobEventsPage=of;Ro.Checkpoints=tf;Ro.FineTuningJobCheckpointsPage=nf;class Kn extends O{constructor(){super(...arguments),this.methods=new bv(this._client),this.jobs=new Ro(this._client),this.checkpoints=new ca(this._client),this.alpha=new Zd(this._client)}}Kn.Methods=bv;Kn.Jobs=Ro;Kn.FineTuningJobsPage=rf;Kn.FineTuningJobEventsPage=of;Kn.Checkpoints=ca;Kn.Alpha=Zd;class Fv extends O{}class sf extends O{constructor(){super(...arguments),this.graderModels=new Fv(this._client)}}sf.GraderModels=Fv;class Gv extends O{createVariation(e,n){return this._client.post("/images/variations",wr({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",wr({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class lf extends O{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",af,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class af extends oa{}lf.ModelsPage=af;class Vv extends O{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function zR(t,e){return!e||!WR(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:$v(t,e)}function $v(t,e){const n=t.output.map(o=>{if(o.type==="function_call")return{...o,parsed_arguments:XR(e,o)};if(o.type==="message"){const i=o.content.map(s=>s.type==="output_text"?{...s,parsed:JR(e,s.text)}:s);return{...o,content:i}}return o}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Bv(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const o of r.output)if(o.type==="message"){for(const i of o.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function JR(t,e){var n,r,o,i;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((o=t.text)==null?void 0:o.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function WR(t){var e;return!!Fd((e=t.text)==null?void 0:e.format)}function YR(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function KR(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function XR(t,e){const n=KR(t.tools??[],e.name);return{...e,...e,parsed_arguments:YR(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function Bv(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class Ov extends O{list(e,n={},r){return _e(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,ZR,{query:n,...r})}}var Mr=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Tn=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Dr,Is,Cn,As,km,Mm,Dm,Lm;class uf extends Ld{constructor(e){super(),Dr.add(this),Is.set(this,void 0),Cn.set(this,void 0),As.set(this,void 0),Mr(this,Is,e,"f")}static createResponse(e,n,r){const o=new uf(n);return o._run(()=>o._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createOrRetrieveResponse(e,n,r){var a;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),Tn(this,Dr,"m",km).call(this);let i,s=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),s=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const c of i)Tn(this,Dr,"m",Mm).call(this,c,s);if((a=i.controller.signal)!=null&&a.aborted)throw new Tt;return Tn(this,Dr,"m",Dm).call(this)}[(Is=new WeakMap,Cn=new WeakMap,As=new WeakMap,Dr=new WeakSet,km=function(){this.ended||Mr(this,Cn,void 0,"f")},Mm=function(n,r){if(this.ended)return;const o=(s,a)=>{(r==null||a.sequence_number>r)&&this._emit(s,a)},i=Tn(this,Dr,"m",Lm).call(this,n);switch(o("event",n),n.type){case"response.output_text.delta":{const s=i.output[n.output_index];if(!s)throw new B(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new B(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new B(`expected content to be 'output_text', got ${a.type}`);o("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const s=i.output[n.output_index];if(!s)throw new B(`missing output at index ${n.output_index}`);s.type==="function_call"&&o("response.function_call_arguments.delta",{...n,snapshot:s.arguments});break}default:o(n.type,n);break}},Dm=function(){if(this.ended)throw new B("stream has ended, this shouldn't happen");const n=Tn(this,Cn,"f");if(!n)throw new B("request ended without sending any events");Mr(this,Cn,void 0,"f");const r=QR(n,Tn(this,Is,"f"));return Mr(this,As,r,"f"),r},Lm=function(n){let r=Tn(this,Cn,"f");if(!r){if(n.type!=="response.created")throw new B(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Mr(this,Cn,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const o=r.output[n.output_index];if(!o)throw new B(`missing output at index ${n.output_index}`);o.type==="message"&&o.content.push(n.part);break}case"response.output_text.delta":{const o=r.output[n.output_index];if(!o)throw new B(`missing output at index ${n.output_index}`);if(o.type==="message"){const i=o.content[n.content_index];if(!i)throw new B(`missing content at index ${n.content_index}`);if(i.type!=="output_text")throw new B(`expected content to be 'output_text', got ${i.type}`);i.text+=n.delta}break}case"response.function_call_arguments.delta":{const o=r.output[n.output_index];if(!o)throw new B(`missing output at index ${n.output_index}`);o.type==="function_call"&&(o.arguments+=n.delta);break}case"response.completed":{Mr(this,Cn,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",o=>{const i=n.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,s)=>n.push({resolve:i,reject:s})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Tn(this,As,"f");if(!e)throw new B("stream ended without producing a ChatCompletion");return e}}function QR(t,e){return zR(t,e)}class cf extends O{constructor(){super(...arguments),this.inputItems=new Ov(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&Bv(r),r))}retrieve(e,n={},r){return this._client.get(`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>$v(r,e))}stream(e,n){return uf.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(`/responses/${e}/cancel`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class ZR extends Pe{}cf.InputItems=Ov;class Hv extends O{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,wr({body:n,...r}))}}class df extends O{constructor(){super(...arguments),this.parts=new Hv(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}df.Parts=Hv;const jR=async t=>{const e=await Promise.allSettled(t),n=e.filter(o=>o.status==="rejected");if(n.length){for(const o of n)console.error(o.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const o of e)o.status==="fulfilled"&&r.push(o.value);return r};class da extends O{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,o){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,n={},r){return _e(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,fa,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const o=await this.create(e,n,r);return await this.poll(e,o.id,r)}async poll(e,n,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const i=await this.retrieve(e,n,{...r,headers:o}).withResponse(),s=i.data;switch(s.status){case"in_progress":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const c=i.response.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await zi(a);break;case"failed":case"completed":return s}}}async upload(e,n,r){const o=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:o.id},r)}async uploadAndPoll(e,n,r){const o=await this.upload(e,n,r);return await this.poll(e,o.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,ff,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class fa extends Pe{}class ff extends oa{}da.VectorStoreFilesPage=fa;da.FileContentResponsesPage=ff;class qv extends O{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const o=await this.create(e,n);return await this.poll(e,o.id,r)}listFiles(e,n,r={},o){return _e(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,fa,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async poll(e,n,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:s}=await this.retrieve(e,n,{...r,headers:o}).withResponse();switch(i.status){case"in_progress":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await zi(a);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},o){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(o==null?void 0:o.maxConcurrency)??5,s=Math.min(i,n.length),a=this._client,c=n.values(),d=[...r];async function f(m){for(let g of m){const x=await a.files.create({file:g,purpose:"assistants"},o);d.push(x.id)}}const h=Array(s).fill(c).map(f);return await jR(h),await this.createAndPoll(e,{file_ids:d})}}class Xn extends O{constructor(){super(...arguments),this.files=new da(this._client),this.fileBatches=new qv(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return _e(e)?this.list({},e):this._client.getAPIList("/vector_stores",pf,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,hf,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class pf extends Pe{}class hf extends oa{}Xn.VectorStoresPage=pf;Xn.VectorStoreSearchResponsesPage=hf;Xn.Files=da;Xn.VectorStoreFilesPage=fa;Xn.FileContentResponsesPage=ff;Xn.FileBatches=qv;var zv;class z extends wR{constructor({baseURL:e=xs("OPENAI_BASE_URL"),apiKey:n=xs("OPENAI_API_KEY"),organization:r=xs("OPENAI_ORG_ID")??null,project:o=xs("OPENAI_PROJECT_ID")??null,...i}={}){if(n===void 0)throw new B("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:n,organization:r,project:o,...i,baseURL:e||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&PR())throw new B(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new Mv(this),this.chat=new la(this),this.embeddings=new Lv(this),this.files=new Xd(this),this.images=new Gv(this),this.audio=new Ji(this),this.moderations=new Vv(this),this.models=new lf(this),this.fineTuning=new Kn(this),this.graders=new sf(this),this.vectorStores=new Xn(this),this.beta=new No(this),this.batches=new Md(this),this.uploads=new df(this),this.responses=new cf(this),this.evals=new Qi(this),this.containers=new Ki(this),this._options=s,this.apiKey=n,this.organization=r,this.project=o}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return nR(e,{arrayFormat:"brackets"})}}zv=z;z.OpenAI=zv;z.DEFAULT_TIMEOUT=6e5;z.OpenAIError=B;z.APIError=Be;z.APIConnectionError=ea;z.APIConnectionTimeoutError=kd;z.APIUserAbortError=Tt;z.NotFoundError=H0;z.ConflictError=q0;z.RateLimitError=J0;z.BadRequestError=$0;z.AuthenticationError=B0;z.InternalServerError=W0;z.PermissionDeniedError=O0;z.UnprocessableEntityError=z0;z.toFile=j0;z.fileFromPath=F0;z.Completions=Mv;z.Chat=la;z.ChatCompletionsPage=sa;z.Embeddings=Lv;z.Files=Xd;z.FileObjectsPage=Qd;z.Images=Gv;z.Audio=Ji;z.Moderations=Vv;z.Models=lf;z.ModelsPage=af;z.FineTuning=Kn;z.Graders=sf;z.VectorStores=Xn;z.VectorStoresPage=pf;z.VectorStoreSearchResponsesPage=hf;z.Beta=No;z.Batches=Md;z.BatchesPage=Dd;z.Uploads=df;z.Responses=cf;z.Evals=Qi;z.EvalListResponsesPage=Kd;z.Containers=Ki;z.ContainerListResponsesPage=zd;const Ac=10,bm=3,eP=2e3;let Ks=15,Gr=[];const lu=t=>{Ks=t,Gr=[],console.log(`Global Rate Limit set to: ${t}`)},Jv=t=>new Promise(e=>setTimeout(e,t)),Tr=async()=>{if(Ks==="unlimited")return;const t=Date.now();if(Gr=Gr.filter(e=>t-e<6e4),Gr.length>=Ks){const e=Gr[0],n=6e4-(t-e)+100;console.warn(`Rate limit (${Ks} RPM) hit. Waiting ${n}ms...`),await Jv(n),await Tr()}else Gr.push(Date.now())};function tP(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let o=0;o<r;o++)e+=String.fromCharCode(n[o]);return window.btoa(e)}const nP=async t=>{if(!t||!t.startsWith("AIzaSy"))return!1;const e=["gemini-2.0-flash","gemini-2.5-flash"],n=new Pd({apiKey:t});for(const r of e)try{return await Tr(),await n.models.countTokens({model:r,contents:[{role:"user",parts:[{text:"test"}]}]}),!0}catch(o){if((o==null?void 0:o.status)==="NOT_FOUND"||(o==null?void 0:o.message)&&o.message.includes("NOT_FOUND"))console.warn(`Validation with model "${r}" failed (Not Found). Trying next model...`);else return console.error("Google API Key validation failed with a critical error:",o),!1}return console.error("All fallback models for Google API Key validation failed."),!1},rP=async t=>{if(!t||!t.startsWith("sk-"))return!1;try{return await Tr(),await new z({apiKey:t,dangerouslyAllowBrowser:!0}).models.list(),!0}catch(e){return console.error("OpenAI API Key validation failed:",e),!1}};async function oP(t,e,n,r){const o=new Pd({apiKey:n}),i=await t.arrayBuffer(),a=[{inlineData:{data:tP(i),mimeType:t.type}}],c=`You are a professional captioning AI.
    TASK: Transcribe the audio perfectly into SRT (SubRip) subtitle format.
    LANGUAGE: ${e==="auto"?"Detect the spoken language automatically":e}.
    
    CRITICAL FORMATTING RULES:
    1.  **Strict Segmentation**: You MUST split the audio into SHORT, distinct subtitle blocks.
    2.  **Timing**: Each block must have exact timestamps corresponding to when those specific words are spoken.
    3.  **Length Limit**: Max 42 characters per line. Max 2 lines per block.
    4.  **Duration**: No single subtitle block should last longer than 5 seconds. Split long sentences into multiple blocks.
    5.  **Output**: Return ONLY the SRT content. No markdown, no "Here is the SRT", no code blocks. Just the raw text.

    Bad Example (DO NOT DO THIS):
    1
    00:00:00,000 --> 00:00:30,000
    [30 seconds of text crammed into one block...]

    Good Example (DO THIS):
    1
    00:00:01,000 --> 00:00:03,500
    Welcome back to the channel.

    2
    00:00:03,600 --> 00:00:06,000
    Today we are discussing AI models.
    `;await Tr();const f=(await o.models.generateContent({model:r,contents:[{role:"user",parts:[{text:c},...a]}]})).text;if(!f)throw new Error("No transcription generated.");return f.replace(/```srt\n|```/g,"").trim()}async function iP(t,e,n,r){const o=new z({apiKey:n,dangerouslyAllowBrowser:!0}),s={file:new File([t],"audio.mp3",{type:t.type}),model:r,response_format:"srt"};if(e!=="auto"){const c=br.find(d=>d.name===e);c&&(s.language=c.code)}await Tr();const a=await o.audio.transcriptions.create(s);if(typeof a!="string")throw new Error("OpenAI transcription returned an invalid result.");return a}async function sP(t,e,n,r){if(r.provider==="openai"){if(!r.transcriptionModel)throw new Error("Transcription model not defined for the selected OpenAI model.");return iP(t,e,n,r.transcriptionModel)}return oP(t,e,n,r.id)}const Wv=(t,e,n)=>`You are a professional subtitle translator. 
    Your task is to translate subtitles from ${t==="auto"?"the detected language":t} to ${e}.
    
    CRITICAL RULES:
    1. Maintain the context of the dialogue. Look at surrounding lines in the batch to understand incomplete sentences.
    2. Keep the translation concise to fit within subtitle timing constraints.
    3. Do NOT translate proper nouns or technical terms if they are standard in the target region.
    4. Return ONLY a JSON array containing objects with 'id' and 'text' (the translated text).
    5. The 'id' must match the input 'id' exactly.
    6. Do not include timestamps in the output, only the ID and the translated text.
    
    The JSON to translate is below:
    ${JSON.stringify(n)}`;async function lP(t,e,n,r,o){const i=new Pd({apiKey:r}),s=t.map(m=>({id:m.id,text:m.text})),a=Wv(e,n,s),c={responseMimeType:"application/json"};await Tr();const f=(await i.models.generateContent({model:o,contents:[{role:"user",parts:[{text:a}]}],config:c})).text;if(!f)throw new Error("Received empty response from Google AI.");const h=JSON.parse(f);if(!Array.isArray(h))throw new Error("Invalid JSON format from Google AI.");return h}async function aP(t,e,n,r,o){const i=new z({apiKey:r,dangerouslyAllowBrowser:!0}),s=t.map(m=>({id:m.id,text:m.text})),a=Wv(e,n,s);await Tr();const d=(await i.chat.completions.create({model:o,messages:[{role:"system",content:a}],response_format:{type:"json_object"}})).choices[0].message.content;if(!d)throw new Error("Received empty response from OpenAI.");const f=JSON.parse(d),h=Array.isArray(f)?f:Object.values(f).find(Array.isArray);if(!h)throw new Error("Invalid JSON format from OpenAI: could not find a JSON array in the response.");return h}const uP=async(t,e,n,r,o)=>{let i;for(let s=1;s<=bm;s++)try{return o.provider==="openai"?await aP(t,e,n,r,o.id):await lP(t,e,n,r,o.id)}catch(a){if(console.warn(`Attempt ${s} failed for ${o.provider}:`,a),i=a,s<bm){const c=eP*Math.pow(1.5,s-1);await Jv(c)}}throw i},cP=async(t,e,n,r,o,i,s)=>{if(!r)throw new Error(`API Key for ${o.provider} is missing. Please add the appropriate key in Settings.`);const a=[...t];let c=0;for(let d=0;d<t.length;d+=Ac){const f=t.slice(d,d+Ac);try{(await uP(f,e,n,r,o)).forEach(m=>{const g=a.findIndex(x=>x.id===m.id);g!==-1&&(a[g]={...a[g],text:m.text})}),c+=f.length,i(Math.min(c,t.length)),s([...a])}catch(h){throw console.error(`Batch starting at ${d} failed after retries`,h),new Error(`Translation failed at subtitle #${f[0].id}. The server might be busy or the content too complex. Please try again.`)}}return a},dP="modulepreload",fP=function(t){return"/SubStream-AI/"+t},Um={},pP=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=fP(c),c in Um)return;Um[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":dP,d||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var re;(function(t){t.LOAD="LOAD",t.EXEC="EXEC",t.FFPROBE="FFPROBE",t.WRITE_FILE="WRITE_FILE",t.READ_FILE="READ_FILE",t.DELETE_FILE="DELETE_FILE",t.RENAME="RENAME",t.CREATE_DIR="CREATE_DIR",t.LIST_DIR="LIST_DIR",t.DELETE_DIR="DELETE_DIR",t.ERROR="ERROR",t.DOWNLOAD="DOWNLOAD",t.PROGRESS="PROGRESS",t.LOG="LOG",t.MOUNT="MOUNT",t.UNMOUNT="UNMOUNT"})(re||(re={}));const hP=(()=>{let t=0;return()=>t++})(),mP=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),gP=new Error("called FFmpeg.terminate()");var ht,Pn,sn,dr,fr,Dl,Xe;class yP{constructor(){xn(this,ht,null);xn(this,Pn,{});xn(this,sn,{});xn(this,dr,[]);xn(this,fr,[]);Ke(this,"loaded",!1);xn(this,Dl,()=>{K(this,ht)&&(K(this,ht).onmessage=({data:{id:e,type:n,data:r}})=>{switch(n){case re.LOAD:this.loaded=!0,K(this,Pn)[e](r);break;case re.MOUNT:case re.UNMOUNT:case re.EXEC:case re.FFPROBE:case re.WRITE_FILE:case re.READ_FILE:case re.DELETE_FILE:case re.RENAME:case re.CREATE_DIR:case re.LIST_DIR:case re.DELETE_DIR:K(this,Pn)[e](r);break;case re.LOG:K(this,dr).forEach(o=>o(r));break;case re.PROGRESS:K(this,fr).forEach(o=>o(r));break;case re.ERROR:K(this,sn)[e](r);break}delete K(this,Pn)[e],delete K(this,sn)[e]})});xn(this,Xe,({type:e,data:n},r=[],o)=>K(this,ht)?new Promise((i,s)=>{const a=hP();K(this,ht)&&K(this,ht).postMessage({id:a,type:e,data:n},r),K(this,Pn)[a]=i,K(this,sn)[a]=s,o==null||o.addEventListener("abort",()=>{s(new DOMException(`Message # ${a} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(mP));Ke(this,"load",({classWorkerURL:e,...n}={},{signal:r}={})=>(K(this,ht)||(Vo(this,ht,e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL("/SubStream-AI/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),K(this,Dl).call(this)),K(this,Xe).call(this,{type:re.LOAD,data:n},void 0,r)));Ke(this,"exec",(e,n=-1,{signal:r}={})=>K(this,Xe).call(this,{type:re.EXEC,data:{args:e,timeout:n}},void 0,r));Ke(this,"ffprobe",(e,n=-1,{signal:r}={})=>K(this,Xe).call(this,{type:re.FFPROBE,data:{args:e,timeout:n}},void 0,r));Ke(this,"terminate",()=>{const e=Object.keys(K(this,sn));for(const n of e)K(this,sn)[n](gP),delete K(this,sn)[n],delete K(this,Pn)[n];K(this,ht)&&(K(this,ht).terminate(),Vo(this,ht,null),this.loaded=!1)});Ke(this,"writeFile",(e,n,{signal:r}={})=>{const o=[];return n instanceof Uint8Array&&o.push(n.buffer),K(this,Xe).call(this,{type:re.WRITE_FILE,data:{path:e,data:n}},o,r)});Ke(this,"mount",(e,n,r)=>{const o=[];return K(this,Xe).call(this,{type:re.MOUNT,data:{fsType:e,options:n,mountPoint:r}},o)});Ke(this,"unmount",e=>{const n=[];return K(this,Xe).call(this,{type:re.UNMOUNT,data:{mountPoint:e}},n)});Ke(this,"readFile",(e,n="binary",{signal:r}={})=>K(this,Xe).call(this,{type:re.READ_FILE,data:{path:e,encoding:n}},void 0,r));Ke(this,"deleteFile",(e,{signal:n}={})=>K(this,Xe).call(this,{type:re.DELETE_FILE,data:{path:e}},void 0,n));Ke(this,"rename",(e,n,{signal:r}={})=>K(this,Xe).call(this,{type:re.RENAME,data:{oldPath:e,newPath:n}},void 0,r));Ke(this,"createDir",(e,{signal:n}={})=>K(this,Xe).call(this,{type:re.CREATE_DIR,data:{path:e}},void 0,n));Ke(this,"listDir",(e,{signal:n}={})=>K(this,Xe).call(this,{type:re.LIST_DIR,data:{path:e}},void 0,n));Ke(this,"deleteDir",(e,{signal:n}={})=>K(this,Xe).call(this,{type:re.DELETE_DIR,data:{path:e}},void 0,n))}on(e,n){e==="log"?K(this,dr).push(n):e==="progress"&&K(this,fr).push(n)}off(e,n){e==="log"?Vo(this,dr,K(this,dr).filter(r=>r!==n)):e==="progress"&&Vo(this,fr,K(this,fr).filter(r=>r!==n))}}ht=new WeakMap,Pn=new WeakMap,sn=new WeakMap,dr=new WeakMap,fr=new WeakMap,Dl=new WeakMap,Xe=new WeakMap;var Fm;(function(t){t.MEMFS="MEMFS",t.NODEFS="NODEFS",t.NODERAWFS="NODERAWFS",t.IDBFS="IDBFS",t.WORKERFS="WORKERFS",t.PROXYFS="PROXYFS"})(Fm||(Fm={}));const vP=new Error("failed to get response body reader"),_P=new Error("failed to complete download"),wP="Content-Length",xP=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const{result:o}=r;o instanceof ArrayBuffer?e(new Uint8Array(o)):e(new Uint8Array)},r.onerror=o=>{var i,s;n(Error(`File could not be read! Code=${((s=(i=o==null?void 0:o.target)==null?void 0:i.error)==null?void 0:s.code)||-1}`))},r.readAsArrayBuffer(t)}),mf=async t=>{let e;if(typeof t=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(t instanceof URL)e=await(await fetch(t)).arrayBuffer();else if(t instanceof File||t instanceof Blob)e=await xP(t);else return new Uint8Array;return new Uint8Array(e)},Yv=async(t,e)=>{var o;const n=await fetch(t);let r;try{const i=parseInt(n.headers.get(wP)||"-1"),s=(o=n.body)==null?void 0:o.getReader();if(!s)throw vP;const a=[];let c=0;for(;;){const{done:h,value:m}=await s.read(),g=m?m.length:0;if(h){if(i!=-1&&i!==c)throw _P;e&&e({url:t,total:i,received:c,delta:g,done:h});break}a.push(m),c+=g,e&&e({url:t,total:i,received:c,delta:g,done:h})}const d=new Uint8Array(c);let f=0;for(const h of a)d.set(h,f),f+=h.length;r=d.buffer}catch(i){console.log("failed to send download progress event: ",i),r=await n.arrayBuffer(),e&&e({url:t,total:r.byteLength,received:r.byteLength,delta:0,done:!0})}return r},EP=async(t,e,n=!1,r)=>{const o=n?await Yv(t,r):await(await fetch(t)).arrayBuffer(),i=new Blob([o],{type:e});return URL.createObjectURL(i)},SP=Object.freeze(Object.defineProperty({__proto__:null,downloadWithProgress:Yv,fetchFile:mf,toBlobURL:EP},Symbol.toStringTag,{value:"Module"})),Lr=new yP;async function TP(t){if(console.log("loadFFmpeg: Awaiting lock and checking if loaded..."),Lr.loaded)return console.log("loadFFmpeg: Already loaded."),t("Engine ready."),Lr;Lr.on("log",({message:n})=>{console.log("FFMPEG LOG:",n)}),Lr.on("progress",({progress:n})=>{console.log(`FFmpeg Progress: ${(n*100).toFixed(2)}%`)}),t("Loading core video engine...");const e="https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm";try{console.log(`loadFFmpeg: Attempting to load core from CDN: ${e}`);const{toBlobURL:n}=await pP(async()=>{const{toBlobURL:r}=await Promise.resolve().then(()=>SP);return{toBlobURL:r}},void 0);console.log("loadFFmpeg: Dynamic import of toBlobURL successful."),await Lr.load({coreURL:await n(`${e}/ffmpeg-core.js`,"text/javascript"),wasmURL:await n(`${e}/ffmpeg-core.wasm`,"application/wasm")}),console.log("loadFFmpeg: ffmpeg.load() completed successfully."),t("Engine loaded.")}catch(n){throw console.error("CRITICAL ERROR during FFmpeg load:",n),n}return Lr}async function CP(t,e){console.log("analyzeVideoFile: Starting analysis..."),await t.writeFile("input.video",await mf(e)),console.log("analyzeVideoFile: Video file written to FFmpeg memory.");const n=["-i","input.video","-hide_banner"];let r="";const o=({message:a})=>{r+=a+`
`};t.on("log",o),console.log("analyzeVideoFile: Executing probing command...");try{await t.exec(n)}catch(a){console.log("analyzeVideoFile: Caught an error during exec, which is expected for probing. Error:",a)}finally{t.off("log",o),console.log("analyzeVideoFile: Log listener removed.")}if(!r)throw console.error("analyzeVideoFile: FFmpeg returned no data. This indicates a critical failure."),new Error("Could not analyze video file. FFmpeg returned no data.");console.log("analyzeVideoFile: Parsing FFmpeg output for subtitle tracks.");const i=[];return r.split(`
`).forEach(a=>{if(a.trim().startsWith("Stream #")&&a.includes("Subtitle:")){const c=a.match(/Stream #\d+:(\d+)(\((\w+)\))?: Subtitle: .*?(?:\(default\))?/),d=a.match(/title\s+:\s+(.*)/);c&&i.push({index:parseInt(c[1]),language:c[3]||"und",title:d?d[1].trim():`Track ${c[1]}`})}}),console.log(`analyzeVideoFile: Found ${i.length} subtitle tracks.`),i}async function IP(t,e){const n=["-i","input.video","-map",`0:s:${e}`,"output.srt"];await t.exec(n);const r=await t.readFile("output.srt");return new TextDecoder().decode(r)}async function AP(t){const e=["-i","input.video","-vn","-acodec","libmp3lame","-q:a","2","output.mp3"];await t.exec(e);const n=await t.readFile("output.mp3");if(n instanceof Uint8Array){const r=new Uint8Array(n);return new Blob([r],{type:"audio/mp3"})}throw new Error("FFmpeg did not return a valid binary file for audio extraction.")}async function NP(t,e,n,r){await t.writeFile("input.video",await mf(e)),await t.writeFile("subtitles.srt",new TextEncoder().encode(n));const o="output.mkv",i=["-i","input.video","-i","subtitles.srt","-c","copy","-map","0","-map","-0:s","-map","1","-c:s:0","srt","-metadata:s:s:0",`language=${r}`,o];await t.exec(i);const s=await t.readFile(o);if(s instanceof Uint8Array){const a=new Uint8Array(s);return new Blob([a],{type:"video/x-matroska"})}throw new Error("FFmpeg did not return a valid binary file for video muxing.")}const Po="http://localhost:4000/api",RP=t=>new Promise(e=>setTimeout(e,t));function PP(t){const e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,n=t.match(e);return n&&n[7].length===11?n[7]:null}async function Gm(t){try{const e=await fetch(`${Po}/info?url=${encodeURIComponent(t)}`);if(!e.ok){const r=await e.json().catch(()=>({}));throw new Error(r.error||`Server returned ${e.status}: Failed to process video.`)}const n=await e.json();return n.meta.videoUrl=n.meta.videoUrl||t,{meta:n.meta,captions:n.captions}}catch(e){throw console.error("Backend API Error:",e),e.name==="TypeError"&&e.message==="Failed to fetch"?new Error("Could not connect to local server. Please run 'npm start' in the 'server' folder."):new Error(e.message||"Failed to fetch video details.")}}async function kP(t,e){try{const n=new URLSearchParams({url:t,token:e}),r=await fetch(`${Po}/caption?${n.toString()}`);if(!r.ok){const o=await r.text();throw new Error(o||"Failed to download caption track from backend.")}return await r.text()}catch(n){throw console.error("Subtitle download failed:",n),new Error(n.message||"Failed to download subtitles.")}}async function MP(t,e,n){const r=new URLSearchParams({url:t,token:e,name:n});try{const o=await fetch(`${Po}/download-video?${r.toString()}`);if(!o.ok){const a=await o.text().catch(()=>"Unknown Server Error");throw new Error(a||"Download failed on server.")}const i=await o.blob(),s=n.endsWith(".mp4")?n:`${n}.mp4`;oc(s,i)}catch(o){throw console.error("Video download failed:",o),new Error(o.message||"Failed to download video from server.")}}async function DP(t){var d,f,h,m;const e=await fetch("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&mine=true",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw e.status===401?new Error("Session expired. Please Sign Out and Sign In again in Settings."):e.status===403?new Error("Access forbidden. API Quota might be exceeded or YouTube Data API is disabled."):new Error(`Failed to fetch channel details (${e.status})`);const r=(m=(h=(f=(d=(await e.json()).items)==null?void 0:d[0])==null?void 0:f.contentDetails)==null?void 0:h.relatedPlaylists)==null?void 0:m.uploads;if(!r)return[];const o=await fetch(`https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails&playlistId=${r}&maxResults=50`,{headers:{Authorization:`Bearer ${t}`}});if(!o.ok)throw o.status===401?new Error("Session expired. Please re-authenticate."):new Error("Failed to fetch playlist items.");const s=(await o.json()).items.map(g=>g.contentDetails.videoId).join(",");if(!s)return[];const a=await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet,status,contentDetails&id=${s}`,{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)throw new Error("Failed to fetch video details.");return(await a.json()).items.map(g=>{var x,w,T,v;return{id:g.id,title:g.snippet.title,description:g.snippet.description,thumbnail:((w=(x=g.snippet.thumbnails)==null?void 0:x.medium)==null?void 0:w.url)||((v=(T=g.snippet.thumbnails)==null?void 0:T.default)==null?void 0:v.url),publishedAt:g.snippet.publishedAt,privacyStatus:g.status.privacyStatus,duration:LP(g.contentDetails.duration)}})}function LP(t){const e=t.match(/PT(\d+H)?(\d+M)?(\d+S)?/);if(!e)return"00:00";const n=(e[1]||"").replace("H",""),r=(e[2]||"").replace("M",""),o=(e[3]||"").replace("S",""),i=n?`${n}:`:"",s=r?`${r.padStart(2,"0")}:`:"00:",a=o?o.padStart(2,"0"):"00";return`${i}${s}${a}`.replace(/^00:/,"")}async function bP(t,e,n,r){const o={snippet:{title:n,description:"Uploaded automatically by SubStream AI for transcription."},status:{privacyStatus:"unlisted"}},i=await fetch(`${Po}/proxy/upload-init`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,metadata:o,fileSize:e.size.toString(),fileType:e.type||"video/mp4"})});if(!i.ok){const a=await i.json().catch(()=>({}));let c="Unknown Error";throw a.error&&typeof a.error=="object"&&a.error.message?c=a.error.message:a.error?c=JSON.stringify(a.error):a.message&&(c=a.message),c=c.replace(/<[^>]*>?/gm,""),console.error("YouTube Upload Init Failed Response:",a),i.status===403?new Error(`YouTube Permission Denied (403): ${c}. Ensure 'YouTube Data API v3' is ENABLED in Google Cloud Console and Quota is not exceeded.`):i.status===401?new Error("Session Expired (401). Please re-authenticate YouTube."):new Error(`Upload Init Failed (${i.status}): ${c}`)}const{location:s}=await i.json();if(!s)throw new Error("Backend did not return an upload location.");return new Promise((a,c)=>{const d=new XMLHttpRequest;d.open("PUT",s,!0),d.setRequestHeader("Content-Type",e.type||"video/mp4"),d.upload.onprogress=f=>{if(f.lengthComputable&&r){const h=Math.round(f.loaded/f.total*100);r(h)}},d.onload=()=>{if(d.status>=200&&d.status<300)try{const f=JSON.parse(d.responseText);a(f.id)}catch{c(new Error("Failed to parse YouTube response after upload."))}else c(new Error(`Binary Upload Failed (${d.status}): ${d.statusText}`))},d.onerror=()=>c(new Error("Network Error during Binary Upload (Check AdBlocker/Firewall).")),d.send(e)})}async function UP(t,e,n){for(let i=0;i<120;i++){const s=Math.round(i/120*100);try{n&&n(`Waiting for YouTube to generate captions... (${i+1}/120)`,s);const a=await fetch(`${Po}/proxy/captions?token=${encodeURIComponent(t)}&videoId=${e}`);if(!a.ok)console.warn(`Caption check failed (${a.status})`);else{const c=await a.json();if(c.items&&c.items.length>0){const f=c.items.find(h=>h.snippet.trackKind==="ASR")||c.items[0];if(f&&f.id)return n&&n("Captions generated successfully!",100),f.id}}}catch(a){console.warn("Polling error:",a)}await RP(1e4)}throw new Error("Timed out waiting for YouTube captions.")}async function FP(t,e){const n=await fetch(`${Po}/proxy/download-caption?token=${encodeURIComponent(t)}&captionId=${e}`);if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(`Failed to download caption: ${r.error||n.statusText}`)}return await n.text()}const it=({children:t,variant:e="primary",icon:n,className:r="",progress:o,statusText:i,completed:s,disabled:a,...c})=>{const d="relative inline-flex items-center justify-center font-medium transition-all duration-500 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black overflow-hidden whitespace-nowrap",f={primary:"bg-white text-black hover:bg-neutral-200 focus:ring-white border border-transparent",secondary:"bg-neutral-800 text-white hover:bg-neutral-700 focus:ring-neutral-700 border border-neutral-700",outline:"bg-transparent text-neutral-300 border border-neutral-800 hover:border-white hover:text-white"},h=o!=null&&o>=0;return p.jsx("button",{className:`
        ${d} 
        ${h?"bg-neutral-800 border-neutral-700 text-white w-64 md:w-80":f[e]} 
        ${h?"px-0 py-0":"px-6 py-3"}
        ${r}
      `,disabled:a||h,...c,children:h?p.jsxs("div",{className:"relative w-full h-12 flex items-center justify-center px-4",children:[p.jsx("div",{className:"relative z-10 flex items-center gap-2 animate-fade-in w-full justify-center",children:s?p.jsxs(p.Fragment,{children:[p.jsx(tc,{className:"w-5 h-5 text-green-400"}),p.jsx("span",{className:"text-green-400 font-bold",children:"Download Complete"})]}):p.jsxs("div",{className:"flex items-center justify-center gap-2 min-w-0",children:[i&&p.jsx("span",{className:"text-sm text-neutral-400 font-medium truncate",children:i}),p.jsxs("span",{className:"text-lg font-bold text-white shrink-0",children:[Math.round(o||0),"%"]})]})}),!s&&p.jsx("div",{className:"absolute left-0 bottom-0 h-1 bg-white transition-all duration-300 ease-out",style:{width:`${o}%`}})]}):p.jsxs(p.Fragment,{children:[n&&p.jsx("span",{className:"mr-2",children:n}),t]})})},GP=({subtitle:t,isActive:e,isSingleColumn:n})=>p.jsx("div",{className:`group relative p-6 transition-all duration-300 border-b border-neutral-900 hover:bg-neutral-900/50 ${e?"bg-neutral-900":""}`,children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsxs("div",{className:"w-24 shrink-0 flex flex-col gap-1",children:[p.jsxs("span",{className:"text-xs font-mono text-neutral-500",children:["#",t.id]}),p.jsx("span",{className:"text-[10px] font-mono text-neutral-600 bg-neutral-900/50 px-1 py-0.5 rounded w-fit",children:t.startTime.split(",")[0]})]}),p.jsxs("div",{className:`w-full ${n?"block":"grid grid-cols-1 md:grid-cols-2 gap-6"}`,children:[p.jsx("div",{className:"relative",children:p.jsx("p",{className:`font-medium leading-relaxed ${n?"text-white text-lg":"text-sm text-neutral-400 font-sans"}`,children:t.originalText})}),!n&&p.jsx("div",{className:"relative",children:p.jsx("p",{className:`text-base font-medium font-display leading-relaxed transition-colors duration-500 ${t.text===t.originalText?"text-neutral-600 italic":"text-white"}`,children:t.text===t.originalText?"(Pending...)":t.text})})]})]})}),Ns=({number:t,title:e,isActive:n,isCompleted:r})=>p.jsxs("div",{className:`
      flex flex-col items-center gap-2 w-20 text-center
      lg:flex-row lg:w-auto lg:text-left lg:gap-3
      ${n?"opacity-100":"opacity-40"} transition-opacity duration-300
    `,children:[p.jsx("div",{className:`
        flex items-center justify-center w-8 h-8 rounded-full border text-sm font-bold transition-all shrink-0
        ${n||r?"bg-white text-black border-white":"bg-transparent text-white border-neutral-700"}
      `,children:r?"":t}),p.jsx("span",{className:"text-xs lg:text-sm font-medium tracking-wide uppercase",children:e})]}),Xs=({isOpen:t,onClose:e,title:n,children:r})=>{const[o,i]=P.useState(!1);return P.useEffect(()=>{if(t)i(!0),document.body.style.overflow="hidden";else{const s=setTimeout(()=>i(!1),300);return document.body.style.overflow="unset",()=>clearTimeout(s)}},[t]),!o&&!t?null:p.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 transition-all duration-300 ${t?"opacity-100 visible":"opacity-0 invisible"}`,children:[p.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md transition-opacity duration-300",onClick:e}),p.jsxs("div",{className:`
          relative w-full max-w-3xl md:max-w-6xl max-h-[85vh] overflow-hidden rounded-3xl border border-neutral-800 
          bg-neutral-900/80 backdrop-blur-xl shadow-2xl flex flex-col transform transition-all duration-300 ease-out
          ${t?"scale-100 translate-y-0 opacity-100":"scale-95 translate-y-4 opacity-0"}
        `,children:[p.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-neutral-800 bg-neutral-900/50",children:[p.jsx("h2",{className:"text-2xl font-display font-bold text-white tracking-tight",children:n}),p.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-white/10 text-neutral-400 hover:text-white transition-colors focus:outline-none",children:p.jsx(mE,{className:"w-5 h-5"})})]}),p.jsx("div",{className:"p-6 md:p-8 overflow-y-auto custom-scrollbar",children:r})]})]})},Qo=[{id:"intro",title:"Getting Started",category:"General",content:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("p",{className:"text-lg leading-relaxed text-neutral-300",children:["SubStream AI is a next-generation subtitle translation tool powered by Google's ",p.jsx("strong",{className:"text-white",children:"Gemini"})," models. Unlike traditional translators that process line-by-line, SubStream understands the full context of a scene, ensuring dialogue flows naturally in the target language."]}),p.jsxs("div",{className:"p-6 bg-neutral-900/40 rounded-2xl border border-neutral-800",children:[p.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Quick Start"}),p.jsxs("ol",{className:"relative border-l border-neutral-800 ml-3 space-y-6",children:[p.jsxs("li",{className:"ml-6",children:[p.jsx("span",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-neutral-600 rounded-full ring-4 ring-neutral-900"}),p.jsx("h4",{className:"font-bold text-white text-sm",children:"Upload"}),p.jsxs("p",{className:"text-neutral-400 text-sm",children:["Drag & drop your ",p.jsx("code",{children:".srt"})," file into the upload zone."]})]}),p.jsxs("li",{className:"ml-6",children:[p.jsx("span",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-neutral-600 rounded-full ring-4 ring-neutral-900"}),p.jsx("h4",{className:"font-bold text-white text-sm",children:"Select Languages"}),p.jsx("p",{className:"text-neutral-400 text-sm",children:"Choose your target language. Source language is auto-detected by default."})]}),p.jsxs("li",{className:"ml-6",children:[p.jsx("span",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-neutral-600 rounded-full ring-4 ring-neutral-900"}),p.jsx("h4",{className:"font-bold text-white text-sm",children:"Translate"}),p.jsx("p",{className:"text-neutral-400 text-sm",children:'Click "Start Translation". The AI processes subtitles in smart batches.'})]}),p.jsxs("li",{className:"ml-6",children:[p.jsx("span",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-green-500 rounded-full ring-4 ring-neutral-900"}),p.jsx("h4",{className:"font-bold text-white text-sm",children:"Download"}),p.jsx("p",{className:"text-neutral-400 text-sm",children:"Review the side-by-side preview and download your new SRT file."})]})]})]})]})},{id:"limits",title:"File Limits & Formats",category:"General",content:p.jsxs("div",{className:"space-y-6",children:[p.jsx("p",{children:"Ensure your files meet the following criteria for optimal processing:"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"p-5 bg-neutral-800/20 border border-neutral-800 rounded-xl hover:bg-neutral-800/30 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx(qi,{className:"w-5 h-5 text-blue-400"}),p.jsx("span",{className:"text-sm font-bold uppercase text-neutral-400",children:"Supported Format"})]}),p.jsx("span",{className:"text-xl text-white font-medium",children:".SRT (SubRip)"}),p.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"UTF-8 Encoding recommended"})]}),p.jsxs("div",{className:"p-5 bg-neutral-800/20 border border-neutral-800 rounded-xl hover:bg-neutral-800/30 transition-colors",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[p.jsx(El,{className:"w-5 h-5 text-purple-400"}),p.jsx("span",{className:"text-sm font-bold uppercase text-neutral-400",children:"Max File Size"})]}),p.jsx("span",{className:"text-xl text-white font-medium",children:"~5 MB"}),p.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Approx. 2 hours of dialogue"})]})]}),p.jsxs("div",{className:"p-4 rounded-lg bg-yellow-900/10 border border-yellow-900/30 text-yellow-200/80 text-sm",children:[p.jsx("strong",{children:"Note:"})," Very large files are processed in chunks. Ensure you have a stable internet connection during the process."]})]})},{id:"api-config",title:"Model & API Config",category:"Setup",content:p.jsxs("div",{className:"space-y-4",children:[p.jsx("p",{children:"SubStream AI supports using your own Google Gemini API Key and selecting different AI models."}),p.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl bg-neutral-900/50 border border-neutral-800 mt-4",children:[p.jsx(El,{className:"w-6 h-6 text-green-400 shrink-0 mt-1"}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-bold text-white",children:"Changing Models"}),p.jsxs("p",{className:"text-sm text-neutral-400 mt-2 mb-3",children:["Click the Model Name in the top right of the navigation bar. This opens the Configuration overlay where you can switch between ",p.jsx("strong",{children:"Gemini 3 Pro"})," (Best Quality), ",p.jsx("strong",{children:"Gemini 2.5 Pro/Flash"}),", and others to suit your needs."]})]})]}),p.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl bg-neutral-900/50 border border-neutral-800 mt-4",children:[p.jsx(rc,{className:"w-6 h-6 text-green-400 shrink-0 mt-1"}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-bold text-white",children:"Using Custom API Keys"}),p.jsxs("p",{className:"text-sm text-neutral-400 mt-2 mb-3",children:["In the same Configuration overlay, paste your key starting with ",p.jsx("code",{children:"AIzaSy..."}),"."]}),p.jsxs("ul",{className:"list-disc list-inside text-xs text-neutral-500 space-y-1",children:[p.jsx("li",{children:"Your key is stored in your browser's local storage."}),p.jsx("li",{children:"It is never sent to our servers, only directly to Google APIs."}),p.jsx("li",{children:"You can clear it at any time."})]})]})]})]})},{id:"quota-estimation",title:"Quota & Estimations",category:"Setup",content:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Zy,{className:"w-6 h-6 text-cyan-400"}),p.jsx("h3",{className:"text-xl font-bold text-white",children:"Understanding Usage"})]}),p.jsx("p",{children:'The app displays an estimated "Cost" in API requests when you upload a file.'}),p.jsxs("div",{className:"p-4 rounded-lg bg-neutral-800/30 border-l-4 border-cyan-500",children:[p.jsx("p",{className:"text-white font-medium",children:"Formula:"}),p.jsx("code",{className:"block mt-2 text-cyan-300 font-mono text-sm",children:"Total API Requests = Total Subtitle Lines / 10"})]}),p.jsx("p",{className:"text-sm text-neutral-400",children:"We batch subtitles in groups of 10 to optimize for context and speed. A typical movie with 1,500 lines will consume approximately 150 API requests."}),p.jsx("p",{className:"text-sm text-neutral-400",children:'The "Remaining Requests" indicator in the top right is a local estimator based on the standard Gemini Free Tier limit (1,500 requests/day). It resets daily on your browser.'})]})},{id:"context-aware",title:"Context Awareness",category:"Features",content:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(aE,{className:"w-6 h-6 text-indigo-400"}),p.jsx("h3",{className:"text-xl font-bold text-white",children:"Smart Batching"})]}),p.jsx("p",{children:"Standard translators translate one line at a time, often resulting in broken sentences when a speaker's thought spans multiple subtitles."}),p.jsxs("p",{children:[p.jsx("strong",{children:"SubStream AI"}),' groups subtitles into "Semantic Batches" (typically 10-20 lines). It sends the entire batch to Gemini 3 Pro, allowing the model to:']}),p.jsxs("ul",{className:"space-y-2 list-disc list-inside text-neutral-300",children:[p.jsx("li",{children:"See the previous and next lines before translating."}),p.jsx("li",{children:'Understand gender and formality (e.g., distinct "You" in Spanish/French).'}),p.jsx("li",{children:"Maintain consistent terminology for names and places."})]})]})},{id:"advanced-settings",title:"Advanced Settings",category:"Features",content:p.jsxs("div",{className:"space-y-4",children:[p.jsx("p",{children:"Currently, the app uses optimized default settings for the best balance of speed and quality."}),p.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[p.jsxs("div",{className:"p-4 rounded-lg border border-neutral-800 bg-neutral-900/30",children:[p.jsx("h4",{className:"font-bold text-white mb-1",children:"Temperature: 0.7"}),p.jsx("p",{className:"text-sm text-neutral-400",children:"Balanced for creativity and accuracy. Ensures translations aren't too robotic but stick to the original meaning."})]}),p.jsxs("div",{className:"p-4 rounded-lg border border-neutral-800 bg-neutral-900/30",children:[p.jsx("h4",{className:"font-bold text-white mb-1",children:"Model Selection"}),p.jsxs("p",{className:"text-sm text-neutral-400",children:["You can now switch between models via the top navigation bar. Use ",p.jsx("strong",{children:"Flash"})," models for speed and ",p.jsx("strong",{children:"Pro"})," models for quality."]})]})]})]})},{id:"common-errors",title:"Common Errors",category:"Support",content:p.jsxs("div",{className:"space-y-6",children:[p.jsx("p",{children:"If you encounter issues, check the error code or message displayed."}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex gap-4 p-4 bg-red-950/20 border border-red-900/30 rounded-xl",children:[p.jsx(xl,{className:"w-6 h-6 text-red-500 shrink-0"}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-red-200 font-bold",children:"Translation Failed (500 / XHR Error)"}),p.jsx("p",{className:"text-sm text-red-200/70 mt-1",children:"This usually means the AI service is temporarily overloaded or the batch size was too large for the network."}),p.jsx("div",{className:"mt-3 p-2 bg-black/40 rounded text-xs font-mono text-red-300",children:"Fix: The app automatically retries. If it fails repeatedly, try refreshing the page or checking your internet connection."})]})]}),p.jsxs("div",{className:"flex gap-4 p-4 bg-neutral-800/30 border border-neutral-800 rounded-xl",children:[p.jsx(pE,{className:"w-6 h-6 text-orange-400 shrink-0"}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-white font-bold",children:"Empty Output / Safety Filter"}),p.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:"Gemini has built-in safety filters. If your subtitle file contains extreme violence, hate speech, or explicit content, the model may refuse to generate text."})]})]}),p.jsxs("div",{className:"flex gap-4 p-4 bg-neutral-800/30 border border-neutral-800 rounded-xl",children:[p.jsx(t0,{className:"w-6 h-6 text-yellow-400 shrink-0"}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-white font-bold",children:"Rate Limit Exceeded (429)"}),p.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:"You are sending too many requests too quickly. The app has a built-in delay (1 second) between batches to prevent this, but it can still happen under heavy load."})]})]})]})]})},{id:"parsing-issues",title:"Parsing Issues",category:"Support",content:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("p",{children:["If the app says ",p.jsx("strong",{children:'"Failed to parse SRT file"'})," or shows 0 lines:"]}),p.jsx("ul",{className:"list-disc list-inside space-y-2 text-neutral-300 text-sm",children:p.jsxs("li",{children:["Check if the file is a valid ",p.jsx("code",{children:".srt"}),". It should look like this:"]})}),p.jsxs("div",{className:"bg-black p-4 rounded-lg border border-neutral-800 font-mono text-xs text-neutral-400",children:["1",p.jsx("br",{}),"00:00:01,000 --> 00:00:04,000",p.jsx("br",{}),"Hello world."]}),p.jsxs("ul",{className:"list-disc list-inside space-y-2 text-neutral-300 text-sm pt-2",children:[p.jsxs("li",{children:["Ensure the file encoding is ",p.jsx("strong",{children:"UTF-8"}),"."]}),p.jsx("li",{children:"Some SRT files have malformed timestamps (e.g., using dots instead of commas). SubStream tries to correct this, but severe errors may fail."})]})]})}],VP=({onBack:t})=>{const[e,n]=P.useState(""),[r,o]=P.useState(Qo[0].id),i=P.useMemo(()=>{const a={};return Qo.filter(f=>f.title.toLowerCase().includes(e.toLowerCase())||typeof f.content=="string"&&f.content.toLowerCase().includes(e.toLowerCase())).forEach(f=>{a[f.category]||(a[f.category]=[]),a[f.category].push(f)}),Array.from(new Set(Qo.map(f=>f.category))).filter(f=>a[f]&&a[f].length>0).map(f=>({category:f,docs:a[f]}))},[e]),s=Qo.find(a=>a.id===r)||Qo[0];return p.jsxs("div",{className:"min-h-screen bg-black text-neutral-200 animate-fade-in flex flex-col",children:[p.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:p.jsx("div",{className:"absolute top-0 right-0 w-[60%] h-[60%] bg-neutral-900/20 blur-[150px] rounded-full mix-blend-screen"})}),p.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto w-full px-6 py-8 md:py-12 flex flex-col h-screen",children:[p.jsxs("div",{className:"flex items-center justify-between mb-8 shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-neutral-800 transition-colors group",children:p.jsx(Qy,{className:"w-6 h-6 text-neutral-400 group-hover:text-white"})}),p.jsx("h1",{className:"text-3xl font-display font-bold text-white",children:"Documentation"})]}),p.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[p.jsx(Tl,{className:"absolute left-4 top-3.5 w-5 h-5 text-neutral-500"}),p.jsx("input",{type:"text",placeholder:"Search guides...",value:e,onChange:a=>n(a.target.value),className:"w-full bg-neutral-900/50 border border-neutral-800 rounded-xl py-3 pl-12 pr-4 text-white focus:ring-1 focus:ring-white focus:border-white transition-all outline-none"})]})]}),p.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-12 gap-8 overflow-hidden min-h-0",children:[p.jsxs("div",{className:"lg:col-span-3 overflow-y-auto pr-2 custom-scrollbar pb-10",children:[p.jsxs("div",{className:"relative w-full md:hidden mb-6 sticky top-0 bg-black z-10 py-2",children:[p.jsx(Tl,{className:"absolute left-4 top-5 w-5 h-5 text-neutral-500"}),p.jsx("input",{type:"text",placeholder:"Search...",value:e,onChange:a=>n(a.target.value),className:"w-full bg-neutral-900/50 border border-neutral-800 rounded-xl py-3 pl-12 pr-4 text-white outline-none"})]}),p.jsx("div",{className:"space-y-2",children:i.length>0?i.map(a=>p.jsxs("div",{className:"animate-slide-up mb-6 relative",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-neutral-700"}),p.jsx("h3",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest",children:a.category})]}),p.jsx("div",{className:"absolute left-[3px] top-6 bottom-4 w-px bg-neutral-900"}),p.jsx("div",{className:"space-y-1 relative",children:a.docs.map((c,d)=>p.jsxs("div",{className:"relative pl-6",children:[p.jsx("div",{className:"absolute left-[3px] top-0 h-[24px] w-4 border-l border-b border-neutral-800 rounded-bl-xl"}),p.jsx("button",{onClick:()=>o(c.id),className:`w-full text-left px-4 py-2 rounded-lg text-sm transition-all flex items-center justify-between group relative
                              ${r===c.id?"text-white bg-neutral-800/50 font-medium":"text-neutral-400 hover:text-white hover:bg-neutral-900/30"}
                            `,children:p.jsx("span",{className:"truncate",children:c.title})})]},c.id))})]},a.category)):p.jsx("div",{className:"text-neutral-500 text-sm italic px-4",children:"No matching articles found."})})]}),p.jsx("div",{className:"lg:col-span-9 bg-neutral-900/30 border border-neutral-800 rounded-3xl p-8 md:p-12 overflow-y-auto custom-scrollbar backdrop-blur-sm relative",children:p.jsxs("div",{className:"max-w-3xl mx-auto pb-20",children:[p.jsx("div",{className:"flex items-center gap-3 mb-6",children:p.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono text-neutral-400 uppercase tracking-wider",children:[p.jsx("span",{children:s.category}),p.jsx("span",{className:"text-neutral-600",children:"/"}),p.jsx("span",{className:"text-white",children:s.title})]})}),p.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white mb-8 tracking-tight",children:s.title}),p.jsx("div",{className:"prose prose-invert prose-lg prose-neutral max-w-none text-neutral-300",children:s.content}),p.jsxs("div",{className:"mt-16 pt-8 border-t border-neutral-800 flex items-center justify-between text-sm text-neutral-500",children:[p.jsx("span",{children:"Last updated: November 2025"}),p.jsx("div",{className:"flex gap-4",children:p.jsxs("button",{className:"flex items-center gap-2 hover:text-white transition-colors",children:[p.jsx(qi,{className:"w-4 h-4"})," Suggest Edit"]})})]})]})})]})]})]})},$P=({videoSrc:t,srtContent:e,isYouTube:n})=>{const r=P.useRef(null),o=P.useRef(null);return P.useEffect(()=>{if(!n&&r.current&&o.current){const i=new Blob([e],{type:"text/vtt"}),s=URL.createObjectURL(i);o.current.src=s;const a=r.current.currentTime,c=!r.current.paused;return r.current.load(),r.current.currentTime=a,c&&r.current.play().catch(d=>console.log("Auto-resume prevented",d)),()=>{URL.revokeObjectURL(s)}}},[e,n]),n?p.jsxs("div",{className:"w-full bg-black rounded-2xl overflow-hidden aspect-video border border-neutral-800 relative group",children:[p.jsx("iframe",{width:"100%",height:"100%",src:t,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}),p.jsx("div",{className:"absolute top-2 right-2 bg-black/80 px-2 py-1 rounded text-[10px] text-neutral-400 pointer-events-none",children:"YouTube Preview"})]}):p.jsx("div",{className:"w-full bg-black rounded-2xl overflow-hidden aspect-video border border-neutral-800",children:p.jsxs("video",{ref:r,controls:!0,crossOrigin:"anonymous",className:"w-full h-full",src:t,children:[p.jsx("track",{ref:o,label:"Translated",kind:"subtitles",srcLang:"en",default:!0}),"Your browser does not support the video tag."]})})},BP=({tracks:t,onSelectTrack:e,onGenerate:n,activeModel:r,isYouTubeAuthenticated:o})=>{const i=r.provider==="youtube";return p.jsxs("div",{className:"animate-fade-in space-y-6 max-w-2xl mx-auto",children:[p.jsx("h2",{className:"text-xl font-bold text-white text-center",children:"Subtitle Source"}),p.jsxs("p",{className:"text-center text-neutral-400 -mt-4",children:["Choose an existing track or generate new subtitles using ",p.jsx("strong",{children:r.name}),"."]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("button",{onClick:n,className:`w-full flex items-center gap-4 p-4 rounded-xl border transition-all text-left group
            ${i?"bg-red-900/10 border-red-900/30 hover:bg-red-900/20 hover:border-red-500/50":"bg-indigo-900/10 border-indigo-900/30 hover:bg-indigo-900/20 hover:border-indigo-500/50"}
          `,children:[p.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center shrink-0 transition-colors
             ${i?"bg-red-900/20 text-red-500":"bg-indigo-900/20 text-indigo-400"}
          `,children:i?p.jsx(wo,{className:"w-6 h-6"}):p.jsx(e0,{className:"w-6 h-6"})}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("h3",{className:`font-bold flex items-center gap-2 ${i?"text-red-100":"text-indigo-100"}`,children:["Generate with ",r.name,i&&!o&&p.jsx("span",{className:"text-[10px] uppercase bg-neutral-800 text-neutral-400 px-1.5 py-0.5 rounded border border-neutral-700",children:"Auth Required"})]}),p.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:i?"Uploads video as 'unlisted' to your channel to generate high-accuracy captions.":"Generates subtitles locally using the selected AI model API."})]})]}),t.length>0&&p.jsxs("div",{className:"relative py-2",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("span",{className:"w-full border-t border-neutral-800"})}),p.jsx("div",{className:"relative flex justify-center",children:p.jsx("span",{className:"bg-neutral-900 px-3 text-xs text-neutral-500 uppercase",children:"Or extract from video"})})]}),t.map(s=>p.jsxs("button",{onClick:()=>e(s.index),className:"w-full flex items-center gap-4 p-4 rounded-xl border border-neutral-800 bg-neutral-900/20 hover:bg-neutral-800/50 hover:border-neutral-600 transition-all text-left",children:[p.jsx("div",{className:"w-12 h-12 bg-neutral-800 rounded-lg flex items-center justify-center shrink-0",children:p.jsx(qi,{className:"w-6 h-6 text-neutral-400"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-white",children:s.title||`Subtitle Track ${s.index}`}),p.jsxs("p",{className:"text-xs text-neutral-500 uppercase mt-0.5",children:["Language: ",s.language]})]})]},s.index))]})]})},OP=({onLoginSuccess:t,onLogout:e,userInfo:n})=>{const[r,o]=P.useState(!1),i=()=>{const s="474943199780-akmhetcsrtcb9qej7rfepth49abt2fu8.apps.googleusercontent.com",a=window.location.href.split("#")[0],c="youtube_auth",d=["https://www.googleapis.com/auth/youtube.upload","https://www.googleapis.com/auth/youtube.force-ssl","profile","email"].join(" "),h=`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:s,redirect_uri:a,response_type:"token",scope:d,include_granted_scopes:"true",state:c,prompt:"consent"}).toString()}`,m=500,g=600,x=window.screen.width/2-m/2,w=window.screen.height/2-g/2;window.open(h,"Google Auth",`width=${m},height=${g},top=${w},left=${x}`)};return n?p.jsxs("div",{className:"flex items-center gap-3 bg-neutral-900/50 border border-neutral-800 rounded-xl p-2 pr-4 transition-all",children:[p.jsxs("div",{className:"relative shrink-0",children:[r?p.jsx("div",{className:"w-8 h-8 rounded-full border border-neutral-700 bg-neutral-800 flex items-center justify-center text-xs font-bold text-white",children:n.name.charAt(0).toUpperCase()}):p.jsx("img",{src:n.picture,alt:"User",className:"w-8 h-8 rounded-full border border-neutral-700 object-cover",onError:()=>o(!0),referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),p.jsx("div",{className:"absolute -bottom-1 -right-1 bg-red-600 rounded-full p-0.5 border border-black",children:p.jsx(wo,{className:"w-2 h-2 text-white"})})]}),p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsx("span",{className:"text-xs font-bold text-white leading-none truncate max-w-[100px]",children:n.name}),p.jsx("span",{className:"text-[10px] text-neutral-500 leading-none mt-1",children:"Connected"})]}),p.jsx("div",{className:"h-4 w-px bg-neutral-800 mx-1"}),p.jsx("button",{onClick:()=>{_E(),e()},className:"p-1.5 rounded-lg hover:bg-red-900/30 text-neutral-500 hover:text-red-400 transition-colors",title:"Disconnect Channel",children:p.jsx(cE,{className:"w-4 h-4"})})]}):p.jsx(it,{onClick:i,type:"button",className:"bg-[#151515] hover:bg-[#252525] text-white border border-neutral-800 hover:border-neutral-700 px-4 py-3 transition-colors",icon:p.jsx(wo,{className:"w-4 h-4 text-red-500"}),children:"Authenticate YouTube"})},HP=({isOpen:t,onClose:e,type:n,onImportFile:r,onImportYouTube:o,googleAccessToken:i})=>{const[s,a]=P.useState("INPUT"),[c,d]=P.useState(""),[f,h]=P.useState("IDLE"),[m,g]=P.useState(null),[x,w]=P.useState(null),[T,v]=P.useState(null),[y,_]=P.useState(!1),[E,I]=P.useState(null),[C,A]=P.useState([]),[R,M]=P.useState(!1),[N,G]=P.useState(""),[q,ne]=P.useState("date"),[Ye,Se]=P.useState(!1),Ce=P.useRef(null);P.useEffect(()=>{t||(a("INPUT"),d(""),h("IDLE"),g(null),w(null),v(null),I(null),A([]),G(""),Se(!1),_(!1))},[t]),P.useEffect(()=>{const H=W=>{Ce.current&&!Ce.current.contains(W.target)&&Se(!1)};return Ye&&document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[Ye]),P.useEffect(()=>{s==="CHANNEL"&&i&&C.length===0&&(M(!0),DP(i).then(H=>A(H)).catch(H=>g(H.message)).finally(()=>M(!1)))},[s,i]);const Ue=async(H,W=!1)=>{var xe;_(W);try{let se="",ke=null;if(W){const en=`http://localhost:4000/api/proxy/file-head?url=${encodeURIComponent(H)}`,vn=await(await fetch(en)).json();if(!vn.ok)throw new Error(vn.error||"Proxy failed");se=vn.contentType,ke=vn.contentLength}else{const en=await fetch(H,{method:"HEAD"});if(!en.ok)throw new Error(`Status ${en.status}`);se=en.headers.get("content-type"),ke=en.headers.get("content-length")}const jt=((xe=H.split("/").pop())==null?void 0:xe.split("?")[0])||"downloaded_file",pe=ke?`${(parseInt(ke)/(1024*1024)).toFixed(2)} MB`:"Unknown Size";if(se!=null&&se.includes("text")||jt.endsWith(".srt")||jt.endsWith(".vtt"))w("SRT"),v({name:jt,size:pe,type:"Subtitle File"}),h("PREVIEW");else if(se!=null&&se.includes("video")||jt.match(/\.(mp4|mkv|mov|webm)$/i))w("VIDEO"),v({name:jt,size:pe,type:"Video File"}),h("PREVIEW");else throw new Error("Unsupported file type. Please provide a direct link to an SRT or Video file.")}catch(se){W?(g(`Failed to access URL: ${se.message}`),h("IDLE")):(console.log("Direct fetch failed, trying proxy...",se),Ue(H,!0))}},b=async()=>{if(g(null),h("LOADING"),n==="YOUTUBE"){if(!PP(c)){g("Invalid YouTube URL."),h("IDLE");return}try{const{meta:W,captions:xe}=await Gm(c);I({...W,availableCaptions:xe}),h("PREVIEW")}catch(W){g(W.message||"Failed to fetch YouTube details."),h("IDLE")}}else n==="URL"&&Ue(c)},$=async()=>{if(n==="YOUTUBE"&&E)o(E),e();else if(n==="URL"&&T)try{let H=c;y&&(H=`http://localhost:4000/api/proxy/file-get?url=${encodeURIComponent(c)}`);const W=await fetch(H);if(!W.ok)throw new Error("Download failed.");const xe=await W.blob(),se=new File([xe],T.name,{type:xe.type});r(se),e()}catch(H){g("Download Failed: "+H.message)}},U=async H=>{a("INPUT");const W=`https://www.youtube.com/watch?v=${H}`;d(W),g(null),h("LOADING");try{const{meta:xe,captions:se}=await Gm(W);I({...xe,availableCaptions:se}),h("PREVIEW")}catch(xe){g(xe.message||"Failed to fetch YouTube details."),h("IDLE")}},le=P.useMemo(()=>{let H=C.filter(W=>W.title.toLowerCase().includes(N.toLowerCase()));return q==="date"?H.sort((W,xe)=>new Date(xe.publishedAt).getTime()-new Date(W.publishedAt).getTime()):H.sort((W,xe)=>W.title.localeCompare(xe.title)),H},[C,N,q]),j=n==="YOUTUBE"?s==="CHANNEL"?"Select from My Videos":"Import from YouTube":n==="URL"?"Import from URL":"Import";return p.jsx(Xs,{isOpen:t,onClose:e,title:j,children:p.jsxs("div",{className:"space-y-6",children:[s==="INPUT"&&p.jsxs(p.Fragment,{children:[(f==="IDLE"||f==="LOADING")&&p.jsxs("div",{className:"space-y-4",children:[p.jsx("p",{className:"text-neutral-400 text-sm",children:n==="YOUTUBE"?"Paste a YouTube URL. We will fetch the video details and available captions using the local server.":"Paste a direct link to an .SRT file or a supported Video file (MP4, MKV, etc)."}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute left-4 top-3.5 text-neutral-500",children:n==="YOUTUBE"?p.jsx(wo,{className:"w-5 h-5"}):p.jsx(jy,{className:"w-5 h-5"})}),p.jsx("input",{type:"text",placeholder:n==="YOUTUBE"?"https://www.youtube.com/watch?v=...":"https://example.com/movie.srt",className:"w-full bg-black border border-neutral-800 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-white transition-colors",value:c,onChange:H=>d(H.target.value),onKeyDown:H=>H.key==="Enter"&&b()})]}),m&&p.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-900/50 rounded-lg text-red-400 text-sm flex gap-2",children:[p.jsx(xl,{className:"w-4 h-4 mt-0.5"}),m]}),p.jsxs("div",{className:"flex justify-between items-center pt-2",children:[n==="YOUTUBE"?p.jsxs("button",{onClick:()=>a("CHANNEL"),disabled:!i,className:"flex items-center gap-2 text-sm font-medium text-neutral-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:i?"Browse your uploaded videos":"Authenticate with YouTube in Settings first",children:[p.jsx(nc,{className:"w-4 h-4"})," Select from My Videos"]}):p.jsx("div",{}),p.jsx(it,{onClick:b,disabled:!c||f==="LOADING",icon:f==="LOADING"?p.jsx(Qr,{className:"animate-spin w-4 h-4"}):void 0,children:f==="LOADING"?"Checking...":"Continue"})]})]}),f==="PREVIEW"&&n==="YOUTUBE"&&E&&p.jsxs("div",{className:"space-y-6 animate-fade-in",children:[p.jsxs("div",{className:"flex gap-4",children:[p.jsx("img",{src:E.thumbnailUrl,alt:"Thumb",className:"w-32 h-24 object-cover rounded-lg border border-neutral-800"}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-white line-clamp-2",children:E.title}),p.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:E.channelTitle}),p.jsx("div",{className:"flex gap-2 mt-2",children:p.jsxs("span",{className:"text-[10px] bg-neutral-800 px-2 py-0.5 rounded text-neutral-400",children:["Duration: ",E.duration]})})]})]}),m&&p.jsx("div",{className:"text-red-400 text-sm",children:m}),p.jsxs("div",{className:"flex justify-end gap-3",children:[p.jsx(it,{variant:"outline",onClick:()=>h("IDLE"),children:"Back"}),p.jsx(it,{onClick:$,icon:p.jsx(Sl,{className:"w-4 h-4"}),children:"Import Video"})]})]}),f==="PREVIEW"&&n==="URL"&&T&&p.jsxs("div",{className:"space-y-6 animate-fade-in",children:[p.jsxs("div",{className:"p-6 bg-neutral-900/30 border border-neutral-800 rounded-xl flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-full bg-neutral-800 flex items-center justify-center",children:x==="VIDEO"?p.jsx(dE,{className:"w-6 h-6 text-blue-400"}):p.jsx(qi,{className:"w-6 h-6 text-green-400"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-white break-all",children:T.name}),p.jsxs("p",{className:"text-sm text-neutral-500",children:[T.type,"  ",T.size]}),y&&p.jsx("span",{className:"text-[10px] text-amber-500 border border-amber-900/50 px-1.5 py-0.5 rounded bg-amber-900/20",children:"Proxy Active"})]})]}),m&&p.jsx("div",{className:"text-red-400 text-sm",children:m}),p.jsxs("div",{className:"flex justify-end gap-3",children:[p.jsx(it,{variant:"outline",onClick:()=>h("IDLE"),children:"Back"}),p.jsx(it,{onClick:$,icon:p.jsx(Sl,{className:"w-4 h-4"}),children:"Download & Process"})]})]})]}),s==="CHANNEL"&&p.jsxs("div",{className:"flex flex-col h-[500px]",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-neutral-800 shrink-0 relative z-20",children:[p.jsx("button",{onClick:()=>a("INPUT"),className:"p-2 hover:bg-neutral-800 rounded-full transition-colors",children:p.jsx(Qy,{className:"w-5 h-5 text-white"})}),p.jsxs("div",{className:"flex-1 relative",children:[p.jsx(Tl,{className:"absolute left-3 top-2.5 w-4 h-4 text-neutral-500"}),p.jsx("input",{type:"text",placeholder:"Search your videos...",className:"w-full bg-neutral-900/50 border border-neutral-800 rounded-lg py-2 pl-9 pr-4 text-sm text-white focus:outline-none focus:border-white",value:N,onChange:H=>G(H.target.value)})]}),p.jsxs("div",{className:"relative",ref:Ce,children:[p.jsx("button",{onClick:()=>Se(!Ye),className:`p-2 rounded-lg transition-colors flex items-center gap-2 ${Ye?"bg-neutral-800 text-white":"text-neutral-400 hover:text-white hover:bg-neutral-800"}`,title:"Sort Options",children:p.jsx(Xx,{className:"w-5 h-5"})}),Ye&&p.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-neutral-900 border border-neutral-800 rounded-xl shadow-2xl z-30 overflow-hidden",children:p.jsxs("div",{className:"py-1",children:[p.jsxs("button",{onClick:()=>{ne("date"),Se(!1)},className:"w-full px-4 py-2 text-left text-sm text-neutral-300 hover:bg-neutral-800 hover:text-white flex items-center justify-between",children:["Newest First",q==="date"&&p.jsx(tc,{className:"w-4 h-4 text-white"})]}),p.jsxs("button",{onClick:()=>{ne("title"),Se(!1)},className:"w-full px-4 py-2 text-left text-sm text-neutral-300 hover:bg-neutral-800 hover:text-white flex items-center justify-between",children:["Title (A-Z)",q==="title"&&p.jsx(tc,{className:"w-4 h-4 text-white"})]})]})})]})]}),p.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-2 relative z-10",children:R?p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-neutral-500 gap-3",children:[p.jsx(Qr,{className:"w-8 h-8 animate-spin"}),p.jsx("p",{children:"Loading channel videos..."})]}):m?p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-red-400 gap-2 text-center px-4",children:[p.jsx(xl,{className:"w-8 h-8"}),p.jsx("p",{children:m}),p.jsx(it,{variant:"outline",onClick:()=>a("INPUT"),className:"mt-2",children:"Go Back"})]}):le.length===0?p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-neutral-500",children:[p.jsx(nc,{className:"w-12 h-12 mb-2 opacity-50"}),p.jsx("p",{children:"No videos found."})]}):le.map(H=>p.jsxs("div",{onClick:()=>U(H.id),className:"flex gap-3 p-2 rounded-xl hover:bg-neutral-800/50 transition-colors cursor-pointer group border border-transparent hover:border-neutral-700",children:[p.jsxs("div",{className:"relative w-32 h-20 shrink-0 rounded-lg overflow-hidden bg-neutral-900",children:[p.jsx("img",{src:H.thumbnail,alt:"",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"}),p.jsx("span",{className:"absolute bottom-1 right-1 bg-black/80 text-[10px] text-white px-1 rounded",children:H.duration})]}),p.jsxs("div",{className:"flex flex-col justify-between py-1 min-w-0",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-bold text-white line-clamp-2 leading-snug group-hover:text-indigo-300 transition-colors",children:H.title}),p.jsx("p",{className:"text-[10px] text-neutral-500 mt-1",children:new Date(H.publishedAt).toLocaleDateString()})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[H.privacyStatus==="private"&&p.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-red-400 bg-red-900/20 px-1.5 py-0.5 rounded",children:[p.jsx(uE,{className:"w-3 h-3"})," Private"]}),H.privacyStatus==="unlisted"&&p.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-yellow-400 bg-yellow-900/20 px-1.5 py-0.5 rounded",children:[p.jsx(eE,{className:"w-3 h-3"})," Unlisted"]}),H.privacyStatus==="public"&&p.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-green-400 bg-green-900/20 px-1.5 py-0.5 rounded",children:[p.jsx(nE,{className:"w-3 h-3"})," Public"]})]})]})]},H.id))})]})]})})},qP=500,zP=()=>p.jsx(vE,{clientId:"474943199780-akmhetcsrtcb9qej7rfepth49abt2fu8.apps.googleusercontent.com",children:p.jsx(JP,{})}),JP=()=>{var Tf,Cf;const[t,e]=P.useState("HOME"),[n,r]=P.useState("NONE"),[o,i]=P.useState(!1),[s,a]=P.useState(null),[c,d]=P.useState(null),f=P.useRef(null),[h,m]=P.useState(null),[g,x]=P.useState(null),[w,T]=P.useState([]),[v,y]=P.useState(me.IDLE),[_,E]=P.useState(0),[I,C]=P.useState(null),[A,R]=P.useState(void 0),[M,N]=P.useState(""),[G,q]=P.useState(!1),[ne,Ye]=P.useState("auto"),[Se,Ce]=P.useState("es"),[Ue,b]=P.useState(""),[$,U]=P.useState(J.IDLE),[le,j]=P.useState(""),[H,W]=P.useState(0),[xe,se]=P.useState([]),[ke,jt]=P.useState(null),[pe,en]=P.useState(null),[Qn,vn]=P.useState(""),[Zn,pa]=P.useState(""),[$t,Cr]=P.useState("idle"),[Ir,ha]=P.useState(""),[jn,ma]=P.useState(""),[Bt,Ar]=P.useState("idle"),[tt,er]=P.useState(rt[1].id),[Ot,Xv]=P.useState(""),[gf,ga]=P.useState(0),[_n,yf]=P.useState(15),[tr,ya]=P.useState(null),[ko,va]=P.useState(null),[vf,Qv]=P.useState(!1),Zi=P.useRef(null),Zv=P.useRef(null),Mo=P.useRef(null),Do=P.useRef(null),nr=P.useRef(null),Lo=P.useRef(null),_a=P.useMemo(()=>window.location.hash.includes("access_token")&&window.location.hash.includes("state=youtube_auth"),[]);P.useEffect(()=>{if(_a){const S=window.location.hash.substring(1),Y=new URLSearchParams(S).get("access_token");if(Y){const Z=new BroadcastChannel("substream_auth_channel");Z.postMessage({token:Y}),Z.close(),window.close(),document.body.innerHTML=`
                <div style="background:black; color:white; height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; font-family:sans-serif;">
                    <div style="font-size:24px; font-weight:bold; margin-bottom:10px;">Authentication Successful</div>
                    <div>You can now close this window.</div>
                </div>
            `}}},[_a]),P.useEffect(()=>{const S=new BroadcastChannel("substream_auth_channel");return S.onmessage=D=>{D.data&&D.data.token&&_f({access_token:D.data.token})},()=>S.close()},[]),P.useEffect(()=>{const S=localStorage.getItem("substream_google_api_key"),D=localStorage.getItem("substream_openai_api_key"),Y=localStorage.getItem("substream_model_id"),Z=localStorage.getItem("substream_rpm"),Me=localStorage.getItem("substream_daily_usage"),nt=localStorage.getItem("substream_usage_date"),Nr=new Date().toDateString();if(S&&(vn(S),pa(S),Cr("valid")),D&&(ha(D),ma(D),Ar("valid")),Z){const Go=Z==="unlimited"?"unlimited":parseInt(Z,10);yf(Go),lu(Go)}else lu(15);nt===Nr&&Me?ga(parseInt(Me,10)):(ga(0),localStorage.setItem("substream_usage_date",Nr),localStorage.setItem("substream_daily_usage","0"));const wn=localStorage.getItem("substream_google_user"),Ht=localStorage.getItem("substream_google_token"),es=localStorage.getItem("substream_google_token_timestamp");let If=!1;wn&&Ht&&es&&(Date.now()-parseInt(es,10)<3e6?(ya(JSON.parse(wn)),va(Ht),If=!0):(console.warn("Google Token Expired. Clearing session."),ji())),Y&&rt.find(Go=>Go.id===Y)&&er(Y==="youtube-auto"&&!If?rt[1].id:Y),Qv(!0)},[]),P.useEffect(()=>{vf&&tt==="youtube-auto"&&!tr&&er(rt[1].id)},[tr,tt,vf]),P.useEffect(()=>{if(Zn===""){Cr("idle");return}if(Zn===Qn){Cr("valid");return}return Cr("validating"),Mo.current&&clearTimeout(Mo.current),Mo.current=setTimeout(()=>{nP(Zn).then(S=>{Cr(S?"valid":"invalid")})},800),()=>{Mo.current&&clearTimeout(Mo.current)}},[Zn,Qn]),P.useEffect(()=>{if(jn===""){Ar("idle");return}if(jn===Ir){Ar("valid");return}return Ar("validating"),Do.current&&clearTimeout(Do.current),Do.current=setTimeout(()=>{rP(jn).then(S=>{Ar(S?"valid":"invalid")})},800),()=>{Do.current&&clearTimeout(Do.current)}},[jn,Ir]);const bo=S=>{f.current&&clearTimeout(f.current),d({message:S,isVisible:!0}),f.current=setTimeout(()=>{d(D=>D?{...D,isVisible:!1}:null),setTimeout(()=>d(null),500)},3e3)},jv=S=>{const D=gf+S;ga(D),localStorage.setItem("substream_daily_usage",D.toString()),localStorage.setItem("substream_usage_date",new Date().toDateString())},wa=S=>{var wn;let D="video";h?D=h.name.substring(0,h.name.lastIndexOf("."))||h.name:pe!=null&&pe.title&&(D=pe.title);const Y=D.replace(/[^a-zA-Z0-9 \-_]/g,"").trim(),Z=rt.find(Ht=>Ht.id===tt),Me=(Z==null?void 0:Z.provider)==="youtube"||ne==="auto"||ne===Se,nt=Me?"Transcribed":"Translated",Nr=Me?"Auto":((wn=br.find(Ht=>Ht.name===Se))==null?void 0:wn.name)||"English";return`SubStream_${Y}_${nt}_${Nr}.${S}`},xa=()=>{m(null),x(null),T([]),y(me.IDLE),E(0),C(null),U(J.IDLE),j(""),W(0),se([]),en(null),b(""),R(void 0),N(""),q(!1),ke&&ke.startsWith("blob:")&&URL.revokeObjectURL(ke),jt(null)},_f=S=>{if(!S||!S.access_token)return;const D=S.access_token;va(D),localStorage.setItem("substream_google_token",D),localStorage.setItem("substream_google_token_timestamp",Date.now().toString()),fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${D}`}}).then(Y=>Y.json()).then(Y=>{ya(Y),localStorage.setItem("substream_google_user",JSON.stringify(Y)),bo(`Welcome, ${Y.name}!`)}).catch(Y=>{console.error("Failed to fetch user info",Y),ji()})},ji=()=>{if(tt==="youtube-auto"){const S=rt.find(D=>D.provider==="google")||rt[1];er(S.id)}ya(null),va(null),localStorage.removeItem("substream_google_token"),localStorage.removeItem("substream_google_user"),localStorage.removeItem("substream_google_token_timestamp"),bo("Disconnected from YouTube.")},e_=()=>{$t==="valid"&&(localStorage.setItem("substream_google_api_key",Zn),vn(Zn)),Bt==="valid"&&(localStorage.setItem("substream_openai_api_key",jn),ha(jn)),localStorage.setItem("substream_model_id",tt),localStorage.setItem("substream_rpm",_n.toString()),lu(_n),r("NONE"),bo("Configuration Saved.")},t_=()=>{localStorage.removeItem("substream_google_api_key"),vn(""),pa(""),Cr("idle")},n_=()=>{localStorage.removeItem("substream_openai_api_key"),ha(""),ma(""),Ar("idle")},r_=S=>{m(null),T([]),y(me.IDLE),E(0),C(null),U(J.IDLE),j(""),W(0),se([]),b(""),R(void 0),N(""),q(!1),ke&&ke.startsWith("blob:")&&URL.revokeObjectURL(ke),x("youtube"),en(S),jt(`https://www.youtube.com/embed/${S.id}`);const D=new File([""],S.title,{type:"video/youtube"});m(D)},o_=async()=>{if(!Ue||!(pe!=null&&pe.videoUrl)){C("Please select a caption track first.");return}C(null),U(J.EXTRACTING_SUBTITLES),j("Downloading caption track...");try{const S=await kP(pe.videoUrl,Ue),D=Ko(S);if(D.length===0)throw new Error("Parsed subtitle file is empty.");T(D),y(me.COMPLETED),U(J.DONE)}catch(S){S.message.includes("Stale data")?C(S.message):C("Failed to download captions: "+S.message),U(J.ERROR)}},i_=S=>{var Y;const D=(Y=S.target.files)==null?void 0:Y[0];D&&Ea(D)},s_=S=>{S.preventDefault();const D=S.dataTransfer.files[0];D&&Ea(D)},Ea=S=>{xa(),S.name.endsWith(".srt")||S.name.endsWith(".vtt")?(x("srt"),m(S),a_(S)):Vp.includes(S.type)||S.name.match(/\.(mp4|mkv|mov|webm|avi)$/i)?(x("video"),m(S),u_(S)):C("Unsupported file type. Please upload an SRT or a supported video file.")},l_=S=>{Ea(S)},a_=async S=>{y(me.PARSING);try{const D=await S.text(),Y=Ko(D);if(Y.length===0)throw new Error("No subtitles found in file.");T(Y),y(me.IDLE)}catch(D){C(D.message||"Failed to parse SRT file."),y(me.ERROR)}},u_=async S=>{try{U(J.LOADING_FFMPEG);const D=await TP(Z=>j(Z));nr.current=D,D.on("progress",({progress:Z})=>{W(Z*100)}),U(J.ANALYZING),j("Analyzing video for subtitle tracks...");const Y=await CP(D,S);se(Y),jt(URL.createObjectURL(S)),U(J.IDLE)}catch(D){C(`Failed to process video file: ${D.message}`),U(J.ERROR)}},c_=async S=>{if(nr.current)try{W(0),U(J.EXTRACTING_SUBTITLES),j("Extracting selected subtitle track...");const D=await IP(nr.current,S),Y=Ko(D);T(Y),U(J.DONE)}catch(D){C(`Failed to extract subtitle track: ${D.message}`),U(J.ERROR)}},d_=async()=>{const S=rt.find(Z=>Z.id===tt);if(g==="youtube"){C("AI Audio transcription for YouTube links is currently limited. Please select a caption track.");return}if(S.provider==="youtube"){if(!ko||!tr||!h){h?(r("CONFIG"),C("Please authenticate with YouTube to use Auto-Caption.")):C("No file loaded to upload.");return}try{C(null),U(J.UPLOADING_TO_YOUTUBE),j("Uploading video to YouTube (Unlisted)..."),W(0);const Z=wa("").replace("SubStream_","").replace(/\.$/,"").replace(/_/g," "),Me=await bP(ko,h,Z,Ht=>W(Ht));U(J.AWAITING_YOUTUBE_CAPTIONS);const nt=await UP(ko,Me,(Ht,es)=>{j(Ht),W(es)});U(J.EXTRACTING_SUBTITLES),j("Downloading generated captions...");const Nr=await FP(ko,nt),wn=Ko(Nr);if(wn.length===0)throw new Error("Downloaded caption file is empty.");T(wn),U(J.DONE)}catch(Z){console.error("YouTube Auto-Caption Error:",Z);const Me=Z.message||"",nt=Me.toLowerCase();nt.includes("quota")?C("Daily YouTube Upload Quota Exceeded. Please try again tomorrow or use a Gemini/OpenAI model."):nt.includes("401")||nt.includes("invalid authentication")||nt.includes("session expired")?(C('Session expired. Please click "Authenticate YouTube" again.'),ji()):C(`YouTube Auto-Caption failed: ${Me}`),U(J.ERROR)}return}const D=S.provider==="openai"?Ir:Qn;if(S.provider,!nr.current||!D){r("CONFIG"),C(`Please provide an API Key for ${S.provider} to generate subtitles.`),U(J.IDLE);return}const Y=D||"";if(Y)try{W(0),U(J.EXTRACTING_AUDIO),j("Extracting audio from video...");const Z=await AP(nr.current);U(J.TRANSCRIBING),j(`Generating subtitles with ${S.name}, this may take a moment...`);const Me=await sP(Z,ne,Y,S),nt=Ko(Me);T(nt),U(J.DONE)}catch(Z){C(`Failed to generate subtitles: ${Z.message}`),U(J.ERROR)}},f_=async()=>{if(w.length===0)return;const S=rt.find(Z=>Z.id===tt);if(S.provider==="youtube"){C("YouTube Auto-Caption can only be used for generating subtitles from video, not for translating text. Please select a Gemini or OpenAI model.");return}const D=S.provider==="openai"?Ir:Qn;if(S.provider,!D){r("CONFIG"),C(`Please Provide an API Key for ${S.provider} to continue.`);return}const Y=D||"";y(me.TRANSLATING),E(0),C(null);try{const Z=await cP(w,ne,Se,Y,S,Me=>E(Math.round(Me/w.length*100)),Me=>T(Me));T(Z),jv(wf),y(me.COMPLETED)}catch(Z){console.error(Z),C(Z.message||"An error occurred during translation. Please try again."),y(me.ERROR)}},p_=()=>{if(w.length===0)return;const S=Xa(w),D=wa("srt");oc(D,S)},h_=async()=>{const S=wa("mp4");if(g==="youtube"){if(!Ue||!(pe!=null&&pe.videoUrl))return;C(null),R(0),N("Initializing..."),q(!1),Lo.current=setInterval(()=>{R(D=>D===void 0?0:(D<30?N("Fetching stream..."):D<60?N("Embedding subs..."):D<90&&N("Finalizing..."),D>=90?90:D+Math.random()*4))},600);try{await MP(pe.videoUrl,Ue,S),Lo.current&&clearInterval(Lo.current),R(100),N("Done"),q(!0),setTimeout(()=>{R(void 0),N(""),q(!1)},3e3)}catch(D){Lo.current&&clearInterval(Lo.current),R(void 0),N(""),C(`Video download failed: ${D.message}`)}return}if(!(!h||!nr.current||v!==me.COMPLETED))try{W(0),U(J.MUXING),j("Packaging your new video file... This will not re-encode the video.");const D=Xa(w),Y=br.find(nt=>nt.name===Se),Z=S.replace(".mp4",".mkv"),Me=await NP(nr.current,h,D,(Y==null?void 0:Y.code)||"eng");oc(Z,Me),U(J.DONE)}catch(D){C(`Failed to package video file: ${D.message}`),U(J.ERROR)}},wf=w.length>0?Math.ceil(w.length/Ac):0,m_=Math.max(0,qP-gf),Uo=rt.find(S=>S.id===tt)||rt[0],Fo=Qn||Ir,xf=P.useMemo(()=>rt.filter(S=>S.provider==="google"&&(S.name.toLowerCase().includes(Ot.toLowerCase())||S.description.toLowerCase().includes(Ot.toLowerCase()))),[Ot]),Ef=P.useMemo(()=>rt.filter(S=>S.provider==="openai"&&(S.name.toLowerCase().includes(Ot.toLowerCase())||S.description.toLowerCase().includes(Ot.toLowerCase()))),[Ot]),Sf=P.useMemo(()=>rt.filter(S=>S.provider==="youtube"&&(S.name.toLowerCase().includes(Ot.toLowerCase())||S.description.toLowerCase().includes(Ot.toLowerCase()))),[Ot]),g_=[J.EXTRACTING_AUDIO,J.TRANSCRIBING,J.MUXING,J.EXTRACTING_SUBTITLES,J.UPLOADING_TO_YOUTUBE,J.AWAITING_YOUTUBE_CAPTIONS].includes($),y_=P.useMemo(()=>Ka.findIndex(S=>S.value===_n),[_n]);return _a?null:t==="DOCS"?p.jsx(VP,{onBack:()=>e("HOME")}):p.jsxs("div",{className:"min-h-screen bg-black text-neutral-200 font-sans selection:bg-white selection:text-black flex flex-col",children:[p.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[p.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-neutral-900/30 blur-[120px] rounded-full mix-blend-screen"}),p.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[40%] h-[40%] bg-neutral-800/20 blur-[100px] rounded-full mix-blend-screen"})]}),p.jsxs("div",{className:`
          fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 
          flex items-center gap-3 px-6 py-3.5 rounded-full min-w-[320px] justify-center
          bg-neutral-900/30 border border-white/10 text-white shadow-[0_0_30px_rgba(0,0,0,0.3)] backdrop-blur-xl
          transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1)
          ${c!=null&&c.isVisible?"translate-y-0 opacity-100 scale-100":"translate-y-8 opacity-0 scale-95 pointer-events-none"}
      `,children:[p.jsx(e0,{className:"w-5 h-5 text-indigo-400 drop-shadow-[0_0_8px_rgba(129,140,248,0.5)]"}),p.jsx("span",{className:"text-sm font-medium tracking-wide",children:c==null?void 0:c.message})]}),p.jsx("nav",{className:"relative z-20 border-b border-neutral-900 bg-black/80 backdrop-blur-xl sticky top-0 transition-all",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>window.location.reload(),children:[p.jsx("div",{className:"w-8 h-8 bg-white text-black flex items-center justify-center font-bold text-xl rounded-lg font-display",children:"S"}),p.jsxs("span",{className:"font-display font-bold text-lg tracking-tight",children:["SubStream ",p.jsx("span",{className:"text-neutral-600 font-sans font-normal text-sm ml-2",children:"AI"})]})]}),p.jsxs("div",{className:"flex items-center gap-2 md:gap-6 text-sm font-medium text-neutral-400",children:[p.jsx("button",{onClick:()=>e("DOCS"),className:"hidden md:block hover:text-white transition-colors focus:outline-none",children:"Documentation"}),p.jsx("button",{onClick:()=>e("DOCS"),className:"p-2 rounded-full hover:bg-neutral-800 transition-colors group md:hidden","aria-label":"Documentation",children:p.jsx(Zx,{className:"w-5 h-5 text-neutral-400 group-hover:text-white"})}),p.jsxs("button",{onClick:()=>r("CONFIG"),className:`flex items-center gap-3 pl-3 pr-2 py-1.5 rounded-xl border transition-all group ${Fo?"bg-neutral-900/50 border-neutral-800 hover:border-white/30":"bg-neutral-900/50 border-neutral-800 hover:border-neutral-600"}`,children:[p.jsxs("div",{className:"text-xs text-right",children:[p.jsx("div",{className:"font-bold text-white",children:Uo.name}),p.jsx("div",{className:`text-[10px] uppercase ${Fo?"text-green-400":"text-neutral-500"}`,children:Fo?"Pro Access":`${m_} Credits`})]}),p.jsx("div",{className:`w-8 h-8 rounded-full border relative flex items-center justify-center ${Fo?"border-green-900/50 bg-green-900/20":"border-neutral-700 bg-neutral-800/50"}`,children:p.jsx(El,{className:`w-4 h-4 ${Fo?"text-green-400":"text-neutral-400 group-hover:text-white"}`})})]})]})]})}),p.jsxs("main",{className:"relative z-10 max-w-5xl mx-auto px-6 w-full flex-grow flex flex-col",children:[p.jsxs("div",{className:"flex-grow flex flex-col justify-start pt-16 md:pt-30",children:[p.jsxs("section",{className:"mb-14 text-center",children:[p.jsxs("h1",{className:"text-4xl md:text-6xl font-display font-bold tracking-tighter text-white mb-6 animate-slide-up",children:["Bridge the Language",p.jsx("br",{}),p.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-neutral-400 to-neutral-700",children:"Gap Instantly."})]}),p.jsxs("p",{className:"text-base md:text-lg text-neutral-400 max-w-2xl mx-auto leading-relaxed animate-slide-up",style:{animationDelay:"0.1s"},children:["Transform your subtitles with context-aware AI. Powered by ",Uo.provider==="google"?"Google's":"OpenAI's"," ",Uo.name," for nuance and accuracy across ",br.length,"+ languages."]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12 items-stretch pb-12",children:[p.jsx("div",{className:"lg:col-span-3",children:p.jsx("div",{className:"lg:sticky lg:top-32 h-full",children:p.jsxs("div",{className:"h-full flex flex-row justify-around p-4 rounded-2xl border border-neutral-900 bg-neutral-950/50 backdrop-blur-sm lg:flex-col lg:p-6 lg:justify-between",children:[p.jsx(Ns,{number:1,title:"Upload",isActive:v===me.IDLE&&!h,isCompleted:!!h}),p.jsx(Ns,{number:2,title:"Configure",isActive:!!h&&(w.length>0||g==="youtube")&&v!==me.TRANSLATING&&v!==me.COMPLETED,isCompleted:v===me.TRANSLATING||v===me.COMPLETED}),p.jsx(Ns,{number:3,title:"Translate",isActive:v===me.TRANSLATING,isCompleted:v===me.COMPLETED}),p.jsx(Ns,{number:4,title:"Download",isActive:v===me.COMPLETED,isCompleted:!1})]})})}),p.jsxs("div",{className:"lg:col-span-9 space-y-8",children:[(g==="video"||g==="youtube")&&ke&&(g==="youtube"&&pe?p.jsxs("div",{className:"w-full bg-black rounded-2xl overflow-hidden aspect-video border border-neutral-800 relative group",children:[p.jsx("img",{src:pe.thumbnailUrl,alt:pe.title,className:"w-full h-full object-cover opacity-50 group-hover:opacity-70 transition-opacity"}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsxs("div",{className:"px-4 py-2 bg-black/70 rounded-xl backdrop-blur border border-white/10 text-sm text-white font-medium flex items-center gap-2",children:[p.jsx(wo,{className:"w-4 h-4 text-red-500"})," YouTube Import"]})})]}):p.jsx($P,{videoSrc:ke,srtContent:Xa(w),isYouTube:!1})),p.jsx("div",{className:"group relative rounded-3xl border border-neutral-800 bg-neutral-900/20 p-6 hover:bg-neutral-900/30 transition-all duration-300",children:h?g==="video"&&$!==J.IDLE&&$!==J.DONE&&$!==J.ERROR?p.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[200px] space-y-4",children:[p.jsx(Qr,{className:"w-12 h-12 text-white animate-spin"}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-xl font-bold text-white mb-1 uppercase tracking-widest",children:$.replace(/_/g," ")}),p.jsx("p",{className:"text-neutral-400",children:le})]}),g_&&p.jsxs("div",{className:"w-full max-w-sm",children:[p.jsx("div",{className:"w-full h-2 bg-neutral-800 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${H}%`}})}),p.jsxs("p",{className:"text-xs text-neutral-500 mt-1 text-right",children:[Math.round(H),"%"]})]})]}):g==="video"&&$===J.IDLE&&w.length===0?p.jsx(BP,{tracks:xe,onSelectTrack:c_,onGenerate:d_,activeModel:Uo,isYouTubeAuthenticated:!!tr}):p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{className:"flex items-center justify-between gap-6",children:[p.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[p.jsx("div",{className:"w-24 aspect-video rounded-xl bg-neutral-800 text-black flex items-center justify-center overflow-hidden shrink-0 border border-neutral-700",children:g==="srt"?p.jsx(qi,{className:"w-6 h-6 text-white"}):g==="youtube"&&pe?p.jsx("img",{src:pe.thumbnailUrl,className:"w-full h-full object-cover"}):p.jsx(jx,{className:"w-6 h-6 text-white"})}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("h3",{className:"text-lg font-bold text-white truncate",children:h.name}),p.jsx("p",{className:"text-neutral-500 text-sm",children:w.length>0?`${w.length} lines loaded`:g==="youtube"?"Select a caption track below":"Ready to configure"})]})]}),p.jsx(it,{variant:"outline",onClick:xa,className:"shrink-0",children:"Change File"})]}),w.length>0&&g!=="youtube"&&p.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-indigo-900/20 border border-indigo-900/40 text-indigo-300 text-sm",children:[p.jsx(iE,{className:"w-4 h-4 shrink-0"}),p.jsxs("span",{children:["Processing this file will require approximately ",p.jsxs("strong",{children:[wf," API requests"]}),"."]})]})]}):p.jsxs("div",{className:"flex flex-col items-center justify-center text-center cursor-pointer min-h-[200px]",onDragOver:S=>S.preventDefault(),onDrop:s_,children:[p.jsx("input",{type:"file",ref:Zi,className:"hidden",accept:`.srt, ${Vp.join(",")}`,onChange:i_}),p.jsx("div",{className:"w-16 h-16 rounded-2xl bg-neutral-800 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",onClick:()=>{var S;return(S=Zi.current)==null?void 0:S.click()},children:p.jsx(hE,{className:"text-white w-8 h-8"})}),p.jsx("h2",{className:"text-xl font-bold text-white mb-2",onClick:()=>{var S;return(S=Zi.current)==null?void 0:S.click()},children:"Drop your SRT or Video file here"}),p.jsx("p",{className:"text-neutral-500 mb-8",onClick:()=>{var S;return(S=Zi.current)==null?void 0:S.click()},children:"or click to browse local files"}),p.jsxs("div",{className:"flex gap-4 z-20",children:[p.jsx("button",{onClick:()=>{a("URL"),i(!0)},className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-neutral-500 transition-all group/btn",title:"Import from URL",children:p.jsx(jy,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-white"})}),p.jsx("button",{onClick:()=>{a("YOUTUBE"),i(!0)},className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-red-500/50 transition-all group/btn",title:"Import from YouTube",children:p.jsx(wo,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-red-500"})}),p.jsx("button",{onClick:()=>bo("Google Drive Integration Coming Soon!"),className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-blue-500/50 transition-all group/btn",title:"Import from Google Drive",children:p.jsx(rE,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-blue-500"})}),p.jsx("button",{onClick:()=>bo("Social Media Integration Coming Soon!"),className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-pink-500/50 transition-all group/btn",title:"Other Sources",children:p.jsx(sE,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-pink-500"})})]})]})}),(w.length>0||g==="youtube")&&p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[p.jsx("div",{className:"p-6 rounded-2xl border border-neutral-800 bg-neutral-900/20",children:g==="youtube"?p.jsxs(p.Fragment,{children:[p.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-wider mb-3",children:"YouTube Caption Track"}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{className:"w-full appearance-none bg-black border border-neutral-800 text-white px-4 py-3 rounded-xl focus:border-white focus:outline-none transition-colors",onChange:S=>b(S.target.value),value:Ue,disabled:$===J.EXTRACTING_SUBTITLES,children:[p.jsx("option",{value:"",children:"-- Select Caption to Import --"}),(Tf=pe==null?void 0:pe.availableCaptions)==null?void 0:Tf.map((S,D)=>p.jsx("option",{value:S.id,children:S.name},D))]}),p.jsx(vs,{className:"absolute right-4 top-3.5 w-5 h-5 text-neutral-600 pointer-events-none"})]})]}):p.jsxs(p.Fragment,{children:[p.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-wider mb-3",children:"Source Language"}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{className:"w-full appearance-none bg-black border border-neutral-800 text-white px-4 py-3 rounded-xl focus:border-white focus:outline-none transition-colors",value:ne,onChange:S=>Ye(S.target.value),disabled:v===me.TRANSLATING,children:[p.jsx("option",{value:"auto",children:" Auto Detect"}),br.map(S=>p.jsx("option",{value:S.name,children:S.name},`source-${S.code}`))]}),p.jsx(lE,{className:"absolute right-4 top-3.5 w-5 h-5 text-neutral-600 pointer-events-none"})]})]})}),p.jsx("div",{className:"p-6 rounded-2xl border border-neutral-800 bg-neutral-900/20 flex flex-col justify-end",children:g==="youtube"?p.jsx("div",{className:"h-full flex items-end",children:p.jsx(it,{className:"w-full py-3.5 text-base",onClick:o_,disabled:!Ue||$===J.EXTRACTING_SUBTITLES,icon:$===J.EXTRACTING_SUBTITLES?p.jsx(Qr,{className:"w-5 h-5 animate-spin"}):p.jsx(Sl,{className:"w-5 h-5"}),children:$===J.EXTRACTING_SUBTITLES?"Downloading...":"Download & Process"})}):p.jsxs(p.Fragment,{children:[p.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-wider mb-3",children:"Target Language"}),p.jsxs("div",{className:"relative",children:[p.jsx("select",{className:"w-full appearance-none bg-black border border-neutral-800 text-white px-4 py-3 rounded-xl focus:border-white focus:outline-none transition-colors",value:Se,onChange:S=>Ce(S.target.value),disabled:v===me.TRANSLATING,children:br.map(S=>p.jsx("option",{value:S.name,children:S.name},`target-${S.code}`))}),p.jsx(Qx,{className:"absolute right-4 top-3.5 w-5 h-5 text-neutral-600 pointer-events-none"})]})]})})]}),w.length>0&&g!=="youtube"&&p.jsx("div",{className:"flex justify-end gap-4 animate-fade-in",children:v===me.TRANSLATING?p.jsxs("div",{className:"flex-1 p-4 rounded-xl border border-neutral-800 bg-neutral-900/50 flex items-center gap-4",children:[p.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex justify-between text-xs font-medium mb-1",children:[p.jsxs("span",{children:["Translating with ",Uo.name,"..."]}),p.jsxs("span",{children:[_,"%"]})]}),p.jsx("div",{className:"w-full h-1 bg-neutral-800 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${_}%`}})})]})]}):p.jsx(it,{onClick:f_,className:"w-full md:w-auto text-lg",icon:p.jsx(t0,{className:"w-5 h-5"}),children:"Start Translation"})}),I&&p.jsxs("div",{className:"p-4 rounded-xl bg-red-900/10 border border-red-900/40 text-red-200 text-sm flex items-center gap-3 animate-fade-in",children:[p.jsx(xl,{className:"w-5 h-5 text-red-500"}),p.jsx("span",{children:I})]})]})]})]}),w.length>0&&p.jsxs("section",{ref:Zv,className:"mt-24 border-t border-neutral-900 pt-12 animate-slide-up pb-24",children:[p.jsxs("div",{className:"flex items-center justify-between mb-8 flex-wrap gap-4",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-2",children:"Live Preview"}),p.jsx("p",{className:"text-neutral-500",children:"Comparing original vs translated output."})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[(g==="video"||g==="youtube")&&p.jsx("div",{className:"",children:p.jsx(it,{variant:"secondary",onClick:h_,progress:A,statusText:M,completed:G,disabled:A!==void 0,icon:p.jsx(nc,{className:"w-4 h-4"}),className:"",children:"Download Video"})}),p.jsx(it,{variant:"primary",onClick:p_,icon:p.jsx(Sl,{className:"w-4 h-4"}),children:"Download SRT"})]})]}),p.jsxs("div",{className:"rounded-3xl border border-neutral-800 bg-black/50 backdrop-blur overflow-hidden min-h-[400px]",children:[p.jsxs("div",{className:`grid ${g==="youtube"?"grid-cols-1":"grid-cols-[100px_1fr]"} border-b border-neutral-800 bg-neutral-900/50 p-4 text-xs font-bold text-neutral-500 uppercase tracking-wider sticky top-0 z-10`,children:[g!=="youtube"&&p.jsx("div",{className:"pl-2",children:"Timestamp"}),p.jsxs("div",{className:`grid ${g==="youtube"?"grid-cols-1":"grid-cols-1 md:grid-cols-2"} gap-6`,children:[p.jsxs("span",{children:["Original (",ne,")"]}),g!=="youtube"&&p.jsxs("span",{className:"text-white",children:["Translated (",Se,")"]})]})]}),p.jsx("div",{className:"max-h-[800px] overflow-y-auto",children:w.map(S=>p.jsx(GP,{subtitle:S,isActive:S.text!==S.originalText,isSingleColumn:g==="youtube"},S.id))})]}),p.jsx("div",{className:"mt-8 flex justify-center",children:p.jsx(it,{variant:"secondary",onClick:xa,icon:p.jsx(fE,{className:"w-4 h-4"}),children:"Translate Another File"})})]})]}),p.jsx("footer",{className:"relative z-10 border-t border-neutral-900 bg-black/80 backdrop-blur-xl mt-auto",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8 flex flex-col gap-8",children:[p.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 w-full",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-6 h-6 bg-neutral-800 text-white flex items-center justify-center font-bold text-sm rounded font-display",children:"S"}),p.jsx("span",{className:"font-display font-bold tracking-tight text-neutral-400",children:"SubStream AI"})]}),p.jsxs("div",{className:"text-xs text-neutral-600",children:[" ",new Date().getFullYear()," SubStream AI. Open Source."]}),p.jsxs("div",{className:"flex items-center gap-6 text-sm text-neutral-500",children:[p.jsx("button",{onClick:()=>r("TOS"),className:"hover:text-white transition-colors",children:"Terms"}),p.jsx("button",{onClick:()=>r("PRIVACY"),className:"hover:text-white transition-colors",children:"Privacy"}),p.jsx("a",{href:"https://github.com/imrovoid/SubStream-AI",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:p.jsx(tE,{className:"w-5 h-5"})})]})]}),p.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 text-xs text-neutral-500 w-full",children:[p.jsxs("span",{children:["Developed by ",p.jsx("a",{href:"https://rovoid.ir",target:"_blank",rel:"noopener noreferrer",className:"text-neutral-300 hover:text-white transition-colors font-medium",children:"ROVOID"})]}),p.jsx("span",{className:"hidden md:block w-1 h-1 rounded-full bg-neutral-800"}),p.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-neutral-900/50 border border-neutral-800 text-xs hover:border-neutral-600 hover:bg-neutral-800 transition-all group",children:[p.jsx(oE,{className:"w-3 h-3 text-pink-500 group-hover:scale-110 transition-transform"})," Support Me"]})]})]})}),p.jsx(Xs,{isOpen:n==="CONFIG",onClose:()=>r("NONE"),title:"AI Configuration",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-10",children:[p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[p.jsx(El,{className:"w-4 h-4"})," Select AI Model"]}),p.jsxs("div",{className:"relative",children:[p.jsx(Tl,{className:"absolute left-3 top-3.5 w-5 h-5 text-neutral-500 pointer-events-none"}),p.jsx("input",{type:"text",placeholder:"Search models...",value:Ot,onChange:S=>Xv(S.target.value),className:"w-full bg-black/50 border border-neutral-700 rounded-xl py-2 pl-10 pr-4 text-white focus:border-white focus:outline-none transition-colors"})]}),p.jsxs("div",{className:"space-y-4 pr-2 overflow-y-auto max-h-[300px] md:max-h-[450px] custom-scrollbar",children:[Sf.length>0&&p.jsxs("details",{open:!0,className:"group/youtube",children:[p.jsxs("summary",{className:"list-none flex items-center justify-between p-2 rounded-lg cursor-pointer hover:bg-neutral-800/50 transition-colors",children:[p.jsx("span",{className:"font-bold text-neutral-300",children:"YouTube Services"}),p.jsx(vs,{className:"w-5 h-5 text-neutral-500 transition-transform duration-200 group-open/youtube:rotate-180"})]}),p.jsx("div",{className:"space-y-3 pt-2 pl-2 border-l border-neutral-800 ml-2",children:Sf.map(S=>{const D=!tr;return p.jsxs("div",{onClick:()=>!D&&er(S.id),className:`relative cursor-pointer p-4 rounded-xl border transition-all duration-200 
                                    ${D?"opacity-50 cursor-not-allowed bg-neutral-900/30 border-neutral-800":tt===S.id?"bg-neutral-800 border-white":"bg-neutral-900/50 border-neutral-800 hover:bg-neutral-800/50 hover:border-neutral-700"}
                                `,children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsxs("h4",{className:"font-bold text-white mb-1 flex items-center gap-2",children:[S.name,!tr&&p.jsx("span",{className:"text-[10px] text-red-400 bg-red-900/20 px-1.5 py-0.5 rounded border border-red-900/50",children:"Auth Required"})]}),p.jsx("p",{className:"text-xs text-neutral-400 leading-relaxed pr-8",children:S.description})]}),tt===S.id&&p.jsx(Yo,{className:"w-5 h-5 text-white shrink-0"})]}),p.jsx("div",{className:"flex gap-2 mt-3",children:S.tags.map(Y=>p.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-black/50 text-neutral-400 border border-neutral-800",children:Y},Y))})]},S.id)})})]}),xf.length>0&&p.jsxs("details",{open:!0,className:"group/google",children:[p.jsxs("summary",{className:"list-none flex items-center justify-between p-2 rounded-lg cursor-pointer hover:bg-neutral-800/50 transition-colors",children:[p.jsx("span",{className:"font-bold text-neutral-300",children:"Google Gemini Models"}),p.jsx(vs,{className:"w-5 h-5 text-neutral-500 transition-transform duration-200 group-open/google:rotate-180"})]}),p.jsx("div",{className:"space-y-3 pt-2 pl-2 border-l border-neutral-800 ml-2",children:xf.map(S=>p.jsxs("div",{onClick:()=>er(S.id),className:`relative cursor-pointer p-4 rounded-xl border transition-all duration-200 ${tt===S.id?"bg-neutral-800 border-white":"bg-neutral-900/50 border-neutral-800 hover:bg-neutral-800/50 hover:border-neutral-700"}`,children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"font-bold text-white mb-1",children:S.name}),p.jsx("p",{className:"text-xs text-neutral-400 leading-relaxed pr-8",children:S.description})]}),tt===S.id&&p.jsx(Yo,{className:"w-5 h-5 text-white shrink-0"})]}),p.jsx("div",{className:"flex gap-2 mt-3",children:S.tags.map(D=>p.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-black/50 text-neutral-400 border border-neutral-800",children:D},D))})]},S.id))})]}),Ef.length>0&&p.jsxs("details",{open:!0,className:"group/openai",children:[p.jsxs("summary",{className:"list-none flex items-center justify-between p-2 rounded-lg cursor-pointer hover:bg-neutral-800/50 transition-colors",children:[p.jsx("span",{className:"font-bold text-neutral-300",children:"OpenAI Models"}),p.jsx(vs,{className:"w-5 h-5 text-neutral-500 transition-transform duration-200 group-open/openai:rotate-180"})]}),p.jsx("div",{className:"space-y-3 pt-2 pl-2 border-l border-neutral-800 ml-2",children:Ef.map(S=>p.jsxs("div",{onClick:()=>er(S.id),className:`relative cursor-pointer p-4 rounded-xl border transition-all duration-200 ${tt===S.id?"bg-neutral-800 border-white":"bg-neutral-900/50 border-neutral-800 hover:bg-neutral-800/50 hover:border-neutral-700"}`,children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"font-bold text-white mb-1",children:S.name}),p.jsx("p",{className:"text-xs text-neutral-400 leading-relaxed pr-8",children:S.description})]}),tt===S.id&&p.jsx(Yo,{className:"w-5 h-5 text-white shrink-0"})]}),p.jsx("div",{className:"flex gap-2 mt-3",children:S.tags.map(D=>p.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-black/50 text-neutral-400 border border-neutral-800",children:D},D))})]},S.id))})]})]})]}),p.jsxs("div",{className:"space-y-6 flex flex-col h-full",children:[p.jsxs("div",{className:"space-y-6 flex-grow",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[p.jsx(rc,{className:"w-4 h-4"})," Google AI API Key"]}),Qn&&p.jsx("button",{onClick:t_,className:"text-xs text-red-500 hover:text-red-400",children:"Clear Key"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"password",placeholder:"AIzaSy...",value:Zn,onChange:S=>pa(S.target.value),className:`w-full bg-black border rounded-xl px-4 py-3 text-white focus:outline-none transition-colors ${$t==="idle"?"border-neutral-800 focus:border-white":""} ${$t==="validating"?"border-neutral-700 animate-pulse":""} ${$t==="valid"?"border-green-700/50 focus:border-green-500 focus:ring-1 focus:ring-green-500/50":""} ${$t==="invalid"?"border-red-700/50 focus:border-red-500 focus:ring-1 focus:ring-red-500/50":""}`}),p.jsxs("div",{className:"absolute right-3 top-3.5",children:[$t==="validating"&&p.jsx(Qr,{className:"w-5 h-5 text-neutral-500 animate-spin"}),$t==="valid"&&p.jsx(Yo,{className:"w-5 h-5 text-green-500"}),$t==="invalid"&&p.jsx(Gp,{className:"w-5 h-5 text-red-500"})]})]}),p.jsx("p",{className:"text-xs text-neutral-500",children:"For Gemini models. Stored locally in your browser."})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[p.jsx(rc,{className:"w-4 h-4"})," OpenAI API Key"]}),Ir&&p.jsx("button",{onClick:n_,className:"text-xs text-red-500 hover:text-red-400",children:"Clear Key"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"password",placeholder:"sk-...",value:jn,onChange:S=>ma(S.target.value),className:`w-full bg-black border rounded-xl px-4 py-3 text-white focus:outline-none transition-colors ${Bt==="idle"?"border-neutral-800 focus:border-white":""} ${Bt==="validating"?"border-neutral-700 animate-pulse":""} ${Bt==="valid"?"border-green-700/50 focus:border-green-500 focus:ring-1 focus:ring-green-500/50":""} ${Bt==="invalid"?"border-red-700/50 focus:border-red-500 focus:ring-1 focus:ring-red-500/50":""}`}),p.jsxs("div",{className:"absolute right-3 top-3.5",children:[Bt==="validating"&&p.jsx(Qr,{className:"w-5 h-5 text-neutral-500 animate-spin"}),Bt==="valid"&&p.jsx(Yo,{className:"w-5 h-5 text-green-500"}),Bt==="invalid"&&p.jsx(Gp,{className:"w-5 h-5 text-red-500"})]})]}),p.jsx("p",{className:"text-xs text-neutral-500",children:"For GPT models. Stored locally in your browser."})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[p.jsx(Zy,{className:"w-4 h-4"})," Rate Limit"]}),p.jsx("p",{className:"font-medium text-white text-sm",children:_n==="unlimited"?"Unlimited":`${_n} RPM`})]}),p.jsxs("div",{className:"relative flex w-full p-1 bg-neutral-900 border border-neutral-800 rounded-xl",children:[p.jsx("div",{className:"absolute top-1 bottom-1 left-1 w-1/4 bg-neutral-700 rounded-lg transition-all duration-300 ease-out",style:{transform:`translateX(${y_*100}%)`}}),Ka.map(S=>p.jsx("button",{onClick:()=>yf(S.value),className:`relative z-10 w-1/4 py-2 text-sm font-medium transition-colors duration-300 rounded-lg ${_n===S.value?"text-white":"text-neutral-400 hover:text-white"}`,children:S.label},S.value))]}),p.jsx("p",{className:"text-xs text-neutral-500 text-center mt-2",children:(Cf=Ka.find(S=>S.value===_n))==null?void 0:Cf.description})]})]}),p.jsxs("div",{className:"flex items-center justify-between w-full pt-6 mt-8 border-t border-neutral-800",children:[p.jsx(OP,{onLoginSuccess:_f,onLogout:ji,userInfo:tr}),p.jsx(it,{onClick:e_,disabled:$t==="invalid"||$t==="validating"||Bt==="invalid"||Bt==="validating",children:"Save Settings"})]})]})]})}),p.jsx(Xs,{isOpen:n==="PRIVACY",onClose:()=>r("NONE"),title:"Privacy Policy",children:p.jsxs("div",{className:"space-y-5 text-sm text-neutral-300",children:[p.jsx("p",{className:"text-neutral-500",children:"Last Updated: November 2025"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-bold mb-2",children:"1. Data Collection"}),p.jsx("p",{children:"We do not store your subtitle files. All processing is done in-memory and via the Gemini API. Once your session ends, your data is cleared from our interface."})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-bold mb-2",children:"2. Third-Party Services"}),p.jsx("p",{children:"We use Google's Gemini API for processing translations. Data sent to Google is subject to their data processing terms."})]})]})}),p.jsx(Xs,{isOpen:n==="TOS",onClose:()=>r("NONE"),title:"Terms of Service",children:p.jsxs("div",{className:"space-y-5 text-sm text-neutral-300",children:[p.jsx("p",{className:"text-neutral-500",children:"Last Updated: November 2025"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-bold mb-2",children:"1. Usage"}),p.jsx("p",{children:'SubStream AI is provided "as is" for subtitle translation purposes. Do not use for illegal content.'})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-white font-bold mb-2",children:"2. Limitations"}),p.jsx("p",{children:"We do not guarantee 100% accuracy in translations. AI models can hallucinate or misinterpret context."})]})]})}),p.jsx(HP,{isOpen:o,onClose:()=>i(!1),type:s,onImportFile:l_,onImportYouTube:r_,googleAccessToken:ko})]})},Kv=document.getElementById("root");if(!Kv)throw new Error("Could not find root element to mount to");const WP=au.createRoot(Kv);WP.render(p.jsx(zP,{}));
