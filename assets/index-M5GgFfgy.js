var Kx=Object.defineProperty;var tp=t=>{throw TypeError(t)};var Xx=(t,e,n)=>e in t?Kx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var tt=(t,e,n)=>Xx(t,typeof e!="symbol"?e+"":e,n),np=(t,e,n)=>e.has(t)||tp("Cannot "+n);var Z=(t,e,n)=>(np(t,e,"read from private field"),n?n.call(t):e.get(t)),Pn=(t,e,n)=>e.has(t)?tp("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ko=(t,e,n,r)=>(np(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function Qx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fg={exports:{}},Ql={},pg={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zs=Symbol.for("react.element"),Zx=Symbol.for("react.portal"),ew=Symbol.for("react.fragment"),tw=Symbol.for("react.strict_mode"),nw=Symbol.for("react.profiler"),rw=Symbol.for("react.provider"),ow=Symbol.for("react.context"),sw=Symbol.for("react.forward_ref"),iw=Symbol.for("react.suspense"),lw=Symbol.for("react.memo"),aw=Symbol.for("react.lazy"),rp=Symbol.iterator;function uw(t){return t===null||typeof t!="object"?null:(t=rp&&t[rp]||t["@@iterator"],typeof t=="function"?t:null)}var hg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mg=Object.assign,gg={};function Do(t,e,n){this.props=t,this.context=e,this.refs=gg,this.updater=n||hg}Do.prototype.isReactComponent={};Do.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Do.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yg(){}yg.prototype=Do.prototype;function Zc(t,e,n){this.props=t,this.context=e,this.refs=gg,this.updater=n||hg}var ed=Zc.prototype=new yg;ed.constructor=Zc;mg(ed,Do.prototype);ed.isPureReactComponent=!0;var op=Array.isArray,vg=Object.prototype.hasOwnProperty,td={current:null},xg={key:!0,ref:!0,__self:!0,__source:!0};function wg(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)vg.call(e,r)&&!xg.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];o.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Zs,type:t,key:s,ref:i,props:o,_owner:td.current}}function cw(t,e){return{$$typeof:Zs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zs}function dw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sp=/\/+/g;function za(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dw(""+t.key):e.toString(36)}function Wi(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Zs:case Zx:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+za(i,0):r,op(o)?(n="",t!=null&&(n=t.replace(sp,"$&/")+"/"),Wi(o,e,n,"",function(d){return d})):o!=null&&(nd(o)&&(o=cw(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(sp,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",op(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+za(s,a);i+=Wi(s,e,n,c,o)}else if(c=uw(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+za(s,a++),i+=Wi(s,e,n,c,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function yi(t,e,n){if(t==null)return t;var r=[],o=0;return Wi(t,r,"","",function(s){return e.call(n,s,o++)}),r}function fw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var it={current:null},Yi={transition:null},pw={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:Yi,ReactCurrentOwner:td};function _g(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:yi,forEach:function(t,e,n){yi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yi(t,function(){e++}),e},toArray:function(t){return yi(t,function(e){return e})||[]},only:function(t){if(!nd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Do;te.Fragment=ew;te.Profiler=nw;te.PureComponent=Zc;te.StrictMode=tw;te.Suspense=iw;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pw;te.act=_g;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mg({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=td.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)vg.call(e,c)&&!xg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Zs,type:t.type,key:o,ref:s,props:r,_owner:i}};te.createContext=function(t){return t={$$typeof:ow,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rw,_context:t},t.Consumer=t};te.createElement=wg;te.createFactory=function(t){var e=wg.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:sw,render:t}};te.isValidElement=nd;te.lazy=function(t){return{$$typeof:aw,_payload:{_status:-1,_result:t},_init:fw}};te.memo=function(t,e){return{$$typeof:lw,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Yi.transition;Yi.transition={};try{t()}finally{Yi.transition=e}};te.unstable_act=_g;te.useCallback=function(t,e){return it.current.useCallback(t,e)};te.useContext=function(t){return it.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return it.current.useDeferredValue(t)};te.useEffect=function(t,e){return it.current.useEffect(t,e)};te.useId=function(){return it.current.useId()};te.useImperativeHandle=function(t,e,n){return it.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return it.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return it.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return it.current.useMemo(t,e)};te.useReducer=function(t,e,n){return it.current.useReducer(t,e,n)};te.useRef=function(t){return it.current.useRef(t)};te.useState=function(t){return it.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return it.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return it.current.useTransition()};te.version="18.3.1";pg.exports=te;var A=pg.exports;const Sg=Qx(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw=A,mw=Symbol.for("react.element"),gw=Symbol.for("react.fragment"),yw=Object.prototype.hasOwnProperty,vw=hw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xw={key:!0,ref:!0,__self:!0,__source:!0};function Eg(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)yw.call(e,r)&&!xw.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:mw,type:t,key:s,ref:i,props:o,_owner:vw.current}}Ql.Fragment=gw;Ql.jsx=Eg;Ql.jsxs=Eg;fg.exports=Ql;var f=fg.exports,Ru={},Cg={exports:{}},It={},Tg={exports:{}},Ig={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,B){var O=b.length;b.push(B);e:for(;0<O;){var ae=O-1>>>1,ne=b[ae];if(0<o(ne,B))b[ae]=B,b[O]=ne,O=ae;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var B=b[0],O=b.pop();if(O!==B){b[0]=O;e:for(var ae=0,ne=b.length,H=ne>>>1;ae<H;){var Y=2*(ae+1)-1,K=b[Y],fe=Y+1,Ne=b[fe];if(0>o(K,O))fe<ne&&0>o(Ne,K)?(b[ae]=Ne,b[fe]=O,ae=fe):(b[ae]=K,b[Y]=O,ae=Y);else if(fe<ne&&0>o(Ne,O))b[ae]=Ne,b[fe]=O,ae=fe;else break e}}return B}function o(b,B){var O=b.sortIndex-B.sortIndex;return O!==0?O:b.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var c=[],d=[],p=1,h=null,m=3,g=!1,_=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(b){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=b)r(d),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(d)}}function S(b){if(w=!1,x(b),!_)if(n(c)!==null)_=!0,ge(N);else{var B=n(d);B!==null&&Be(S,B.startTime-b)}}function N(b,B){_=!1,w&&(w=!1,v(R),R=-1),g=!0;var O=m;try{for(x(B),h=n(c);h!==null&&(!(h.expirationTime>B)||b&&!G());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,m=h.priorityLevel;var ne=ae(h.expirationTime<=B);B=t.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(c)&&r(c),x(B)}else r(c);h=n(c)}if(h!==null)var H=!0;else{var Y=n(d);Y!==null&&Be(S,Y.startTime-B),H=!1}return H}finally{h=null,m=O,g=!1}}var I=!1,T=null,R=-1,k=5,P=-1;function G(){return!(t.unstable_now()-P<k)}function z(){if(T!==null){var b=t.unstable_now();P=b;var B=!0;try{B=T(!0,b)}finally{B?le():(I=!1,T=null)}}else I=!1}var le;if(typeof y=="function")le=function(){y(z)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Pe=Ie.port2;Ie.port1.onmessage=z,le=function(){Pe.postMessage(null)}}else le=function(){C(z,0)};function ge(b){T=b,I||(I=!0,le())}function Be(b,B){R=C(function(){b(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,ge(N))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(b){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var O=m;m=B;try{return b()}finally{m=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,B){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var O=m;m=b;try{return B()}finally{m=O}},t.unstable_scheduleCallback=function(b,B,O){var ae=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?ae+O:ae):O=ae,b){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=O+ne,b={id:p++,callback:B,priorityLevel:b,startTime:O,expirationTime:ne,sortIndex:-1},O>ae?(b.sortIndex=O,e(d,b),n(c)===null&&b===n(d)&&(w?(v(R),R=-1):w=!0,Be(S,O-ae))):(b.sortIndex=ne,e(c,b),_||g||(_=!0,ge(N))),b},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(b){var B=m;return function(){var O=m;m=B;try{return b.apply(this,arguments)}finally{m=O}}}})(Ig);Tg.exports=Ig;var ww=Tg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _w=A,Tt=ww;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ng=new Set,Ms={};function Mr(t,e){To(t,e),To(t+"Capture",e)}function To(t,e){for(Ms[t]=e,t=0;t<e.length;t++)Ng.add(e[t])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pu=Object.prototype.hasOwnProperty,Sw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ip={},lp={};function Ew(t){return Pu.call(lp,t)?!0:Pu.call(ip,t)?!1:Sw.test(t)?lp[t]=!0:(ip[t]=!0,!1)}function Cw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Tw(t,e,n,r){if(e===null||typeof e>"u"||Cw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function lt(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var We={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){We[t]=new lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];We[e]=new lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){We[t]=new lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){We[t]=new lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){We[t]=new lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){We[t]=new lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){We[t]=new lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){We[t]=new lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){We[t]=new lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var rd=/[\-:]([a-z])/g;function od(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rd,od);We[e]=new lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rd,od);We[e]=new lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rd,od);We[e]=new lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){We[t]=new lt(t,1,!1,t.toLowerCase(),null,!1,!1)});We.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){We[t]=new lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sd(t,e,n,r){var o=We.hasOwnProperty(e)?We[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Tw(e,n,o,r)&&(n=null),r||o===null?Ew(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Tn=_w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vi=Symbol.for("react.element"),Qr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),id=Symbol.for("react.strict_mode"),ku=Symbol.for("react.profiler"),Ag=Symbol.for("react.provider"),Rg=Symbol.for("react.context"),ld=Symbol.for("react.forward_ref"),Mu=Symbol.for("react.suspense"),bu=Symbol.for("react.suspense_list"),ad=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),Pg=Symbol.for("react.offscreen"),ap=Symbol.iterator;function Xo(t){return t===null||typeof t!="object"?null:(t=ap&&t[ap]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,Ja;function as(t){if(Ja===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ja=e&&e[1]||""}return`
`+Ja+t}var Wa=!1;function Ya(t,e){if(!t||Wa)return"";Wa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var c=`
`+o[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=a);break}}}finally{Wa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?as(t):""}function Iw(t){switch(t.tag){case 5:return as(t.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return t=Ya(t.type,!1),t;case 11:return t=Ya(t.type.render,!1),t;case 1:return t=Ya(t.type,!0),t;default:return""}}function Du(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zr:return"Fragment";case Qr:return"Portal";case ku:return"Profiler";case id:return"StrictMode";case Mu:return"Suspense";case bu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rg:return(t.displayName||"Context")+".Consumer";case Ag:return(t._context.displayName||"Context")+".Provider";case ld:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ad:return e=t.displayName||null,e!==null?e:Du(t.type)||"Memo";case Ln:e=t._payload,t=t._init;try{return Du(t(e))}catch{}}return null}function Nw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Du(e);case 8:return e===id?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Aw(t){var e=kg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xi(t){t._valueTracker||(t._valueTracker=Aw(t))}function Mg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ml(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lu(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function up(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bg(t,e){e=e.checked,e!=null&&sd(t,"checked",e,!1)}function Uu(t,e){bg(t,e);var n=Qn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fu(t,e.type,Qn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fu(t,e,n){(e!=="number"||ml(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var us=Array.isArray;function po(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qn(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Gu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(us(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qn(n)}}function Dg(t,e){var n=Qn(e.value),r=Qn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function fp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var wi,Ug=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(wi=wi||document.createElement("div"),wi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rw=["Webkit","ms","Moz","O"];Object.keys(vs).forEach(function(t){Rw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vs[e]=vs[t]})});function Fg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vs.hasOwnProperty(t)&&vs[t]?(""+e).trim():e+"px"}function Gg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Fg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Pw=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $u(t,e){if(e){if(Pw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Ou(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bu=null;function ud(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hu=null,ho=null,mo=null;function pp(t){if(t=ni(t)){if(typeof Hu!="function")throw Error(M(280));var e=t.stateNode;e&&(e=ra(e),Hu(t.stateNode,t.type,e))}}function Vg(t){ho?mo?mo.push(t):mo=[t]:ho=t}function $g(){if(ho){var t=ho,e=mo;if(mo=ho=null,pp(t),e)for(t=0;t<e.length;t++)pp(e[t])}}function Og(t,e){return t(e)}function Bg(){}var ja=!1;function Hg(t,e,n){if(ja)return t(e,n);ja=!0;try{return Og(t,e,n)}finally{ja=!1,(ho!==null||mo!==null)&&(Bg(),$g())}}function Ds(t,e){var n=t.stateNode;if(n===null)return null;var r=ra(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var qu=!1;if(wn)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){qu=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{qu=!1}function kw(t,e,n,r,o,s,i,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var xs=!1,gl=null,yl=!1,zu=null,Mw={onError:function(t){xs=!0,gl=t}};function bw(t,e,n,r,o,s,i,a,c){xs=!1,gl=null,kw.apply(Mw,arguments)}function Dw(t,e,n,r,o,s,i,a,c){if(bw.apply(this,arguments),xs){if(xs){var d=gl;xs=!1,gl=null}else throw Error(M(198));yl||(yl=!0,zu=d)}}function br(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hp(t){if(br(t)!==t)throw Error(M(188))}function Lw(t){var e=t.alternate;if(!e){if(e=br(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return hp(o),t;if(s===r)return hp(o),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function zg(t){return t=Lw(t),t!==null?Jg(t):null}function Jg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Jg(t);if(e!==null)return e;t=t.sibling}return null}var Wg=Tt.unstable_scheduleCallback,mp=Tt.unstable_cancelCallback,Uw=Tt.unstable_shouldYield,Fw=Tt.unstable_requestPaint,Re=Tt.unstable_now,Gw=Tt.unstable_getCurrentPriorityLevel,cd=Tt.unstable_ImmediatePriority,Yg=Tt.unstable_UserBlockingPriority,vl=Tt.unstable_NormalPriority,Vw=Tt.unstable_LowPriority,jg=Tt.unstable_IdlePriority,Zl=null,an=null;function $w(t){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Zl,t,void 0,(t.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Hw,Ow=Math.log,Bw=Math.LN2;function Hw(t){return t>>>=0,t===0?32:31-(Ow(t)/Bw|0)|0}var _i=64,Si=4194304;function cs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=cs(a):(s&=i,s!==0&&(r=cs(s)))}else i=n&~o,i!==0?r=cs(i):s!==0&&(r=cs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jt(e),o=1<<n,r|=t[n],e&=~o;return r}function qw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zw(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Jt(s),a=1<<i,c=o[i];c===-1?(!(a&n)||a&r)&&(o[i]=qw(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function Ju(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kg(){var t=_i;return _i<<=1,!(_i&4194240)&&(_i=64),t}function Ka(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ei(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jt(e),t[e]=n}function Jw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Jt(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function dd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Jt(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var ce=0;function Xg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Qg,fd,Zg,ey,ty,Wu=!1,Ei=[],Hn=null,qn=null,zn=null,Ls=new Map,Us=new Map,Fn=[],Ww="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gp(t,e){switch(t){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":Ls.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(e.pointerId)}}function Zo(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=ni(e),e!==null&&fd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Yw(t,e,n,r,o){switch(e){case"focusin":return Hn=Zo(Hn,t,e,n,r,o),!0;case"dragenter":return qn=Zo(qn,t,e,n,r,o),!0;case"mouseover":return zn=Zo(zn,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return Ls.set(s,Zo(Ls.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Us.set(s,Zo(Us.get(s)||null,t,e,n,r,o)),!0}return!1}function ny(t){var e=yr(t.target);if(e!==null){var n=br(e);if(n!==null){if(e=n.tag,e===13){if(e=qg(n),e!==null){t.blockedOn=e,ty(t.priority,function(){Zg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ji(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bu=r,n.target.dispatchEvent(r),Bu=null}else return e=ni(n),e!==null&&fd(e),t.blockedOn=n,!1;e.shift()}return!0}function yp(t,e,n){ji(t)&&n.delete(e)}function jw(){Wu=!1,Hn!==null&&ji(Hn)&&(Hn=null),qn!==null&&ji(qn)&&(qn=null),zn!==null&&ji(zn)&&(zn=null),Ls.forEach(yp),Us.forEach(yp)}function es(t,e){t.blockedOn===e&&(t.blockedOn=null,Wu||(Wu=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,jw)))}function Fs(t){function e(o){return es(o,t)}if(0<Ei.length){es(Ei[0],t);for(var n=1;n<Ei.length;n++){var r=Ei[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hn!==null&&es(Hn,t),qn!==null&&es(qn,t),zn!==null&&es(zn,t),Ls.forEach(e),Us.forEach(e),n=0;n<Fn.length;n++)r=Fn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fn.length&&(n=Fn[0],n.blockedOn===null);)ny(n),n.blockedOn===null&&Fn.shift()}var go=Tn.ReactCurrentBatchConfig,wl=!0;function Kw(t,e,n,r){var o=ce,s=go.transition;go.transition=null;try{ce=1,pd(t,e,n,r)}finally{ce=o,go.transition=s}}function Xw(t,e,n,r){var o=ce,s=go.transition;go.transition=null;try{ce=4,pd(t,e,n,r)}finally{ce=o,go.transition=s}}function pd(t,e,n,r){if(wl){var o=Yu(t,e,n,r);if(o===null)iu(t,e,r,_l,n),gp(t,r);else if(Yw(o,t,e,n,r))r.stopPropagation();else if(gp(t,r),e&4&&-1<Ww.indexOf(t)){for(;o!==null;){var s=ni(o);if(s!==null&&Qg(s),s=Yu(t,e,n,r),s===null&&iu(t,e,r,_l,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else iu(t,e,r,null,n)}}var _l=null;function Yu(t,e,n,r){if(_l=null,t=ud(r),t=yr(t),t!==null)if(e=br(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _l=t,null}function ry(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gw()){case cd:return 1;case Yg:return 4;case vl:case Vw:return 16;case jg:return 536870912;default:return 16}default:return 16}}var $n=null,hd=null,Ki=null;function oy(){if(Ki)return Ki;var t,e=hd,n=e.length,r,o="value"in $n?$n.value:$n.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return Ki=o.slice(t,1<r?1-r:void 0)}function Xi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ci(){return!0}function vp(){return!1}function Nt(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ci:vp,this.isPropagationStopped=vp,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),e}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},md=Nt(Lo),ti=Ce({},Lo,{view:0,detail:0}),Qw=Nt(ti),Xa,Qa,ts,ea=Ce({},ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ts&&(ts&&t.type==="mousemove"?(Xa=t.screenX-ts.screenX,Qa=t.screenY-ts.screenY):Qa=Xa=0,ts=t),Xa)},movementY:function(t){return"movementY"in t?t.movementY:Qa}}),xp=Nt(ea),Zw=Ce({},ea,{dataTransfer:0}),e_=Nt(Zw),t_=Ce({},ti,{relatedTarget:0}),Za=Nt(t_),n_=Ce({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),r_=Nt(n_),o_=Ce({},Lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),s_=Nt(o_),i_=Ce({},Lo,{data:0}),wp=Nt(i_),l_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=u_[t])?!!e[t]:!1}function gd(){return c_}var d_=Ce({},ti,{key:function(t){if(t.key){var e=l_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?a_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gd,charCode:function(t){return t.type==="keypress"?Xi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f_=Nt(d_),p_=Ce({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_p=Nt(p_),h_=Ce({},ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gd}),m_=Nt(h_),g_=Ce({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),y_=Nt(g_),v_=Ce({},ea,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),x_=Nt(v_),w_=[9,13,27,32],yd=wn&&"CompositionEvent"in window,ws=null;wn&&"documentMode"in document&&(ws=document.documentMode);var __=wn&&"TextEvent"in window&&!ws,sy=wn&&(!yd||ws&&8<ws&&11>=ws),Sp=" ",Ep=!1;function iy(t,e){switch(t){case"keyup":return w_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ly(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var eo=!1;function S_(t,e){switch(t){case"compositionend":return ly(e);case"keypress":return e.which!==32?null:(Ep=!0,Sp);case"textInput":return t=e.data,t===Sp&&Ep?null:t;default:return null}}function E_(t,e){if(eo)return t==="compositionend"||!yd&&iy(t,e)?(t=oy(),Ki=hd=$n=null,eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sy&&e.locale!=="ko"?null:e.data;default:return null}}var C_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!C_[t.type]:e==="textarea"}function ay(t,e,n,r){Vg(r),e=Sl(e,"onChange"),0<e.length&&(n=new md("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _s=null,Gs=null;function T_(t){xy(t,0)}function ta(t){var e=ro(t);if(Mg(e))return t}function I_(t,e){if(t==="change")return e}var uy=!1;if(wn){var eu;if(wn){var tu="oninput"in document;if(!tu){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),tu=typeof Tp.oninput=="function"}eu=tu}else eu=!1;uy=eu&&(!document.documentMode||9<document.documentMode)}function Ip(){_s&&(_s.detachEvent("onpropertychange",cy),Gs=_s=null)}function cy(t){if(t.propertyName==="value"&&ta(Gs)){var e=[];ay(e,Gs,t,ud(t)),Hg(T_,e)}}function N_(t,e,n){t==="focusin"?(Ip(),_s=e,Gs=n,_s.attachEvent("onpropertychange",cy)):t==="focusout"&&Ip()}function A_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ta(Gs)}function R_(t,e){if(t==="click")return ta(e)}function P_(t,e){if(t==="input"||t==="change")return ta(e)}function k_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:k_;function Vs(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Pu.call(e,o)||!Yt(t[o],e[o]))return!1}return!0}function Np(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ap(t,e){var n=Np(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Np(n)}}function dy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fy(){for(var t=window,e=ml();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ml(t.document)}return e}function vd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function M_(t){var e=fy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dy(n.ownerDocument.documentElement,n)){if(r!==null&&vd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=Ap(n,s);var i=Ap(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var b_=wn&&"documentMode"in document&&11>=document.documentMode,to=null,ju=null,Ss=null,Ku=!1;function Rp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ku||to==null||to!==ml(r)||(r=to,"selectionStart"in r&&vd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ss&&Vs(Ss,r)||(Ss=r,r=Sl(ju,"onSelect"),0<r.length&&(e=new md("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=to)))}function Ti(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var no={animationend:Ti("Animation","AnimationEnd"),animationiteration:Ti("Animation","AnimationIteration"),animationstart:Ti("Animation","AnimationStart"),transitionend:Ti("Transition","TransitionEnd")},nu={},py={};wn&&(py=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function na(t){if(nu[t])return nu[t];if(!no[t])return t;var e=no[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in py)return nu[t]=e[n];return t}var hy=na("animationend"),my=na("animationiteration"),gy=na("animationstart"),yy=na("transitionend"),vy=new Map,Pp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(t,e){vy.set(t,e),Mr(e,[t])}for(var ru=0;ru<Pp.length;ru++){var ou=Pp[ru],D_=ou.toLowerCase(),L_=ou[0].toUpperCase()+ou.slice(1);er(D_,"on"+L_)}er(hy,"onAnimationEnd");er(my,"onAnimationIteration");er(gy,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(yy,"onTransitionEnd");To("onMouseEnter",["mouseout","mouseover"]);To("onMouseLeave",["mouseout","mouseover"]);To("onPointerEnter",["pointerout","pointerover"]);To("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),U_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function kp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Dw(r,e,void 0,t),t.currentTarget=null}function xy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==s&&o.isPropagationStopped())break e;kp(o,a,d),s=c}else for(i=0;i<r.length;i++){if(a=r[i],c=a.instance,d=a.currentTarget,a=a.listener,c!==s&&o.isPropagationStopped())break e;kp(o,a,d),s=c}}}if(yl)throw t=zu,yl=!1,zu=null,t}function ye(t,e){var n=e[tc];n===void 0&&(n=e[tc]=new Set);var r=t+"__bubble";n.has(r)||(wy(e,t,2,!1),n.add(r))}function su(t,e,n){var r=0;e&&(r|=4),wy(n,t,r,e)}var Ii="_reactListening"+Math.random().toString(36).slice(2);function $s(t){if(!t[Ii]){t[Ii]=!0,Ng.forEach(function(n){n!=="selectionchange"&&(U_.has(n)||su(n,!1,t),su(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ii]||(e[Ii]=!0,su("selectionchange",!1,e))}}function wy(t,e,n,r){switch(ry(e)){case 1:var o=Kw;break;case 4:o=Xw;break;default:o=pd}n=o.bind(null,e,n,t),o=void 0,!qu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function iu(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;a!==null;){if(i=yr(a),i===null)return;if(c=i.tag,c===5||c===6){r=s=i;continue e}a=a.parentNode}}r=r.return}Hg(function(){var d=s,p=ud(n),h=[];e:{var m=vy.get(t);if(m!==void 0){var g=md,_=t;switch(t){case"keypress":if(Xi(n)===0)break e;case"keydown":case"keyup":g=f_;break;case"focusin":_="focus",g=Za;break;case"focusout":_="blur",g=Za;break;case"beforeblur":case"afterblur":g=Za;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=xp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=e_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=m_;break;case hy:case my:case gy:g=r_;break;case yy:g=y_;break;case"scroll":g=Qw;break;case"wheel":g=x_;break;case"copy":case"cut":case"paste":g=s_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=_p}var w=(e&4)!==0,C=!w&&t==="scroll",v=w?m!==null?m+"Capture":null:m;w=[];for(var y=d,x;y!==null;){x=y;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,v!==null&&(S=Ds(y,v),S!=null&&w.push(Os(y,S,x)))),C)break;y=y.return}0<w.length&&(m=new g(m,_,null,n,p),h.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Bu&&(_=n.relatedTarget||n.fromElement)&&(yr(_)||_[_n]))break e;if((g||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=d,_=_?yr(_):null,_!==null&&(C=br(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=d),g!==_)){if(w=xp,S="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=_p,S="onPointerLeave",v="onPointerEnter",y="pointer"),C=g==null?m:ro(g),x=_==null?m:ro(_),m=new w(S,y+"leave",g,n,p),m.target=C,m.relatedTarget=x,S=null,yr(p)===d&&(w=new w(v,y+"enter",_,n,p),w.target=x,w.relatedTarget=C,S=w),C=S,g&&_)t:{for(w=g,v=_,y=0,x=w;x;x=Br(x))y++;for(x=0,S=v;S;S=Br(S))x++;for(;0<y-x;)w=Br(w),y--;for(;0<x-y;)v=Br(v),x--;for(;y--;){if(w===v||v!==null&&w===v.alternate)break t;w=Br(w),v=Br(v)}w=null}else w=null;g!==null&&Mp(h,m,g,w,!1),_!==null&&C!==null&&Mp(h,C,_,w,!0)}}e:{if(m=d?ro(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var N=I_;else if(Cp(m))if(uy)N=P_;else{N=A_;var I=N_}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=R_);if(N&&(N=N(t,d))){ay(h,N,n,p);break e}I&&I(t,m,d),t==="focusout"&&(I=m._wrapperState)&&I.controlled&&m.type==="number"&&Fu(m,"number",m.value)}switch(I=d?ro(d):window,t){case"focusin":(Cp(I)||I.contentEditable==="true")&&(to=I,ju=d,Ss=null);break;case"focusout":Ss=ju=to=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,Rp(h,n,p);break;case"selectionchange":if(b_)break;case"keydown":case"keyup":Rp(h,n,p)}var T;if(yd)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else eo?iy(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(sy&&n.locale!=="ko"&&(eo||R!=="onCompositionStart"?R==="onCompositionEnd"&&eo&&(T=oy()):($n=p,hd="value"in $n?$n.value:$n.textContent,eo=!0)),I=Sl(d,R),0<I.length&&(R=new wp(R,t,null,n,p),h.push({event:R,listeners:I}),T?R.data=T:(T=ly(n),T!==null&&(R.data=T)))),(T=__?S_(t,n):E_(t,n))&&(d=Sl(d,"onBeforeInput"),0<d.length&&(p=new wp("onBeforeInput","beforeinput",null,n,p),h.push({event:p,listeners:d}),p.data=T))}xy(h,e)})}function Os(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sl(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Ds(t,n),s!=null&&r.unshift(Os(t,s,o)),s=Ds(t,e),s!=null&&r.push(Os(t,s,o))),t=t.return}return r}function Br(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mp(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,o?(c=Ds(n,s),c!=null&&i.unshift(Os(n,c,a))):o||(c=Ds(n,s),c!=null&&i.push(Os(n,c,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var F_=/\r\n?/g,G_=/\u0000|\uFFFD/g;function bp(t){return(typeof t=="string"?t:""+t).replace(F_,`
`).replace(G_,"")}function Ni(t,e,n){if(e=bp(e),bp(t)!==e&&n)throw Error(M(425))}function El(){}var Xu=null,Qu=null;function Zu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ec=typeof setTimeout=="function"?setTimeout:void 0,V_=typeof clearTimeout=="function"?clearTimeout:void 0,Dp=typeof Promise=="function"?Promise:void 0,$_=typeof queueMicrotask=="function"?queueMicrotask:typeof Dp<"u"?function(t){return Dp.resolve(null).then(t).catch(O_)}:ec;function O_(t){setTimeout(function(){throw t})}function lu(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),Fs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Fs(e)}function Jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Uo=Math.random().toString(36).slice(2),sn="__reactFiber$"+Uo,Bs="__reactProps$"+Uo,_n="__reactContainer$"+Uo,tc="__reactEvents$"+Uo,B_="__reactListeners$"+Uo,H_="__reactHandles$"+Uo;function yr(t){var e=t[sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_n]||n[sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lp(t);t!==null;){if(n=t[sn])return n;t=Lp(t)}return e}t=n,n=t.parentNode}return null}function ni(t){return t=t[sn]||t[_n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function ra(t){return t[Bs]||null}var nc=[],oo=-1;function tr(t){return{current:t}}function xe(t){0>oo||(t.current=nc[oo],nc[oo]=null,oo--)}function me(t,e){oo++,nc[oo]=t.current,t.current=e}var Zn={},et=tr(Zn),pt=tr(!1),Ir=Zn;function Io(t,e){var n=t.type.contextTypes;if(!n)return Zn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function ht(t){return t=t.childContextTypes,t!=null}function Cl(){xe(pt),xe(et)}function Up(t,e,n){if(et.current!==Zn)throw Error(M(168));me(et,e),me(pt,n)}function _y(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(M(108,Nw(t)||"Unknown",o));return Ce({},n,r)}function Tl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zn,Ir=et.current,me(et,t),me(pt,pt.current),!0}function Fp(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=_y(t,e,Ir),r.__reactInternalMemoizedMergedChildContext=t,xe(pt),xe(et),me(et,t)):xe(pt),me(pt,n)}var mn=null,oa=!1,au=!1;function Sy(t){mn===null?mn=[t]:mn.push(t)}function q_(t){oa=!0,Sy(t)}function nr(){if(!au&&mn!==null){au=!0;var t=0,e=ce;try{var n=mn;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mn=null,oa=!1}catch(o){throw mn!==null&&(mn=mn.slice(t+1)),Wg(cd,nr),o}finally{ce=e,au=!1}}return null}var so=[],io=0,Il=null,Nl=0,Rt=[],Pt=0,Nr=null,yn=1,vn="";function pr(t,e){so[io++]=Nl,so[io++]=Il,Il=t,Nl=e}function Ey(t,e,n){Rt[Pt++]=yn,Rt[Pt++]=vn,Rt[Pt++]=Nr,Nr=t;var r=yn;t=vn;var o=32-Jt(r)-1;r&=~(1<<o),n+=1;var s=32-Jt(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,yn=1<<32-Jt(e)+o|n<<o|r,vn=s+t}else yn=1<<s|n<<o|r,vn=t}function xd(t){t.return!==null&&(pr(t,1),Ey(t,1,0))}function wd(t){for(;t===Il;)Il=so[--io],so[io]=null,Nl=so[--io],so[io]=null;for(;t===Nr;)Nr=Rt[--Pt],Rt[Pt]=null,vn=Rt[--Pt],Rt[Pt]=null,yn=Rt[--Pt],Rt[Pt]=null}var Ct=null,Et=null,we=!1,qt=null;function Cy(t,e){var n=kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Gp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ct=t,Et=Jn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ct=t,Et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Nr!==null?{id:yn,overflow:vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ct=t,Et=null,!0):!1;default:return!1}}function rc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function oc(t){if(we){var e=Et;if(e){var n=e;if(!Gp(t,e)){if(rc(t))throw Error(M(418));e=Jn(n.nextSibling);var r=Ct;e&&Gp(t,e)?Cy(r,n):(t.flags=t.flags&-4097|2,we=!1,Ct=t)}}else{if(rc(t))throw Error(M(418));t.flags=t.flags&-4097|2,we=!1,Ct=t}}}function Vp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ct=t}function Ai(t){if(t!==Ct)return!1;if(!we)return Vp(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zu(t.type,t.memoizedProps)),e&&(e=Et)){if(rc(t))throw Ty(),Error(M(418));for(;e;)Cy(t,e),e=Jn(e.nextSibling)}if(Vp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Et=Jn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Et=null}}else Et=Ct?Jn(t.stateNode.nextSibling):null;return!0}function Ty(){for(var t=Et;t;)t=Jn(t.nextSibling)}function No(){Et=Ct=null,we=!1}function _d(t){qt===null?qt=[t]:qt.push(t)}var z_=Tn.ReactCurrentBatchConfig;function ns(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Ri(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $p(t){var e=t._init;return e(t._payload)}function Iy(t){function e(v,y){if(t){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function o(v,y){return v=Kn(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function i(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,x,S){return y===null||y.tag!==6?(y=mu(x,v.mode,S),y.return=v,y):(y=o(y,x),y.return=v,y)}function c(v,y,x,S){var N=x.type;return N===Zr?p(v,y,x.props.children,S,x.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ln&&$p(N)===y.type)?(S=o(y,x.props),S.ref=ns(v,y,x),S.return=v,S):(S=ol(x.type,x.key,x.props,null,v.mode,S),S.ref=ns(v,y,x),S.return=v,S)}function d(v,y,x,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=gu(x,v.mode,S),y.return=v,y):(y=o(y,x.children||[]),y.return=v,y)}function p(v,y,x,S,N){return y===null||y.tag!==7?(y=Tr(x,v.mode,S,N),y.return=v,y):(y=o(y,x),y.return=v,y)}function h(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=mu(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case vi:return x=ol(y.type,y.key,y.props,null,v.mode,x),x.ref=ns(v,null,y),x.return=v,x;case Qr:return y=gu(y,v.mode,x),y.return=v,y;case Ln:var S=y._init;return h(v,S(y._payload),x)}if(us(y)||Xo(y))return y=Tr(y,v.mode,x,null),y.return=v,y;Ri(v,y)}return null}function m(v,y,x,S){var N=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return N!==null?null:a(v,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case vi:return x.key===N?c(v,y,x,S):null;case Qr:return x.key===N?d(v,y,x,S):null;case Ln:return N=x._init,m(v,y,N(x._payload),S)}if(us(x)||Xo(x))return N!==null?null:p(v,y,x,S,null);Ri(v,x)}return null}function g(v,y,x,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(x)||null,a(y,v,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case vi:return v=v.get(S.key===null?x:S.key)||null,c(y,v,S,N);case Qr:return v=v.get(S.key===null?x:S.key)||null,d(y,v,S,N);case Ln:var I=S._init;return g(v,y,x,I(S._payload),N)}if(us(S)||Xo(S))return v=v.get(x)||null,p(y,v,S,N,null);Ri(y,S)}return null}function _(v,y,x,S){for(var N=null,I=null,T=y,R=y=0,k=null;T!==null&&R<x.length;R++){T.index>R?(k=T,T=null):k=T.sibling;var P=m(v,T,x[R],S);if(P===null){T===null&&(T=k);break}t&&T&&P.alternate===null&&e(v,T),y=s(P,y,R),I===null?N=P:I.sibling=P,I=P,T=k}if(R===x.length)return n(v,T),we&&pr(v,R),N;if(T===null){for(;R<x.length;R++)T=h(v,x[R],S),T!==null&&(y=s(T,y,R),I===null?N=T:I.sibling=T,I=T);return we&&pr(v,R),N}for(T=r(v,T);R<x.length;R++)k=g(T,v,R,x[R],S),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?R:k.key),y=s(k,y,R),I===null?N=k:I.sibling=k,I=k);return t&&T.forEach(function(G){return e(v,G)}),we&&pr(v,R),N}function w(v,y,x,S){var N=Xo(x);if(typeof N!="function")throw Error(M(150));if(x=N.call(x),x==null)throw Error(M(151));for(var I=N=null,T=y,R=y=0,k=null,P=x.next();T!==null&&!P.done;R++,P=x.next()){T.index>R?(k=T,T=null):k=T.sibling;var G=m(v,T,P.value,S);if(G===null){T===null&&(T=k);break}t&&T&&G.alternate===null&&e(v,T),y=s(G,y,R),I===null?N=G:I.sibling=G,I=G,T=k}if(P.done)return n(v,T),we&&pr(v,R),N;if(T===null){for(;!P.done;R++,P=x.next())P=h(v,P.value,S),P!==null&&(y=s(P,y,R),I===null?N=P:I.sibling=P,I=P);return we&&pr(v,R),N}for(T=r(v,T);!P.done;R++,P=x.next())P=g(T,v,R,P.value,S),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?R:P.key),y=s(P,y,R),I===null?N=P:I.sibling=P,I=P);return t&&T.forEach(function(z){return e(v,z)}),we&&pr(v,R),N}function C(v,y,x,S){if(typeof x=="object"&&x!==null&&x.type===Zr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case vi:e:{for(var N=x.key,I=y;I!==null;){if(I.key===N){if(N=x.type,N===Zr){if(I.tag===7){n(v,I.sibling),y=o(I,x.props.children),y.return=v,v=y;break e}}else if(I.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ln&&$p(N)===I.type){n(v,I.sibling),y=o(I,x.props),y.ref=ns(v,I,x),y.return=v,v=y;break e}n(v,I);break}else e(v,I);I=I.sibling}x.type===Zr?(y=Tr(x.props.children,v.mode,S,x.key),y.return=v,v=y):(S=ol(x.type,x.key,x.props,null,v.mode,S),S.ref=ns(v,y,x),S.return=v,v=S)}return i(v);case Qr:e:{for(I=x.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=o(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=gu(x,v.mode,S),y.return=v,v=y}return i(v);case Ln:return I=x._init,C(v,y,I(x._payload),S)}if(us(x))return _(v,y,x,S);if(Xo(x))return w(v,y,x,S);Ri(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=o(y,x),y.return=v,v=y):(n(v,y),y=mu(x,v.mode,S),y.return=v,v=y),i(v)):n(v,y)}return C}var Ao=Iy(!0),Ny=Iy(!1),Al=tr(null),Rl=null,lo=null,Sd=null;function Ed(){Sd=lo=Rl=null}function Cd(t){var e=Al.current;xe(Al),t._currentValue=e}function sc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yo(t,e){Rl=t,Sd=lo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ft=!0),t.firstContext=null)}function Lt(t){var e=t._currentValue;if(Sd!==t)if(t={context:t,memoizedValue:e,next:null},lo===null){if(Rl===null)throw Error(M(308));lo=t,Rl.dependencies={lanes:0,firstContext:t}}else lo=lo.next=t;return e}var vr=null;function Td(t){vr===null?vr=[t]:vr.push(t)}function Ay(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,Td(e)):(n.next=o.next,o.next=n),e.interleaved=n,Sn(t,r)}function Sn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Un=!1;function Id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ry(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,Sn(t,n)}return o=r.interleaved,o===null?(e.next=e,Td(r)):(e.next=o.next,o.next=e),r.interleaved=e,Sn(t,n)}function Qi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dd(t,n)}}function Op(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pl(t,e,n,r){var o=t.updateQueue;Un=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,d=c.next;c.next=null,i===null?s=d:i.next=d,i=c;var p=t.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==i&&(a===null?p.firstBaseUpdate=d:a.next=d,p.lastBaseUpdate=c))}if(s!==null){var h=o.baseState;i=0,p=d=c=null,a=s;do{var m=a.lane,g=a.eventTime;if((r&m)===m){p!==null&&(p=p.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,w=a;switch(m=e,g=n,w.tag){case 1:if(_=w.payload,typeof _=="function"){h=_.call(g,h,m);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,m=typeof _=="function"?_.call(g,h,m):_,m==null)break e;h=Ce({},h,m);break e;case 2:Un=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=o.effects,m===null?o.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(d=p=g,c=h):p=p.next=g,i|=m;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;m=a,a=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(!0);if(p===null&&(c=h),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=p,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);Rr|=i,t.lanes=i,t.memoizedState=h}}function Bp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(M(191,o));o.call(r)}}}var ri={},un=tr(ri),Hs=tr(ri),qs=tr(ri);function xr(t){if(t===ri)throw Error(M(174));return t}function Nd(t,e){switch(me(qs,e),me(Hs,t),me(un,ri),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vu(e,t)}xe(un),me(un,e)}function Ro(){xe(un),xe(Hs),xe(qs)}function Py(t){xr(qs.current);var e=xr(un.current),n=Vu(e,t.type);e!==n&&(me(Hs,t),me(un,n))}function Ad(t){Hs.current===t&&(xe(un),xe(Hs))}var Se=tr(0);function kl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uu=[];function Rd(){for(var t=0;t<uu.length;t++)uu[t]._workInProgressVersionPrimary=null;uu.length=0}var Zi=Tn.ReactCurrentDispatcher,cu=Tn.ReactCurrentBatchConfig,Ar=0,Ee=null,De=null,$e=null,Ml=!1,Es=!1,zs=0,J_=0;function je(){throw Error(M(321))}function Pd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yt(t[n],e[n]))return!1;return!0}function kd(t,e,n,r,o,s){if(Ar=s,Ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zi.current=t===null||t.memoizedState===null?K_:X_,t=n(r,o),Es){s=0;do{if(Es=!1,zs=0,25<=s)throw Error(M(301));s+=1,$e=De=null,e.updateQueue=null,Zi.current=Q_,t=n(r,o)}while(Es)}if(Zi.current=bl,e=De!==null&&De.next!==null,Ar=0,$e=De=Ee=null,Ml=!1,e)throw Error(M(300));return t}function Md(){var t=zs!==0;return zs=0,t}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Ee.memoizedState=$e=t:$e=$e.next=t,$e}function Ut(){if(De===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=$e===null?Ee.memoizedState:$e.next;if(e!==null)$e=e,De=t;else{if(t===null)throw Error(M(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},$e===null?Ee.memoizedState=$e=t:$e=$e.next=t}return $e}function Js(t,e){return typeof e=="function"?e(t):e}function du(t){var e=Ut(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=De,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,c=null,d=s;do{var p=d.lane;if((Ar&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var h={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=h,i=r):c=c.next=h,Ee.lanes|=p,Rr|=p}d=d.next}while(d!==null&&d!==s);c===null?i=r:c.next=a,Yt(r,e.memoizedState)||(ft=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,Ee.lanes|=s,Rr|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fu(t){var e=Ut(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Yt(s,e.memoizedState)||(ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ky(){}function My(t,e){var n=Ee,r=Ut(),o=e(),s=!Yt(r.memoizedState,o);if(s&&(r.memoizedState=o,ft=!0),r=r.queue,bd(Ly.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,Ws(9,Dy.bind(null,n,r,o,e),void 0,null),Oe===null)throw Error(M(349));Ar&30||by(n,e,o)}return o}function by(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dy(t,e,n,r){e.value=n,e.getSnapshot=r,Uy(e)&&Fy(t)}function Ly(t,e,n){return n(function(){Uy(e)&&Fy(t)})}function Uy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yt(t,n)}catch{return!0}}function Fy(t){var e=Sn(t,1);e!==null&&Wt(e,t,1,-1)}function Hp(t){var e=nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:t},e.queue=t,t=t.dispatch=j_.bind(null,Ee,t),[e.memoizedState,t]}function Ws(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Gy(){return Ut().memoizedState}function el(t,e,n,r){var o=nn();Ee.flags|=t,o.memoizedState=Ws(1|e,n,void 0,r===void 0?null:r)}function sa(t,e,n,r){var o=Ut();r=r===void 0?null:r;var s=void 0;if(De!==null){var i=De.memoizedState;if(s=i.destroy,r!==null&&Pd(r,i.deps)){o.memoizedState=Ws(e,n,s,r);return}}Ee.flags|=t,o.memoizedState=Ws(1|e,n,s,r)}function qp(t,e){return el(8390656,8,t,e)}function bd(t,e){return sa(2048,8,t,e)}function Vy(t,e){return sa(4,2,t,e)}function $y(t,e){return sa(4,4,t,e)}function Oy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function By(t,e,n){return n=n!=null?n.concat([t]):null,sa(4,4,Oy.bind(null,e,t),n)}function Dd(){}function Hy(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qy(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zy(t,e,n){return Ar&21?(Yt(n,e)||(n=Kg(),Ee.lanes|=n,Rr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ft=!0),t.memoizedState=n)}function W_(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=cu.transition;cu.transition={};try{t(!1),e()}finally{ce=n,cu.transition=r}}function Jy(){return Ut().memoizedState}function Y_(t,e,n){var r=jn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wy(t))Yy(e,n);else if(n=Ay(t,e,n,r),n!==null){var o=st();Wt(n,t,r,o),jy(n,e,r)}}function j_(t,e,n){var r=jn(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wy(t))Yy(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Yt(a,i)){var c=e.interleaved;c===null?(o.next=o,Td(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}n=Ay(t,e,o,r),n!==null&&(o=st(),Wt(n,t,r,o),jy(n,e,r))}}function Wy(t){var e=t.alternate;return t===Ee||e!==null&&e===Ee}function Yy(t,e){Es=Ml=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dd(t,n)}}var bl={readContext:Lt,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},K_={readContext:Lt,useCallback:function(t,e){return nn().memoizedState=[t,e===void 0?null:e],t},useContext:Lt,useEffect:qp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,el(4194308,4,Oy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return el(4194308,4,t,e)},useInsertionEffect:function(t,e){return el(4,2,t,e)},useMemo:function(t,e){var n=nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=nn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Y_.bind(null,Ee,t),[r.memoizedState,t]},useRef:function(t){var e=nn();return t={current:t},e.memoizedState=t},useState:Hp,useDebugValue:Dd,useDeferredValue:function(t){return nn().memoizedState=t},useTransition:function(){var t=Hp(!1),e=t[0];return t=W_.bind(null,t[1]),nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ee,o=nn();if(we){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Oe===null)throw Error(M(349));Ar&30||by(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,qp(Ly.bind(null,r,s,t),[t]),r.flags|=2048,Ws(9,Dy.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=nn(),e=Oe.identifierPrefix;if(we){var n=vn,r=yn;n=(r&~(1<<32-Jt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=J_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},X_={readContext:Lt,useCallback:Hy,useContext:Lt,useEffect:bd,useImperativeHandle:By,useInsertionEffect:Vy,useLayoutEffect:$y,useMemo:qy,useReducer:du,useRef:Gy,useState:function(){return du(Js)},useDebugValue:Dd,useDeferredValue:function(t){var e=Ut();return zy(e,De.memoizedState,t)},useTransition:function(){var t=du(Js)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:ky,useSyncExternalStore:My,useId:Jy,unstable_isNewReconciler:!1},Q_={readContext:Lt,useCallback:Hy,useContext:Lt,useEffect:bd,useImperativeHandle:By,useInsertionEffect:Vy,useLayoutEffect:$y,useMemo:qy,useReducer:fu,useRef:Gy,useState:function(){return fu(Js)},useDebugValue:Dd,useDeferredValue:function(t){var e=Ut();return De===null?e.memoizedState=t:zy(e,De.memoizedState,t)},useTransition:function(){var t=fu(Js)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:ky,useSyncExternalStore:My,useId:Jy,unstable_isNewReconciler:!1};function Ot(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ic(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ia={isMounted:function(t){return(t=t._reactInternals)?br(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=st(),o=jn(t),s=xn(r,o);s.payload=e,n!=null&&(s.callback=n),e=Wn(t,s,o),e!==null&&(Wt(e,t,o,r),Qi(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=st(),o=jn(t),s=xn(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Wn(t,s,o),e!==null&&(Wt(e,t,o,r),Qi(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=st(),r=jn(t),o=xn(n,r);o.tag=2,e!=null&&(o.callback=e),e=Wn(t,o,r),e!==null&&(Wt(e,t,r,n),Qi(e,t,r))}};function zp(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Vs(n,r)||!Vs(o,s):!0}function Ky(t,e,n){var r=!1,o=Zn,s=e.contextType;return typeof s=="object"&&s!==null?s=Lt(s):(o=ht(e)?Ir:et.current,r=e.contextTypes,s=(r=r!=null)?Io(t,o):Zn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ia,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function Jp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ia.enqueueReplaceState(e,e.state,null)}function lc(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},Id(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=Lt(s):(s=ht(e)?Ir:et.current,o.context=Io(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ic(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&ia.enqueueReplaceState(o,o.state,null),Pl(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Po(t,e){try{var n="",r=e;do n+=Iw(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function pu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ac(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Z_=typeof WeakMap=="function"?WeakMap:Map;function Xy(t,e,n){n=xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ll||(Ll=!0,vc=r),ac(t,e)},n}function Qy(t,e,n){n=xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){ac(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ac(t,e),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function Wp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Z_;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=pS.bind(null,t,e,n),e.then(t,t))}function Yp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jp(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xn(-1,1),e.tag=2,Wn(n,e,1))),n.lanes|=1),t)}var eS=Tn.ReactCurrentOwner,ft=!1;function ot(t,e,n,r){e.child=t===null?Ny(e,null,n,r):Ao(e,t.child,n,r)}function Kp(t,e,n,r,o){n=n.render;var s=e.ref;return yo(e,o),r=kd(t,e,n,r,s,o),n=Md(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,En(t,e,o)):(we&&n&&xd(e),e.flags|=1,ot(t,e,r,o),e.child)}function Xp(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!Bd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Zy(t,e,s,r,o)):(t=ol(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vs,n(i,r)&&t.ref===e.ref)return En(t,e,o)}return e.flags|=1,t=Kn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Zy(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(Vs(s,r)&&t.ref===e.ref)if(ft=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(ft=!0);else return e.lanes=t.lanes,En(t,e,o)}return uc(t,e,n,r,o)}function e0(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(uo,St),St|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(uo,St),St|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,me(uo,St),St|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,me(uo,St),St|=r;return ot(t,e,o,n),e.child}function t0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uc(t,e,n,r,o){var s=ht(n)?Ir:et.current;return s=Io(e,s),yo(e,o),n=kd(t,e,n,r,s,o),r=Md(),t!==null&&!ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,En(t,e,o)):(we&&r&&xd(e),e.flags|=1,ot(t,e,n,o),e.child)}function Qp(t,e,n,r,o){if(ht(n)){var s=!0;Tl(e)}else s=!1;if(yo(e,o),e.stateNode===null)tl(t,e),Ky(e,n,r),lc(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var c=i.context,d=n.contextType;typeof d=="object"&&d!==null?d=Lt(d):(d=ht(n)?Ir:et.current,d=Io(e,d));var p=n.getDerivedStateFromProps,h=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||c!==d)&&Jp(e,i,r,d),Un=!1;var m=e.memoizedState;i.state=m,Pl(e,r,i,o),c=e.memoizedState,a!==r||m!==c||pt.current||Un?(typeof p=="function"&&(ic(e,n,p,r),c=e.memoizedState),(a=Un||zp(e,n,a,r,m,c,d))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),i.props=r,i.state=c,i.context=d,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,Ry(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Ot(e.type,a),i.props=d,h=e.pendingProps,m=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Lt(c):(c=ht(n)?Ir:et.current,c=Io(e,c));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==h||m!==c)&&Jp(e,i,r,c),Un=!1,m=e.memoizedState,i.state=m,Pl(e,r,i,o);var _=e.memoizedState;a!==h||m!==_||pt.current||Un?(typeof g=="function"&&(ic(e,n,g,r),_=e.memoizedState),(d=Un||zp(e,n,d,r,m,_,c)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,_,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,_,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),i.props=r,i.state=_,i.context=c,r=d):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return cc(t,e,n,r,s,o)}function cc(t,e,n,r,o,s){t0(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&Fp(e,n,!1),En(t,e,s);r=e.stateNode,eS.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Ao(e,t.child,null,s),e.child=Ao(e,null,a,s)):ot(t,e,a,s),e.memoizedState=r.state,o&&Fp(e,n,!0),e.child}function n0(t){var e=t.stateNode;e.pendingContext?Up(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Up(t,e.context,!1),Nd(t,e.containerInfo)}function Zp(t,e,n,r,o){return No(),_d(o),e.flags|=256,ot(t,e,n,r),e.child}var dc={dehydrated:null,treeContext:null,retryLane:0};function fc(t){return{baseLanes:t,cachePool:null,transitions:null}}function r0(t,e,n){var r=e.pendingProps,o=Se.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),me(Se,o&1),t===null)return oc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=ua(i,r,0,null),t=Tr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=fc(n),e.memoizedState=dc,t):Ld(e,i));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return tS(t,e,i,r,a,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,a=o.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Kn(o,c),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=Kn(a,s):(s=Tr(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?fc(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=dc,r}return s=t.child,t=s.sibling,r=Kn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ld(t,e){return e=ua({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pi(t,e,n,r){return r!==null&&_d(r),Ao(e,t.child,null,n),t=Ld(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tS(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=pu(Error(M(422))),Pi(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=ua({mode:"visible",children:r.children},o,0,null),s=Tr(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ao(e,t.child,null,i),e.child.memoizedState=fc(i),e.memoizedState=dc,s);if(!(e.mode&1))return Pi(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(M(419)),r=pu(s,r,void 0),Pi(t,e,i,r)}if(a=(i&t.childLanes)!==0,ft||a){if(r=Oe,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,Sn(t,o),Wt(r,t,o,-1))}return Od(),r=pu(Error(M(421))),Pi(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=hS.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,Et=Jn(o.nextSibling),Ct=e,we=!0,qt=null,t!==null&&(Rt[Pt++]=yn,Rt[Pt++]=vn,Rt[Pt++]=Nr,yn=t.id,vn=t.overflow,Nr=e),e=Ld(e,r.children),e.flags|=4096,e)}function eh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sc(t.return,e,n)}function hu(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function o0(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(ot(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eh(t,n,e);else if(t.tag===19)eh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(Se,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&kl(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),hu(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&kl(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}hu(e,!0,n,null,s);break;case"together":hu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function En(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Kn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Kn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nS(t,e,n){switch(e.tag){case 3:n0(e),No();break;case 5:Py(e);break;case 1:ht(e.type)&&Tl(e);break;case 4:Nd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;me(Al,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?r0(t,e,n):(me(Se,Se.current&1),t=En(t,e,n),t!==null?t.sibling:null);me(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return o0(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),me(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,e0(t,e,n)}return En(t,e,n)}var s0,pc,i0,l0;s0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pc=function(){};i0=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,xr(un.current);var s=null;switch(n){case"input":o=Lu(t,o),r=Lu(t,r),s=[];break;case"select":o=Ce({},o,{value:void 0}),r=Ce({},r,{value:void 0}),s=[];break;case"textarea":o=Gu(t,o),r=Gu(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=El)}$u(n,r);var i;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var a=o[d];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ms.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(a=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(i in a)!a.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&a[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ms.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ye("scroll",t),s||a===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};l0=function(t,e,n,r){n!==r&&(e.flags|=4)};function rs(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rS(t,e,n){var r=e.pendingProps;switch(wd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return ht(e.type)&&Cl(),Ke(e),null;case 3:return r=e.stateNode,Ro(),xe(pt),xe(et),Rd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ai(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qt!==null&&(_c(qt),qt=null))),pc(t,e),Ke(e),null;case 5:Ad(e);var o=xr(qs.current);if(n=e.type,t!==null&&e.stateNode!=null)i0(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Ke(e),null}if(t=xr(un.current),Ai(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[sn]=e,r[Bs]=s,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(o=0;o<ds.length;o++)ye(ds[o],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":up(r,s),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ye("invalid",r);break;case"textarea":dp(r,s),ye("invalid",r)}$u(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ni(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ni(r.textContent,a,t),o=["children",""+a]):Ms.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&ye("scroll",r)}switch(n){case"input":xi(r),cp(r,s,!0);break;case"textarea":xi(r),fp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=El)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[sn]=e,t[Bs]=r,s0(t,e,!1,!1),e.stateNode=t;e:{switch(i=Ou(n,r),n){case"dialog":ye("cancel",t),ye("close",t),o=r;break;case"iframe":case"object":case"embed":ye("load",t),o=r;break;case"video":case"audio":for(o=0;o<ds.length;o++)ye(ds[o],t);o=r;break;case"source":ye("error",t),o=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),o=r;break;case"details":ye("toggle",t),o=r;break;case"input":up(t,r),o=Lu(t,r),ye("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=Ce({},r,{value:void 0}),ye("invalid",t);break;case"textarea":dp(t,r),o=Gu(t,r),ye("invalid",t);break;default:o=r}$u(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Gg(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ug(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&bs(t,c):typeof c=="number"&&bs(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ms.hasOwnProperty(s)?c!=null&&s==="onScroll"&&ye("scroll",t):c!=null&&sd(t,s,c,i))}switch(n){case"input":xi(t),cp(t,r,!1);break;case"textarea":xi(t),fp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?po(t,!!r.multiple,s,!1):r.defaultValue!=null&&po(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=El)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ke(e),null;case 6:if(t&&e.stateNode!=null)l0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=xr(qs.current),xr(un.current),Ai(e)){if(r=e.stateNode,n=e.memoizedProps,r[sn]=e,(s=r.nodeValue!==n)&&(t=Ct,t!==null))switch(t.tag){case 3:Ni(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ni(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sn]=e,e.stateNode=r}return Ke(e),null;case 13:if(xe(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&Et!==null&&e.mode&1&&!(e.flags&128))Ty(),No(),e.flags|=98560,s=!1;else if(s=Ai(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[sn]=e}else No(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),s=!1}else qt!==null&&(_c(qt),qt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?Le===0&&(Le=3):Od())),e.updateQueue!==null&&(e.flags|=4),Ke(e),null);case 4:return Ro(),pc(t,e),t===null&&$s(e.stateNode.containerInfo),Ke(e),null;case 10:return Cd(e.type._context),Ke(e),null;case 17:return ht(e.type)&&Cl(),Ke(e),null;case 19:if(xe(Se),s=e.memoizedState,s===null)return Ke(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)rs(s,!1);else{if(Le!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=kl(t),i!==null){for(e.flags|=128,rs(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(Se,Se.current&1|2),e.child}t=t.sibling}s.tail!==null&&Re()>ko&&(e.flags|=128,r=!0,rs(s,!1),e.lanes=4194304)}else{if(!r)if(t=kl(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),rs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!we)return Ke(e),null}else 2*Re()-s.renderingStartTime>ko&&n!==1073741824&&(e.flags|=128,r=!0,rs(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Re(),e.sibling=null,n=Se.current,me(Se,r?n&1|2:n&1),e):(Ke(e),null);case 22:case 23:return $d(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?St&1073741824&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function oS(t,e){switch(wd(e),e.tag){case 1:return ht(e.type)&&Cl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ro(),xe(pt),xe(et),Rd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ad(e),null;case 13:if(xe(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));No()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Se),null;case 4:return Ro(),null;case 10:return Cd(e.type._context),null;case 22:case 23:return $d(),null;case 24:return null;default:return null}}var ki=!1,Qe=!1,sS=typeof WeakSet=="function"?WeakSet:Set,F=null;function ao(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function hc(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var th=!1;function iS(t,e){if(Xu=wl,t=fy(),vd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,c=-1,d=0,p=0,h=t,m=null;t:for(;;){for(var g;h!==n||o!==0&&h.nodeType!==3||(a=i+o),h!==s||r!==0&&h.nodeType!==3||(c=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===n&&++d===o&&(a=i),m===s&&++p===r&&(c=i),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qu={focusedElem:t,selectionRange:n},wl=!1,F=e;F!==null;)if(e=F,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,F=t;else for(;F!==null;){e=F;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,C=_.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Ot(e.type,w),C);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(S){Ae(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,F=t;break}F=e.return}return _=th,th=!1,_}function Cs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&hc(e,n,s)}o=o.next}while(o!==r)}}function la(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function a0(t){var e=t.alternate;e!==null&&(t.alternate=null,a0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sn],delete e[Bs],delete e[tc],delete e[B_],delete e[H_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function u0(t){return t.tag===5||t.tag===3||t.tag===4}function nh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||u0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=El));else if(r!==4&&(t=t.child,t!==null))for(gc(t,e,n),t=t.sibling;t!==null;)gc(t,e,n),t=t.sibling}function yc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yc(t,e,n),t=t.sibling;t!==null;)yc(t,e,n),t=t.sibling}var He=null,Ht=!1;function kn(t,e,n){for(n=n.child;n!==null;)c0(t,e,n),n=n.sibling}function c0(t,e,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Zl,n)}catch{}switch(n.tag){case 5:Qe||ao(n,e);case 6:var r=He,o=Ht;He=null,kn(t,e,n),He=r,Ht=o,He!==null&&(Ht?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Ht?(t=He,n=n.stateNode,t.nodeType===8?lu(t.parentNode,n):t.nodeType===1&&lu(t,n),Fs(t)):lu(He,n.stateNode));break;case 4:r=He,o=Ht,He=n.stateNode.containerInfo,Ht=!0,kn(t,e,n),He=r,Ht=o;break;case 0:case 11:case 14:case 15:if(!Qe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&hc(n,e,i),o=o.next}while(o!==r)}kn(t,e,n);break;case 1:if(!Qe&&(ao(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ae(n,e,a)}kn(t,e,n);break;case 21:kn(t,e,n);break;case 22:n.mode&1?(Qe=(r=Qe)||n.memoizedState!==null,kn(t,e,n),Qe=r):kn(t,e,n);break;default:kn(t,e,n)}}function rh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sS),e.forEach(function(r){var o=mS.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Gt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:He=a.stateNode,Ht=!1;break e;case 3:He=a.stateNode.containerInfo,Ht=!0;break e;case 4:He=a.stateNode.containerInfo,Ht=!0;break e}a=a.return}if(He===null)throw Error(M(160));c0(s,i,o),He=null,Ht=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(d){Ae(o,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d0(e,t),e=e.sibling}function d0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gt(e,t),en(t),r&4){try{Cs(3,t,t.return),la(3,t)}catch(w){Ae(t,t.return,w)}try{Cs(5,t,t.return)}catch(w){Ae(t,t.return,w)}}break;case 1:Gt(e,t),en(t),r&512&&n!==null&&ao(n,n.return);break;case 5:if(Gt(e,t),en(t),r&512&&n!==null&&ao(n,n.return),t.flags&32){var o=t.stateNode;try{bs(o,"")}catch(w){Ae(t,t.return,w)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&bg(o,s),Ou(a,i);var d=Ou(a,s);for(i=0;i<c.length;i+=2){var p=c[i],h=c[i+1];p==="style"?Gg(o,h):p==="dangerouslySetInnerHTML"?Ug(o,h):p==="children"?bs(o,h):sd(o,p,h,d)}switch(a){case"input":Uu(o,s);break;case"textarea":Dg(o,s);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?po(o,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?po(o,!!s.multiple,s.defaultValue,!0):po(o,!!s.multiple,s.multiple?[]:"",!1))}o[Bs]=s}catch(w){Ae(t,t.return,w)}}break;case 6:if(Gt(e,t),en(t),r&4){if(t.stateNode===null)throw Error(M(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(w){Ae(t,t.return,w)}}break;case 3:if(Gt(e,t),en(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fs(e.containerInfo)}catch(w){Ae(t,t.return,w)}break;case 4:Gt(e,t),en(t);break;case 13:Gt(e,t),en(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Gd=Re())),r&4&&rh(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Qe=(d=Qe)||p,Gt(e,t),Qe=d):Gt(e,t),en(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(F=t,p=t.child;p!==null;){for(h=F=p;F!==null;){switch(m=F,g=m.child,m.tag){case 0:case 11:case 14:case 15:Cs(4,m,m.return);break;case 1:ao(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){Ae(r,n,w)}}break;case 5:ao(m,m.return);break;case 22:if(m.memoizedState!==null){sh(h);continue}}g!==null?(g.return=m,F=g):sh(h)}p=p.sibling}e:for(p=null,h=t;;){if(h.tag===5){if(p===null){p=h;try{o=h.stateNode,d?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Fg("display",i))}catch(w){Ae(t,t.return,w)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(w){Ae(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Gt(e,t),en(t),r&4&&rh(t);break;case 21:break;default:Gt(e,t),en(t)}}function en(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(u0(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(bs(o,""),r.flags&=-33);var s=nh(t);yc(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=nh(t);gc(t,a,i);break;default:throw Error(M(161))}}catch(c){Ae(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lS(t,e,n){F=t,f0(t)}function f0(t,e,n){for(var r=(t.mode&1)!==0;F!==null;){var o=F,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||ki;if(!i){var a=o.alternate,c=a!==null&&a.memoizedState!==null||Qe;a=ki;var d=Qe;if(ki=i,(Qe=c)&&!d)for(F=o;F!==null;)i=F,c=i.child,i.tag===22&&i.memoizedState!==null?ih(o):c!==null?(c.return=i,F=c):ih(o);for(;s!==null;)F=s,f0(s),s=s.sibling;F=o,ki=a,Qe=d}oh(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,F=s):oh(t)}}function oh(t){for(;F!==null;){var e=F;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qe||la(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qe)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Ot(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Bp(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bp(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&Fs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Qe||e.flags&512&&mc(e)}catch(m){Ae(e,e.return,m)}}if(e===t){F=null;break}if(n=e.sibling,n!==null){n.return=e.return,F=n;break}F=e.return}}function sh(t){for(;F!==null;){var e=F;if(e===t){F=null;break}var n=e.sibling;if(n!==null){n.return=e.return,F=n;break}F=e.return}}function ih(t){for(;F!==null;){var e=F;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{la(4,e)}catch(c){Ae(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(c){Ae(e,o,c)}}var s=e.return;try{mc(e)}catch(c){Ae(e,s,c)}break;case 5:var i=e.return;try{mc(e)}catch(c){Ae(e,i,c)}}}catch(c){Ae(e,e.return,c)}if(e===t){F=null;break}var a=e.sibling;if(a!==null){a.return=e.return,F=a;break}F=e.return}}var aS=Math.ceil,Dl=Tn.ReactCurrentDispatcher,Ud=Tn.ReactCurrentOwner,bt=Tn.ReactCurrentBatchConfig,oe=0,Oe=null,ke=null,Je=0,St=0,uo=tr(0),Le=0,Ys=null,Rr=0,aa=0,Fd=0,Ts=null,dt=null,Gd=0,ko=1/0,hn=null,Ll=!1,vc=null,Yn=null,Mi=!1,On=null,Ul=0,Is=0,xc=null,nl=-1,rl=0;function st(){return oe&6?Re():nl!==-1?nl:nl=Re()}function jn(t){return t.mode&1?oe&2&&Je!==0?Je&-Je:z_.transition!==null?(rl===0&&(rl=Kg()),rl):(t=ce,t!==0||(t=window.event,t=t===void 0?16:ry(t.type)),t):1}function Wt(t,e,n,r){if(50<Is)throw Is=0,xc=null,Error(M(185));ei(t,n,r),(!(oe&2)||t!==Oe)&&(t===Oe&&(!(oe&2)&&(aa|=n),Le===4&&Gn(t,Je)),mt(t,r),n===1&&oe===0&&!(e.mode&1)&&(ko=Re()+500,oa&&nr()))}function mt(t,e){var n=t.callbackNode;zw(t,e);var r=xl(t,t===Oe?Je:0);if(r===0)n!==null&&mp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mp(n),e===1)t.tag===0?q_(lh.bind(null,t)):Sy(lh.bind(null,t)),$_(function(){!(oe&6)&&nr()}),n=null;else{switch(Xg(r)){case 1:n=cd;break;case 4:n=Yg;break;case 16:n=vl;break;case 536870912:n=jg;break;default:n=vl}n=w0(n,p0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p0(t,e){if(nl=-1,rl=0,oe&6)throw Error(M(327));var n=t.callbackNode;if(vo()&&t.callbackNode!==n)return null;var r=xl(t,t===Oe?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fl(t,r);else{e=r;var o=oe;oe|=2;var s=m0();(Oe!==t||Je!==e)&&(hn=null,ko=Re()+500,Cr(t,e));do try{dS();break}catch(a){h0(t,a)}while(!0);Ed(),Dl.current=s,oe=o,ke!==null?e=0:(Oe=null,Je=0,e=Le)}if(e!==0){if(e===2&&(o=Ju(t),o!==0&&(r=o,e=wc(t,o))),e===1)throw n=Ys,Cr(t,0),Gn(t,r),mt(t,Re()),n;if(e===6)Gn(t,r);else{if(o=t.current.alternate,!(r&30)&&!uS(o)&&(e=Fl(t,r),e===2&&(s=Ju(t),s!==0&&(r=s,e=wc(t,s))),e===1))throw n=Ys,Cr(t,0),Gn(t,r),mt(t,Re()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:hr(t,dt,hn);break;case 3:if(Gn(t,r),(r&130023424)===r&&(e=Gd+500-Re(),10<e)){if(xl(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){st(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=ec(hr.bind(null,t,dt,hn),e);break}hr(t,dt,hn);break;case 4:if(Gn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-Jt(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aS(r/1960))-r,10<r){t.timeoutHandle=ec(hr.bind(null,t,dt,hn),r);break}hr(t,dt,hn);break;case 5:hr(t,dt,hn);break;default:throw Error(M(329))}}}return mt(t,Re()),t.callbackNode===n?p0.bind(null,t):null}function wc(t,e){var n=Ts;return t.current.memoizedState.isDehydrated&&(Cr(t,e).flags|=256),t=Fl(t,e),t!==2&&(e=dt,dt=n,e!==null&&_c(e)),t}function _c(t){dt===null?dt=t:dt.push.apply(dt,t)}function uS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Yt(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gn(t,e){for(e&=~Fd,e&=~aa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jt(e),r=1<<n;t[n]=-1,e&=~r}}function lh(t){if(oe&6)throw Error(M(327));vo();var e=xl(t,0);if(!(e&1))return mt(t,Re()),null;var n=Fl(t,e);if(t.tag!==0&&n===2){var r=Ju(t);r!==0&&(e=r,n=wc(t,r))}if(n===1)throw n=Ys,Cr(t,0),Gn(t,e),mt(t,Re()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hr(t,dt,hn),mt(t,Re()),null}function Vd(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(ko=Re()+500,oa&&nr())}}function Pr(t){On!==null&&On.tag===0&&!(oe&6)&&vo();var e=oe;oe|=1;var n=bt.transition,r=ce;try{if(bt.transition=null,ce=1,t)return t()}finally{ce=r,bt.transition=n,oe=e,!(oe&6)&&nr()}}function $d(){St=uo.current,xe(uo)}function Cr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,V_(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(wd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cl();break;case 3:Ro(),xe(pt),xe(et),Rd();break;case 5:Ad(r);break;case 4:Ro();break;case 13:xe(Se);break;case 19:xe(Se);break;case 10:Cd(r.type._context);break;case 22:case 23:$d()}n=n.return}if(Oe=t,ke=t=Kn(t.current,null),Je=St=e,Le=0,Ys=null,Fd=aa=Rr=0,dt=Ts=null,vr!==null){for(e=0;e<vr.length;e++)if(n=vr[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}vr=null}return t}function h0(t,e){do{var n=ke;try{if(Ed(),Zi.current=bl,Ml){for(var r=Ee.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ml=!1}if(Ar=0,$e=De=Ee=null,Es=!1,zs=0,Ud.current=null,n===null||n.return===null){Le=1,Ys=e,ke=null;break}e:{var s=t,i=n.return,a=n,c=e;if(e=Je,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=a,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=Yp(i);if(g!==null){g.flags&=-257,jp(g,i,a,s,e),g.mode&1&&Wp(s,d,e),e=g,c=d;var _=e.updateQueue;if(_===null){var w=new Set;w.add(c),e.updateQueue=w}else _.add(c);break e}else{if(!(e&1)){Wp(s,d,e),Od();break e}c=Error(M(426))}}else if(we&&a.mode&1){var C=Yp(i);if(C!==null){!(C.flags&65536)&&(C.flags|=256),jp(C,i,a,s,e),_d(Po(c,a));break e}}s=c=Po(c,a),Le!==4&&(Le=2),Ts===null?Ts=[s]:Ts.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=Xy(s,c,e);Op(s,v);break e;case 1:a=c;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Yn===null||!Yn.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=Qy(s,a,e);Op(s,S);break e}}s=s.return}while(s!==null)}y0(n)}catch(N){e=N,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function m0(){var t=Dl.current;return Dl.current=bl,t===null?bl:t}function Od(){(Le===0||Le===3||Le===2)&&(Le=4),Oe===null||!(Rr&268435455)&&!(aa&268435455)||Gn(Oe,Je)}function Fl(t,e){var n=oe;oe|=2;var r=m0();(Oe!==t||Je!==e)&&(hn=null,Cr(t,e));do try{cS();break}catch(o){h0(t,o)}while(!0);if(Ed(),oe=n,Dl.current=r,ke!==null)throw Error(M(261));return Oe=null,Je=0,Le}function cS(){for(;ke!==null;)g0(ke)}function dS(){for(;ke!==null&&!Uw();)g0(ke)}function g0(t){var e=x0(t.alternate,t,St);t.memoizedProps=t.pendingProps,e===null?y0(t):ke=e,Ud.current=null}function y0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oS(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Le=6,ke=null;return}}else if(n=rS(n,e,St),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Le===0&&(Le=5)}function hr(t,e,n){var r=ce,o=bt.transition;try{bt.transition=null,ce=1,fS(t,e,n,r)}finally{bt.transition=o,ce=r}return null}function fS(t,e,n,r){do vo();while(On!==null);if(oe&6)throw Error(M(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Jw(t,s),t===Oe&&(ke=Oe=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mi||(Mi=!0,w0(vl,function(){return vo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=bt.transition,bt.transition=null;var i=ce;ce=1;var a=oe;oe|=4,Ud.current=null,iS(t,n),d0(n,t),M_(Qu),wl=!!Xu,Qu=Xu=null,t.current=n,lS(n),Fw(),oe=a,ce=i,bt.transition=s}else t.current=n;if(Mi&&(Mi=!1,On=t,Ul=o),s=t.pendingLanes,s===0&&(Yn=null),$w(n.stateNode),mt(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ll)throw Ll=!1,t=vc,vc=null,t;return Ul&1&&t.tag!==0&&vo(),s=t.pendingLanes,s&1?t===xc?Is++:(Is=0,xc=t):Is=0,nr(),null}function vo(){if(On!==null){var t=Xg(Ul),e=bt.transition,n=ce;try{if(bt.transition=null,ce=16>t?16:t,On===null)var r=!1;else{if(t=On,On=null,Ul=0,oe&6)throw Error(M(331));var o=oe;for(oe|=4,F=t.current;F!==null;){var s=F,i=s.child;if(F.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(F=d;F!==null;){var p=F;switch(p.tag){case 0:case 11:case 15:Cs(8,p,s)}var h=p.child;if(h!==null)h.return=p,F=h;else for(;F!==null;){p=F;var m=p.sibling,g=p.return;if(a0(p),p===d){F=null;break}if(m!==null){m.return=g,F=m;break}F=g}}}var _=s.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}F=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,F=i;else e:for(;F!==null;){if(s=F,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cs(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,F=v;break e}F=s.return}}var y=t.current;for(F=y;F!==null;){i=F;var x=i.child;if(i.subtreeFlags&2064&&x!==null)x.return=i,F=x;else e:for(i=y;F!==null;){if(a=F,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:la(9,a)}}catch(N){Ae(a,a.return,N)}if(a===i){F=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,F=S;break e}F=a.return}}if(oe=o,nr(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Zl,t)}catch{}r=!0}return r}finally{ce=n,bt.transition=e}}return!1}function ah(t,e,n){e=Po(n,e),e=Xy(t,e,1),t=Wn(t,e,1),e=st(),t!==null&&(ei(t,1,e),mt(t,e))}function Ae(t,e,n){if(t.tag===3)ah(t,t,n);else for(;e!==null;){if(e.tag===3){ah(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){t=Po(n,t),t=Qy(e,t,1),e=Wn(e,t,1),t=st(),e!==null&&(ei(e,1,t),mt(e,t));break}}e=e.return}}function pS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=st(),t.pingedLanes|=t.suspendedLanes&n,Oe===t&&(Je&n)===n&&(Le===4||Le===3&&(Je&130023424)===Je&&500>Re()-Gd?Cr(t,0):Fd|=n),mt(t,e)}function v0(t,e){e===0&&(t.mode&1?(e=Si,Si<<=1,!(Si&130023424)&&(Si=4194304)):e=1);var n=st();t=Sn(t,e),t!==null&&(ei(t,e,n),mt(t,n))}function hS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),v0(t,n)}function mS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),v0(t,n)}var x0;x0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ft=!1,nS(t,e,n);ft=!!(t.flags&131072)}else ft=!1,we&&e.flags&1048576&&Ey(e,Nl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tl(t,e),t=e.pendingProps;var o=Io(e,et.current);yo(e,n),o=kd(null,e,r,t,o,n);var s=Md();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ht(r)?(s=!0,Tl(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Id(e),o.updater=ia,e.stateNode=o,o._reactInternals=e,lc(e,r,t,n),e=cc(null,e,r,!0,s,n)):(e.tag=0,we&&s&&xd(e),ot(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tl(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=yS(r),t=Ot(r,t),o){case 0:e=uc(null,e,r,t,n);break e;case 1:e=Qp(null,e,r,t,n);break e;case 11:e=Kp(null,e,r,t,n);break e;case 14:e=Xp(null,e,r,Ot(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ot(r,o),uc(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ot(r,o),Qp(t,e,r,o,n);case 3:e:{if(n0(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,o=s.element,Ry(t,e),Pl(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Po(Error(M(423)),e),e=Zp(t,e,r,n,o);break e}else if(r!==o){o=Po(Error(M(424)),e),e=Zp(t,e,r,n,o);break e}else for(Et=Jn(e.stateNode.containerInfo.firstChild),Ct=e,we=!0,qt=null,n=Ny(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(No(),r===o){e=En(t,e,n);break e}ot(t,e,r,n)}e=e.child}return e;case 5:return Py(e),t===null&&oc(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,Zu(r,o)?i=null:s!==null&&Zu(r,s)&&(e.flags|=32),t0(t,e),ot(t,e,i,n),e.child;case 6:return t===null&&oc(e),null;case 13:return r0(t,e,n);case 4:return Nd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ao(e,null,r,n):ot(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ot(r,o),Kp(t,e,r,o,n);case 7:return ot(t,e,e.pendingProps,n),e.child;case 8:return ot(t,e,e.pendingProps.children,n),e.child;case 12:return ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,me(Al,r._currentValue),r._currentValue=i,s!==null)if(Yt(s.value,i)){if(s.children===o.children&&!pt.current){e=En(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=xn(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),sc(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(M(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),sc(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}ot(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,yo(e,n),o=Lt(o),r=r(o),e.flags|=1,ot(t,e,r,n),e.child;case 14:return r=e.type,o=Ot(r,e.pendingProps),o=Ot(r.type,o),Xp(t,e,r,o,n);case 15:return Zy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ot(r,o),tl(t,e),e.tag=1,ht(r)?(t=!0,Tl(e)):t=!1,yo(e,n),Ky(e,r,o),lc(e,r,o,n),cc(null,e,r,!0,t,n);case 19:return o0(t,e,n);case 22:return e0(t,e,n)}throw Error(M(156,e.tag))};function w0(t,e){return Wg(t,e)}function gS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(t,e,n,r){return new gS(t,e,n,r)}function Bd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yS(t){if(typeof t=="function")return Bd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ld)return 11;if(t===ad)return 14}return 2}function Kn(t,e){var n=t.alternate;return n===null?(n=kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ol(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")Bd(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Zr:return Tr(n.children,o,s,e);case id:i=8,o|=8;break;case ku:return t=kt(12,n,e,o|2),t.elementType=ku,t.lanes=s,t;case Mu:return t=kt(13,n,e,o),t.elementType=Mu,t.lanes=s,t;case bu:return t=kt(19,n,e,o),t.elementType=bu,t.lanes=s,t;case Pg:return ua(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ag:i=10;break e;case Rg:i=9;break e;case ld:i=11;break e;case ad:i=14;break e;case Ln:i=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=kt(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function Tr(t,e,n,r){return t=kt(7,t,r,e),t.lanes=n,t}function ua(t,e,n,r){return t=kt(22,t,r,e),t.elementType=Pg,t.lanes=n,t.stateNode={isHidden:!1},t}function mu(t,e,n){return t=kt(6,t,null,e),t.lanes=n,t}function gu(t,e,n){return e=kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vS(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ka(0),this.expirationTimes=Ka(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ka(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Hd(t,e,n,r,o,s,i,a,c){return t=new vS(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=kt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Id(s),t}function xS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _0(t){if(!t)return Zn;t=t._reactInternals;e:{if(br(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(ht(n))return _y(t,n,e)}return e}function S0(t,e,n,r,o,s,i,a,c){return t=Hd(n,r,!0,t,o,s,i,a,c),t.context=_0(null),n=t.current,r=st(),o=jn(n),s=xn(r,o),s.callback=e??null,Wn(n,s,o),t.current.lanes=o,ei(t,o,r),mt(t,r),t}function ca(t,e,n,r){var o=e.current,s=st(),i=jn(o);return n=_0(n),e.context===null?e.context=n:e.pendingContext=n,e=xn(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wn(o,e,i),t!==null&&(Wt(t,o,i,s),Qi(t,o,i)),i}function Gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qd(t,e){uh(t,e),(t=t.alternate)&&uh(t,e)}function wS(){return null}var E0=typeof reportError=="function"?reportError:function(t){console.error(t)};function zd(t){this._internalRoot=t}da.prototype.render=zd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));ca(t,e,null,null)};da.prototype.unmount=zd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pr(function(){ca(null,t,null,null)}),e[_n]=null}};function da(t){this._internalRoot=t}da.prototype.unstable_scheduleHydration=function(t){if(t){var e=ey();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fn.length&&e!==0&&e<Fn[n].priority;n++);Fn.splice(n,0,t),n===0&&ny(t)}};function Jd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ch(){}function _S(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var d=Gl(i);s.call(d)}}var i=S0(e,r,t,0,null,!1,!1,"",ch);return t._reactRootContainer=i,t[_n]=i.current,$s(t.nodeType===8?t.parentNode:t),Pr(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var d=Gl(c);a.call(d)}}var c=Hd(t,0,!1,null,null,!1,!1,"",ch);return t._reactRootContainer=c,t[_n]=c.current,$s(t.nodeType===8?t.parentNode:t),Pr(function(){ca(e,c,n,r)}),c}function pa(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var c=Gl(i);a.call(c)}}ca(e,i,t,o)}else i=_S(n,e,t,o,r);return Gl(i)}Qg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=cs(e.pendingLanes);n!==0&&(dd(e,n|1),mt(e,Re()),!(oe&6)&&(ko=Re()+500,nr()))}break;case 13:Pr(function(){var r=Sn(t,1);if(r!==null){var o=st();Wt(r,t,1,o)}}),qd(t,1)}};fd=function(t){if(t.tag===13){var e=Sn(t,134217728);if(e!==null){var n=st();Wt(e,t,134217728,n)}qd(t,134217728)}};Zg=function(t){if(t.tag===13){var e=jn(t),n=Sn(t,e);if(n!==null){var r=st();Wt(n,t,e,r)}qd(t,e)}};ey=function(){return ce};ty=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};Hu=function(t,e,n){switch(e){case"input":if(Uu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=ra(r);if(!o)throw Error(M(90));Mg(r),Uu(r,o)}}}break;case"textarea":Dg(t,n);break;case"select":e=n.value,e!=null&&po(t,!!n.multiple,e,!1)}};Og=Vd;Bg=Pr;var SS={usingClientEntryPoint:!1,Events:[ni,ro,ra,Vg,$g,Vd]},os={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ES={bundleType:os.bundleType,version:os.version,rendererPackageName:os.rendererPackageName,rendererConfig:os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zg(t),t===null?null:t.stateNode},findFiberByHostInstance:os.findFiberByHostInstance||wS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bi.isDisabled&&bi.supportsFiber)try{Zl=bi.inject(ES),an=bi}catch{}}It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SS;It.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jd(e))throw Error(M(200));return xS(t,e,null,n)};It.createRoot=function(t,e){if(!Jd(t))throw Error(M(299));var n=!1,r="",o=E0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Hd(t,1,!1,null,null,n,!1,r,o),t[_n]=e.current,$s(t.nodeType===8?t.parentNode:t),new zd(e)};It.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=zg(e),t=t===null?null:t.stateNode,t};It.flushSync=function(t){return Pr(t)};It.hydrate=function(t,e,n){if(!fa(e))throw Error(M(200));return pa(null,t,e,!0,n)};It.hydrateRoot=function(t,e,n){if(!Jd(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=E0;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=S0(e,null,t,1,n??null,o,!1,s,i),t[_n]=e.current,$s(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new da(e)};It.render=function(t,e,n){if(!fa(e))throw Error(M(200));return pa(null,t,e,!1,n)};It.unmountComponentAtNode=function(t){if(!fa(t))throw Error(M(40));return t._reactRootContainer?(Pr(function(){pa(null,null,t,!1,function(){t._reactRootContainer=null,t[_n]=null})}),!0):!1};It.unstable_batchedUpdates=Vd;It.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fa(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return pa(t,e,n,!1,r)};It.version="18.3.1-next-f1338f8080-20240426";function C0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C0)}catch(t){console.error(t)}}C0(),Cg.exports=It;var CS=Cg.exports,dh=CS;Ru.createRoot=dh.createRoot,Ru.hydrateRoot=dh.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(t,e)=>{const n=A.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:a="",children:c,...d},p)=>A.createElement("svg",{ref:p,...TS,width:o,height:o,stroke:r,strokeWidth:i?Number(s)*24/Number(o):s,className:["lucide",`lucide-${IS(t)}`,a].join(" "),...d},[...e.map(([h,m])=>A.createElement(h,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=J("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=J("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M8 7h6",key:"1f0q6e"}],["path",{d:"M8 11h8",key:"vwpz6n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=J("Captions",[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=J("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=J("Clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=J("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=J("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=J("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=J("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=J("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=J("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=J("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=J("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=J("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=J("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=J("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=J("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VS=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=J("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=J("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=J("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=J("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=J("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=J("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=J("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=J("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=J("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=J("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=J("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=J("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=J("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function KS(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[o,s]=A.useState(!1),i=A.useRef(n);i.current=n;const a=A.useRef(r);return a.current=r,A.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var d;s(!0),(d=i.current)===null||d===void 0||d.call(i)},c.onerror=()=>{var d;s(!1),(d=a.current)===null||d===void 0||d.call(a)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),o}const XS=A.createContext(null);function QS({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:o}){const s=KS({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),i=A.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:s}),[t,s]);return Sg.createElement(XS.Provider,{value:i},o)}function ZS(){var t,e,n;(n=(e=(t=window==null?void 0:window.google)===null||t===void 0?void 0:t.accounts)===null||e===void 0?void 0:e.id)===null||n===void 0||n.disableAutoSelect()}var Ge=(t=>(t.IDLE="IDLE",t.PARSING="PARSING",t.TRANSLATING="TRANSLATING",t.COMPLETED="COMPLETED",t.ERROR="ERROR",t))(Ge||{}),ee=(t=>(t.IDLE="IDLE",t.LOADING_FFMPEG="LOADING_FFMPEG",t.ANALYZING="ANALYZING",t.EXTRACTING_AUDIO="EXTRACTING_AUDIO",t.TRANSCRIBING="TRANSCRIBING",t.EXTRACTING_SUBTITLES="EXTRACTING_SUBTITLES",t.MUXING="MUXING",t.DONE="DONE",t.ERROR="ERROR",t.UPLOADING_TO_YOUTUBE="UPLOADING_TO_YOUTUBE",t.AWAITING_YOUTUBE_CAPTIONS="AWAITING_YOUTUBE_CAPTIONS",t.DOWNLOADING_FROM_URL="DOWNLOADING_FROM_URL",t.FETCHING_YOUTUBE_INFO="FETCHING_YOUTUBE_INFO",t.DOWNLOADING_VIDEO="DOWNLOADING_VIDEO",t))(ee||{});const Vt=[{id:"youtube-auto",name:"YouTube Auto-Caption",description:"Uploads video to YouTube (Unlisted) to generate captions via Google speech recognition. Best for free, high-accuracy transcription.",tags:["Free","Cloud","Transcription Only"],provider:"youtube"},{id:"gemini-3-pro-preview",name:"Gemini 3.0 Pro",description:"Highest reasoning capability. Best for complex dialogue, cultural nuances, and context retention.",tags:["Preview","Slower","Most Powerful"],provider:"google",rateLimits:{tier1:50,tier2:1e3,tier3:2e3}},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Balanced performance with advanced reasoning capabilities. Great for most subtitles.",tags:["Stable","High Quality"],provider:"google",rateLimits:{free:2,tier1:150,tier2:1e3,tier3:2e3}},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Next-generation high-speed model. Ideal for large files and quick turnaround.",tags:["Stable","Ultra Fast"],provider:"google",rateLimits:{free:10,tier1:1e3,tier2:2e3,tier3:1e4}},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash Lite",description:"Cost-optimized version of 2.5 Flash. Extremely fast and affordable for high volume.",tags:["Lite","Economy"],provider:"google",rateLimits:{free:15,tier1:4e3,tier2:1e4,tier3:3e4}},{id:"gemini-2.0-pro",name:"Gemini 2.0 Pro",description:"Previous generation high-intelligence model. Reliable for standard translation tasks.",tags:["Stable","Smart"],provider:"google",rateLimits:{free:2,tier1:60,tier2:1e3,tier3:2e3}},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Optimized for speed and efficiency. Good for straightforward content and quick results.",tags:["Stable","Efficient"],provider:"google",rateLimits:{free:15,tier1:2e3,tier2:1e4,tier3:3e4}},{id:"gemini-2.0-flash-lite-preview-02-05",name:"Gemini 2.0 Flash Lite",description:"The most cost-effective model in the 2.0 family. Good balance of speed and quality.",tags:["Preview","Lite","Budget"],provider:"google",rateLimits:{free:30,tier1:4e3,tier2:2e4,tier3:3e4}},{id:"gpt-5.1",name:"GPT-5.1",description:"The latest iteration, offering cutting-edge performance and multimodal capabilities.",tags:["Bleeding-Edge","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5-pro",name:"GPT-5 Pro",description:"A professional-grade model from the GPT-5 series with top-tier reasoning.",tags:["Pro","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5",name:"GPT-5",description:"The foundational next-gen model for advanced understanding and generation.",tags:["Next-Gen","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5-mini",name:"GPT-5 Mini",description:"A balanced and efficient model from the GPT-5 series, ideal for speed.",tags:["Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5-nano",name:"GPT-5 Nano",description:"The most compact and fastest model in the GPT-5 family for lightweight tasks.",tags:["Ultra-Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4.1",name:"GPT-4.1",description:"An enhanced version of GPT-4 with improved speed and context handling.",tags:["Advanced","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4.1-mini",name:"GPT-4.1 Mini",description:"A faster, more efficient variant of the GPT-4.1 architecture.",tags:["Efficient","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4.1-nano",name:"GPT-4.1 Nano",description:"The smallest and quickest model from the GPT-4.1 series for rapid responses.",tags:["Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4o",name:"GPT-4o",description:"OpenAI's flagship Omni model. Excellent for nuanced understanding and generation.",tags:["Flagship","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"A smaller, faster, and more affordable version of GPT-4o with strong performance.",tags:["Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"}],nt=[{code:"ar",name:"Arabic"},{code:"bg",name:"Bulgarian"},{code:"zh",name:"Chinese (Simplified)"},{code:"zh-TW",name:"Chinese (Traditional)"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"he",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hu",name:"Hungarian"},{code:"id",name:"Indonesian"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"no",name:"Norwegian"},{code:"fa",name:"Persian",font:"font-vazirmatn"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"es",name:"Spanish"},{code:"sv",name:"Swedish"},{code:"th",name:"Thai"},{code:"tr",name:"Turkish"},{code:"uk",name:"Ukrainian"},{code:"vi",name:"Vietnamese"}],hh=["video/mp4","video/x-matroska","video/quicktime","video/x-ms-wmv","video/webm","video/x-msvideo"],yu=[{value:2,label:"Low",description:"Best for avoiding strict rate limits on free tiers (2 RPM)."},{value:15,label:"Medium",description:"Recommended default. Good balance of speed and safety (15 RPM)."},{value:30,label:"High",description:"Faster, but higher risk of rate limits (30 RPM)."},{value:"unlimited",label:"Unlimited",description:"No artificial delay. Only for high-tier paid keys."}],Di=t=>t.toLowerCase().replace(/[.,/#!$%^&*;:{}=\-_`~()]/g,"").replace(/\s+/g," ").trim(),Li=t=>{const n=t.replace(/\r\n/g,`
`).trim().replace(/^WEBVTT.*\n+/,"");let r=[];const o=n.split(/\n\n+/);let s=1;o.forEach(a=>{const c=a.split(`
`);if(c.length<2)return;const d=c.findIndex(p=>p.includes("-->"));if(d!==-1){const h=c[d].split(" --> ");if(h.length===2){let _=c.slice(d+1).filter(w=>w.trim()!==""&&!w.trim().startsWith("NOTE")&&!w.includes("-->")).join(" ").trim();if(_){const w=_.replace(/<[^>]*>/g,"").replace(/\{[^}]*\}/g,"").trim(),C=h[0].trim().replace(".",","),v=h[1].trim().replace(".",",");w&&r.push({id:s++,startTime:C,endTime:v,text:w,originalText:w})}}}});const i=[];for(let a=0;a<r.length;a++){const c={...r[a]};if(i.length>0){const d=i[i.length-1],p=Di(d.text),h=Di(c.text);if(p===h){d.endTime=c.endTime;continue}if(h.startsWith(p)){const m=c.text.substring(d.text.length).trim();if(m)c.text=m,c.originalText=m;else{d.endTime=c.endTime;continue}}else{const m=d.text.split(" "),g=c.text.split(" ");let _=0;const w=Math.min(m.length,g.length);for(let C=1;C<=w;C++){const v=m.slice(-C).join(" "),y=g.slice(0,C).join(" ");Di(v)===Di(y)&&(_=C)}if(_>0){const v=g.slice(_).join(" ").trim();if(v)c.text=v,c.originalText=v;else{d.endTime=c.endTime;continue}}}}c.id=i.length+1,i.push(c)}return i},Ui=t=>t.map(e=>`${e.id}
${e.startTime} --> ${e.endTime}
${e.text}`).join(`

`),Ac=(t,e)=>{const n=document.createElement("a"),r=typeof e=="string"?new Blob([e],{type:"text/plain"}):e;n.href=URL.createObjectURL(r),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eE,tE;function nE(){return{geminiUrl:eE,vertexUrl:tE}}function rE(t,e,n,r){var o,s;if(!(t!=null&&t.baseUrl)){const i=nE();return e?(o=i.vertexUrl)!==null&&o!==void 0?o:n:(s=i.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class In{}function U(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function u(t,e,n){for(let s=0;s<e.length-1;s++){const i=e[s];if(i.endsWith("[]")){const a=i.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let d=0;d<c.length;d++){const p=c[d];u(p,e.slice(s+1),n[d])}else for(const d of c)u(d,e.slice(s+1),n)}return}else if(i.endsWith("[0]")){const a=i.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];u(c[0],e.slice(s+1),n);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const r=e[e.length-1],o=t[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in t){const i=t[s];return Array.isArray(i)?i.map(a=>l(a,e.slice(r+1),n)):n}else return n}else t=t[o]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function oE(t,e){for(const[n,r]of Object.entries(e)){const o=n.split("."),s=r.split("."),i=new Set;let a=-1;for(let c=0;c<o.length;c++)if(o[c]==="*"){a=c;break}if(a!==-1&&s.length>a)for(let c=a;c<s.length;c++){const d=s[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&i.add(d)}Rc(t,o,s,0,i)}}function Rc(t,e,n,r,o){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const i=s.slice(0,-2),a=t;if(i in a&&Array.isArray(a[i]))for(const c of a[i])Rc(c,e,n,r+1,o)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const i=t,a=Object.keys(i).filter(d=>!d.startsWith("_")&&!o.has(d)),c={};for(const d of a)c[d]=i[d];for(const[d,p]of Object.entries(c)){const h=[];for(const m of n.slice(r))m==="*"?h.push(d):h.push(m);u(i,h,p)}for(const d of a)delete i[d]}}else{const i=t;s in i&&Rc(i[s],e,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sE(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["operationName"],n);const r=l(t,["resourceName"]);return r!=null&&u(e,["_url","resourceName"],r),e}function iE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const i=l(t,["response","generateVideoResponse"]);return i!=null&&u(e,["response"],aE(i)),e}function lE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const i=l(t,["response"]);return i!=null&&u(e,["response"],uE(i)),e}function aE(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>cE(i))),u(e,["generatedVideos"],s)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function uE(t){const e={},n=l(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>dE(i))),u(e,["generatedVideos"],s)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function cE(t){const e={},n=l(t,["video"]);return n!=null&&u(e,["video"],yE(n)),e}function dE(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],vE(n)),e}function fE(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function pE(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function hE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const i=l(t,["response"]);return i!=null&&u(e,["response"],mE(i)),e}function mE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function k0(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const i=l(t,["response"]);return i!=null&&u(e,["response"],gE(i)),e}function gE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function yE(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&u(e,["videoBytes"],Wd(r));const o=l(t,["encoding"]);return o!=null&&u(e,["mimeType"],o),e}function vE(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],Wd(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mh;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(mh||(mh={}));var gh;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(gh||(gh={}));var yh;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(yh||(yh={}));var Bn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Bn||(Bn={}));var vh;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(vh||(vh={}));var xh;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(xh||(xh={}));var wh;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(wh||(wh={}));var _h;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(_h||(_h={}));var Sh;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Sh||(Sh={}));var Eh;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Eh||(Eh={}));var Ch;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ch||(Ch={}));var Th;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Th||(Th={}));var Ih;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Ih||(Ih={}));var Nh;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Nh||(Nh={}));var Ah;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Ah||(Ah={}));var Rh;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Rh||(Rh={}));var Ph;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ph||(Ph={}));var kh;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(kh||(kh={}));var Mh;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Mh||(Mh={}));var Bl;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Bl||(Bl={}));var bh;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(bh||(bh={}));var Dh;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Dh||(Dh={}));var Lh;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Lh||(Lh={}));var Pc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Pc||(Pc={}));var Uh;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Uh||(Uh={}));var Fh;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Fh||(Fh={}));var Gh;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Gh||(Gh={}));var Vh;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Vh||(Vh={}));var $h;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})($h||($h={}));var Oh;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Oh||(Oh={}));var Bh;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Bh||(Bh={}));var Hh;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Hh||(Hh={}));var qh;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(qh||(qh={}));var zh;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(zh||(zh={}));var Jh;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Jh||(Jh={}));var Wh;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Wh||(Wh={}));var Yh;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Yh||(Yh={}));var jh;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(jh||(jh={}));var Kh;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Kh||(Kh={}));var Xh;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Xh||(Xh={}));var Qh;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Qh||(Qh={}));var Zh;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Zh||(Zh={}));var em;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(em||(em={}));var tm;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(tm||(tm={}));var nm;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(nm||(nm={}));var rm;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(rm||(rm={}));var om;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(om||(om={}));var sm;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(sm||(sm={}));var im;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(im||(im={}));var lm;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(lm||(lm={}));var am;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(am||(am={}));var um;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(um||(um={}));var cm;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(cm||(cm={}));var dm;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(dm||(dm={}));var co;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(co||(co={}));class kc{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ss{get text(){var e,n,r,o,s,i,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",p=!1;const h=[];for(const m of(c=(a=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[g,_]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(_!==null||_!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;p=!0,d+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?d:void 0}get data(){var e,n,r,o,s,i,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const p=[];for(const h of(c=(a=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&p.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,o,s,i,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(a=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,o,s,i,a,c,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(c=(a=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,o,s,i,a,c,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(c=(a=(i=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.output}}class fm{}class pm{}class xE{}class wE{}class _E{}class SE{}class hm{}class mm{}class gm{}class EE{}class Hl{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Hl;let o;const s=e;return n?o=lE(s):o=iE(s),Object.assign(r,o),r}}class ym{}class vm{}class xm{}class CE{}class TE{}class IE{}class Yd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Yd,s=hE(e);return Object.assign(r,s),r}}class NE{}class AE{}class RE{}class wm{}class PE{get text(){var e,n,r;let o="",s=!1;const i=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(a))c!=="text"&&c!=="thought"&&d!==null&&i.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,o+=a.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var e,n,r;let o="";const s=[];for(const i of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,c]of Object.entries(i))a!=="inlineData"&&c!==null&&s.push(a);i.inlineData&&typeof i.inlineData.data=="string"&&(o+=atob(i.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class kE{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class jd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new jd,s=k0(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function se(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function M0(t,e){const n=se(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function b0(t){return Array.isArray(t)?t.map(e=>ql(e)):[ql(t)]}function ql(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function D0(t){const e=ql(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function L0(t){const e=ql(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _m(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function U0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>_m(e)):[_m(t)]}function Mc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Sm(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Em(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ze(t){if(t==null)throw new Error("ContentUnion is required");return Mc(t)?t:{role:"user",parts:U0(t)}}function Kd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Ze(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Ze(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ze(n)):[Ze(e)]}function Dt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Sm(t)||Em(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ze(t)]}const e=[],n=[],r=Mc(t[0]);for(const o of t){const s=Mc(o);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(o);else{if(Sm(o)||Em(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||e.push({role:"user",parts:U0(n)}),e}function ME(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Bn).includes(n[0].toUpperCase())?n[0].toUpperCase():Bn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Bn).includes(r.toUpperCase())?r.toUpperCase():Bn.TYPE_UNSPECIFIED})}}function xo(t){const e={},n=["items"],r=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&ME(t.type,e);for(const[i,a]of Object.entries(t))if(a!=null)if(i=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Bn).includes(a.toUpperCase())?a.toUpperCase():Bn.TYPE_UNSPECIFIED}else if(n.includes(i))e[i]=xo(a);else if(r.includes(i)){const c=[];for(const d of a){if(d.type=="null"){e.nullable=!0;continue}c.push(xo(d))}e[i]=c}else if(o.includes(i)){const c={};for(const[d,p]of Object.entries(a))c[d]=xo(p);e[i]=c}else{if(i==="additionalProperties")continue;e[i]=a}return e}function Xd(t){return xo(t)}function Qd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Zd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=xo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=xo(e.response));return t}function Go(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function bE(t,e,n,r=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Nn(t,e){if(typeof e!="string")throw new Error("name must be a string");return bE(t,e,"cachedContents")}function F0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function rr(t){return Wd(t)}function DE(t){return t!=null&&typeof t=="object"&&"name"in t}function LE(t){return t!=null&&typeof t=="object"&&"video"in t}function UE(t){return t!=null&&typeof t=="object"&&"uri"in t}function G0(t){var e;let n;if(DE(t)&&(n=t.name),!(UE(t)&&(n=t.uri,n===void 0))&&!(LE(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function V0(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function $0(t){for(const e of["models","tunedModels","publisherModels"])if(FE(t,e))return t[e];return[]}function FE(t,e){return t!==null&&typeof t=="object"&&e in t}function GE(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function VE(t,e={}){const n=[],r=new Set;for(const o of t){const s=o.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const i=GE(o,e);i.functionDeclarations&&n.push(...i.functionDeclarations)}return{functionDeclarations:n}}function O0(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function $E(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function B0(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let s=!1;for(const i of o){if(typeof i!="object"||i===null)continue;const c=i.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Vo(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function H0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OE(t){const e={},n=l(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>_C(i))),u(e,["inlinedResponses"],s)}const o=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),u(e,["inlinedEmbedContentResponses"],s)}return e}function BE(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&u(e,["gcsUri"],r);const o=l(t,["bigqueryDestination","outputUri"]);return o!=null&&u(e,["bigqueryUri"],o),e}function HE(t){const e={},n=l(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsDestination","outputUriPrefix"],r);const o=l(t,["bigqueryUri"]);if(o!=null&&u(e,["bigqueryDestination","outputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function il(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["metadata","state"]);o!=null&&u(e,["state"],H0(o));const s=l(t,["metadata","createTime"]);s!=null&&u(e,["createTime"],s);const i=l(t,["metadata","endTime"]);i!=null&&u(e,["endTime"],i);const a=l(t,["metadata","updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["metadata","model"]);c!=null&&u(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&u(e,["dest"],OE(B0(d))),e}function bc(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["state"]);o!=null&&u(e,["state"],H0(o));const s=l(t,["error"]);s!=null&&u(e,["error"],s);const i=l(t,["createTime"]);i!=null&&u(e,["createTime"],i);const a=l(t,["startTime"]);a!=null&&u(e,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(e,["updateTime"],d);const p=l(t,["model"]);p!=null&&u(e,["model"],p);const h=l(t,["inputConfig"]);h!=null&&u(e,["src"],qE(h));const m=l(t,["outputConfig"]);m!=null&&u(e,["dest"],BE(B0(m)));const g=l(t,["completionStats"]);return g!=null&&u(e,["completionStats"],g),e}function qE(t){const e={},n=l(t,["instancesFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&u(e,["gcsUri"],r);const o=l(t,["bigquerySource","inputUri"]);return o!=null&&u(e,["bigqueryUri"],o),e}function zE(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&u(n,["fileName"],r);const o=l(e,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>wC(t,i))),u(n,["requests","requests"],s)}return n}function JE(t){const e={},n=l(t,["format"]);n!=null&&u(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsSource","uris"],r);const o=l(t,["bigqueryUri"]);if(o!=null&&u(e,["bigquerySource","inputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function WE(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function YE(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Vo(t,r)),n}function jE(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Vo(t,r)),n}function KE(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],XE(r));const o=l(t,["tokenCount"]);o!=null&&u(e,["tokenCount"],o);const s=l(t,["finishReason"]);s!=null&&u(e,["finishReason"],s);const i=l(t,["avgLogprobs"]);i!=null&&u(e,["avgLogprobs"],i);const a=l(t,["groundingMetadata"]);a!=null&&u(e,["groundingMetadata"],a);const c=l(t,["index"]);c!=null&&u(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const p=l(t,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>g)),u(e,["safetyRatings"],m)}const h=l(t,["urlContextMetadata"]);return h!=null&&u(e,["urlContextMetadata"],h),e}function XE(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["citations"],r)}return e}function q0(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>AC(s))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function QE(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&u(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ZE(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["dest"]);return e!==void 0&&o!=null&&u(e,["outputConfig"],HE($E(o))),n}function Cm(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["src"]);o!=null&&u(n,["batch","inputConfig"],zE(t,O0(t,o)));const s=l(e,["config"]);return s!=null&&QE(s,n),n}function eC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],se(t,r));const o=l(e,["src"]);o!=null&&u(n,["inputConfig"],JE(O0(t,o)));const s=l(e,["config"]);return s!=null&&ZE(s,n),n}function tC(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&u(e,["batch","displayName"],r),n}function nC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["src"]);o!=null&&u(n,["batch","inputConfig"],uC(t,o));const s=l(e,["config"]);return s!=null&&tC(s,n),n}function rC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Vo(t,r)),n}function oC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Vo(t,r)),n}function sC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);return s!=null&&u(e,["error"],s),e}function iC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);return s!=null&&u(e,["error"],s),e}function lC(t,e){const n={},r=l(e,["contents"]);if(r!=null){let s=Kd(t,r);Array.isArray(s)&&(s=s.map(i=>i)),u(n,["requests[]","request","content"],s)}const o=l(e,["config"]);return o!=null&&(u(n,["_self"],aC(o,n)),oE(n,{"requests[].*":"requests[].request.*"})),n}function aC(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const o=l(t,["title"]);e!==void 0&&o!=null&&u(e,["requests[]","title"],o);const s=l(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&u(e,["requests[]","outputDimensionality"],s),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uC(t,e){const n={},r=l(e,["fileName"]);r!=null&&u(n,["file_name"],r);const o=l(e,["inlinedRequests"]);return o!=null&&u(n,["requests"],lC(t,o)),n}function cC(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function dC(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fC(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function pC(t,e,n){const r={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],q0(Ze(o)));const s=l(e,["temperature"]);s!=null&&u(r,["temperature"],s);const i=l(e,["topP"]);i!=null&&u(r,["topP"],i);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const p=l(e,["stopSequences"]);p!=null&&u(r,["stopSequences"],p);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&u(r,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&u(r,["presencePenalty"],g);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const w=l(e,["seed"]);w!=null&&u(r,["seed"],w);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const v=l(e,["responseSchema"]);v!=null&&u(r,["responseSchema"],Xd(v));const y=l(e,["responseJsonSchema"]);if(y!=null&&u(r,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=l(e,["safetySettings"]);if(n!==void 0&&x!=null){let z=x;Array.isArray(z)&&(z=z.map(le=>RC(le))),u(n,["safetySettings"],z)}const S=l(e,["tools"]);if(n!==void 0&&S!=null){let z=Go(S);Array.isArray(z)&&(z=z.map(le=>kC(Fo(le)))),u(n,["tools"],z)}const N=l(e,["toolConfig"]);if(n!==void 0&&N!=null&&u(n,["toolConfig"],PC(N)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=l(e,["cachedContent"]);n!==void 0&&I!=null&&u(n,["cachedContent"],Nn(t,I));const T=l(e,["responseModalities"]);T!=null&&u(r,["responseModalities"],T);const R=l(e,["mediaResolution"]);R!=null&&u(r,["mediaResolution"],R);const k=l(e,["speechConfig"]);if(k!=null&&u(r,["speechConfig"],Qd(k)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=l(e,["thinkingConfig"]);P!=null&&u(r,["thinkingConfig"],P);const G=l(e,["imageConfig"]);return G!=null&&u(r,["imageConfig"],xC(G)),r}function hC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>KE(d))),u(e,["candidates"],c)}const o=l(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const i=l(t,["responseId"]);i!=null&&u(e,["responseId"],i);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function mC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Vo(t,r)),n}function gC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Vo(t,r)),n}function yC(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function vC(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function xC(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&u(e,["imageSize"],r),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["request","model"],se(t,r));const o=l(e,["contents"]);if(o!=null){let a=Dt(o);Array.isArray(a)&&(a=a.map(c=>q0(c))),u(n,["request","contents"],a)}const s=l(e,["metadata"]);s!=null&&u(n,["metadata"],s);const i=l(e,["config"]);return i!=null&&u(n,["request","generationConfig"],pC(t,i,l(n,["request"],{}))),n}function _C(t){const e={},n=l(t,["response"]);n!=null&&u(e,["response"],hC(n));const r=l(t,["error"]);return r!=null&&u(e,["error"],r),e}function SC(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);if(e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function EC(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);e!==void 0&&o!=null&&u(e,["_query","pageToken"],o);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),n}function CC(t){const e={},n=l(t,["config"]);return n!=null&&SC(n,e),e}function TC(t){const e={},n=l(t,["config"]);return n!=null&&EC(n,e),e}function IC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>il(i))),u(e,["batchJobs"],s)}return e}function NC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>bc(i))),u(e,["batchJobs"],s)}return e}function AC(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],cC(s));const i=l(t,["functionCall"]);i!=null&&u(e,["functionCall"],dC(i));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],WE(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const p=l(t,["thought"]);p!=null&&u(e,["thought"],p);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&u(e,["videoMetadata"],m),e}function RC(t){const e={},n=l(t,["category"]);if(n!=null&&u(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function PC(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],fC(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function kC(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>h)),u(e,["functionDeclarations"],p)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const s=l(t,["fileSearch"]);s!=null&&u(e,["fileSearch"],s);const i=l(t,["codeExecution"]);if(i!=null&&u(e,["codeExecution"],i),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],yC(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],vC(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Cn||(Cn={}));class Dr{constructor(e,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,o)}init(e,n,r){var o,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!r||Object.keys(r).length===0?i={config:{}}:typeof r=="object"?i=Object.assign({},r):i=r,i.config&&(i.config.pageToken=n.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(s=(o=i.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let MC=class extends In{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Dr(Cn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Cm(this.apiClient,e),r=n._url,o=U("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,c=a.requests,d=[];for(const p of c){const h=Object.assign({},p);if(h.systemInstruction){const m=h.systemInstruction;delete h.systemInstruction;const g=h.request;g.systemInstruction=m,h.request=g}d.push(h)}return a.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const s=this.getGcsUri(e),i=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${o}`;else if(i)r.dest=`${i}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=eC(this.apiClient,e);return a=U("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>bc(p))}else{const d=Cm(this.apiClient,e);return a=U("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>il(p))}}async createEmbeddingsInternal(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=nC(this.apiClient,e);return s=U("{model}:asyncBatchEmbedContent",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>il(c))}}async get(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=gC(this.apiClient,e);return a=U("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>bc(p))}else{const d=mC(this.apiClient,e);return a=U("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>il(p))}}async cancel(e){var n,r,o,s;let i="",a={};if(this.apiClient.isVertexAI()){const c=jE(this.apiClient,e);i=U("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=YE(this.apiClient,e);i=U("batches/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=TC(e);return a=U("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=NC(p),m=new wm;return Object.assign(m,h),m})}else{const d=CC(e);return a=U("batches",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=IC(p),m=new wm;return Object.assign(m,h),m})}}async delete(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=oC(this.apiClient,e);return a=U("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>iC(p))}else{const d=rC(this.apiClient,e);return a=U("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>sC(p))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bC(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Tm(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>nT(s))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function DC(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);e!==void 0&&o!=null&&u(e,["expireTime"],o);const s=l(t,["displayName"]);e!==void 0&&s!=null&&u(e,["displayName"],s);const i=l(t,["contents"]);if(e!==void 0&&i!=null){let p=Dt(i);Array.isArray(p)&&(p=p.map(h=>Tm(h))),u(e,["contents"],p)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],Tm(Ze(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>oT(h))),u(e,["tools"],p)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&u(e,["toolConfig"],rT(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function LC(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);e!==void 0&&o!=null&&u(e,["expireTime"],o);const s=l(t,["displayName"]);e!==void 0&&s!=null&&u(e,["displayName"],s);const i=l(t,["contents"]);if(e!==void 0&&i!=null){let h=Dt(i);Array.isArray(h)&&(h=h.map(m=>m)),u(e,["contents"],h)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],Ze(a));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(m=>sT(m))),u(e,["tools"],h)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&u(e,["toolConfig"],d);const p=l(t,["kmsKeyName"]);return e!==void 0&&p!=null&&u(e,["encryption_spec","kmsKeyName"],p),n}function UC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],M0(t,r));const o=l(e,["config"]);return o!=null&&DC(o,n),n}function FC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],M0(t,r));const o=l(e,["config"]);return o!=null&&LC(o,n),n}function GC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Nn(t,r)),n}function VC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Nn(t,r)),n}function $C(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function OC(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function BC(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function HC(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qC(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zC(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const i=l(t,["response"]);i!=null&&u(e,["response"],i);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function JC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Nn(t,r)),n}function WC(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Nn(t,r)),n}function YC(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function jC(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function KC(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function XC(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function QC(t){const e={},n=l(t,["config"]);return n!=null&&KC(n,e),e}function ZC(t){const e={},n=l(t,["config"]);return n!=null&&XC(n,e),e}function eT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),u(e,["cachedContents"],s)}return e}function tT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),u(e,["cachedContents"],s)}return e}function nT(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],BC(s));const i=l(t,["functionCall"]);i!=null&&u(e,["functionCall"],HC(i));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],bC(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const p=l(t,["thought"]);p!=null&&u(e,["thought"],p);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&u(e,["videoMetadata"],m),e}function rT(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],qC(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function oT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>h)),u(e,["functionDeclarations"],p)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const s=l(t,["fileSearch"]);s!=null&&u(e,["fileSearch"],s);const i=l(t,["codeExecution"]);if(i!=null&&u(e,["codeExecution"],i),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],YC(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],jC(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function sT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>zC(m))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);const s=l(t,["computerUse"]);if(s!=null&&u(e,["computerUse"],s),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(t,["codeExecution"]);i!=null&&u(e,["codeExecution"],i);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const p=l(t,["urlContext"]);return p!=null&&u(e,["urlContext"],p),e}function iT(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);return e!==void 0&&o!=null&&u(e,["expireTime"],o),n}function lT(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);return e!==void 0&&o!=null&&u(e,["expireTime"],o),n}function aT(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Nn(t,r));const o=l(e,["config"]);return o!=null&&iT(o,n),n}function uT(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Nn(t,r));const o=l(e,["config"]);return o!=null&&lT(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cT extends In{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Dr(Cn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=FC(this.apiClient,e);return a=U("cachedContents",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const d=UC(this.apiClient,e);return a=U("cachedContents",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async get(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=WC(this.apiClient,e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const d=JC(this.apiClient,e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async delete(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=VC(this.apiClient,e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=OC(p),m=new vm;return Object.assign(m,h),m})}else{const d=GC(this.apiClient,e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=$C(p),m=new vm;return Object.assign(m,h),m})}}async update(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=uT(this.apiClient,e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>p)}else{const d=aT(this.apiClient,e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>p)}}async listInternal(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=ZC(e);return a=U("cachedContents",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=tT(p),m=new xm;return Object.assign(m,h),m})}else{const d=QC(e);return a=U("cachedContents",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=eT(p),m=new xm;return Object.assign(m,h),m})}}}function Im(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(t){return this instanceof ve?(this.v=t,this):new ve(t)}function wo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(g){return function(_){return Promise.resolve(_).then(g,h)}}function a(g,_){r[g]&&(o[g]=function(w){return new Promise(function(C,v){s.push([g,w,C,v])>1||c(g,w)})},_&&(o[g]=_(o[g])))}function c(g,_){try{d(r[g](_))}catch(w){m(s[0][3],w)}}function d(g){g.value instanceof ve?Promise.resolve(g.value.v).then(p,h):m(s[0][2],g)}function p(g){c("next",g)}function h(g){c("throw",g)}function m(g,_){g(_),s.shift(),s.length&&c(s[0][0],s[0][1])}}function As(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Im=="function"?Im(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(i){return new Promise(function(a,c){i=t[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dT(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:z0(n)}function z0(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function fT(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Nm(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const o=[];let s=!0;for(;r<n&&t[r].role==="model";)o.push(t[r]),s&&!z0(t[r])&&(s=!1),r++;s?e.push(...o):e.pop()}return e}class pT{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new hT(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let hT=class{constructor(e,n,r,o={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),fT(s)}async sendMessage(e){var n;await this.sendPromise;const r=Ze(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,i,a;const c=await o,d=(i=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.content,p=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];p!=null&&(m=(a=p.slice(h))!==null&&a!==void 0?a:[]);const g=d?[d]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const r=Ze(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?Nm(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,o;return wo(this,arguments,function*(){var i,a,c,d;const p=[];try{for(var h=!0,m=As(e),g;g=yield ve(m.next()),i=g.done,!i;h=!0){d=g.value,h=!1;const _=d;if(dT(_)){const w=(o=(r=_.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;w!==void 0&&p.push(w)}yield yield ve(_)}}catch(_){a={error:_}}finally{try{!h&&!i&&(c=m.return)&&(yield ve(c.call(m)))}finally{if(a)throw a.error}}this.recordHistory(n,p)})}recordHistory(e,n,r){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Nm(r)):this.history.push(e),this.history.push(...o)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ha extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ha.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mT(t){const e={},n=l(t,["file"]);return n!=null&&u(e,["file"],n),e}function gT(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function yT(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],G0(n)),e}function vT(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function xT(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],G0(n)),e}function wT(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function _T(t){const e={},n=l(t,["config"]);return n!=null&&wT(n,e),e}function ST(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),u(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ET=class extends In{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Dr(Cn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_T(e);return s=U("files",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=ST(c),p=new NE;return Object.assign(p,d),p})}}async createInternal(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mT(e);return s=U("upload/v1beta/files",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=gT(c),p=new AE;return Object.assign(p,d),p})}}async get(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xT(e);return s=U("files/{file}",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=yT(e);return s=U("files/{file}",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=vT(c),p=new RE;return Object.assign(p,d),p})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ll(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function CT(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>$T(s))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function TT(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function IT(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NT(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const i=l(t,["response"]);i!=null&&u(e,["response"],i);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function AT(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&u(e,["responseJsonSchema"],r);const o=l(t,["audioTimestamp"]);o!=null&&u(e,["audioTimestamp"],o);const s=l(t,["candidateCount"]);s!=null&&u(e,["candidateCount"],s);const i=l(t,["enableAffectiveDialog"]);i!=null&&u(e,["enableAffectiveDialog"],i);const a=l(t,["frequencyPenalty"]);a!=null&&u(e,["frequencyPenalty"],a);const c=l(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);const p=l(t,["mediaResolution"]);p!=null&&u(e,["mediaResolution"],p);const h=l(t,["presencePenalty"]);h!=null&&u(e,["presencePenalty"],h);const m=l(t,["responseLogprobs"]);m!=null&&u(e,["responseLogprobs"],m);const g=l(t,["responseMimeType"]);g!=null&&u(e,["responseMimeType"],g);const _=l(t,["responseModalities"]);_!=null&&u(e,["responseModalities"],_);const w=l(t,["responseSchema"]);w!=null&&u(e,["responseSchema"],w);const C=l(t,["routingConfig"]);C!=null&&u(e,["routingConfig"],C);const v=l(t,["seed"]);v!=null&&u(e,["seed"],v);const y=l(t,["speechConfig"]);y!=null&&u(e,["speechConfig"],J0(y));const x=l(t,["stopSequences"]);x!=null&&u(e,["stopSequences"],x);const S=l(t,["temperature"]);S!=null&&u(e,["temperature"],S);const N=l(t,["thinkingConfig"]);N!=null&&u(e,["thinkingConfig"],N);const I=l(t,["topK"]);I!=null&&u(e,["topK"],I);const T=l(t,["topP"]);if(T!=null&&u(e,["topP"],T),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function RT(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function PT(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function kT(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const s=l(t,["temperature"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","temperature"],s);const i=l(t,["topP"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","topP"],i);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const p=l(t,["seed"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","seed"],p);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],Zd(h));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=l(t,["systemInstruction"]);e!==void 0&&_!=null&&u(e,["setup","systemInstruction"],CT(Ze(_)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let I=Go(w);Array.isArray(I)&&(I=I.map(T=>BT(Fo(T)))),u(e,["setup","tools"],I)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&u(e,["setup","sessionResumption"],OT(C));const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],y);const x=l(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&u(e,["setup","realtimeInputConfig"],x);const S=l(t,["contextWindowCompression"]);e!==void 0&&S!=null&&u(e,["setup","contextWindowCompression"],S);const N=l(t,["proactivity"]);return e!==void 0&&N!=null&&u(e,["setup","proactivity"],N),n}function MT(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],AT(r));const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const s=l(t,["temperature"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","temperature"],s);const i=l(t,["topP"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","topP"],i);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const p=l(t,["seed"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","seed"],p);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],J0(Zd(h)));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=l(t,["systemInstruction"]);e!==void 0&&_!=null&&u(e,["setup","systemInstruction"],Ze(_));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let I=Go(w);Array.isArray(I)&&(I=I.map(T=>HT(Fo(T)))),u(e,["setup","tools"],I)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&u(e,["setup","sessionResumption"],C);const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],y);const x=l(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&u(e,["setup","realtimeInputConfig"],x);const S=l(t,["contextWindowCompression"]);e!==void 0&&S!=null&&u(e,["setup","contextWindowCompression"],S);const N=l(t,["proactivity"]);return e!==void 0&&N!=null&&u(e,["setup","proactivity"],N),n}function bT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],se(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],kT(o,n)),n}function DT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],se(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],MT(o,n)),n}function LT(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],n),e}function UT(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["weightedPrompts"],r)}return e}function FT(t){const e={},n=l(t,["media"]);if(n!=null){let d=b0(n);Array.isArray(d)&&(d=d.map(p=>ll(p))),u(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&u(e,["audio"],ll(L0(r)));const o=l(t,["audioStreamEnd"]);o!=null&&u(e,["audioStreamEnd"],o);const s=l(t,["video"]);s!=null&&u(e,["video"],ll(D0(s)));const i=l(t,["text"]);i!=null&&u(e,["text"],i);const a=l(t,["activityStart"]);a!=null&&u(e,["activityStart"],a);const c=l(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function GT(t){const e={},n=l(t,["media"]);if(n!=null){let d=b0(n);Array.isArray(d)&&(d=d.map(p=>p)),u(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&u(e,["audio"],L0(r));const o=l(t,["audioStreamEnd"]);o!=null&&u(e,["audioStreamEnd"],o);const s=l(t,["video"]);s!=null&&u(e,["video"],D0(s));const i=l(t,["text"]);i!=null&&u(e,["text"],i);const a=l(t,["activityStart"]);a!=null&&u(e,["activityStart"],a);const c=l(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function VT(t){const e={},n=l(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],n);const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],r);const o=l(t,["toolCall"]);o!=null&&u(e,["toolCall"],o);const s=l(t,["toolCallCancellation"]);s!=null&&u(e,["toolCallCancellation"],s);const i=l(t,["usageMetadata"]);i!=null&&u(e,["usageMetadata"],qT(i));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],a);const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],c),e}function $T(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],TT(s));const i=l(t,["functionCall"]);i!=null&&u(e,["functionCall"],IT(i));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],ll(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const p=l(t,["thought"]);p!=null&&u(e,["thought"],p);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&u(e,["videoMetadata"],m),e}function OT(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function J0(t){const e={},n=l(t,["languageCode"]);n!=null&&u(e,["languageCode"],n);const r=l(t,["voiceConfig"]);if(r!=null&&u(e,["voiceConfig"],r),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function BT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>h)),u(e,["functionDeclarations"],p)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const s=l(t,["fileSearch"]);s!=null&&u(e,["fileSearch"],s);const i=l(t,["codeExecution"]);if(i!=null&&u(e,["codeExecution"],i),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],RT(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],PT(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function HT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>NT(m))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);const s=l(t,["computerUse"]);if(s!=null&&u(e,["computerUse"],s),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(t,["codeExecution"]);i!=null&&u(e,["codeExecution"],i);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const p=l(t,["urlContext"]);return p!=null&&u(e,["urlContext"],p),e}function qT(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const o=l(t,["candidatesTokenCount"]);o!=null&&u(e,["responseTokenCount"],o);const s=l(t,["toolUsePromptTokenCount"]);s!=null&&u(e,["toolUsePromptTokenCount"],s);const i=l(t,["thoughtsTokenCount"]);i!=null&&u(e,["thoughtsTokenCount"],i);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(_=>_)),u(e,["promptTokensDetails"],g)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(_=>_)),u(e,["cacheTokensDetails"],g)}const p=l(t,["candidatesTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(_=>_)),u(e,["responseTokensDetails"],g)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(_=>_)),u(e,["toolUsePromptTokensDetails"],g)}const m=l(t,["trafficType"]);return m!=null&&u(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zT(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function JT(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],WT(r));const o=l(t,["tokenCount"]);o!=null&&u(e,["tokenCount"],o);const s=l(t,["finishReason"]);s!=null&&u(e,["finishReason"],s);const i=l(t,["avgLogprobs"]);i!=null&&u(e,["avgLogprobs"],i);const a=l(t,["groundingMetadata"]);a!=null&&u(e,["groundingMetadata"],a);const c=l(t,["index"]);c!=null&&u(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const p=l(t,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>g)),u(e,["safetyRatings"],m)}const h=l(t,["urlContextMetadata"]);return h!=null&&u(e,["urlContextMetadata"],h),e}function WT(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["citations"],r)}return e}function YT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["contents"]);if(o!=null){let s=Dt(o);Array.isArray(s)&&(s=s.map(i=>i)),u(n,["contents"],s)}return n}function jT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),u(e,["tokensInfo"],o)}return e}function KT(t){const e={},n=l(t,["values"]);n!=null&&u(e,["values"],n);const r=l(t,["statistics"]);return r!=null&&u(e,["statistics"],XT(r)),e}function XT(t){const e={},n=l(t,["truncated"]);n!=null&&u(e,["truncated"],n);const r=l(t,["token_count"]);return r!=null&&u(e,["tokenCount"],r),e}function ma(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>iN(s))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function QT(t){const e={},n=l(t,["controlType"]);n!=null&&u(e,["controlType"],n);const r=l(t,["enableControlImageComputation"]);return r!=null&&u(e,["computeControl"],r),e}function ZT(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function eI(t,e){const n={},r=l(t,["systemInstruction"]);e!==void 0&&r!=null&&u(e,["systemInstruction"],Ze(r));const o=l(t,["tools"]);if(e!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>X0(a))),u(e,["tools"],i)}const s=l(t,["generationConfig"]);return e!==void 0&&s!=null&&u(e,["generationConfig"],zI(s)),n}function tI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["contents"]);if(o!=null){let i=Dt(o);Array.isArray(i)&&(i=i.map(a=>ma(a))),u(n,["contents"],i)}const s=l(e,["config"]);return s!=null&&ZT(s),n}function nI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["contents"]);if(o!=null){let i=Dt(o);Array.isArray(i)&&(i=i.map(a=>a)),u(n,["contents"],i)}const s=l(e,["config"]);return s!=null&&eI(s,n),n}function rI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);r!=null&&u(e,["totalTokens"],r);const o=l(t,["cachedContentTokenCount"]);return o!=null&&u(e,["cachedContentTokenCount"],o),e}function oI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);return r!=null&&u(e,["totalTokens"],r),e}function sI(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],se(t,r)),n}function iI(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],se(t,r)),n}function lI(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function aI(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function uI(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(t,["negativePrompt"]);e!==void 0&&o!=null&&u(e,["parameters","negativePrompt"],o);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&u(e,["parameters","sampleCount"],s);const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const p=l(t,["personGeneration"]);e!==void 0&&p!=null&&u(e,["parameters","personGeneration"],p);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&u(e,["parameters","includeRaiReason"],m);const g=l(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);const _=l(t,["outputMimeType"]);e!==void 0&&_!=null&&u(e,["parameters","outputOptions","mimeType"],_);const w=l(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","compressionQuality"],w);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&u(e,["parameters","addWatermark"],C);const v=l(t,["labels"]);e!==void 0&&v!=null&&u(e,["labels"],v);const y=l(t,["editMode"]);e!==void 0&&y!=null&&u(e,["parameters","editMode"],y);const x=l(t,["baseSteps"]);return e!==void 0&&x!=null&&u(e,["parameters","editConfig","baseSteps"],x),n}function cI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const s=l(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>fN(c))),u(n,["instances[0]","referenceImages"],a)}const i=l(e,["config"]);return i!=null&&uI(i,n),n}function dI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ga(s))),u(e,["generatedImages"],o)}return e}function fI(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const o=l(t,["title"]);e!==void 0&&o!=null&&u(e,["requests[]","title"],o);const s=l(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&u(e,["requests[]","outputDimensionality"],s),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function pI(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["instances[]","task_type"],r);const o=l(t,["title"]);e!==void 0&&o!=null&&u(e,["instances[]","title"],o);const s=l(t,["outputDimensionality"]);e!==void 0&&s!=null&&u(e,["parameters","outputDimensionality"],s);const i=l(t,["mimeType"]);e!==void 0&&i!=null&&u(e,["instances[]","mimeType"],i);const a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&u(e,["parameters","autoTruncate"],a),n}function hI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["contents"]);if(o!=null){let a=Kd(t,o);Array.isArray(a)&&(a=a.map(c=>c)),u(n,["requests[]","content"],a)}const s=l(e,["config"]);s!=null&&fI(s,n);const i=l(e,["model"]);return i!==void 0&&u(n,["requests[]","model"],se(t,i)),n}function mI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["contents"]);if(o!=null){let i=Kd(t,o);Array.isArray(i)&&(i=i.map(a=>a)),u(n,["instances[]","content"],i)}const s=l(e,["config"]);return s!=null&&pI(s,n),n}function gI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),u(e,["embeddings"],s)}const o=l(t,["metadata"]);return o!=null&&u(e,["metadata"],o),e}function yI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>KT(i))),u(e,["embeddings"],s)}const o=l(t,["metadata"]);return o!=null&&u(e,["metadata"],o),e}function vI(t){const e={},n=l(t,["endpoint"]);n!=null&&u(e,["name"],n);const r=l(t,["deployedModelId"]);return r!=null&&u(e,["deployedModelId"],r),e}function xI(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function wI(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _I(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function SI(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&u(e,["parametersJsonSchema"],s);const i=l(t,["response"]);i!=null&&u(e,["response"],i);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function EI(t,e,n){const r={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],ma(Ze(o)));const s=l(e,["temperature"]);s!=null&&u(r,["temperature"],s);const i=l(e,["topP"]);i!=null&&u(r,["topP"],i);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const p=l(e,["stopSequences"]);p!=null&&u(r,["stopSequences"],p);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&u(r,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&u(r,["presencePenalty"],g);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const w=l(e,["seed"]);w!=null&&u(r,["seed"],w);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const v=l(e,["responseSchema"]);v!=null&&u(r,["responseSchema"],Xd(v));const y=l(e,["responseJsonSchema"]);if(y!=null&&u(r,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=l(e,["safetySettings"]);if(n!==void 0&&x!=null){let z=x;Array.isArray(z)&&(z=z.map(le=>pN(le))),u(n,["safetySettings"],z)}const S=l(e,["tools"]);if(n!==void 0&&S!=null){let z=Go(S);Array.isArray(z)&&(z=z.map(le=>wN(Fo(le)))),u(n,["tools"],z)}const N=l(e,["toolConfig"]);if(n!==void 0&&N!=null&&u(n,["toolConfig"],xN(N)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=l(e,["cachedContent"]);n!==void 0&&I!=null&&u(n,["cachedContent"],Nn(t,I));const T=l(e,["responseModalities"]);T!=null&&u(r,["responseModalities"],T);const R=l(e,["mediaResolution"]);R!=null&&u(r,["mediaResolution"],R);const k=l(e,["speechConfig"]);if(k!=null&&u(r,["speechConfig"],Qd(k)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=l(e,["thinkingConfig"]);P!=null&&u(r,["thinkingConfig"],P);const G=l(e,["imageConfig"]);return G!=null&&u(r,["imageConfig"],KI(G)),r}function CI(t,e,n){const r={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],Ze(o));const s=l(e,["temperature"]);s!=null&&u(r,["temperature"],s);const i=l(e,["topP"]);i!=null&&u(r,["topP"],i);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const p=l(e,["stopSequences"]);p!=null&&u(r,["stopSequences"],p);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const m=l(e,["logprobs"]);m!=null&&u(r,["logprobs"],m);const g=l(e,["presencePenalty"]);g!=null&&u(r,["presencePenalty"],g);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const w=l(e,["seed"]);w!=null&&u(r,["seed"],w);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const v=l(e,["responseSchema"]);v!=null&&u(r,["responseSchema"],Xd(v));const y=l(e,["responseJsonSchema"]);y!=null&&u(r,["responseJsonSchema"],y);const x=l(e,["routingConfig"]);x!=null&&u(r,["routingConfig"],x);const S=l(e,["modelSelectionConfig"]);S!=null&&u(r,["modelConfig"],S);const N=l(e,["safetySettings"]);if(n!==void 0&&N!=null){let ge=N;Array.isArray(ge)&&(ge=ge.map(Be=>Be)),u(n,["safetySettings"],ge)}const I=l(e,["tools"]);if(n!==void 0&&I!=null){let ge=Go(I);Array.isArray(ge)&&(ge=ge.map(Be=>X0(Fo(Be)))),u(n,["tools"],ge)}const T=l(e,["toolConfig"]);n!==void 0&&T!=null&&u(n,["toolConfig"],T);const R=l(e,["labels"]);n!==void 0&&R!=null&&u(n,["labels"],R);const k=l(e,["cachedContent"]);n!==void 0&&k!=null&&u(n,["cachedContent"],Nn(t,k));const P=l(e,["responseModalities"]);P!=null&&u(r,["responseModalities"],P);const G=l(e,["mediaResolution"]);G!=null&&u(r,["mediaResolution"],G);const z=l(e,["speechConfig"]);z!=null&&u(r,["speechConfig"],K0(Qd(z)));const le=l(e,["audioTimestamp"]);le!=null&&u(r,["audioTimestamp"],le);const Ie=l(e,["thinkingConfig"]);Ie!=null&&u(r,["thinkingConfig"],Ie);const Pe=l(e,["imageConfig"]);return Pe!=null&&u(r,["imageConfig"],XI(Pe)),r}function Am(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["contents"]);if(o!=null){let i=Dt(o);Array.isArray(i)&&(i=i.map(a=>ma(a))),u(n,["contents"],i)}const s=l(e,["config"]);return s!=null&&u(n,["generationConfig"],EI(t,s,n)),n}function Rm(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["contents"]);if(o!=null){let i=Dt(o);Array.isArray(i)&&(i=i.map(a=>a)),u(n,["contents"],i)}const s=l(e,["config"]);return s!=null&&u(n,["generationConfig"],CI(t,s,n)),n}function Pm(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>JT(d))),u(e,["candidates"],c)}const o=l(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const i=l(t,["responseId"]);i!=null&&u(e,["responseId"],i);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function km(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>p)),u(e,["candidates"],d)}const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["modelVersion"]);s!=null&&u(e,["modelVersion"],s);const i=l(t,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);const a=l(t,["responseId"]);a!=null&&u(e,["responseId"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function TI(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o);const s=l(t,["guidanceScale"]);if(e!==void 0&&s!=null&&u(e,["parameters","guidanceScale"],s),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&u(e,["parameters","safetySetting"],i);const a=l(t,["personGeneration"]);e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&u(e,["parameters","includeRaiReason"],d);const p=l(t,["language"]);e!==void 0&&p!=null&&u(e,["parameters","language"],p);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","mimeType"],h);const m=l(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&u(e,["parameters","outputOptions","compressionQuality"],m),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=l(t,["imageSize"]);if(e!==void 0&&g!=null&&u(e,["parameters","sampleImageSize"],g),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function II(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(t,["negativePrompt"]);e!==void 0&&o!=null&&u(e,["parameters","negativePrompt"],o);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&u(e,["parameters","sampleCount"],s);const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const p=l(t,["personGeneration"]);e!==void 0&&p!=null&&u(e,["parameters","personGeneration"],p);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&u(e,["parameters","includeRaiReason"],m);const g=l(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);const _=l(t,["outputMimeType"]);e!==void 0&&_!=null&&u(e,["parameters","outputOptions","mimeType"],_);const w=l(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","compressionQuality"],w);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&u(e,["parameters","addWatermark"],C);const v=l(t,["labels"]);e!==void 0&&v!=null&&u(e,["labels"],v);const y=l(t,["imageSize"]);e!==void 0&&y!=null&&u(e,["parameters","sampleImageSize"],y);const x=l(t,["enhancePrompt"]);return e!==void 0&&x!=null&&u(e,["parameters","enhancePrompt"],x),n}function NI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const s=l(e,["config"]);return s!=null&&TI(s,n),n}function AI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const s=l(e,["config"]);return s!=null&&II(s,n),n}function RI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>OI(i))),u(e,["generatedImages"],s)}const o=l(t,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],Y0(o)),e}function PI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>ga(i))),u(e,["generatedImages"],s)}const o=l(t,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],j0(o)),e}function kI(t,e){const n={},r=l(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(t,["durationSeconds"]);if(e!==void 0&&o!=null&&u(e,["parameters","durationSeconds"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const i=l(t,["resolution"]);e!==void 0&&i!=null&&u(e,["parameters","resolution"],i);const a=l(t,["personGeneration"]);if(e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&u(e,["parameters","negativePrompt"],c);const d=l(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&u(e,["parameters","enhancePrompt"],d),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=l(t,["lastFrame"]);e!==void 0&&p!=null&&u(e,["instances[0]","lastFrame"],ya(p));const h=l(t,["referenceImages"]);if(e!==void 0&&h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>bN(g))),u(e,["instances[0]","referenceImages"],m)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function MI(t,e){const n={},r=l(t,["numberOfVideos"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const s=l(t,["fps"]);e!==void 0&&s!=null&&u(e,["parameters","fps"],s);const i=l(t,["durationSeconds"]);e!==void 0&&i!=null&&u(e,["parameters","durationSeconds"],i);const a=l(t,["seed"]);e!==void 0&&a!=null&&u(e,["parameters","seed"],a);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&u(e,["parameters","resolution"],d);const p=l(t,["personGeneration"]);e!==void 0&&p!=null&&u(e,["parameters","personGeneration"],p);const h=l(t,["pubsubTopic"]);e!==void 0&&h!=null&&u(e,["parameters","pubsubTopic"],h);const m=l(t,["negativePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","negativePrompt"],m);const g=l(t,["enhancePrompt"]);e!==void 0&&g!=null&&u(e,["parameters","enhancePrompt"],g);const _=l(t,["generateAudio"]);e!==void 0&&_!=null&&u(e,["parameters","generateAudio"],_);const w=l(t,["lastFrame"]);e!==void 0&&w!=null&&u(e,["instances[0]","lastFrame"],jt(w));const C=l(t,["referenceImages"]);if(e!==void 0&&C!=null){let x=C;Array.isArray(x)&&(x=x.map(S=>DN(S))),u(e,["instances[0]","referenceImages"],x)}const v=l(t,["mask"]);e!==void 0&&v!=null&&u(e,["instances[0]","mask"],MN(v));const y=l(t,["compressionQuality"]);return e!==void 0&&y!=null&&u(e,["parameters","compressionQuality"],y),n}function bI(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const i=l(t,["response","generateVideoResponse"]);return i!=null&&u(e,["response"],FI(i)),e}function DI(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const i=l(t,["response"]);return i!=null&&u(e,["response"],GI(i)),e}function LI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const s=l(e,["image"]);s!=null&&u(n,["instances[0]","image"],ya(s));const i=l(e,["video"]);i!=null&&u(n,["instances[0]","video"],Q0(i));const a=l(e,["source"]);a!=null&&VI(a,n);const c=l(e,["config"]);return c!=null&&kI(c,n),n}function UI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const s=l(e,["image"]);s!=null&&u(n,["instances[0]","image"],jt(s));const i=l(e,["video"]);i!=null&&u(n,["instances[0]","video"],Z0(i));const a=l(e,["source"]);a!=null&&$I(a,n);const c=l(e,["config"]);return c!=null&&MI(c,n),n}function FI(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>HI(i))),u(e,["generatedVideos"],s)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function GI(t){const e={},n=l(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>qI(i))),u(e,["generatedVideos"],s)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function VI(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],ya(o));const s=l(t,["video"]);return e!==void 0&&s!=null&&u(e,["instances[0]","video"],Q0(s)),n}function $I(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],jt(o));const s=l(t,["video"]);return e!==void 0&&s!=null&&u(e,["instances[0]","video"],Z0(s)),n}function OI(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],QI(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const o=l(t,["_self"]);return o!=null&&u(e,["safetyAttributes"],Y0(o)),e}function ga(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],W0(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const o=l(t,["_self"]);o!=null&&u(e,["safetyAttributes"],j0(o));const s=l(t,["prompt"]);return s!=null&&u(e,["enhancedPrompt"],s),e}function BI(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["mask"],W0(n));const r=l(t,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),u(e,["labels"],o)}return e}function HI(t){const e={},n=l(t,["video"]);return n!=null&&u(e,["video"],PN(n)),e}function qI(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],kN(n)),e}function zI(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&u(e,["responseJsonSchema"],r);const o=l(t,["audioTimestamp"]);o!=null&&u(e,["audioTimestamp"],o);const s=l(t,["candidateCount"]);s!=null&&u(e,["candidateCount"],s);const i=l(t,["enableAffectiveDialog"]);i!=null&&u(e,["enableAffectiveDialog"],i);const a=l(t,["frequencyPenalty"]);a!=null&&u(e,["frequencyPenalty"],a);const c=l(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);const p=l(t,["mediaResolution"]);p!=null&&u(e,["mediaResolution"],p);const h=l(t,["presencePenalty"]);h!=null&&u(e,["presencePenalty"],h);const m=l(t,["responseLogprobs"]);m!=null&&u(e,["responseLogprobs"],m);const g=l(t,["responseMimeType"]);g!=null&&u(e,["responseMimeType"],g);const _=l(t,["responseModalities"]);_!=null&&u(e,["responseModalities"],_);const w=l(t,["responseSchema"]);w!=null&&u(e,["responseSchema"],w);const C=l(t,["routingConfig"]);C!=null&&u(e,["routingConfig"],C);const v=l(t,["seed"]);v!=null&&u(e,["seed"],v);const y=l(t,["speechConfig"]);y!=null&&u(e,["speechConfig"],K0(y));const x=l(t,["stopSequences"]);x!=null&&u(e,["stopSequences"],x);const S=l(t,["temperature"]);S!=null&&u(e,["temperature"],S);const N=l(t,["thinkingConfig"]);N!=null&&u(e,["thinkingConfig"],N);const I=l(t,["topK"]);I!=null&&u(e,["topK"],I);const T=l(t,["topP"]);if(T!=null&&u(e,["topP"],T),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function JI(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],se(t,r)),n}function WI(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],se(t,r)),n}function YI(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function jI(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function KI(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&u(e,["imageSize"],r),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function XI(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);r!=null&&u(e,["imageSize"],r);const o=l(t,["outputMimeType"]);o!=null&&u(e,["imageOutputOptions","mimeType"],o);const s=l(t,["outputCompressionQuality"]);return s!=null&&u(e,["imageOutputOptions","compressionQuality"],s),e}function QI(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],rr(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function W0(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["imageBytes"],rr(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function ya(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],rr(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function jt(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["imageBytes"]);r!=null&&u(e,["bytesBase64Encoded"],rr(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function ZI(t,e,n){const r={},o=l(e,["pageSize"]);n!==void 0&&o!=null&&u(n,["_query","pageSize"],o);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const i=l(e,["filter"]);n!==void 0&&i!=null&&u(n,["_query","filter"],i);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],V0(t,a)),r}function eN(t,e,n){const r={},o=l(e,["pageSize"]);n!==void 0&&o!=null&&u(n,["_query","pageSize"],o);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&u(n,["_query","pageToken"],s);const i=l(e,["filter"]);n!==void 0&&i!=null&&u(n,["_query","filter"],i);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],V0(t,a)),r}function tN(t,e){const n={},r=l(e,["config"]);return r!=null&&ZI(t,r,n),n}function nN(t,e){const n={},r=l(e,["config"]);return r!=null&&eN(t,r,n),n}function rN(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["_self"]);if(o!=null){let s=$0(o);Array.isArray(s)&&(s=s.map(i=>Dc(i))),u(e,["models"],s)}return e}function oN(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["_self"]);if(o!=null){let s=$0(o);Array.isArray(s)&&(s=s.map(i=>Lc(i))),u(e,["models"],s)}return e}function sN(t){const e={},n=l(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);const r=l(t,["segmentationClasses"]);r!=null&&u(e,["maskClasses"],r);const o=l(t,["maskDilation"]);return o!=null&&u(e,["dilation"],o),e}function Dc(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);o!=null&&u(e,["description"],o);const s=l(t,["version"]);s!=null&&u(e,["version"],s);const i=l(t,["_self"]);i!=null&&u(e,["tunedModelInfo"],_N(i));const a=l(t,["inputTokenLimit"]);a!=null&&u(e,["inputTokenLimit"],a);const c=l(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);d!=null&&u(e,["supportedActions"],d);const p=l(t,["temperature"]);p!=null&&u(e,["temperature"],p);const h=l(t,["maxTemperature"]);h!=null&&u(e,["maxTemperature"],h);const m=l(t,["topP"]);m!=null&&u(e,["topP"],m);const g=l(t,["topK"]);g!=null&&u(e,["topK"],g);const _=l(t,["thinking"]);return _!=null&&u(e,["thinking"],_),e}function Lc(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);o!=null&&u(e,["description"],o);const s=l(t,["versionId"]);s!=null&&u(e,["version"],s);const i=l(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>vI(m))),u(e,["endpoints"],h)}const a=l(t,["labels"]);a!=null&&u(e,["labels"],a);const c=l(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],SN(c));const d=l(t,["defaultCheckpointId"]);d!=null&&u(e,["defaultCheckpointId"],d);const p=l(t,["checkpoints"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(m=>m)),u(e,["checkpoints"],h)}return e}function iN(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],xI(s));const i=l(t,["functionCall"]);i!=null&&u(e,["functionCall"],wI(i));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],zT(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const p=l(t,["thought"]);p!=null&&u(e,["thought"],p);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&u(e,["videoMetadata"],m),e}function lN(t){const e={},n=l(t,["productImage"]);return n!=null&&u(e,["image"],jt(n)),e}function aN(t,e){const n={},r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(t,["baseSteps"]);e!==void 0&&o!=null&&u(e,["parameters","baseSteps"],o);const s=l(t,["outputGcsUri"]);e!==void 0&&s!=null&&u(e,["parameters","storageUri"],s);const i=l(t,["seed"]);e!==void 0&&i!=null&&u(e,["parameters","seed"],i);const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&u(e,["parameters","safetySetting"],a);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&u(e,["parameters","addWatermark"],d);const p=l(t,["outputMimeType"]);e!==void 0&&p!=null&&u(e,["parameters","outputOptions","mimeType"],p);const h=l(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","compressionQuality"],h);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","enhancePrompt"],m);const g=l(t,["labels"]);return e!==void 0&&g!=null&&u(e,["labels"],g),n}function uN(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["source"]);o!=null&&dN(o,n);const s=l(e,["config"]);return s!=null&&aN(s,n),n}function cN(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>ga(o))),u(e,["generatedImages"],r)}return e}function dN(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["personImage"]);e!==void 0&&o!=null&&u(e,["instances[0]","personImage","image"],jt(o));const s=l(t,["productImages"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>lN(a))),u(e,["instances[0]","productImages"],i)}return n}function fN(t){const e={},n=l(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],jt(n));const r=l(t,["referenceId"]);r!=null&&u(e,["referenceId"],r);const o=l(t,["referenceType"]);o!=null&&u(e,["referenceType"],o);const s=l(t,["maskImageConfig"]);s!=null&&u(e,["maskImageConfig"],sN(s));const i=l(t,["controlImageConfig"]);i!=null&&u(e,["controlImageConfig"],QT(i));const a=l(t,["styleImageConfig"]);a!=null&&u(e,["styleImageConfig"],a);const c=l(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],c),e}function Y0(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const o=l(t,["contentType"]);return o!=null&&u(e,["contentType"],o),e}function j0(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const o=l(t,["contentType"]);return o!=null&&u(e,["contentType"],o),e}function pN(t){const e={},n=l(t,["category"]);if(n!=null&&u(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function hN(t){const e={},n=l(t,["image"]);return n!=null&&u(e,["image"],jt(n)),e}function mN(t,e){const n={},r=l(t,["mode"]);e!==void 0&&r!=null&&u(e,["parameters","mode"],r);const o=l(t,["maxPredictions"]);e!==void 0&&o!=null&&u(e,["parameters","maxPredictions"],o);const s=l(t,["confidenceThreshold"]);e!==void 0&&s!=null&&u(e,["parameters","confidenceThreshold"],s);const i=l(t,["maskDilation"]);e!==void 0&&i!=null&&u(e,["parameters","maskDilation"],i);const a=l(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&u(e,["parameters","binaryColorThreshold"],a);const c=l(t,["labels"]);return e!==void 0&&c!=null&&u(e,["labels"],c),n}function gN(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["source"]);o!=null&&vN(o,n);const s=l(e,["config"]);return s!=null&&mN(s,n),n}function yN(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>BI(o))),u(e,["generatedMasks"],r)}return e}function vN(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],jt(o));const s=l(t,["scribbleImage"]);return e!==void 0&&s!=null&&u(e,["instances[0]","scribble"],hN(s)),n}function K0(t){const e={},n=l(t,["languageCode"]);n!=null&&u(e,["languageCode"],n);const r=l(t,["voiceConfig"]);if(r!=null&&u(e,["voiceConfig"],r),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function xN(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],_I(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function wN(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>h)),u(e,["functionDeclarations"],p)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const s=l(t,["fileSearch"]);s!=null&&u(e,["fileSearch"],s);const i=l(t,["codeExecution"]);if(i!=null&&u(e,["codeExecution"],i),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],YI(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],jI(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function X0(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(m=>SI(m))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);const s=l(t,["computerUse"]);if(s!=null&&u(e,["computerUse"],s),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=l(t,["codeExecution"]);i!=null&&u(e,["codeExecution"],i);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const p=l(t,["urlContext"]);return p!=null&&u(e,["urlContext"],p),e}function _N(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(t,["updateTime"]);return o!=null&&u(e,["updateTime"],o),e}function SN(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(t,["updateTime"]);return o!=null&&u(e,["updateTime"],o),e}function EN(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);e!==void 0&&o!=null&&u(e,["description"],o);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&u(e,["defaultCheckpointId"],s),n}function CN(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);e!==void 0&&o!=null&&u(e,["description"],o);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&u(e,["defaultCheckpointId"],s),n}function TN(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],se(t,r));const o=l(e,["config"]);return o!=null&&EN(o,n),n}function IN(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["config"]);return o!=null&&CN(o,n),n}function NN(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&u(e,["parameters","safetySetting"],o);const s=l(t,["personGeneration"]);e!==void 0&&s!=null&&u(e,["parameters","personGeneration"],s);const i=l(t,["includeRaiReason"]);e!==void 0&&i!=null&&u(e,["parameters","includeRaiReason"],i);const a=l(t,["outputMimeType"]);e!==void 0&&a!=null&&u(e,["parameters","outputOptions","mimeType"],a);const c=l(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&u(e,["parameters","outputOptions","compressionQuality"],c);const d=l(t,["enhanceInputImage"]);e!==void 0&&d!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],d);const p=l(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const h=l(t,["labels"]);e!==void 0&&h!=null&&u(e,["labels"],h);const m=l(t,["numberOfImages"]);e!==void 0&&m!=null&&u(e,["parameters","sampleCount"],m);const g=l(t,["mode"]);return e!==void 0&&g!=null&&u(e,["parameters","mode"],g),n}function AN(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],se(t,r));const o=l(e,["image"]);o!=null&&u(n,["instances[0]","image"],jt(o));const s=l(e,["upscaleFactor"]);s!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],s);const i=l(e,["config"]);return i!=null&&NN(i,n),n}function RN(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ga(s))),u(e,["generatedImages"],o)}return e}function PN(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&u(e,["videoBytes"],rr(r));const o=l(t,["encoding"]);return o!=null&&u(e,["mimeType"],o),e}function kN(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],rr(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function MN(t){const e={},n=l(t,["image"]);n!=null&&u(e,["_self"],jt(n));const r=l(t,["maskMode"]);return r!=null&&u(e,["maskMode"],r),e}function bN(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],ya(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function DN(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],jt(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function Q0(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["encodedVideo"],rr(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["encoding"],o),e}function Z0(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["bytesBase64Encoded"],rr(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LN="Content-Type",UN="X-Server-Timeout",FN="User-Agent",Uc="x-goog-api-client",GN="1.30.0",VN=`google-genai-sdk/${GN}`,$N="v1beta1",ON="v1beta",Mm=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class BN{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:$N,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:ON,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[i,a]of Object.entries(e.queryParams))o.searchParams.append(i,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.unaryApiCall(o,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[o,s]of Object.entries(n))typeof s=="object"?r[o]=Object.assign(Object.assign({},r[o]),s):s!==void 0&&(r[o]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.streamApiCall(o,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,o){if(n&&n.timeout||o){const s=new AbortController,i=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=i}return n&&n.extraBody!==null&&HN(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await bm(o),new kc(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await bm(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return wo(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let i="";for(;;){const{done:a,value:c}=yield ve(o.read());if(a){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=s.decode(c,{stream:!0});try{const h=JSON.parse(d);if("error"in h){const m=JSON.parse(JSON.stringify(h.error)),g=m.status,_=m.code,w=`got status: ${g}. ${JSON.stringify(h)}`;if(_>=400&&_<600)throw new ha({message:w,status:_})}}catch(h){if(h.name==="ApiError")throw h}i+=d;let p=i.match(Mm);for(;p;){const h=p[1];try{const m=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ve(new kc(m)),i=i.slice(p[0].length),p=i.match(Mm)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=VN+" "+this.clientOptions.userAgentExtra;return e[FN]=n,e[Uc]=n,e[LN]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[o,s]of Object.entries(e.headers))r.append(o,s);e.timeout&&e.timeout>0&&r.append(UN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,i=await s.stat(e);o.sizeBytes=String(i.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:i.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const c={file:o},d=this.getFileName(e),p=U("upload/v1beta/files",c._url),h=await this.fetchUploadUrl(p,o.sizeBytes,o.mimeType,d,c,n==null?void 0:n.httpOptions);return s.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var o;const s=this.clientOptions.uploader,i=await s.stat(n),a=String(i.size),c=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:i.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),h={};r!=null&&r.customMetadata&&(h.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(h.chunkingConfig=r.chunkingConfig);const m=await this.fetchUploadUrl(d,a,c,p,h,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,o,s,i){var a;let c={};i?c=i:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const d=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(a=d==null?void 0:d.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function bm(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new ha({message:o,status:n}):new Error(o)}}function HN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,i){const a=Object.assign({},s);for(const c in i)if(Object.prototype.hasOwnProperty.call(i,c)){const d=i[c],p=a[c];d&&typeof d=="object"&&!Array.isArray(d)&&p&&typeof p=="object"&&!Array.isArray(p)?a[c]=r(p,d):(p&&d&&typeof p!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof p}, New type: ${typeof d}. Overwriting.`),a[c]=d)}return a}const o=r(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qN="mcp_used/unknown";let zN=!1;function ev(t){for(const e of t)if(JN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return zN}function tv(t){var e;const n=(e=t[Uc])!==null&&e!==void 0?e:"";t[Uc]=(n+` ${qN}`).trimStart()}function JN(t){return t!==null&&typeof t=="object"&&t instanceof ef}function WN(t,e=100){return wo(this,arguments,function*(){let r,o=0;for(;o<e;){const s=yield ve(t.listTools({cursor:r}));for(const i of s.tools)yield yield ve(i),o++;if(!s.nextCursor)break;r=s.nextCursor}})}class ef{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new ef(e,n)}async initialize(){var e,n,r,o;if(this.mcpTools.length>0)return;const s={},i=[];for(const p of this.mcpClients)try{for(var a=!0,c=(n=void 0,As(WN(p))),d;d=await c.next(),e=d.done,!e;a=!0){o=d.value,a=!1;const h=o;i.push(h);const m=h.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=p}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=i,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),VE(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const i=await o.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:i.isError?{error:i}:i}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function YN(t,e,n){const r=new kE;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),e(r)}class jN{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),i=QN(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let d=()=>{};const p=new Promise(x=>{d=x}),h=e.callbacks,m=function(){d({})},g=this.apiClient,_={onopen:m,onmessage:x=>{YN(g,h.onmessage,x)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(x){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(x){}},w=this.webSocketFactory.create(c,XN(i),_);w.connect(),await p;const y={setup:{model:se(this.apiClient,e.model)}};return w.send(JSON.stringify(y)),new KN(w,this.apiClient)}}class KN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=UT(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=LT(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(co.PLAY)}pause(){this.sendPlaybackControl(co.PAUSE)}stop(){this.sendPlaybackControl(co.STOP)}resetContext(){this.sendPlaybackControl(co.RESET_CONTEXT)}close(){this.conn.close()}}function XN(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function QN(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function e1(t,e,n){const r=new PE;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(t.isVertexAI()){const i=VT(s);Object.assign(r,i)}else Object.assign(r,s);e(r)}class t1{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new jN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,o,s,i,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&ev(e.config.tools)&&tv(h);const m=s1(h);if(this.apiClient.isVertexAI())p=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,p);else{const k=this.apiClient.getApiKey();let P="BidiGenerateContent",G="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",G="access_token"),p=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${P}?${G}=${k}`}let g=()=>{};const _=new Promise(k=>{g=k}),w=e.callbacks,C=function(){var k;(k=w==null?void 0:w.onopen)===null||k===void 0||k.call(w),g({})},v=this.apiClient,y={onopen:C,onmessage:k=>{e1(v,w.onmessage,k)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(k){}},x=this.webSocketFactory.create(p,o1(m),y);x.connect(),await _;let S=se(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const k=this.apiClient.getProject(),P=this.apiClient.getLocation();S=`projects/${k}/locations/${P}/`+S}let N={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Bl.AUDIO]}:e.config.responseModalities=[Bl.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(a=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&a!==void 0?a:[],T=[];for(const k of I)if(this.isCallableTool(k)){const P=k;T.push(await P.tool())}else T.push(k);T.length>0&&(e.config.tools=T);const R={model:S,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?N=DT(this.apiClient,R):N=bT(this.apiClient,R),delete N.config,x.send(JSON.stringify(N)),new r1(x,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const n1={turnComplete:!0};class r1{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Dt(n.turns),e.isVertexAI()||(r=r.map(o=>ma(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(ZN)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},n1),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:GT(e)}:n={realtimeInput:FT(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function o1(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function s1(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dm=10;function Lm(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const i of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(_o(i)){o=!0;break}if(!o)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function _o(t){return"callTool"in t&&typeof t.callTool=="function"}function i1(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>_o(o)))!==null&&r!==void 0?r:!1}function Um(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,o)=>{if(_o(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function Fm(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let l1=class extends In{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,o,s,i,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!i1(n)||Lm(n.config))return await this.generateContentInternal(c);const d=Um(n);if(d.length>0){const w=d.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let p,h;const m=Dt(c.contents),g=(s=(o=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:Dm;let _=0;for(;_<g&&(p=await this.generateContentInternal(c),!(!p.functionCalls||p.functionCalls.length===0));){const w=p.candidates[0].content,C=[];for(const v of(a=(i=n.config)===null||i===void 0?void 0:i.tools)!==null&&a!==void 0?a:[])if(_o(v)){const x=await v.callTool(p.functionCalls);C.push(...x)}_++,h={role:"user",parts:C},c.contents=Dt(c.contents),c.contents.push(w),c.contents.push(h),Fm(c.config)&&(m.push(w),m.push(h))}return Fm(c.config)&&(p.automaticFunctionCallingHistory=m),p},this.generateContentStream=async n=>{var r,o,s,i,a;if(this.maybeMoveToResponseJsonSchem(n),Lm(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const c=Um(n);if(c.length>0){const h=c.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(s=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,p=(a=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(d&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let s;const i=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((o=c==null?void 0:c.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:i.push(c);let a;return s?a={generatedImages:i,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:i,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const i={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((r=i.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new Dr(Cn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(i),i)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,s,i,a,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((i=(s=n.source)===null||s===void 0?void 0:s.video)===null||i===void 0)&&i.uri&&(!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,o;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const i=await Promise.all(s.map(async c=>_o(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(a.config.tools=i,e.config&&e.config.tools&&ev(e.config.tools)){const c=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),tv(d),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return a}async initAfcToolsMap(e){var n,r,o;const s=new Map;for(const i of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(_o(i)){const a=i,c=await a.tool();for(const d of(o=c.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,a)}}return s}async processAfcStream(e){var n,r,o;const s=(o=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Dm;let i=!1,a=0;const c=await this.initAfcToolsMap(e);return function(d,p,h){var m,g;return wo(this,arguments,function*(){for(var _,w,C,v;a<s;){i&&(a++,i=!1);const N=yield ve(d.processParamsMaybeAddMcpUsage(h)),I=yield ve(d.generateContentStreamInternal(N)),T=[],R=[];try{for(var y=!0,x=(w=void 0,As(I)),S;S=yield ve(x.next()),_=S.done,!_;y=!0){v=S.value,y=!1;const k=v;if(yield yield ve(k),k.candidates&&(!((m=k.candidates[0])===null||m===void 0)&&m.content)){R.push(k.candidates[0].content);for(const P of(g=k.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(a<s&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(P.functionCall.name)){const G=yield ve(p.get(P.functionCall.name).callTool([P.functionCall]));T.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(k){w={error:k}}finally{try{!y&&!_&&(C=x.return)&&(yield ve(C.call(x)))}finally{if(w)throw w.error}}if(T.length>0){i=!0;const k=new ss;k.candidates=[{content:{role:"user",parts:T}}],yield yield ve(k);const P=[];P.push(...R),P.push({role:"user",parts:T});const G=Dt(h.contents).concat(P);h.contents=G}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=Rm(this.apiClient,e);return a=U("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=km(p),m=new ss;return Object.assign(m,h),m})}else{const d=Am(this.apiClient,e);return a=U("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=Pm(p),m=new ss;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=Rm(this.apiClient,e);return a=U("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),i.then(function(h){return wo(this,arguments,function*(){var m,g,_,w;try{for(var C=!0,v=As(h),y;y=yield ve(v.next()),m=y.done,!m;C=!0){w=y.value,C=!1;const x=w,S=km(yield ve(x.json()));S.sdkHttpResponse={headers:x.headers};const N=new ss;Object.assign(N,S),yield yield ve(N)}}catch(x){g={error:x}}finally{try{!C&&!m&&(_=v.return)&&(yield ve(_.call(v)))}finally{if(g)throw g.error}}})})}else{const d=Am(this.apiClient,e);return a=U("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),i.then(function(h){return wo(this,arguments,function*(){var m,g,_,w;try{for(var C=!0,v=As(h),y;y=yield ve(v.next()),m=y.done,!m;C=!0){w=y.value,C=!1;const x=w,S=Pm(yield ve(x.json()));S.sdkHttpResponse={headers:x.headers};const N=new ss;Object.assign(N,S),yield yield ve(N)}}catch(x){g={error:x}}finally{try{!C&&!m&&(_=v.return)&&(yield ve(_.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=mI(this.apiClient,e);return a=U("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=yI(p),m=new fm;return Object.assign(m,h),m})}else{const d=hI(this.apiClient,e);return a=U("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=gI(p),m=new fm;return Object.assign(m,h),m})}}async generateImagesInternal(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=AI(this.apiClient,e);return a=U("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=PI(p),m=new pm;return Object.assign(m,h),m})}else{const d=NI(this.apiClient,e);return a=U("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=RI(p),m=new pm;return Object.assign(m,h),m})}}async editImageInternal(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=cI(this.apiClient,e);return s=U("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=dI(c),p=new xE;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=AN(this.apiClient,e);return s=U("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=RN(c),p=new wE;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=uN(this.apiClient,e);return s=U("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=cN(c),p=new _E;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=gN(this.apiClient,e);return s=U("{model}:predict",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=yN(c),p=new SE;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=WI(this.apiClient,e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Lc(p))}else{const d=JI(this.apiClient,e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>Dc(p))}}async listInternal(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=nN(this.apiClient,e);return a=U("{models_url}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=oN(p),m=new hm;return Object.assign(m,h),m})}else{const d=tN(this.apiClient,e);return a=U("{models_url}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=rN(p),m=new hm;return Object.assign(m,h),m})}}async update(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=IN(this.apiClient,e);return a=U("{model}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Lc(p))}else{const d=TN(this.apiClient,e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>Dc(p))}}async delete(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=iI(this.apiClient,e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=aI(p),m=new mm;return Object.assign(m,h),m})}else{const d=sI(this.apiClient,e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=lI(p),m=new mm;return Object.assign(m,h),m})}}async countTokens(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=nI(this.apiClient,e);return a=U("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=oI(p),m=new gm;return Object.assign(m,h),m})}else{const d=tI(this.apiClient,e);return a=U("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=rI(p),m=new gm;return Object.assign(m,h),m})}}async computeTokens(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=YT(this.apiClient,e);return s=U("{model}:computeTokens",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>{const d=jT(c),p=new EE;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=UI(this.apiClient,e);return a=U("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const h=DI(p),m=new Hl;return Object.assign(m,h),m})}else{const d=LI(this.apiClient,e);return a=U("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i.then(p=>{const h=bI(p),m=new Hl;return Object.assign(m,h),m})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a1 extends In{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=pE(e);return a=U("{operationName}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i}else{const d=fE(e);return a=U("{operationName}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),i}}async fetchPredictVideosOperationInternal(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=sE(e);return s=U("{resourceName}:fetchPredictOperation",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u1(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function c1(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>x1(s))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function d1(t,e,n){const r={},o=l(e,["expireTime"]);n!==void 0&&o!=null&&u(n,["expireTime"],o);const s=l(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&u(n,["newSessionExpireTime"],s);const i=l(e,["uses"]);n!==void 0&&i!=null&&u(n,["uses"],i);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&u(n,["bidiGenerateContentSetup"],v1(t,a));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),r}function f1(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],d1(t,r,n)),n}function p1(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function h1(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function m1(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function g1(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function y1(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const s=l(t,["temperature"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","temperature"],s);const i=l(t,["topP"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","topP"],i);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const p=l(t,["seed"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","seed"],p);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],Zd(h));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","thinkingConfig"],m);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);const _=l(t,["systemInstruction"]);e!==void 0&&_!=null&&u(e,["setup","systemInstruction"],c1(Ze(_)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let I=Go(w);Array.isArray(I)&&(I=I.map(T=>_1(Fo(T)))),u(e,["setup","tools"],I)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&u(e,["setup","sessionResumption"],w1(C));const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],y);const x=l(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&u(e,["setup","realtimeInputConfig"],x);const S=l(t,["contextWindowCompression"]);e!==void 0&&S!=null&&u(e,["setup","contextWindowCompression"],S);const N=l(t,["proactivity"]);return e!==void 0&&N!=null&&u(e,["setup","proactivity"],N),n}function v1(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],se(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],y1(o,n)),n}function x1(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const s=l(t,["fileData"]);s!=null&&u(e,["fileData"],p1(s));const i=l(t,["functionCall"]);i!=null&&u(e,["functionCall"],h1(i));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],u1(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const p=l(t,["thought"]);p!=null&&u(e,["thought"],p);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const m=l(t,["videoMetadata"]);return m!=null&&u(e,["videoMetadata"],m),e}function w1(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _1(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>h)),u(e,["functionDeclarations"],p)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const s=l(t,["fileSearch"]);s!=null&&u(e,["fileSearch"],s);const i=l(t,["codeExecution"]);if(i!=null&&u(e,["codeExecution"],i),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],m1(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],g1(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function S1(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(s=>`${n}.${s}`);e.push(...o)}else e.push(n)}return e.join(",")}function E1(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const s=S1(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(d=>i.includes(d)?`generationConfig.${d}`:d));const c=[];s&&c.push(s),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class C1 extends In{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=f1(this.apiClient,e);s=U("auth_tokens",a._url),i=a._query,delete a.config,delete a._url,delete a._query;const c=E1(a,e.config);return o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T1(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&u(e,["displayName"],r),n}function I1(t){const e={},n=l(t,["config"]);return n!=null&&T1(n,e),e}function N1(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&u(e,["_query","force"],r),n}function A1(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&N1(r,e),e}function R1(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function P1(t,e){const n={},r=l(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),u(e,["customMetadata"],s)}const o=l(t,["chunkingConfig"]);return e!==void 0&&o!=null&&u(e,["chunkingConfig"],o),n}function k1(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const s=l(t,["error"]);s!=null&&u(e,["error"],s);const i=l(t,["response"]);return i!=null&&u(e,["response"],b1(i)),e}function M1(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);const r=l(t,["fileName"]);r!=null&&u(e,["fileName"],r);const o=l(t,["config"]);return o!=null&&P1(o,e),e}function b1(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function D1(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function L1(t){const e={},n=l(t,["config"]);return n!=null&&D1(n,e),e}function U1(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),u(e,["fileSearchStores"],s)}return e}function F1(t,e){const n={},r=l(t,["mimeType"]);e!==void 0&&r!=null&&u(e,["mimeType"],r);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=l(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),u(e,["customMetadata"],a)}const i=l(t,["chunkingConfig"]);return e!==void 0&&i!=null&&u(e,["chunkingConfig"],i),n}function G1(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);const r=l(t,["config"]);return r!=null&&F1(r,e),e}function V1(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $1(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&u(e,["_query","force"],r),n}function O1(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&$1(r,e),e}function B1(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function H1(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function q1(t){const e={},n=l(t,["parent"]);n!=null&&u(e,["_url","parent"],n);const r=l(t,["config"]);return r!=null&&H1(r,e),e}function z1(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(i=>i)),u(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J1 extends In{constructor(e){super(),this.apiClient=e,this.list=async n=>new Dr(Cn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=B1(e);return s=U("{name}",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=O1(e);o=U("{name}",i._url),s=i._query,delete i._url,delete i._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=q1(e);return s=U("{parent}/documents",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=z1(c),p=new CE;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W1 extends In{constructor(e,n=new J1(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Dr(Cn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=I1(e);return s=U("fileSearchStores",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=R1(e);return s=U("{name}",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const i=A1(e);o=U("{name}",i._url),s=i._query,delete i._url,delete i._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(i),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=L1(e);return s=U("fileSearchStores",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=U1(c),p=new TE;return Object.assign(p,d),p})}}async uploadToFileSearchStoreInternal(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=G1(e);return s=U("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=V1(c),p=new IE;return Object.assign(p,d),p})}}async importFile(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=M1(e);return s=U("{file_search_store_name}:importFile",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=k1(c),p=new Yd;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y1(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function j1(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function K1(t,e,n){const r={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=l(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&u(e,["displayName"],o),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=l(t,["epochCount"]);e!==void 0&&s!=null&&u(e,["tuningTask","hyperparameters","epochCount"],s);const i=l(t,["learningRateMultiplier"]);if(i!=null&&u(r,["tuningTask","hyperparameters","learningRateMultiplier"],i),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=l(t,["batchSize"]);e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","batchSize"],a);const c=l(t,["learningRate"]);if(e!==void 0&&c!=null&&u(e,["tuningTask","hyperparameters","learningRate"],c),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function X1(t,e,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec"],Gm(g))}else if(o==="PREFERENCE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec"],Gm(g))}const s=l(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&u(e,["tunedModelDisplayName"],s);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);let a=l(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let p=l(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(p==="PREFERENCE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=l(t,["labels"]);e!==void 0&&h!=null&&u(e,["labels"],h);const m=l(t,["beta"]);return e!==void 0&&m!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function Q1(t,e){const n={},r=l(t,["baseModel"]);r!=null&&u(n,["baseModel"],r);const o=l(t,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const s=l(t,["trainingDataset"]);s!=null&&uA(s);const i=l(t,["config"]);return i!=null&&K1(i,n),n}function Z1(t,e){const n={},r=l(t,["baseModel"]);r!=null&&u(n,["baseModel"],r);const o=l(t,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const s=l(t,["trainingDataset"]);s!=null&&cA(s,n,e);const i=l(t,["config"]);return i!=null&&X1(i,n,e),n}function eA(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function tA(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function nA(t,e,n){const r={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const s=l(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const i=l(t,["filter"]);return e!==void 0&&i!=null&&u(e,["_query","filter"],i),r}function rA(t,e,n){const r={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const s=l(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const i=l(t,["filter"]);return e!==void 0&&i!=null&&u(e,["_query","filter"],i),r}function oA(t,e){const n={},r=l(t,["config"]);return r!=null&&nA(r,n),n}function sA(t,e){const n={},r=l(t,["config"]);return r!=null&&rA(r,n),n}function iA(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const s=l(t,["tunedModels"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>nv(a))),u(n,["tuningJobs"],i)}return n}function lA(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const s=l(t,["tuningJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(a=>Fc(a))),u(n,["tuningJobs"],i)}return n}function aA(t,e){const n={},r=l(t,["name"]);r!=null&&u(n,["model"],r);const o=l(t,["name"]);return o!=null&&u(n,["endpoint"],o),n}function uA(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=l(t,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),u(n,["examples","examples"],o)}return n}function cA(t,e,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const i=l(t,["gcsUri"]);e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(o==="PREFERENCE_TUNING"){const i=l(t,["gcsUri"]);e!==void 0&&i!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],i)}let s=l(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const i=l(t,["vertexDatasetResource"]);e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i)}else if(s==="PREFERENCE_TUNING"){const i=l(t,["vertexDatasetResource"]);e!==void 0&&i!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],i)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function nv(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const s=l(t,["state"]);s!=null&&u(n,["state"],F0(s));const i=l(t,["createTime"]);i!=null&&u(n,["createTime"],i);const a=l(t,["tuningTask","startTime"]);a!=null&&u(n,["startTime"],a);const c=l(t,["tuningTask","completeTime"]);c!=null&&u(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);const p=l(t,["description"]);p!=null&&u(n,["description"],p);const h=l(t,["baseModel"]);h!=null&&u(n,["baseModel"],h);const m=l(t,["_self"]);return m!=null&&u(n,["tunedModel"],aA(m)),n}function Fc(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const s=l(t,["state"]);s!=null&&u(n,["state"],F0(s));const i=l(t,["createTime"]);i!=null&&u(n,["createTime"],i);const a=l(t,["startTime"]);a!=null&&u(n,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);const p=l(t,["error"]);p!=null&&u(n,["error"],p);const h=l(t,["description"]);h!=null&&u(n,["description"],h);const m=l(t,["baseModel"]);m!=null&&u(n,["baseModel"],m);const g=l(t,["tunedModel"]);g!=null&&u(n,["tunedModel"],g);const _=l(t,["preTunedModel"]);_!=null&&u(n,["preTunedModel"],_);const w=l(t,["supervisedTuningSpec"]);w!=null&&u(n,["supervisedTuningSpec"],w);const C=l(t,["preferenceOptimizationSpec"]);C!=null&&u(n,["preferenceOptimizationSpec"],C);const v=l(t,["tuningDataStats"]);v!=null&&u(n,["tuningDataStats"],v);const y=l(t,["encryptionSpec"]);y!=null&&u(n,["encryptionSpec"],y);const x=l(t,["partnerModelTuningSpec"]);x!=null&&u(n,["partnerModelTuningSpec"],x);const S=l(t,["customBaseModel"]);S!=null&&u(n,["customBaseModel"],S);const N=l(t,["experiment"]);N!=null&&u(n,["experiment"],N);const I=l(t,["labels"]);I!=null&&u(n,["labels"],I);const T=l(t,["outputUri"]);T!=null&&u(n,["outputUri"],T);const R=l(t,["pipelineJob"]);R!=null&&u(n,["pipelineJob"],R);const k=l(t,["serviceAccount"]);k!=null&&u(n,["serviceAccount"],k);const P=l(t,["tunedModelDisplayName"]);P!=null&&u(n,["tunedModelDisplayName"],P);const G=l(t,["veoTuningSpec"]);return G!=null&&u(n,["veoTuningSpec"],G),n}function dA(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const s=l(t,["metadata"]);s!=null&&u(n,["metadata"],s);const i=l(t,["done"]);i!=null&&u(n,["done"],i);const a=l(t,["error"]);return a!=null&&u(n,["error"],a),n}function Gm(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["validationDatasetUri"],r);const o=l(t,["vertexDatasetResource"]);return o!=null&&u(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fA extends In{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Dr(Cn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let i="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?i=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(i=s.name.split("/operations/")[0]),{name:i,state:Pc.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=tA(e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>Fc(p))}else{const d=eA(e);return a=U("{name}",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>nv(p))}}async listInternal(e){var n,r,o,s;let i,a="",c={};if(this.apiClient.isVertexAI()){const d=sA(e);return a=U("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=lA(p),m=new ym;return Object.assign(m,h),m})}else{const d=oA(e);return a=U("tunedModels",d._url),c=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:p.headers},m})),i.then(p=>{const h=iA(p),m=new ym;return Object.assign(m,h),m})}}async cancel(e){var n,r,o,s;let i="",a={};if(this.apiClient.isVertexAI()){const c=j1(e);i=U("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=Y1(e);i=U("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI()){const a=Z1(e,e);return s=U("tuningJobs",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>Fc(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let o,s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Q1(e);return s=U("tunedModels",a._url),i=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:c.headers},p})),o.then(c=>dA(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pA{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const hA=1024*1024*8,mA=3,gA=1e3,yA=2,zl="x-goog-upload-status";async function vA(t,e,n){var r;const o=await rv(t,e,n),s=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[zl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function xA(t,e,n){var r;const o=await rv(t,e,n),s=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[zl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const i=k0(s),a=new jd;return Object.assign(a,i),a}async function rv(t,e,n){var r,o;let s=0,i=0,a=new kc(new Response),c="upload";for(s=t.size;i<s;){const d=Math.min(hA,s-i),p=t.slice(i,i+d);i+d>=s&&(c+=", finalize");let h=0,m=gA;for(;h<mA&&(a=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(i),"Content-Length":String(d)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[zl]));)h++,await _A(m),m=m*yA;if(i+=d,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[zl])!=="active")break;if(s<=i)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function wA(t){return{size:t.size,type:t.type}}function _A(t){return new Promise(e=>setTimeout(e,t))}class SA{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vA(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xA(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await wA(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EA{create(e,n,r){return new CA(e,n,r)}}class CA{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vm="x-goog-api-key";class TA{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Vm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Vm,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IA="gl-node/";class tf{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=rE(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const o=new TA(this.apiKey);this.apiClient=new BN({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:IA+"web",uploader:new SA,downloader:new pA}),this.models=new l1(this.apiClient),this.live=new t1(this.apiClient,o,new EA),this.batches=new MC(this.apiClient),this.chats=new pT(this.models,this.apiClient),this.caches=new cT(this.apiClient),this.files=new ET(this.apiClient),this.operations=new a1(this.apiClient),this.authTokens=new C1(this.apiClient),this.tunings=new fA(this.apiClient),this.fileSearchStores=new W1(this.apiClient)}}const Gc="RFC3986",Vc={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},NA="RFC1738",AA=Array.isArray,tn=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),vu=1024,RA=(t,e,n,r,o)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let i="";for(let a=0;a<s.length;a+=vu){const c=s.length>=vu?s.slice(a,a+vu):s,d=[];for(let p=0;p<c.length;++p){let h=c.charCodeAt(p);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||o===NA&&(h===40||h===41)){d[d.length]=c.charAt(p);continue}if(h<128){d[d.length]=tn[h];continue}if(h<2048){d[d.length]=tn[192|h>>6]+tn[128|h&63];continue}if(h<55296||h>=57344){d[d.length]=tn[224|h>>12]+tn[128|h>>6&63]+tn[128|h&63];continue}p+=1,h=65536+((h&1023)<<10|c.charCodeAt(p)&1023),d[d.length]=tn[240|h>>18]+tn[128|h>>12&63]+tn[128|h>>6&63]+tn[128|h&63]}i+=d.join("")}return i};function PA(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function $m(t,e){if(AA(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const kA=Object.prototype.hasOwnProperty,ov={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},rn=Array.isArray,MA=Array.prototype.push,sv=function(t,e){MA.apply(t,rn(e)?e:[e])},bA=Date.prototype.toISOString,be={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:RA,encodeValuesOnly:!1,format:Gc,formatter:Vc[Gc],indices:!1,serializeDate(t){return bA.call(t)},skipNulls:!1,strictNullHandling:!1};function DA(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const xu={};function iv(t,e,n,r,o,s,i,a,c,d,p,h,m,g,_,w,C,v){let y=t,x=v,S=0,N=!1;for(;(x=x.get(xu))!==void 0&&!N;){const P=x.get(t);if(S+=1,typeof P<"u"){if(P===S)throw new RangeError("Cyclic object value");N=!0}typeof x.get(xu)>"u"&&(S=0)}if(typeof d=="function"?y=d(e,y):y instanceof Date?y=m==null?void 0:m(y):n==="comma"&&rn(y)&&(y=$m(y,function(P){return P instanceof Date?m==null?void 0:m(P):P})),y===null){if(s)return c&&!w?c(e,be.encoder,C,"key",g):e;y=""}if(DA(y)||PA(y)){if(c){const P=w?e:c(e,be.encoder,C,"key",g);return[(_==null?void 0:_(P))+"="+(_==null?void 0:_(c(y,be.encoder,C,"value",g)))]}return[(_==null?void 0:_(e))+"="+(_==null?void 0:_(String(y)))]}const I=[];if(typeof y>"u")return I;let T;if(n==="comma"&&rn(y))w&&c&&(y=$m(y,c)),T=[{value:y.length>0?y.join(",")||null:void 0}];else if(rn(d))T=d;else{const P=Object.keys(y);T=p?P.sort(p):P}const R=a?String(e).replace(/\./g,"%2E"):String(e),k=r&&rn(y)&&y.length===1?R+"[]":R;if(o&&rn(y)&&y.length===0)return k+"[]";for(let P=0;P<T.length;++P){const G=T[P],z=typeof G=="object"&&typeof G.value<"u"?G.value:y[G];if(i&&z===null)continue;const le=h&&a?G.replace(/\./g,"%2E"):G,Ie=rn(y)?typeof n=="function"?n(k,le):k:k+(h?"."+le:"["+le+"]");v.set(t,S);const Pe=new WeakMap;Pe.set(xu,v),sv(I,iv(z,Ie,n,r,o,s,i,a,n==="comma"&&w&&rn(y)?null:c,d,p,h,m,g,_,w,C,Pe))}return I}function LA(t=be){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||be.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Gc;if(typeof t.format<"u"){if(!kA.call(Vc,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=Vc[n];let o=be.filter;(typeof t.filter=="function"||rn(t.filter))&&(o=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in ov?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=be.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:be.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:be.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:be.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:be.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?be.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:be.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:be.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:be.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:be.encodeValuesOnly,filter:o,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:be.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:be.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:be.strictNullHandling}}function UA(t,e={}){let n=t;const r=LA(e);let o,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):rn(r.filter)&&(s=r.filter,o=s);const i=[];if(typeof n!="object"||n===null)return"";const a=ov[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;o||(o=Object.keys(n)),r.sort&&o.sort(r.sort);const d=new WeakMap;for(let m=0;m<o.length;++m){const g=o[m];r.skipNulls&&n[g]===null||sv(i,iv(n[g],g,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const p=i.join(r.delimiter);let h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),p.length>0?h+p:""}const jr="4.104.0";let Om=!1,Rs,lv,av,$c,uv,cv,dv,fv,pv;function FA(t,e={auto:!1}){if(Om)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(Rs)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${Rs}'\``);Om=e.auto,Rs=t.kind,lv=t.fetch,av=t.FormData,$c=t.File,uv=t.ReadableStream,cv=t.getMultipartRequestOptions,dv=t.getDefaultAgent,fv=t.fileFromPath,pv=t.isFsReadStream}class GA{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function VA({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,o,s;try{n=fetch,r=Request,o=Response,s=Headers}catch(i){throw new Error(`this environment is missing the following Web Fetch API type: ${i.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:o,Headers:s,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(i,a)=>({...a,body:new GA(i)}),getDefaultAgent:i=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:i=>!1}}const hv=()=>{Rs||FA(VA(),{auto:!0})};hv();class q extends Error{}class Ye extends q{constructor(e,n,r,o){super(`${Ye.makeMessage(e,n,r)}`),this.status=e,this.headers=o,this.request_id=o==null?void 0:o["x-request-id"],this.error=n;const s=n;this.code=s==null?void 0:s.code,this.param=s==null?void 0:s.param,this.type=s==null?void 0:s.type}static makeMessage(e,n,r){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,r,o){if(!e||!o)return new va({message:r,cause:Bc(n)});const s=n==null?void 0:n.error;return e===400?new mv(e,s,r,o):e===401?new gv(e,s,r,o):e===403?new yv(e,s,r,o):e===404?new vv(e,s,r,o):e===409?new xv(e,s,r,o):e===422?new wv(e,s,r,o):e===429?new _v(e,s,r,o):e>=500?new Sv(e,s,r,o):new Ye(e,s,r,o)}}class Mt extends Ye{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class va extends Ye{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class nf extends va{constructor({message:e}={}){super({message:e??"Request timed out."})}}class mv extends Ye{}class gv extends Ye{}class yv extends Ye{}class vv extends Ye{}class xv extends Ye{}class wv extends Ye{}class _v extends Ye{}class Sv extends Ye{}class Ev extends q{constructor(){super("Could not parse response content as the length limit was reached")}}class Cv extends q{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Fi=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},fr=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},xt;class xa{constructor(){xt.set(this,void 0),this.buffer=new Uint8Array,Fi(this,xt,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const o=[];let s;for(;(s=$A(this.buffer,fr(this,xt,"f")))!=null;){if(s.carriage&&fr(this,xt,"f")==null){Fi(this,xt,s.index,"f");continue}if(fr(this,xt,"f")!=null&&(s.index!==fr(this,xt,"f")+1||s.carriage)){o.push(this.decodeText(this.buffer.slice(0,fr(this,xt,"f")-1))),this.buffer=this.buffer.slice(fr(this,xt,"f")),Fi(this,xt,null,"f");continue}const i=fr(this,xt,"f")!==null?s.preceding-1:s.preceding,a=this.decodeText(this.buffer.slice(0,i));o.push(a),this.buffer=this.buffer.slice(s.index),Fi(this,xt,null,"f")}return o}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new q(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new q(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new q("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}xt=new WeakMap;xa.NEWLINE_CHARS=new Set([`
`,"\r"]);xa.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function $A(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function OA(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function Tv(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class ln{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const i of BA(e,n))if(!s){if(i.data.startsWith("[DONE]")){s=!0;continue}if(i.event===null||i.event.startsWith("response.")||i.event.startsWith("transcript.")){let a;try{a=JSON.parse(i.data)}catch(c){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),c}if(a&&a.error)throw new Ye(void 0,a.error,void 0,Mv(e.headers));yield a}else{let a;try{a=JSON.parse(i.data)}catch(c){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),c}if(i.event=="error")throw new Ye(void 0,a.error,a.message,void 0);yield{event:i.event,data:a}}}s=!0}catch(i){if(i instanceof Error&&i.name==="AbortError")return;throw i}finally{s||n.abort()}}return new ln(o,n)}static fromReadableStream(e,n){let r=!1;async function*o(){const i=new xa,a=Tv(e);for await(const c of a)for(const d of i.decode(c))yield d;for(const c of i.flush())yield c}async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const a of o())i||a&&(yield JSON.parse(a));i=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{i||n.abort()}}return new ln(s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),o=s=>({next:()=>{if(s.length===0){const i=r.next();e.push(i),n.push(i)}return s.shift()}});return[new ln(()=>o(e),this.controller),new ln(()=>o(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new uv({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:s,done:i}=await n.next();if(i)return o.close();const a=r.encode(JSON.stringify(s)+`
`);o.enqueue(a)}catch(s){o.error(s)}},async cancel(){var o;await((o=n.return)==null?void 0:o.call(n))}})}}async function*BA(t,e){if(!t.body)throw e.abort(),new q("Attempted to iterate over a response with no body");const n=new qA,r=new xa,o=Tv(t.body);for await(const s of HA(o))for(const i of r.decode(s)){const a=n.decode(i);a&&(yield a)}for(const s of r.flush()){const i=n.decode(s);i&&(yield i)}}async function*HA(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let o=new Uint8Array(e.length+r.length);o.set(e),o.set(r,e.length),e=o;let s;for(;(s=OA(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}class qA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,o]=zA(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function zA(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const Iv=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",Nv=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&wa(t),wa=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",JA=t=>Nv(t)||Iv(t)||pv(t);async function Av(t,e,n){var o;if(t=await t,Nv(t))return t;if(Iv(t)){const s=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const i=wa(s)?[await s.arrayBuffer()]:[s];return new $c(i,e,n)}const r=await WA(t);if(e||(e=jA(t)??"unknown_file"),!(n!=null&&n.type)){const s=(o=r[0])==null?void 0:o.type;typeof s=="string"&&(n={...n,type:s})}return new $c(r,e,n)}async function WA(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(wa(t))e.push(await t.arrayBuffer());else if(KA(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${YA(t)}`);return e}function YA(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function jA(t){var e;return wu(t.name)||wu(t.filename)||((e=wu(t.path))==null?void 0:e.split(/[\\/]/).pop())}const wu=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},KA=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Bm=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",kr=async t=>{const e=await XA(t.body);return cv(e,t)},XA=async t=>{const e=new av;return await Promise.all(Object.entries(t||{}).map(([n,r])=>Oc(e,n,r))),e},Oc=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(JA(n)){const r=await Av(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Oc(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,o])=>Oc(t,`${e}[${r}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var So={},QA=function(t,e,n,r,o){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},ZA=function(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Gi;hv();async function Rv(t){var i;const{response:e}=t;if(t.options.stream)return Xn("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):ln.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type"),r=(i=n==null?void 0:n.split(";")[0])==null?void 0:i.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const a=await e.json();return Xn("response",e.status,e.url,e.headers,a),Pv(a,e)}const s=await e.text();return Xn("response",e.status,e.url,e.headers,s),s}function Pv(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class _a extends Promise{constructor(e,n=Rv){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new _a(this.responsePromise,async n=>Pv(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class eR{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:o,fetch:s}){this.baseURL=e,this.maxRetries=_u("maxRetries",n),this.timeout=_u("timeout",r),this.httpAgent=o,this.fetch=s??lv}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...sR(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${uR()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async o=>{const s=o&&wa(o==null?void 0:o.body)?new DataView(await o.body.arrayBuffer()):(o==null?void 0:o.body)instanceof DataView?o.body:(o==null?void 0:o.body)instanceof ArrayBuffer?new DataView(o.body):o&&ArrayBuffer.isView(o==null?void 0:o.body)?new DataView(o.body.buffer):o==null?void 0:o.body;return{method:e,path:n,...o,body:s}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var w;const r={...e},{method:o,path:s,query:i,headers:a={}}=r,c=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:Bm(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,d=this.calculateContentLength(c),p=this.buildURL(s,i);"timeout"in r&&_u("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const h=r.httpAgent??this.httpAgent??dv(p),m=r.timeout+1e3;typeof((w=h==null?void 0:h.options)==null?void 0:w.timeout)=="number"&&m>(h.options.timeout??0)&&(h.options.timeout=m),this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const g=this.buildHeaders({options:r,headers:a,contentLength:d,retryCount:n});return{req:{method:o,...c&&{body:c},headers:g,...h&&{agent:h},signal:r.signal??null},url:p,timeout:r.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:o}){const s={};r&&(s["content-length"]=r);const i=this.defaultHeaders(e);return Jm(s,i),Jm(s,n),Bm(e.body)&&Rs!=="node"&&delete s["content-type"],$i(i,"x-stainless-retry-count")===void 0&&$i(n,"x-stainless-retry-count")===void 0&&(s["x-stainless-retry-count"]=String(o)),$i(i,"x-stainless-timeout")===void 0&&$i(n,"x-stainless-timeout")===void 0&&e.timeout&&(s["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(s,n),s}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,o){return Ye.generate(e,n,r,o)}request(e,n=null){return new _a(this.makeRequest(e,n))}async makeRequest(e,n){var h,m;const r=await e,o=r.maxRetries??this.maxRetries;n==null&&(n=o),await this.prepareOptions(r);const{req:s,url:i,timeout:a}=this.buildRequest(r,{retryCount:o-n});if(await this.prepareRequest(s,{url:i,options:r}),Xn("request",i,r,s.headers),(h=r.signal)!=null&&h.aborted)throw new Mt;const c=new AbortController,d=await this.fetchWithTimeout(i,s,a,c).catch(Bc);if(d instanceof Error){if((m=r.signal)!=null&&m.aborted)throw new Mt;if(n)return this.retryRequest(r,n);throw d.name==="AbortError"?new nf:new va({cause:d})}const p=Mv(d.headers);if(!d.ok){if(n&&this.shouldRetry(d)){const y=`retrying, ${n} attempts remaining`;return Xn(`response (error; ${y})`,d.status,i,p),this.retryRequest(r,n,p)}const g=await d.text().catch(y=>Bc(y).message),_=iR(g),w=_?void 0:g;throw Xn(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,d.status,i,p,w),this.makeStatusError(d.status,_,w,p)}return{response:d,options:r,controller:c}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new tR(this,r,e)}buildURL(e,n){const r=aR(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return bv(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new q(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,o){const{signal:s,...i}=n||{};s&&s.addEventListener("abort",()=>o.abort());const a=setTimeout(()=>o.abort(),r),c={signal:o.signal,...i};return c.method&&(c.method=c.method.toUpperCase()),this.fetch.call(void 0,e,c).finally(()=>{clearTimeout(a)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let o;const s=r==null?void 0:r["retry-after-ms"];if(s){const a=parseFloat(s);Number.isNaN(a)||(o=a)}const i=r==null?void 0:r["retry-after"];if(i&&!o){const a=parseFloat(i);Number.isNaN(a)?o=Date.parse(i)-Date.now():o=a*1e3}if(!(o&&0<=o&&o<60*1e3)){const a=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,a)}return await oi(o),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,i=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return i*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${jr}`}}class kv{constructor(e,n,r,o){Gi.set(this,void 0),QA(this,Gi,e),this.options=o,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new q("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[o,s]of r)e.url.searchParams.set(o,s);n.query=void 0,n.path=e.url.toString()}return await ZA(this,Gi,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Gi=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class tR extends _a{constructor(e,n,r){super(n,async o=>new r(e,o.response,await Rv(o),o.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const Mv=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),nR={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Te=t=>typeof t=="object"&&t!==null&&!bv(t)&&Object.keys(t).every(e=>Dv(nR,e)),rR=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jr,"X-Stainless-OS":qm(Deno.build.os),"X-Stainless-Arch":Hm(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jr,"X-Stainless-OS":qm(process.platform),"X-Stainless-Arch":Hm(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=oR();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function oR(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const o=r[1]||0,s=r[2]||0,i=r[3]||0;return{browser:e,version:`${o}.${s}.${i}`}}}return null}const Hm=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",qm=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let zm;const sR=()=>zm??(zm=rR()),iR=t=>{try{return JSON.parse(t)}catch{return}},lR=/^[a-z][a-z0-9+.-]*:/i,aR=t=>lR.test(t),oi=t=>new Promise(e=>setTimeout(e,t)),_u=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new q(`${t} must be an integer`);if(e<0)throw new q(`${t} must be a positive integer`);return e},Bc=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},Vi=t=>{var e,n,r,o;if(typeof process<"u")return((e=So==null?void 0:So[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(o=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:o.trim()};function bv(t){if(!t)return!0;for(const e in t)return!1;return!0}function Dv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Jm(t,e){for(const n in e){if(!Dv(e,n))continue;const r=n.toLowerCase();if(!r)continue;const o=e[n];o===null?delete t[r]:o!==void 0&&(t[r]=o)}}const Wm=new Set(["authorization","api-key"]);function Xn(t,...e){if(typeof process<"u"&&(So==null?void 0:So.DEBUG)==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const s={...r,headers:{...r.headers}};for(const i in r.headers)Wm.has(i.toLowerCase())&&(s.headers[i]="REDACTED");return s}let o=null;for(const s in r)Wm.has(s.toLowerCase())&&(o??(o={...r}),o[s]="REDACTED");return o??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const uR=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),cR=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",dR=t=>typeof(t==null?void 0:t.get)=="function",$i=(t,e)=>{var r;const n=e.toLowerCase();if(dR(t)){const o=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(s,i,a)=>i+a.toUpperCase());for(const s of[e,n,e.toUpperCase(),o]){const i=t.get(s);if(i)return i}}for(const[o,s]of Object.entries(t))if(o.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${e} header, using the first entry.`),s[0]):s},fR=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.charCodeAt(o);return Array.from(new Float32Array(r.buffer))}};function Su(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class Sa extends kv{constructor(e,n,r,o){super(e,n,r,o),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Ue extends kv{constructor(e,n,r,o){super(e,n,r,o),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const n=(r=e[e.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class W{constructor(e){this._client=e}}let Lv=class extends W{list(e,n={},r){return Te(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,pR,{query:n,...r})}},Ea=class extends W{constructor(){super(...arguments),this.messages=new Lv(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return Te(e)?this.list({},e):this._client.getAPIList("/chat/completions",Ca,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class Ca extends Ue{}class pR extends Ue{}Ea.ChatCompletionsPage=Ca;Ea.Messages=Lv;let Ta=class extends W{constructor(){super(...arguments),this.completions=new Ea(this._client)}};Ta.Completions=Ea;Ta.ChatCompletionsPage=Ca;class Uv extends W{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class Fv extends W{create(e,n){return this._client.post("/audio/transcriptions",kr({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}}))}}class Gv extends W{create(e,n){return this._client.post("/audio/translations",kr({body:e,...n,__metadata:{model:e.model}}))}}class si extends W{constructor(){super(...arguments),this.transcriptions=new Fv(this._client),this.translations=new Gv(this._client),this.speech=new Uv(this._client)}}si.Transcriptions=Fv;si.Translations=Gv;si.Speech=Uv;class rf extends W{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return Te(e)?this.list({},e):this._client.getAPIList("/batches",of,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class of extends Ue{}rf.BatchesPage=of;var $t=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},_e=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Hc,al,ul,fs,ps,cl,hs,pn,ms,Jl,Wl,Kr,Vv;class sf{constructor(){Hc.add(this),this.controller=new AbortController,al.set(this,void 0),ul.set(this,()=>{}),fs.set(this,()=>{}),ps.set(this,void 0),cl.set(this,()=>{}),hs.set(this,()=>{}),pn.set(this,{}),ms.set(this,!1),Jl.set(this,!1),Wl.set(this,!1),Kr.set(this,!1),$t(this,al,new Promise((e,n)=>{$t(this,ul,e,"f"),$t(this,fs,n,"f")}),"f"),$t(this,ps,new Promise((e,n)=>{$t(this,cl,e,"f"),$t(this,hs,n,"f")}),"f"),_e(this,al,"f").catch(()=>{}),_e(this,ps,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},_e(this,Hc,"m",Vv).bind(this))},0)}_connected(){this.ended||(_e(this,ul,"f").call(this),this._emit("connect"))}get ended(){return _e(this,ms,"f")}get errored(){return _e(this,Jl,"f")}get aborted(){return _e(this,Wl,"f")}abort(){this.controller.abort()}on(e,n){return(_e(this,pn,"f")[e]||(_e(this,pn,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=_e(this,pn,"f")[e];if(!r)return this;const o=r.findIndex(s=>s.listener===n);return o>=0&&r.splice(o,1),this}once(e,n){return(_e(this,pn,"f")[e]||(_e(this,pn,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{$t(this,Kr,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){$t(this,Kr,!0,"f"),await _e(this,ps,"f")}_emit(e,...n){if(_e(this,ms,"f"))return;e==="end"&&($t(this,ms,!0,"f"),_e(this,cl,"f").call(this));const r=_e(this,pn,"f")[e];if(r&&(_e(this,pn,"f")[e]=r.filter(o=>!o.once),r.forEach(({listener:o})=>o(...n))),e==="abort"){const o=n[0];!_e(this,Kr,"f")&&!(r!=null&&r.length)&&Promise.reject(o),_e(this,fs,"f").call(this,o),_e(this,hs,"f").call(this,o),this._emit("end");return}if(e==="error"){const o=n[0];!_e(this,Kr,"f")&&!(r!=null&&r.length)&&Promise.reject(o),_e(this,fs,"f").call(this,o),_e(this,hs,"f").call(this,o),this._emit("end")}}_emitFinal(){}}al=new WeakMap,ul=new WeakMap,fs=new WeakMap,ps=new WeakMap,cl=new WeakMap,hs=new WeakMap,pn=new WeakMap,ms=new WeakMap,Jl=new WeakMap,Wl=new WeakMap,Kr=new WeakMap,Hc=new WeakSet,Vv=function(e){if($t(this,Jl,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Mt),e instanceof Mt)return $t(this,Wl,!0,"f"),this._emit("abort",e);if(e instanceof q)return this._emit("error",e);if(e instanceof Error){const n=new q(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new q(String(e)))};var $=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},vt=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},qe,qc,on,dl,Bt,_r,fo,mr,Yl,wt,fl,pl,Ps,gs,ys,Ym,jm,Km,Xm,Qm,Zm,eg;class zt extends sf{constructor(){super(...arguments),qe.add(this),qc.set(this,[]),on.set(this,{}),dl.set(this,{}),Bt.set(this,void 0),_r.set(this,void 0),fo.set(this,void 0),mr.set(this,void 0),Yl.set(this,void 0),wt.set(this,void 0),fl.set(this,void 0),pl.set(this,void 0),Ps.set(this,void 0)}[(qc=new WeakMap,on=new WeakMap,dl=new WeakMap,Bt=new WeakMap,_r=new WeakMap,fo=new WeakMap,mr=new WeakMap,Yl=new WeakMap,wt=new WeakMap,fl=new WeakMap,pl=new WeakMap,Ps=new WeakMap,qe=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",o=>{const s=n.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(const s of n)s.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(const s of n)s.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,i)=>n.push({resolve:s,reject:i})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new zt;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const o=ln.fromReadableStream(e,this.controller);for await(const i of o)$(this,qe,"m",gs).call(this,i);if((s=o.controller.signal)!=null&&s.aborted)throw new Mt;return this._addRun($(this,qe,"m",ys).call(this))}toReadableStream(){return new ln(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,o,s){const i=new zt;return i._run(()=>i._runToolAssistantStream(e,n,r,o,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,n,r,o,s){var d;const i=s==null?void 0:s.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...o,stream:!0},c=await e.submitToolOutputs(n,r,a,{...s,signal:this.controller.signal});this._connected();for await(const p of c)$(this,qe,"m",gs).call(this,p);if((d=c.controller.signal)!=null&&d.aborted)throw new Mt;return this._addRun($(this,qe,"m",ys).call(this))}static createThreadAssistantStream(e,n,r){const o=new zt;return o._run(()=>o._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}static createAssistantStream(e,n,r,o){const s=new zt;return s._run(()=>s._runAssistantStream(e,n,r,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return $(this,fl,"f")}currentRun(){return $(this,pl,"f")}currentMessageSnapshot(){return $(this,Bt,"f")}currentRunStepSnapshot(){return $(this,Ps,"f")}async finalRunSteps(){return await this.done(),Object.values($(this,on,"f"))}async finalMessages(){return await this.done(),Object.values($(this,dl,"f"))}async finalRun(){if(await this.done(),!$(this,_r,"f"))throw Error("Final run was not received.");return $(this,_r,"f")}async _createThreadAssistantStream(e,n,r){var a;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const s={...n,stream:!0},i=await e.createAndRun(s,{...r,signal:this.controller.signal});this._connected();for await(const c of i)$(this,qe,"m",gs).call(this,c);if((a=i.controller.signal)!=null&&a.aborted)throw new Mt;return this._addRun($(this,qe,"m",ys).call(this))}async _createAssistantStream(e,n,r,o){var c;const s=o==null?void 0:o.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...r,stream:!0},a=await e.create(n,i,{...o,signal:this.controller.signal});this._connected();for await(const d of a)$(this,qe,"m",gs).call(this,d);if((c=a.controller.signal)!=null&&c.aborted)throw new Mt;return this._addRun($(this,qe,"m",ys).call(this))}static accumulateDelta(e,n){for(const[r,o]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=o;continue}let s=e[r];if(s==null){e[r]=o;continue}if(r==="index"||r==="type"){e[r]=o;continue}if(typeof s=="string"&&typeof o=="string")s+=o;else if(typeof s=="number"&&typeof o=="number")s+=o;else if(Su(s)&&Su(o))s=this.accumulateDelta(s,o);else if(Array.isArray(s)&&Array.isArray(o)){if(s.every(i=>typeof i=="string"||typeof i=="number")){s.push(...o);continue}for(const i of o){if(!Su(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const a=i.index;if(a==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const c=s[a];c==null?s.push(i):s[a]=this.accumulateDelta(c,i)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${o}, accValue: ${s}`);e[r]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,o){return await this._createAssistantStream(n,e,r,o)}async _runToolAssistantStream(e,n,r,o,s){return await this._createToolAssistantStream(r,e,n,o,s)}}gs=function(e){if(!this.ended)switch(vt(this,fl,e,"f"),$(this,qe,"m",Km).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":$(this,qe,"m",eg).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":$(this,qe,"m",jm).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":$(this,qe,"m",Ym).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ys=function(){if(this.ended)throw new q("stream has ended, this shouldn't happen");if(!$(this,_r,"f"))throw Error("Final run has not been received");return $(this,_r,"f")},Ym=function(e){const[n,r]=$(this,qe,"m",Qm).call(this,e,$(this,Bt,"f"));vt(this,Bt,n,"f"),$(this,dl,"f")[n.id]=n;for(const o of r){const s=n.content[o.index];(s==null?void 0:s.type)=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const o of e.data.delta.content){if(o.type=="text"&&o.text){let s=o.text,i=n.content[o.index];if(i&&i.type=="text")this._emit("textDelta",s,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(o.index!=$(this,fo,"f")){if($(this,mr,"f"))switch($(this,mr,"f").type){case"text":this._emit("textDone",$(this,mr,"f").text,$(this,Bt,"f"));break;case"image_file":this._emit("imageFileDone",$(this,mr,"f").image_file,$(this,Bt,"f"));break}vt(this,fo,o.index,"f")}vt(this,mr,n.content[o.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if($(this,fo,"f")!==void 0){const o=e.data.content[$(this,fo,"f")];if(o)switch(o.type){case"image_file":this._emit("imageFileDone",o.image_file,$(this,Bt,"f"));break;case"text":this._emit("textDone",o.text,$(this,Bt,"f"));break}}$(this,Bt,"f")&&this._emit("messageDone",e.data),vt(this,Bt,void 0,"f")}},jm=function(e){const n=$(this,qe,"m",Xm).call(this,e);switch(vt(this,Ps,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const s of r.step_details.tool_calls)s.index==$(this,Yl,"f")?this._emit("toolCallDelta",s,n.step_details.tool_calls[s.index]):($(this,wt,"f")&&this._emit("toolCallDone",$(this,wt,"f")),vt(this,Yl,s.index,"f"),vt(this,wt,n.step_details.tool_calls[s.index],"f"),$(this,wt,"f")&&this._emit("toolCallCreated",$(this,wt,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":vt(this,Ps,void 0,"f"),e.data.step_details.type=="tool_calls"&&$(this,wt,"f")&&(this._emit("toolCallDone",$(this,wt,"f")),vt(this,wt,void 0,"f")),this._emit("runStepDone",e.data,n);break}},Km=function(e){$(this,qc,"f").push(e),this._emit("event",e)},Xm=function(e){switch(e.event){case"thread.run.step.created":return $(this,on,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=$(this,on,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const o=zt.accumulateDelta(n,r.delta);$(this,on,"f")[e.data.id]=o}return $(this,on,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":$(this,on,"f")[e.data.id]=e.data;break}if($(this,on,"f")[e.data.id])return $(this,on,"f")[e.data.id];throw new Error("No snapshot available")},Qm=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let o=e.data;if(o.delta.content)for(const s of o.delta.content)if(s.index in n.content){let i=n.content[s.index];n.content[s.index]=$(this,qe,"m",Zm).call(this,s,i)}else n.content[s.index]=s,r.push(s);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Zm=function(e,n){return zt.accumulateDelta(n,e)},eg=function(e){switch(vt(this,pl,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":vt(this,_r,e.data,"f"),$(this,wt,"f")&&(this._emit("toolCallDone",$(this,wt,"f")),vt(this,wt,void 0,"f"));break}};class lf extends W{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return Te(e)?this.list({},e):this._client.getAPIList("/assistants",af,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class af extends Ue{}lf.AssistantsPage=af;function tg(t){return typeof t.parse=="function"}const Eo=t=>(t==null?void 0:t.role)==="assistant",$v=t=>(t==null?void 0:t.role)==="function",Ov=t=>(t==null?void 0:t.role)==="tool";function uf(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function ii(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function hR(t,e){return!e||!Bv(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:cf(t,e)}function cf(t,e){const n=t.choices.map(r=>{var o;if(r.finish_reason==="length")throw new Ev;if(r.finish_reason==="content_filter")throw new Cv;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((o=r.message.tool_calls)==null?void 0:o.map(s=>gR(e,s)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?mR(e,r.message.content):null}}});return{...t,choices:n}}function mR(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function gR(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(o=>{var s;return((s=o.function)==null?void 0:s.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:ii(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function yR(t,e){var r;if(!t)return!1;const n=(r=t.tools)==null?void 0:r.find(o=>{var s;return((s=o.function)==null?void 0:s.name)===e.function.name});return ii(n)||(n==null?void 0:n.function.strict)||!1}function Bv(t){var e;return uf(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>ii(n)||n.type==="function"&&n.function.strict===!0))??!1}function vR(t){for(const e of t??[]){if(e.type!=="function")throw new q(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new q(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var ct=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Xe,zc,jl,Jc,Wc,Yc,Hv,jc;const ng=10;class qv extends sf{constructor(){super(...arguments),Xe.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),($v(e)||Ov(e))&&e.content)this._emit("functionCallResult",e.content);else if(Eo(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Eo(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new q("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ct(this,Xe,"m",zc).call(this)}async finalMessage(){return await this.done(),ct(this,Xe,"m",jl).call(this)}async finalFunctionCall(){return await this.done(),ct(this,Xe,"m",Jc).call(this)}async finalFunctionCallResult(){return await this.done(),ct(this,Xe,"m",Wc).call(this)}async totalUsage(){return await this.done(),ct(this,Xe,"m",Yc).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=ct(this,Xe,"m",jl).call(this);n&&this._emit("finalMessage",n);const r=ct(this,Xe,"m",zc).call(this);r&&this._emit("finalContent",r);const o=ct(this,Xe,"m",Jc).call(this);o&&this._emit("finalFunctionCall",o);const s=ct(this,Xe,"m",Wc).call(this);s!=null&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",ct(this,Xe,"m",Yc).call(this))}async _createChatCompletion(e,n,r){const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),ct(this,Xe,"m",Hv).call(this,n);const s=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(cf(s,n))}async _runChatCompletion(e,n,r){for(const o of n.messages)this._addMessage(o,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var m;const o="function",{function_call:s="auto",stream:i,...a}=n,c=typeof s!="string"&&(s==null?void 0:s.name),{maxChatCompletions:d=ng}=r||{},p={};for(const g of n.functions)p[g.name||g.function.name]=g;const h=n.functions.map(g=>({name:g.name||g.function.name,parameters:g.parameters,description:g.description}));for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<d;++g){const w=(m=(await this._createChatCompletion(e,{...a,function_call:s,functions:h,messages:[...this.messages]},r)).choices[0])==null?void 0:m.message;if(!w)throw new q("missing message in ChatCompletion response");if(!w.function_call)return;const{name:C,arguments:v}=w.function_call,y=p[C];if(y){if(c&&c!==C){const I=`Invalid function_call: ${JSON.stringify(C)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:o,name:C,content:I});continue}}else{const I=`Invalid function_call: ${JSON.stringify(C)}. Available options are: ${h.map(T=>JSON.stringify(T.name)).join(", ")}. Please try again`;this._addMessage({role:o,name:C,content:I});continue}let x;try{x=tg(y)?await y.parse(v):v}catch(I){this._addMessage({role:o,name:C,content:I instanceof Error?I.message:String(I)});continue}const S=await y.function(x,this),N=ct(this,Xe,"m",jc).call(this,S);if(this._addMessage({role:o,name:C,content:N}),c)return}}async _runTools(e,n,r){var g,_,w;const o="tool",{tool_choice:s="auto",stream:i,...a}=n,c=typeof s!="string"&&((g=s==null?void 0:s.function)==null?void 0:g.name),{maxChatCompletions:d=ng}=r||{},p=n.tools.map(C=>{if(ii(C)){if(!C.$callback)throw new q("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:C.$callback,name:C.function.name,description:C.function.description||"",parameters:C.function.parameters,parse:C.$parseRaw,strict:!0}}}return C}),h={};for(const C of p)C.type==="function"&&(h[C.function.name||C.function.function.name]=C.function);const m="tools"in n?p.map(C=>C.type==="function"?{type:"function",function:{name:C.function.name||C.function.function.name,parameters:C.function.parameters,description:C.function.description,strict:C.function.strict}}:C):void 0;for(const C of n.messages)this._addMessage(C,!1);for(let C=0;C<d;++C){const y=(_=(await this._createChatCompletion(e,{...a,tool_choice:s,tools:m,messages:[...this.messages]},r)).choices[0])==null?void 0:_.message;if(!y)throw new q("missing message in ChatCompletion response");if(!((w=y.tool_calls)!=null&&w.length))return;for(const x of y.tool_calls){if(x.type!=="function")continue;const S=x.id,{name:N,arguments:I}=x.function,T=h[N];if(T){if(c&&c!==N){const G=`Invalid tool_call: ${JSON.stringify(N)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:o,tool_call_id:S,content:G});continue}}else{const G=`Invalid tool_call: ${JSON.stringify(N)}. Available options are: ${Object.keys(h).map(z=>JSON.stringify(z)).join(", ")}. Please try again`;this._addMessage({role:o,tool_call_id:S,content:G});continue}let R;try{R=tg(T)?await T.parse(I):I}catch(G){const z=G instanceof Error?G.message:String(G);this._addMessage({role:o,tool_call_id:S,content:z});continue}const k=await T.function(R,this),P=ct(this,Xe,"m",jc).call(this,k);if(this._addMessage({role:o,tool_call_id:S,content:P}),c)return}}}}Xe=new WeakSet,zc=function(){return ct(this,Xe,"m",jl).call(this).content??null},jl=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Eo(n)){const{function_call:r,...o}=n,s={...o,content:n.content??null,refusal:n.refusal??null};return r&&(s.function_call=r),s}}throw new q("stream ended without producing a ChatCompletionMessage with role=assistant")},Jc=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const o=this.messages[r];if(Eo(o)&&(o!=null&&o.function_call))return o.function_call;if(Eo(o)&&((e=o==null?void 0:o.tool_calls)!=null&&e.length))return(n=o.tool_calls.at(-1))==null?void 0:n.function}},Wc=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if($v(n)&&n.content!=null||Ov(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var o;return r.role==="assistant"&&((o=r.tool_calls)==null?void 0:o.some(s=>s.type==="function"&&s.id===n.tool_call_id))}))return n.content}},Yc=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},Hv=function(e){if(e.n!=null&&e.n>1)throw new q("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},jc=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Xs extends qv{static runFunctions(e,n,r){const o=new Xs,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return o._run(()=>o._runFunctions(e,n,s)),o}static runTools(e,n,r){const o=new Xs,s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,n,s)),o}_addMessage(e,n=!0){super._addMessage(e,n),Eo(e)&&e.content&&this._emit("content",e.content)}}const zv=1,Jv=2,Wv=4,Yv=8,jv=16,Kv=32,Xv=64,Qv=128,Zv=256,ex=Qv|Zv,tx=jv|Kv|ex|Xv,nx=zv|Jv|tx,rx=Wv|Yv,xR=nx|rx,Ve={STR:zv,NUM:Jv,ARR:Wv,OBJ:Yv,NULL:jv,BOOL:Kv,NAN:Xv,INFINITY:Qv,MINUS_INFINITY:Zv,INF:ex,SPECIAL:tx,ATOM:nx,COLLECTION:rx,ALL:xR};class wR extends Error{}class _R extends Error{}function SR(t,e=Ve.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return ER(t.trim(),e)}const ER=(t,e)=>{const n=t.length;let r=0;const o=m=>{throw new wR(`${m} at position ${r}`)},s=m=>{throw new _R(`${m} at position ${r}`)},i=()=>(h(),r>=n&&o("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?c():t[r]==="["?d():t.substring(r,r+4)==="null"||Ve.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Ve.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Ve.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Ve.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Ve.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Ve.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):p()),a=()=>{const m=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(m,++r-Number(g)))}catch(_){s(String(_))}else if(Ve.STR&e)try{return JSON.parse(t.substring(m,r-Number(g))+'"')}catch{return JSON.parse(t.substring(m,t.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},c=()=>{r++,h();const m={};try{for(;t[r]!=="}";){if(h(),r>=n&&Ve.OBJ&e)return m;const g=a();h(),r++;try{const _=i();Object.defineProperty(m,g,{value:_,writable:!0,enumerable:!0,configurable:!0})}catch(_){if(Ve.OBJ&e)return m;throw _}h(),t[r]===","&&r++}}catch{if(Ve.OBJ&e)return m;o("Expected '}' at end of object")}return r++,m},d=()=>{r++;const m=[];try{for(;t[r]!=="]";)m.push(i()),h(),t[r]===","&&r++}catch{if(Ve.ARR&e)return m;o("Expected ']' at end of array")}return r++,m},p=()=>{if(r===0){t==="-"&&Ve.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(Ve.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(g))}}const m=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Ve.NUM&e)&&o("Unterminated number literal");try{return JSON.parse(t.substring(m,r))}catch{t.substring(m,r)==="-"&&Ve.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t.substring(m,t.lastIndexOf("e")))}catch(_){s(String(_))}}},h=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return i()},rg=t=>SR(t,Ve.ALL^Ve.NUM);var qr=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},de=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Me,fn,zr,Mn,Eu,Oi,Cu,Tu,Iu,Bi,Nu,og;class Qs extends qv{constructor(e){super(),Me.add(this),fn.set(this,void 0),zr.set(this,void 0),Mn.set(this,void 0),qr(this,fn,e,"f"),qr(this,zr,[],"f")}get currentChatCompletionSnapshot(){return de(this,Mn,"f")}static fromReadableStream(e){const n=new Qs(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const o=new Qs(n);return o._run(()=>o._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createChatCompletion(e,n,r){var i;super._createChatCompletion;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),de(this,Me,"m",Eu).call(this);const s=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of s)de(this,Me,"m",Cu).call(this,a);if((i=s.controller.signal)!=null&&i.aborted)throw new Mt;return this._addChatCompletion(de(this,Me,"m",Bi).call(this))}async _fromReadableStream(e,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),de(this,Me,"m",Eu).call(this),this._connected();const o=ln.fromReadableStream(e,this.controller);let s;for await(const a of o)s&&s!==a.id&&this._addChatCompletion(de(this,Me,"m",Bi).call(this)),de(this,Me,"m",Cu).call(this,a),s=a.id;if((i=o.controller.signal)!=null&&i.aborted)throw new Mt;return this._addChatCompletion(de(this,Me,"m",Bi).call(this))}[(fn=new WeakMap,zr=new WeakMap,Mn=new WeakMap,Me=new WeakSet,Eu=function(){this.ended||qr(this,Mn,void 0,"f")},Oi=function(n){let r=de(this,zr,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},de(this,zr,"f")[n.index]=r,r)},Cu=function(n){var o,s,i,a,c,d,p,h,m,g,_,w,C,v,y;if(this.ended)return;const r=de(this,Me,"m",og).call(this,n);this._emit("chunk",n,r);for(const x of n.choices){const S=r.choices[x.index];x.delta.content!=null&&((o=S.message)==null?void 0:o.role)==="assistant"&&((s=S.message)!=null&&s.content)&&(this._emit("content",x.delta.content,S.message.content),this._emit("content.delta",{delta:x.delta.content,snapshot:S.message.content,parsed:S.message.parsed})),x.delta.refusal!=null&&((i=S.message)==null?void 0:i.role)==="assistant"&&((a=S.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:x.delta.refusal,snapshot:S.message.refusal}),((c=x.logprobs)==null?void 0:c.content)!=null&&((d=S.message)==null?void 0:d.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(p=x.logprobs)==null?void 0:p.content,snapshot:((h=S.logprobs)==null?void 0:h.content)??[]}),((m=x.logprobs)==null?void 0:m.refusal)!=null&&((g=S.message)==null?void 0:g.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(_=x.logprobs)==null?void 0:_.refusal,snapshot:((w=S.logprobs)==null?void 0:w.refusal)??[]});const N=de(this,Me,"m",Oi).call(this,S);S.finish_reason&&(de(this,Me,"m",Iu).call(this,S),N.current_tool_call_index!=null&&de(this,Me,"m",Tu).call(this,S,N.current_tool_call_index));for(const I of x.delta.tool_calls??[])N.current_tool_call_index!==I.index&&(de(this,Me,"m",Iu).call(this,S),N.current_tool_call_index!=null&&de(this,Me,"m",Tu).call(this,S,N.current_tool_call_index)),N.current_tool_call_index=I.index;for(const I of x.delta.tool_calls??[]){const T=(C=S.message.tool_calls)==null?void 0:C[I.index];T!=null&&T.type&&((T==null?void 0:T.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(v=T.function)==null?void 0:v.name,index:I.index,arguments:T.function.arguments,parsed_arguments:T.function.parsed_arguments,arguments_delta:((y=I.function)==null?void 0:y.arguments)??""}):(T==null||T.type,void 0))}}},Tu=function(n,r){var i,a,c;if(de(this,Me,"m",Oi).call(this,n).done_tool_calls.has(r))return;const s=(i=n.message.tool_calls)==null?void 0:i[r];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){const d=(c=(a=de(this,fn,"f"))==null?void 0:a.tools)==null?void 0:c.find(p=>p.type==="function"&&p.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:r,arguments:s.function.arguments,parsed_arguments:ii(d)?d.$parseRaw(s.function.arguments):d!=null&&d.function.strict?JSON.parse(s.function.arguments):null})}else s.type},Iu=function(n){var o,s;const r=de(this,Me,"m",Oi).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const i=de(this,Me,"m",Nu).call(this);this._emit("content.done",{content:n.message.content,parsed:i?i.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(o=n.logprobs)!=null&&o.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(s=n.logprobs)!=null&&s.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Bi=function(){if(this.ended)throw new q("stream has ended, this shouldn't happen");const n=de(this,Mn,"f");if(!n)throw new q("request ended without sending any chunks");return qr(this,Mn,void 0,"f"),qr(this,zr,[],"f"),CR(n,de(this,fn,"f"))},Nu=function(){var r;const n=(r=de(this,fn,"f"))==null?void 0:r.response_format;return uf(n)?n:null},og=function(n){var r,o,s,i;let a=de(this,Mn,"f");const{choices:c,...d}=n;a?Object.assign(a,d):a=qr(this,Mn,{...d,choices:[]},"f");for(const{delta:p,finish_reason:h,index:m,logprobs:g=null,..._}of n.choices){let w=a.choices[m];if(w||(w=a.choices[m]={finish_reason:h,index:m,message:{},logprobs:g,..._}),g)if(!w.logprobs)w.logprobs=Object.assign({},g);else{const{content:I,refusal:T,...R}=g;Object.assign(w.logprobs,R),I&&((r=w.logprobs).content??(r.content=[]),w.logprobs.content.push(...I)),T&&((o=w.logprobs).refusal??(o.refusal=[]),w.logprobs.refusal.push(...T))}if(h&&(w.finish_reason=h,de(this,fn,"f")&&Bv(de(this,fn,"f")))){if(h==="length")throw new Ev;if(h==="content_filter")throw new Cv}if(Object.assign(w,_),!p)continue;const{content:C,refusal:v,function_call:y,role:x,tool_calls:S,...N}=p;if(Object.assign(w.message,N),v&&(w.message.refusal=(w.message.refusal||"")+v),x&&(w.message.role=x),y&&(w.message.function_call?(y.name&&(w.message.function_call.name=y.name),y.arguments&&((s=w.message.function_call).arguments??(s.arguments=""),w.message.function_call.arguments+=y.arguments)):w.message.function_call=y),C&&(w.message.content=(w.message.content||"")+C,!w.message.refusal&&de(this,Me,"m",Nu).call(this)&&(w.message.parsed=rg(w.message.content))),S){w.message.tool_calls||(w.message.tool_calls=[]);for(const{index:I,id:T,type:R,function:k,...P}of S){const G=(i=w.message.tool_calls)[I]??(i[I]={});Object.assign(G,P),T&&(G.id=T),R&&(G.type=R),k&&(G.function??(G.function={name:k.name??"",arguments:""})),k!=null&&k.name&&(G.function.name=k.name),k!=null&&k.arguments&&(G.function.arguments+=k.arguments,yR(de(this,fn,"f"),G)&&(G.function.parsed_arguments=rg(G.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",o=>{const s=n.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(const s of n)s.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(const s of n)s.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,i)=>n.push({resolve:s,reject:i})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ln(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function CR(t,e){const{id:n,choices:r,created:o,model:s,system_fingerprint:i,...a}=t,c={...a,id:n,choices:r.map(({message:d,finish_reason:p,index:h,logprobs:m,...g})=>{if(!p)throw new q(`missing finish_reason for choice ${h}`);const{content:_=null,function_call:w,tool_calls:C,...v}=d,y=d.role;if(!y)throw new q(`missing role for choice ${h}`);if(w){const{arguments:x,name:S}=w;if(x==null)throw new q(`missing function_call.arguments for choice ${h}`);if(!S)throw new q(`missing function_call.name for choice ${h}`);return{...g,message:{content:_,function_call:{arguments:x,name:S},role:y,refusal:d.refusal??null},finish_reason:p,index:h,logprobs:m}}return C?{...g,index:h,finish_reason:p,logprobs:m,message:{...v,role:y,content:_,refusal:d.refusal??null,tool_calls:C.map((x,S)=>{const{function:N,type:I,id:T,...R}=x,{arguments:k,name:P,...G}=N||{};if(T==null)throw new q(`missing choices[${h}].tool_calls[${S}].id
${Hi(t)}`);if(I==null)throw new q(`missing choices[${h}].tool_calls[${S}].type
${Hi(t)}`);if(P==null)throw new q(`missing choices[${h}].tool_calls[${S}].function.name
${Hi(t)}`);if(k==null)throw new q(`missing choices[${h}].tool_calls[${S}].function.arguments
${Hi(t)}`);return{...R,id:T,type:I,function:{...G,name:P,arguments:k}}})}}:{...g,message:{...v,content:_,role:y,refusal:d.refusal??null},finish_reason:p,index:h,logprobs:m}}),created:o,model:s,object:"chat.completion",...i?{system_fingerprint:i}:{}};return hR(c,e)}function Hi(t){return JSON.stringify(t)}class Co extends Qs{static fromReadableStream(e){const n=new Co(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const o=new Co(null),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return o._run(()=>o._runFunctions(e,n,s)),o}static runTools(e,n,r){const o=new Co(n),s={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,n,s)),o}}let ox=class extends W{parse(e,n){return vR(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>cf(r,e))}runFunctions(e,n){return e.stream?Co.runFunctions(this._client,e,n):Xs.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?Co.runTools(this._client,e,n):Xs.runTools(this._client,e,n)}stream(e,n){return Qs.createChatCompletion(this._client,e,n)}};class Kc extends W{constructor(){super(...arguments),this.completions=new ox(this._client)}}(function(t){t.Completions=ox})(Kc||(Kc={}));class sx extends W{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class ix extends W{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Ia extends W{constructor(){super(...arguments),this.sessions=new sx(this._client),this.transcriptionSessions=new ix(this._client)}}Ia.Sessions=sx;Ia.TranscriptionSessions=ix;class df extends W{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,o){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,n={},r){return Te(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,ff,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class ff extends Ue{}df.MessagesPage=ff;class pf extends W{retrieve(e,n,r,o={},s){return Te(o)?this.retrieve(e,n,r,{},o):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:o,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,n,r={},o){return Te(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,hf,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}}class hf extends Ue{}pf.RunStepsPage=hf;let li=class extends W{constructor(){super(...arguments),this.steps=new pf(this._client)}create(e,n,r){const{include:o,...s}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:o},body:s,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,o){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,n={},r){return Te(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,mf,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const o=await this.create(e,n,r);return await this.poll(e,o.id,r)}createAndStream(e,n,r){return zt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:i}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...o}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const c=i.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await oi(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,n,r){return zt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,o){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,o){const s=await this.submitToolOutputs(e,n,r,o);return await this.poll(e,s.id,o)}submitToolOutputsStream(e,n,r,o){return zt.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,o)}};class mf extends Ue{}li.RunsPage=mf;li.Steps=pf;li.RunStepsPage=hf;class $o extends W{constructor(){super(...arguments),this.runs=new li(this._client),this.messages=new df(this._client)}create(e={},n){return Te(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return zt.createThreadAssistantStream(e,this._client.beta.threads,n)}}$o.Runs=li;$o.RunsPage=mf;$o.Messages=df;$o.MessagesPage=ff;class Oo extends W{constructor(){super(...arguments),this.realtime=new Ia(this._client),this.chat=new Kc(this._client),this.assistants=new lf(this._client),this.threads=new $o(this._client)}}Oo.Realtime=Ia;Oo.Assistants=lf;Oo.AssistantsPage=af;Oo.Threads=$o;class lx extends W{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class ax extends W{retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}}let Na=class extends W{constructor(){super(...arguments),this.content=new ax(this._client)}create(e,n,r){return this._client.post(`/containers/${e}/files`,kr({body:n,...r}))}retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}`,r)}list(e,n={},r){return Te(n)?this.list(e,{},n):this._client.getAPIList(`/containers/${e}/files`,gf,{query:n,...r})}del(e,n,r){return this._client.delete(`/containers/${e}/files/${n}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}};class gf extends Ue{}Na.FileListResponsesPage=gf;Na.Content=ax;class ai extends W{constructor(){super(...arguments),this.files=new Na(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(`/containers/${e}`,n)}list(e={},n){return Te(e)?this.list({},e):this._client.getAPIList("/containers",yf,{query:e,...n})}del(e,n){return this._client.delete(`/containers/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class yf extends Ue{}ai.ContainerListResponsesPage=yf;ai.Files=Na;ai.FileListResponsesPage=gf;class ux extends W{create(e,n){const r=!!e.encoding_format;let o=r?e.encoding_format:"base64";r&&Xn("Request","User defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:o},...n});return r?s:(Xn("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(i=>(i&&i.data&&i.data.forEach(a=>{const c=a.embedding;a.embedding=fR(c)}),i)))}}class vf extends W{retrieve(e,n,r,o){return this._client.get(`/evals/${e}/runs/${n}/output_items/${r}`,o)}list(e,n,r={},o){return Te(r)?this.list(e,n,{},r):this._client.getAPIList(`/evals/${e}/runs/${n}/output_items`,xf,{query:r,...o})}}class xf extends Ue{}vf.OutputItemListResponsesPage=xf;class ui extends W{constructor(){super(...arguments),this.outputItems=new vf(this._client)}create(e,n,r){return this._client.post(`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){return this._client.get(`/evals/${e}/runs/${n}`,r)}list(e,n={},r){return Te(n)?this.list(e,{},n):this._client.getAPIList(`/evals/${e}/runs`,wf,{query:n,...r})}del(e,n,r){return this._client.delete(`/evals/${e}/runs/${n}`,r)}cancel(e,n,r){return this._client.post(`/evals/${e}/runs/${n}`,r)}}class wf extends Ue{}ui.RunListResponsesPage=wf;ui.OutputItems=vf;ui.OutputItemListResponsesPage=xf;class ci extends W{constructor(){super(...arguments),this.runs=new ui(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(`/evals/${e}`,n)}update(e,n,r){return this._client.post(`/evals/${e}`,{body:n,...r})}list(e={},n){return Te(e)?this.list({},e):this._client.getAPIList("/evals",_f,{query:e,...n})}del(e,n){return this._client.delete(`/evals/${e}`,n)}}class _f extends Ue{}ci.EvalListResponsesPage=_f;ci.Runs=ui;ci.RunListResponsesPage=wf;let Sf=class extends W{create(e,n){return this._client.post("/files",kr({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return Te(e)?this.list({},e):this._client.getAPIList("/files",Ef,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const o=new Set(["processed","error","deleted"]),s=Date.now();let i=await this.retrieve(e);for(;!i.status||!o.has(i.status);)if(await oi(n),i=await this.retrieve(e),Date.now()-s>r)throw new nf({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return i}};class Ef extends Ue{}Sf.FileObjectsPage=Ef;class cx extends W{}let dx=class extends W{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Cf extends W{constructor(){super(...arguments),this.graders=new dx(this._client)}}Cf.Graders=dx;class Tf extends W{create(e,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,If,{body:n,method:"post",...r})}retrieve(e,n={},r){return Te(n)?this.retrieve(e,{},n):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}del(e,n,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${n}`,r)}}class If extends Sa{}Tf.PermissionCreateResponsesPage=If;let Aa=class extends W{constructor(){super(...arguments),this.permissions=new Tf(this._client)}};Aa.Permissions=Tf;Aa.PermissionCreateResponsesPage=If;class Nf extends W{list(e,n={},r){return Te(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Af,{query:n,...r})}}class Af extends Ue{}Nf.FineTuningJobCheckpointsPage=Af;class Bo extends W{constructor(){super(...arguments),this.checkpoints=new Nf(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return Te(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Rf,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return Te(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Pf,{query:n,...r})}pause(e,n){return this._client.post(`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(`/fine_tuning/jobs/${e}/resume`,n)}}class Rf extends Ue{}class Pf extends Ue{}Bo.FineTuningJobsPage=Rf;Bo.FineTuningJobEventsPage=Pf;Bo.Checkpoints=Nf;Bo.FineTuningJobCheckpointsPage=Af;class or extends W{constructor(){super(...arguments),this.methods=new cx(this._client),this.jobs=new Bo(this._client),this.checkpoints=new Aa(this._client),this.alpha=new Cf(this._client)}}or.Methods=cx;or.Jobs=Bo;or.FineTuningJobsPage=Rf;or.FineTuningJobEventsPage=Pf;or.Checkpoints=Aa;or.Alpha=Cf;class fx extends W{}class kf extends W{constructor(){super(...arguments),this.graderModels=new fx(this._client)}}kf.GraderModels=fx;class px extends W{createVariation(e,n){return this._client.post("/images/variations",kr({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",kr({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class Mf extends W{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",bf,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class bf extends Sa{}Mf.ModelsPage=bf;class hx extends W{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function TR(t,e){return!e||!NR(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:mx(t,e)}function mx(t,e){const n=t.output.map(o=>{if(o.type==="function_call")return{...o,parsed_arguments:PR(e,o)};if(o.type==="message"){const s=o.content.map(i=>i.type==="output_text"?{...i,parsed:IR(e,i.text)}:i);return{...o,content:s}}return o}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||gx(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const o of r.output)if(o.type==="message"){for(const s of o.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),r}function IR(t,e){var n,r,o,s;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((o=t.text)==null?void 0:o.format)?((s=t.text)==null?void 0:s.format).$parseRaw(e):JSON.parse(e)}function NR(t){var e;return!!uf((e=t.text)==null?void 0:e.format)}function AR(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function RR(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function PR(t,e){const n=RR(t.tools??[],e.name);return{...e,...e,parsed_arguments:AR(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function gx(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class yx extends W{list(e,n={},r){return Te(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,MR,{query:n,...r})}}var Jr=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},bn=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Wr,qi,Dn,zi,sg,ig,lg,ag;class Df extends sf{constructor(e){super(),Wr.add(this),qi.set(this,void 0),Dn.set(this,void 0),zi.set(this,void 0),Jr(this,qi,e,"f")}static createResponse(e,n,r){const o=new Df(n);return o._run(()=>o._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createOrRetrieveResponse(e,n,r){var a;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),bn(this,Wr,"m",sg).call(this);let s,i=null;"response_id"in n?(s=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),i=n.starting_after??null):s=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const c of s)bn(this,Wr,"m",ig).call(this,c,i);if((a=s.controller.signal)!=null&&a.aborted)throw new Mt;return bn(this,Wr,"m",lg).call(this)}[(qi=new WeakMap,Dn=new WeakMap,zi=new WeakMap,Wr=new WeakSet,sg=function(){this.ended||Jr(this,Dn,void 0,"f")},ig=function(n,r){if(this.ended)return;const o=(i,a)=>{(r==null||a.sequence_number>r)&&this._emit(i,a)},s=bn(this,Wr,"m",ag).call(this,n);switch(o("event",n),n.type){case"response.output_text.delta":{const i=s.output[n.output_index];if(!i)throw new q(`missing output at index ${n.output_index}`);if(i.type==="message"){const a=i.content[n.content_index];if(!a)throw new q(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new q(`expected content to be 'output_text', got ${a.type}`);o("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const i=s.output[n.output_index];if(!i)throw new q(`missing output at index ${n.output_index}`);i.type==="function_call"&&o("response.function_call_arguments.delta",{...n,snapshot:i.arguments});break}default:o(n.type,n);break}},lg=function(){if(this.ended)throw new q("stream has ended, this shouldn't happen");const n=bn(this,Dn,"f");if(!n)throw new q("request ended without sending any events");Jr(this,Dn,void 0,"f");const r=kR(n,bn(this,qi,"f"));return Jr(this,zi,r,"f"),r},ag=function(n){let r=bn(this,Dn,"f");if(!r){if(n.type!=="response.created")throw new q(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Jr(this,Dn,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const o=r.output[n.output_index];if(!o)throw new q(`missing output at index ${n.output_index}`);o.type==="message"&&o.content.push(n.part);break}case"response.output_text.delta":{const o=r.output[n.output_index];if(!o)throw new q(`missing output at index ${n.output_index}`);if(o.type==="message"){const s=o.content[n.content_index];if(!s)throw new q(`missing content at index ${n.content_index}`);if(s.type!=="output_text")throw new q(`expected content to be 'output_text', got ${s.type}`);s.text+=n.delta}break}case"response.function_call_arguments.delta":{const o=r.output[n.output_index];if(!o)throw new q(`missing output at index ${n.output_index}`);o.type==="function_call"&&(o.arguments+=n.delta);break}case"response.completed":{Jr(this,Dn,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",o=>{const s=n.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(const s of n)s.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(const s of n)s.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((s,i)=>n.push({resolve:s,reject:i})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=bn(this,zi,"f");if(!e)throw new q("stream ended without producing a ChatCompletion");return e}}function kR(t,e){return TR(t,e)}class Lf extends W{constructor(){super(...arguments),this.inputItems=new yx(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&gx(r),r))}retrieve(e,n={},r){return this._client.get(`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>mx(r,e))}stream(e,n){return Df.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(`/responses/${e}/cancel`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class MR extends Ue{}Lf.InputItems=yx;class vx extends W{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,kr({body:n,...r}))}}class Uf extends W{constructor(){super(...arguments),this.parts=new vx(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}Uf.Parts=vx;const bR=async t=>{const e=await Promise.allSettled(t),n=e.filter(o=>o.status==="rejected");if(n.length){for(const o of n)console.error(o.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const o of e)o.status==="fulfilled"&&r.push(o.value);return r};class Ra extends W{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,o){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,n={},r){return Te(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,Pa,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const o=await this.create(e,n,r);return await this.poll(e,o.id,r)}async poll(e,n,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const s=await this.retrieve(e,n,{...r,headers:o}).withResponse(),i=s.data;switch(i.status){case"in_progress":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.response.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await oi(a);break;case"failed":case"completed":return i}}}async upload(e,n,r){const o=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:o.id},r)}async uploadAndPoll(e,n,r){const o=await this.upload(e,n,r);return await this.poll(e,o.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,Ff,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Pa extends Ue{}class Ff extends Sa{}Ra.VectorStoreFilesPage=Pa;Ra.FileContentResponsesPage=Ff;class xx extends W{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const o=await this.create(e,n);return await this.poll(e,o.id,r)}listFiles(e,n,r={},o){return Te(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,Pa,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async poll(e,n,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:s,response:i}=await this.retrieve(e,n,{...r,headers:o}).withResponse();switch(s.status){case"in_progress":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const c=i.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await oi(a);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},o){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=(o==null?void 0:o.maxConcurrency)??5,i=Math.min(s,n.length),a=this._client,c=n.values(),d=[...r];async function p(m){for(let g of m){const _=await a.files.create({file:g,purpose:"assistants"},o);d.push(_.id)}}const h=Array(i).fill(c).map(p);return await bR(h),await this.createAndPoll(e,{file_ids:d})}}class sr extends W{constructor(){super(...arguments),this.files=new Ra(this._client),this.fileBatches=new xx(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return Te(e)?this.list({},e):this._client.getAPIList("/vector_stores",Gf,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,Vf,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Gf extends Ue{}class Vf extends Sa{}sr.VectorStoresPage=Gf;sr.VectorStoreSearchResponsesPage=Vf;sr.Files=Ra;sr.VectorStoreFilesPage=Pa;sr.FileContentResponsesPage=Ff;sr.FileBatches=xx;var wx;class j extends eR{constructor({baseURL:e=Vi("OPENAI_BASE_URL"),apiKey:n=Vi("OPENAI_API_KEY"),organization:r=Vi("OPENAI_ORG_ID")??null,project:o=Vi("OPENAI_PROJECT_ID")??null,...s}={}){if(n===void 0)throw new q("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:n,organization:r,project:o,...s,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&cR())throw new q(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new lx(this),this.chat=new Ta(this),this.embeddings=new ux(this),this.files=new Sf(this),this.images=new px(this),this.audio=new si(this),this.moderations=new hx(this),this.models=new Mf(this),this.fineTuning=new or(this),this.graders=new kf(this),this.vectorStores=new sr(this),this.beta=new Oo(this),this.batches=new rf(this),this.uploads=new Uf(this),this.responses=new Lf(this),this.evals=new ci(this),this.containers=new ai(this),this._options=i,this.apiKey=n,this.organization=r,this.project=o}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return UA(e,{arrayFormat:"brackets"})}}wx=j;j.OpenAI=wx;j.DEFAULT_TIMEOUT=6e5;j.OpenAIError=q;j.APIError=Ye;j.APIConnectionError=va;j.APIConnectionTimeoutError=nf;j.APIUserAbortError=Mt;j.NotFoundError=vv;j.ConflictError=xv;j.RateLimitError=_v;j.BadRequestError=mv;j.AuthenticationError=gv;j.InternalServerError=Sv;j.PermissionDeniedError=yv;j.UnprocessableEntityError=wv;j.toFile=Av;j.fileFromPath=fv;j.Completions=lx;j.Chat=Ta;j.ChatCompletionsPage=Ca;j.Embeddings=ux;j.Files=Sf;j.FileObjectsPage=Ef;j.Images=px;j.Audio=si;j.Moderations=hx;j.Models=Mf;j.ModelsPage=bf;j.FineTuning=or;j.Graders=kf;j.VectorStores=sr;j.VectorStoresPage=Gf;j.VectorStoreSearchResponsesPage=Vf;j.Beta=Oo;j.Batches=rf;j.BatchesPage=of;j.Uploads=Uf;j.Responses=Lf;j.Evals=ci;j.EvalListResponsesPage=_f;j.Containers=ai;j.ContainerListResponsesPage=yf;const Kl=10,ug=3,DR=2e3;let hl=15,Xr=[];const is=t=>{hl=t,Xr=[],console.log(`Global Rate Limit set to: ${t}`)},_x=t=>new Promise(e=>setTimeout(e,t)),Lr=async()=>{if(hl==="unlimited")return;const t=Date.now();if(Xr=Xr.filter(e=>t-e<6e4),Xr.length>=hl){const e=Xr[0],n=6e4-(t-e)+100;console.warn(`Rate limit (${hl} RPM) hit. Waiting ${n}ms...`),await _x(n),await Lr()}else Xr.push(Date.now())};function LR(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let o=0;o<r;o++)e+=String.fromCharCode(n[o]);return window.btoa(e)}const gr=t=>{const[e,n]=t.split(","),[r,o,s]=e.split(":").map(Number);return r*36e5+o*6e4+s*1e3+parseInt(n)},Xc=t=>{const e=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4),r=Math.floor(t%6e4/1e3),o=Math.floor(t%1e3);return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")},${String(o).padStart(3,"0")}`},UR=async t=>{if(!t||!t.startsWith("AIzaSy"))return!1;const e=["gemini-2.0-flash","gemini-2.5-flash"],n=new tf({apiKey:t});for(const r of e)try{return await Lr(),await n.models.countTokens({model:r,contents:[{role:"user",parts:[{text:"test"}]}]}),!0}catch(o){if((o==null?void 0:o.status)==="NOT_FOUND"||(o==null?void 0:o.message)&&o.message.includes("NOT_FOUND"))console.warn(`Validation with model "${r}" failed (Not Found). Trying next model...`);else return console.error("Google API Key validation failed with a critical error:",o),!1}return!1},FR=async t=>{if(!t||!t.startsWith("sk-"))return!1;try{return await Lr(),await new j({apiKey:t,dangerouslyAllowBrowser:!0}).models.list(),!0}catch{return!1}},GR=t=>t.map((e,n)=>`${n+1}
${e.start} --> ${e.end}
${e.text}`).join(`

`),VR=t=>{let e=t.replace(/```json|```/g,"").trim();const n=e.indexOf("[");if(n===-1)return"[]";const r=e.lastIndexOf("}");return r===-1?"[]":e.substring(n,r+1)+"]"},$R=t=>{const n=t.text.trim();if(n.length<=55)return[t];const r=gr(t.start),o=gr(t.end),s=o-r,i=n.split(" "),a=[];let c=[],d=0;for(const g of i)d+g.length+1>55?(a.push(c.join(" ")),c=[g],d=g.length):(c.push(g),d+=g.length+1);c.length>0&&a.push(c.join(" "));const p=[];let h=r;const m=n.length;return a.forEach((g,_)=>{let w=Math.floor(g.length/m*s);_===a.length-1&&(w=o-h);const C=h+w;p.push({start:Xc(h),end:Xc(C),text:g}),h=C}),p},OR=t=>{if(!t||t.length===0)return[];t.sort((n,r)=>gr(n.start)-gr(r.start));let e=[];for(const n of t){const r=$R(n);e=e.concat(r)}for(let n=0;n<e.length-1;n++){const r=e[n],o=e[n+1],s=gr(r.end),i=gr(o.start);if(s>i){const a=Math.max(gr(r.start)+300,i-50);r.end=Xc(a)}}return e};async function BR(t,e,n,r){const o=new tf({apiKey:n}),s=await t.arrayBuffer(),a=[{inlineData:{data:LR(s),mimeType:"audio/wav"}}],c=`You are a professional subtitle timer for TikTok/Reels.
    
    TASK:
    Transcribe the audio into short, punchy JSON segments.
    ${e!=="auto"?`LANGUAGE: Strictly ${e}. Do NOT translate.`:"LANGUAGE: Detect automatically."}

    RULES:
    1. **ONE PHRASE PER BLOCK**: Never put more than 8-10 words in one block.
    2. **SHORT DURATION**: Max duration per block is 3-4 seconds.
    3. **SYNC**: Start time must be exact.
    4. **NO PARAGRAPHS**: Split long sentences into multiple entries immediately.
    
    Format:
    [{"start": "00:00:00,000", "end": "00:00:02,000", "text": "Short line 1"}, {"start": "00:00:02,000", "end": "00:00:04,500", "text": "Short line 2"}]
    `,d={responseMimeType:"application/json",maxOutputTokens:8192};await Lr();const p=o.models.generateContent({model:r,contents:[{role:"user",parts:[{text:c},...a]}],config:d}),h=new Promise((_,w)=>setTimeout(()=>w(new Error("Request timed out. The model may be busy or the file is too large.")),18e4)),g=(await Promise.race([p,h])).text;if(!g)throw new Error("No transcription generated.");try{const _=VR(g),w=JSON.parse(_);if(!Array.isArray(w))throw new Error("AI returned invalid JSON structure.");const C=OR(w);return GR(C)}catch{throw console.error("Failed to parse AI JSON response:",g),new Error("AI generated invalid transcription data. Please try again.")}}async function HR(t,e,n,r){const o=new j({apiKey:n,dangerouslyAllowBrowser:!0}),i={file:new File([t],"audio.wav",{type:"audio/wav"}),model:r,response_format:"srt"};if(e!=="auto"){const c=nt.find(d=>d.name===e);c&&(i.language=c.code)}await Lr();const a=await o.audio.transcriptions.create(i);if(typeof a!="string")throw new Error("OpenAI transcription returned an invalid result.");return a}async function qR(t,e,n,r){if(r.provider==="openai"){if(!r.transcriptionModel)throw new Error("Transcription model not defined for the selected OpenAI model.");return HR(t,e,n,r.transcriptionModel)}return BR(t,e,n,r.id)}const Sx=(t,e,n)=>`You are a professional subtitle translator. 
    Your task is to translate subtitles from ${t==="auto"?"the detected language":t} to ${e}.
    
    CRITICAL RULES:
    1. Maintain the context of the dialogue.
    2. Keep the translation concise.
    3. Return ONLY a JSON array containing objects with 'id' and 'text'.
    4. The 'id' must match the input 'id' exactly.
    
    JSON:
    ${JSON.stringify(n)}`;async function zR(t,e,n,r,o){const s=new tf({apiKey:r}),i=t.map(m=>({id:m.id,text:m.text})),a=Sx(e,n,i),c={responseMimeType:"application/json"};await Lr();const p=(await s.models.generateContent({model:o,contents:[{role:"user",parts:[{text:a}]}],config:c})).text;if(!p)throw new Error("Received empty response from Google AI.");const h=JSON.parse(p);if(!Array.isArray(h))throw new Error("Invalid JSON format from Google AI.");return h}async function JR(t,e,n,r,o){const s=new j({apiKey:r,dangerouslyAllowBrowser:!0}),i=t.map(m=>({id:m.id,text:m.text})),a=Sx(e,n,i);await Lr();const d=(await s.chat.completions.create({model:o,messages:[{role:"system",content:a}],response_format:{type:"json_object"}})).choices[0].message.content;if(!d)throw new Error("Received empty response from OpenAI.");const p=JSON.parse(d),h=Array.isArray(p)?p:Object.values(p).find(Array.isArray);if(!h)throw new Error("Invalid JSON format from OpenAI.");return h}const WR=async(t,e,n,r,o)=>{let s;for(let i=1;i<=ug;i++)try{return o.provider==="openai"?await JR(t,e,n,r,o.id):await zR(t,e,n,r,o.id)}catch(a){if(console.warn(`Attempt ${i} failed for ${o.provider}:`,a),s=a,i<ug){const c=DR*Math.pow(1.5,i-1);await _x(c)}}throw s},YR=async(t,e,n,r,o,s,i)=>{if(!r)throw new Error(`API Key for ${o.provider} is missing.`);const a=[...t];let c=0;for(let d=0;d<t.length;d+=Kl){const p=t.slice(d,d+Kl);try{(await WR(p,e,n,r,o)).forEach(m=>{const g=a.findIndex(_=>_.id===m.id);g!==-1&&(a[g]={...a[g],text:m.text})}),c+=p.length,s(Math.min(c,t.length)),i([...a])}catch(h){throw console.error(`Batch starting at ${d} failed after retries`,h),new Error(`Translation failed at subtitle #${p[0].id}. The server might be busy.`)}}return a},jR="modulepreload",KR=function(t){return"/SubStream-AI/"+t},cg={},XR=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=KR(c),c in cg)return;cg[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":jR,d||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var ue;(function(t){t.LOAD="LOAD",t.EXEC="EXEC",t.FFPROBE="FFPROBE",t.WRITE_FILE="WRITE_FILE",t.READ_FILE="READ_FILE",t.DELETE_FILE="DELETE_FILE",t.RENAME="RENAME",t.CREATE_DIR="CREATE_DIR",t.LIST_DIR="LIST_DIR",t.DELETE_DIR="DELETE_DIR",t.ERROR="ERROR",t.DOWNLOAD="DOWNLOAD",t.PROGRESS="PROGRESS",t.LOG="LOG",t.MOUNT="MOUNT",t.UNMOUNT="UNMOUNT"})(ue||(ue={}));const QR=(()=>{let t=0;return()=>t++})(),ZR=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),eP=new Error("called FFmpeg.terminate()");var _t,Vn,gn,Sr,Er,Xl,rt;class tP{constructor(){Pn(this,_t,null);Pn(this,Vn,{});Pn(this,gn,{});Pn(this,Sr,[]);Pn(this,Er,[]);tt(this,"loaded",!1);Pn(this,Xl,()=>{Z(this,_t)&&(Z(this,_t).onmessage=({data:{id:e,type:n,data:r}})=>{switch(n){case ue.LOAD:this.loaded=!0,Z(this,Vn)[e](r);break;case ue.MOUNT:case ue.UNMOUNT:case ue.EXEC:case ue.FFPROBE:case ue.WRITE_FILE:case ue.READ_FILE:case ue.DELETE_FILE:case ue.RENAME:case ue.CREATE_DIR:case ue.LIST_DIR:case ue.DELETE_DIR:Z(this,Vn)[e](r);break;case ue.LOG:Z(this,Sr).forEach(o=>o(r));break;case ue.PROGRESS:Z(this,Er).forEach(o=>o(r));break;case ue.ERROR:Z(this,gn)[e](r);break}delete Z(this,Vn)[e],delete Z(this,gn)[e]})});Pn(this,rt,({type:e,data:n},r=[],o)=>Z(this,_t)?new Promise((s,i)=>{const a=QR();Z(this,_t)&&Z(this,_t).postMessage({id:a,type:e,data:n},r),Z(this,Vn)[a]=s,Z(this,gn)[a]=i,o==null||o.addEventListener("abort",()=>{i(new DOMException(`Message # ${a} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(ZR));tt(this,"load",({classWorkerURL:e,...n}={},{signal:r}={})=>(Z(this,_t)||(Ko(this,_t,e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL("/SubStream-AI/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),Z(this,Xl).call(this)),Z(this,rt).call(this,{type:ue.LOAD,data:n},void 0,r)));tt(this,"exec",(e,n=-1,{signal:r}={})=>Z(this,rt).call(this,{type:ue.EXEC,data:{args:e,timeout:n}},void 0,r));tt(this,"ffprobe",(e,n=-1,{signal:r}={})=>Z(this,rt).call(this,{type:ue.FFPROBE,data:{args:e,timeout:n}},void 0,r));tt(this,"terminate",()=>{const e=Object.keys(Z(this,gn));for(const n of e)Z(this,gn)[n](eP),delete Z(this,gn)[n],delete Z(this,Vn)[n];Z(this,_t)&&(Z(this,_t).terminate(),Ko(this,_t,null),this.loaded=!1)});tt(this,"writeFile",(e,n,{signal:r}={})=>{const o=[];return n instanceof Uint8Array&&o.push(n.buffer),Z(this,rt).call(this,{type:ue.WRITE_FILE,data:{path:e,data:n}},o,r)});tt(this,"mount",(e,n,r)=>{const o=[];return Z(this,rt).call(this,{type:ue.MOUNT,data:{fsType:e,options:n,mountPoint:r}},o)});tt(this,"unmount",e=>{const n=[];return Z(this,rt).call(this,{type:ue.UNMOUNT,data:{mountPoint:e}},n)});tt(this,"readFile",(e,n="binary",{signal:r}={})=>Z(this,rt).call(this,{type:ue.READ_FILE,data:{path:e,encoding:n}},void 0,r));tt(this,"deleteFile",(e,{signal:n}={})=>Z(this,rt).call(this,{type:ue.DELETE_FILE,data:{path:e}},void 0,n));tt(this,"rename",(e,n,{signal:r}={})=>Z(this,rt).call(this,{type:ue.RENAME,data:{oldPath:e,newPath:n}},void 0,r));tt(this,"createDir",(e,{signal:n}={})=>Z(this,rt).call(this,{type:ue.CREATE_DIR,data:{path:e}},void 0,n));tt(this,"listDir",(e,{signal:n}={})=>Z(this,rt).call(this,{type:ue.LIST_DIR,data:{path:e}},void 0,n));tt(this,"deleteDir",(e,{signal:n}={})=>Z(this,rt).call(this,{type:ue.DELETE_DIR,data:{path:e}},void 0,n))}on(e,n){e==="log"?Z(this,Sr).push(n):e==="progress"&&Z(this,Er).push(n)}off(e,n){e==="log"?Ko(this,Sr,Z(this,Sr).filter(r=>r!==n)):e==="progress"&&Ko(this,Er,Z(this,Er).filter(r=>r!==n))}}_t=new WeakMap,Vn=new WeakMap,gn=new WeakMap,Sr=new WeakMap,Er=new WeakMap,Xl=new WeakMap,rt=new WeakMap;var dg;(function(t){t.MEMFS="MEMFS",t.NODEFS="NODEFS",t.NODERAWFS="NODERAWFS",t.IDBFS="IDBFS",t.WORKERFS="WORKERFS",t.PROXYFS="PROXYFS"})(dg||(dg={}));const nP=new Error("failed to get response body reader"),rP=new Error("failed to complete download"),oP="Content-Length",sP=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const{result:o}=r;o instanceof ArrayBuffer?e(new Uint8Array(o)):e(new Uint8Array)},r.onerror=o=>{var s,i;n(Error(`File could not be read! Code=${((i=(s=o==null?void 0:o.target)==null?void 0:s.error)==null?void 0:i.code)||-1}`))},r.readAsArrayBuffer(t)}),$f=async t=>{let e;if(typeof t=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(t instanceof URL)e=await(await fetch(t)).arrayBuffer();else if(t instanceof File||t instanceof Blob)e=await sP(t);else return new Uint8Array;return new Uint8Array(e)},Ex=async(t,e)=>{var o;const n=await fetch(t);let r;try{const s=parseInt(n.headers.get(oP)||"-1"),i=(o=n.body)==null?void 0:o.getReader();if(!i)throw nP;const a=[];let c=0;for(;;){const{done:h,value:m}=await i.read(),g=m?m.length:0;if(h){if(s!=-1&&s!==c)throw rP;e&&e({url:t,total:s,received:c,delta:g,done:h});break}a.push(m),c+=g,e&&e({url:t,total:s,received:c,delta:g,done:h})}const d=new Uint8Array(c);let p=0;for(const h of a)d.set(h,p),p+=h.length;r=d.buffer}catch(s){console.log("failed to send download progress event: ",s),r=await n.arrayBuffer(),e&&e({url:t,total:r.byteLength,received:r.byteLength,delta:0,done:!0})}return r},iP=async(t,e,n=!1,r)=>{const o=n?await Ex(t,r):await(await fetch(t)).arrayBuffer(),s=new Blob([o],{type:e});return URL.createObjectURL(s)},lP=Object.freeze(Object.defineProperty({__proto__:null,downloadWithProgress:Ex,fetchFile:$f,toBlobURL:iP},Symbol.toStringTag,{value:"Module"})),Yr=new tP;async function aP(t){if(console.log("loadFFmpeg: Awaiting lock and checking if loaded..."),Yr.loaded)return console.log("loadFFmpeg: Already loaded."),t("Engine ready."),Yr;Yr.on("log",({message:n})=>{console.log("FFMPEG LOG:",n)}),Yr.on("progress",({progress:n})=>{console.log(`FFmpeg Progress: ${(n*100).toFixed(2)}%`)}),t("Loading core video engine...");const e="https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm";try{console.log(`loadFFmpeg: Attempting to load core from CDN: ${e}`);const{toBlobURL:n}=await XR(async()=>{const{toBlobURL:r}=await Promise.resolve().then(()=>lP);return{toBlobURL:r}},void 0);console.log("loadFFmpeg: Dynamic import of toBlobURL successful."),await Yr.load({coreURL:await n(`${e}/ffmpeg-core.js`,"text/javascript"),wasmURL:await n(`${e}/ffmpeg-core.wasm`,"application/wasm")}),console.log("loadFFmpeg: ffmpeg.load() completed successfully."),t("Engine loaded.")}catch(n){throw console.error("CRITICAL ERROR during FFmpeg load:",n),n}return Yr}async function uP(t,e){console.log("analyzeVideoFile: Starting analysis..."),await t.writeFile("input.video",await $f(e)),console.log("analyzeVideoFile: Video file written to FFmpeg memory.");const n=["-i","input.video","-hide_banner"];let r="";const o=({message:a})=>{r+=a+`
`};t.on("log",o),console.log("analyzeVideoFile: Executing probing command...");try{await t.exec(n)}catch(a){console.log("analyzeVideoFile: Caught an error during exec, which is expected for probing. Error:",a)}finally{t.off("log",o),console.log("analyzeVideoFile: Log listener removed.")}if(!r)throw console.error("analyzeVideoFile: FFmpeg returned no data. This indicates a critical failure."),new Error("Could not analyze video file. FFmpeg returned no data.");console.log("analyzeVideoFile: Parsing FFmpeg output for subtitle tracks.");const s=[];return r.split(`
`).forEach(a=>{if(a.trim().startsWith("Stream #")&&a.includes("Subtitle:")){const c=a.match(/Stream #\d+:(\d+)(\((\w+)\))?: Subtitle: .*?(?:\(default\))?/),d=a.match(/title\s+:\s+(.*)/);c&&s.push({index:parseInt(c[1]),language:c[3]||"und",title:d?d[1].trim():`Track ${c[1]}`})}}),console.log(`analyzeVideoFile: Found ${s.length} subtitle tracks.`),s}async function cP(t,e){const n=["-i","input.video","-map",`0:s:${e}`,"output.srt"];await t.exec(n);const r=await t.readFile("output.srt");return new TextDecoder().decode(r)}async function dP(t){const e=["-i","input.video","-vn","-af","aresample=async=1","-acodec","pcm_s16le","-ar","16000","-ac","1","output.wav"];await t.exec(e);const n=await t.readFile("output.wav");if(n instanceof Uint8Array){const r=new Uint8Array(n);return new Blob([r],{type:"audio/wav"})}throw new Error("FFmpeg did not return a valid binary file for audio extraction.")}async function fP(t,e,n,r,o,s){await t.writeFile("input.video",await $f(e)),await t.writeFile("translated.srt",new TextEncoder().encode(n));const i=["-i","input.video","-i","translated.srt"];o&&(await t.writeFile("original.srt",new TextEncoder().encode(o)),i.push("-i","original.srt"));const a="output.mkv";i.push("-c","copy","-map","0:v","-map","0:a"),i.push("-map","1","-c:s","srt","-metadata:s:s:0",`language=${r}`,"-metadata:s:s:0",`title=Translated (${r})`,"-disposition:s:s:0","default"),o&&i.push("-map","2","-metadata:s:s:1",`language=${s}`,"-metadata:s:s:1",`title=Original (${s})`),i.push(a),await t.exec(i);const c=await t.readFile(a);if(c instanceof Uint8Array){const d=new Uint8Array(c);return new Blob([d],{type:"video/x-matroska"})}throw new Error("FFmpeg did not return a valid binary file for video muxing.")}const bo="http://localhost:4000/api",pP=t=>new Promise(e=>setTimeout(e,t));function hP(t){const e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,n=t.match(e);return n&&n[7].length===11?n[7]:null}async function Qc(t){try{const e=await fetch(`${bo}/info?url=${encodeURIComponent(t)}`);if(!e.ok){const o=await e.json().catch(()=>({}));throw new Error(o.error||`Server returned ${e.status}: Failed to process video.`)}const n=await e.json(),r=n.captions.map(o=>({id:o.id,language:o.language,name:o.name}));return n.meta.videoUrl=n.meta.videoUrl||t,n.meta.availableResolutions=n.resolutions||[],{meta:n.meta,captions:r}}catch(e){throw console.error("Backend API Error:",e),e.name==="TypeError"&&e.message==="Failed to fetch"?new Error("Could not connect to local server. Please run 'npm start' in the 'server' folder."):new Error(e.message||"Failed to fetch video details.")}}async function mP(t,e){try{const n=new URLSearchParams({url:t,token:e}),r=await fetch(`${bo}/caption?${n.toString()}`);if(!r.ok){const o=await r.text();throw new Error(o||"Failed to download caption track from backend.")}return await r.text()}catch(n){throw console.error("Subtitle download failed:",n),new Error(n.message||"Failed to download subtitles.")}}async function gP(t,e,n,r){const o=new URLSearchParams({url:t,token:e,name:n});r&&o.append("quality",r.toString());try{const s=await fetch(`${bo}/download-video?${o.toString()}`);if(!s.ok){const c=await s.text().catch(()=>"Unknown Server Error");throw new Error(c||"Download failed on server.")}const i=await s.blob(),a=n.endsWith(".mp4")?n:`${n}.mp4`;Ac(a,i)}catch(s){throw console.error("Video download failed:",s),new Error(s.message||"Failed to download video from server.")}}async function yP(t){var d,p,h,m;const e=await fetch("https://www.googleapis.com/youtube/v3/channels?part=contentDetails&mine=true",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw e.status===401?new Error("Session expired. Please Sign Out and Sign In again in Settings."):e.status===403?new Error("Access forbidden. API Quota might be exceeded or YouTube Data API is disabled."):new Error(`Failed to fetch channel details (${e.status})`);const r=(m=(h=(p=(d=(await e.json()).items)==null?void 0:d[0])==null?void 0:p.contentDetails)==null?void 0:h.relatedPlaylists)==null?void 0:m.uploads;if(!r)return[];const o=await fetch(`https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails&playlistId=${r}&maxResults=50`,{headers:{Authorization:`Bearer ${t}`}});if(!o.ok)throw o.status===401?new Error("Session expired. Please re-authenticate."):new Error("Failed to fetch playlist items.");const i=(await o.json()).items.map(g=>g.contentDetails.videoId).join(",");if(!i)return[];const a=await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet,status,contentDetails&id=${i}`,{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)throw new Error("Failed to fetch video details.");return(await a.json()).items.map(g=>{var _,w,C,v;return{id:g.id,title:g.snippet.title,description:g.snippet.description,thumbnail:((w=(_=g.snippet.thumbnails)==null?void 0:_.medium)==null?void 0:w.url)||((v=(C=g.snippet.thumbnails)==null?void 0:C.default)==null?void 0:v.url),publishedAt:g.snippet.publishedAt,privacyStatus:g.status.privacyStatus,duration:vP(g.contentDetails.duration)}})}function vP(t){const e=t.match(/PT(\d+H)?(\d+M)?(\d+S)?/);if(!e)return"00:00";const n=(e[1]||"").replace("H",""),r=(e[2]||"").replace("M",""),o=(e[3]||"").replace("S",""),s=n?`${n}:`:"",i=r?`${r.padStart(2,"0")}:`:"00:",a=o?o.padStart(2,"0"):"00";return`${s}${i}${a}`.replace(/^00:/,"")}async function xP(t,e,n,r){const o={snippet:{title:n,description:"Uploaded automatically by SubStream AI for transcription."},status:{privacyStatus:"unlisted"}},s=await fetch(`${bo}/proxy/upload-init`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,metadata:o,fileSize:e.size.toString(),fileType:e.type||"video/mp4"})});if(!s.ok){const a=await s.json().catch(()=>({}));let c="Unknown Error";throw a.error&&typeof a.error=="object"&&a.error.message?c=a.error.message:a.error?c=JSON.stringify(a.error):a.message&&(c=a.message),c=c.replace(/<[^>]*>?/gm,""),console.error("YouTube Upload Init Failed Response:",a),s.status===403?new Error(`YouTube Permission Denied (403): ${c}. Ensure 'YouTube Data API v3' is ENABLED in Google Cloud Console and Quota is not exceeded.`):s.status===401?new Error("Session Expired (401). Please re-authenticate YouTube."):new Error(`Upload Init Failed (${s.status}): ${c}`)}const{location:i}=await s.json();if(!i)throw new Error("Backend did not return an upload location.");return new Promise((a,c)=>{const d=new XMLHttpRequest;d.open("PUT",`${bo}/proxy/upload-finish`,!0),d.setRequestHeader("x-upload-url",i),d.setRequestHeader("Content-Type",e.type||"video/mp4"),d.upload.onprogress=p=>{if(p.lengthComputable&&r){const h=Math.round(p.loaded/p.total*100);r(h)}},d.onload=()=>{if(d.status>=200&&d.status<300)try{const p=JSON.parse(d.responseText);a(p.id)}catch{c(new Error("Failed to parse YouTube response after upload."))}else{const p=d.responseText||d.statusText;c(new Error(`Binary Upload Failed (${d.status}): ${p}`))}},d.onerror=()=>c(new Error("Network Error during Binary Upload (Check Backend Connection).")),d.send(e)})}async function wP(t,e,n){for(let s=0;s<120;s++){const i=Math.round(s/120*100);try{n&&n(`Waiting for YouTube to process video... (${s+1}/120)`,i);const a=await fetch(`${bo}/proxy/captions?token=${encodeURIComponent(t)}&videoId=${e}`);if(a.ok){const c=await a.json();if(c.items&&c.items.length>0)return n&&n("Video processing complete!",100),!0}else{const c=await a.text();console.warn(`Caption check failed (${a.status}): ${c}`)}}catch(a){console.warn("Polling error:",a)}await pP(1e4)}throw new Error("Timed out waiting for YouTube to process the video.")}const ze=({children:t,variant:e="primary",icon:n,className:r="",progress:o,statusText:s,completed:i,disabled:a,...c})=>{const d="relative inline-flex items-center justify-center font-medium transition-all duration-500 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black overflow-hidden whitespace-nowrap",p={primary:"bg-white text-black hover:bg-neutral-200 focus:ring-white border border-transparent",secondary:"bg-neutral-800 text-white hover:bg-neutral-700 focus:ring-neutral-700 border border-neutral-700",outline:"bg-transparent text-neutral-300 border border-neutral-800 hover:border-white hover:text-white"},h=o!=null&&o>=0;return f.jsx("button",{className:`
        ${d} 
        ${h?"bg-neutral-800 border-neutral-700 text-white w-64 md:w-80":p[e]} 
        ${h?"px-0 py-0":"px-6 py-3"}
        ${r}
      `,disabled:a||h,...c,children:h?f.jsxs("div",{className:"relative w-full h-12 flex items-center justify-center px-4",children:[f.jsx("div",{className:"relative z-10 flex items-center gap-2 animate-fade-in w-full justify-center",children:i?f.jsxs(f.Fragment,{children:[f.jsx(Sc,{className:"w-5 h-5 text-green-400"}),f.jsx("span",{className:"text-green-400 font-bold",children:"Download Complete"})]}):f.jsxs("div",{className:"flex items-center justify-center gap-2 min-w-0",children:[s&&f.jsx("span",{className:"text-sm text-neutral-400 font-medium truncate",children:s}),f.jsxs("span",{className:"text-lg font-bold text-white shrink-0",children:[Math.round(o||0),"%"]})]})}),!i&&f.jsx("div",{className:"absolute left-0 bottom-0 h-1 bg-white transition-all duration-300 ease-out",style:{width:`${o}%`}})]}):f.jsxs(f.Fragment,{children:[n&&f.jsx("span",{className:"mr-2",children:n}),t]})})},_P=({subtitle:t,isActive:e,isSingleColumn:n,sourceFont:r,targetFont:o})=>f.jsx("div",{className:`group relative p-6 transition-all duration-300 border-b border-neutral-900 hover:bg-neutral-900/50 ${e?"bg-neutral-900":""}`,children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsxs("div",{className:"w-24 shrink-0 flex flex-col gap-1",children:[f.jsxs("span",{className:"text-xs font-mono text-neutral-500",children:["#",t.id]}),f.jsx("span",{className:"text-[10px] font-mono text-neutral-600 bg-neutral-900/50 px-1 py-0.5 rounded w-fit",children:t.startTime.split(",")[0]})]}),f.jsxs("div",{className:`w-full ${n?"block":"grid grid-cols-1 md:grid-cols-2 gap-6"}`,children:[f.jsx("div",{className:"relative",children:f.jsx("p",{className:`font-medium leading-relaxed ${n?"text-white text-lg":"text-sm text-neutral-400"} ${r||"font-sans"}`,children:t.originalText})}),!n&&f.jsx("div",{className:"relative",children:f.jsx("p",{className:`text-base font-medium leading-relaxed transition-colors duration-500 ${t.text===t.originalText?"text-neutral-600 italic":"text-white"} ${o||"font-display"}`,children:t.text===t.originalText?"(Pending...)":t.text})})]})]})}),Ji=({number:t,title:e,isActive:n,isCompleted:r})=>f.jsxs("div",{className:`
      flex flex-col items-center gap-2 w-20 text-center
      lg:flex-row lg:w-auto lg:text-left lg:gap-3
      ${n?"opacity-100":"opacity-40"} transition-opacity duration-300
    `,children:[f.jsx("div",{className:`
        flex items-center justify-center w-8 h-8 rounded-full border text-sm font-bold transition-all shrink-0
        ${n||r?"bg-white text-black border-white":"bg-transparent text-white border-neutral-700"}
      `,children:r?"":t}),f.jsx("span",{className:"text-xs lg:text-sm font-medium tracking-wide uppercase",children:e})]}),ks=({isOpen:t,onClose:e,title:n,children:r})=>{const[o,s]=A.useState(!1);return A.useEffect(()=>{if(t)s(!0),document.body.style.overflow="hidden";else{const i=setTimeout(()=>s(!1),300);return document.body.style.overflow="unset",()=>clearTimeout(i)}},[t]),!o&&!t?null:f.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 transition-all duration-300 ${t?"opacity-100 visible":"opacity-0 invisible"}`,children:[f.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md transition-opacity duration-300",onClick:e}),f.jsxs("div",{className:`
          relative w-full max-w-3xl md:max-w-6xl max-h-[85vh] overflow-hidden rounded-3xl border border-neutral-800 
          bg-neutral-900/80 backdrop-blur-xl shadow-2xl flex flex-col transform transition-all duration-300 ease-out
          ${t?"scale-100 translate-y-0 opacity-100":"scale-95 translate-y-4 opacity-0"}
        `,children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-neutral-800 bg-neutral-900/50",children:[f.jsx("h2",{className:"text-2xl font-display font-bold text-white tracking-tight",children:n}),f.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-white/10 text-neutral-400 hover:text-white transition-colors focus:outline-none",children:f.jsx(P0,{className:"w-5 h-5"})})]}),f.jsx("div",{className:"p-6 md:p-8 overflow-y-auto custom-scrollbar",children:r})]})]})},ls=[{id:"intro",title:"Getting Started",category:"General",content:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("p",{className:"text-lg leading-relaxed text-neutral-300",children:["SubStream AI is a next-generation subtitle translation and generation tool. It bridges the gap between raw video and global accessibility using ",f.jsx("strong",{className:"text-white",children:"Google Gemini"})," for context-aware translation and ",f.jsx("strong",{className:"text-white",children:"YouTube AI"})," for high-accuracy speech-to-text."]}),f.jsxs("div",{className:"p-6 bg-neutral-900/40 rounded-2xl border border-neutral-800",children:[f.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Quick Start"}),f.jsxs("ol",{className:"relative border-l border-neutral-800 ml-3 space-y-6",children:[f.jsxs("li",{className:"ml-6",children:[f.jsx("span",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-neutral-600 rounded-full ring-4 ring-neutral-900"}),f.jsx("h4",{className:"font-bold text-white text-sm",children:"Import Media"}),f.jsx("p",{className:"text-neutral-400 text-sm",children:"Upload a local file, paste a URL, or import directly from your YouTube channel."})]}),f.jsxs("li",{className:"ml-6",children:[f.jsx("span",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-neutral-600 rounded-full ring-4 ring-neutral-900"}),f.jsx("h4",{className:"font-bold text-white text-sm",children:"Configure AI"}),f.jsxs("p",{className:"text-neutral-400 text-sm",children:["Select ",f.jsx("strong",{children:"Gemini"})," for translation or ",f.jsx("strong",{children:"YouTube Auto-Caption"})," for generating subtitles from scratch."]})]}),f.jsxs("li",{className:"ml-6",children:[f.jsx("span",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-green-500 rounded-full ring-4 ring-neutral-900"}),f.jsx("h4",{className:"font-bold text-white text-sm",children:"Process & Download"}),f.jsx("p",{className:"text-neutral-400 text-sm",children:"Review the side-by-side preview, then download the SRT file or the video with burned-in subtitles."})]})]})]})]})},{id:"file-sources",title:"Supported Sources",category:"General",content:f.jsxs("div",{className:"space-y-6",children:[f.jsx("p",{children:"SubStream AI supports various input methods:"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-5 bg-neutral-800/20 border border-neutral-800 rounded-xl hover:bg-neutral-800/30 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx(N0,{className:"w-5 h-5 text-blue-400"}),f.jsx("span",{className:"text-sm font-bold uppercase text-neutral-400",children:"Import from URL"})]}),f.jsxs("p",{className:"text-sm text-neutral-300",children:["Paste direct links to ",f.jsx("code",{children:".mp4"}),", ",f.jsx("code",{children:".mkv"}),", or ",f.jsx("code",{children:".srt"})," files. We use a smart proxy to bypass CORS restrictions."]})]}),f.jsxs("div",{className:"p-5 bg-neutral-800/20 border border-neutral-800 rounded-xl hover:bg-neutral-800/30 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx(cn,{className:"w-5 h-5 text-red-500"}),f.jsx("span",{className:"text-sm font-bold uppercase text-neutral-400",children:"YouTube Import"})]}),f.jsx("p",{className:"text-sm text-neutral-300",children:"Browse your own channel or paste a public video URL to extract existing captions."})]})]})]})},{id:"youtube-auto-caption",title:"YouTube Auto-Caption",category:"Integrations",content:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(cn,{className:"w-8 h-8 text-red-500"}),f.jsx("h3",{className:"text-2xl font-bold text-white",children:"Free AI Transcription"})]}),f.jsx("p",{children:"We leverage YouTube's powerful speech recognition engine to generate subtitles for your local videos for free."}),f.jsxs("div",{className:"space-y-4 border-l-2 border-red-900/50 pl-6",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-white",children:"How it works:"}),f.jsxs("ol",{className:"list-decimal list-inside text-sm text-neutral-400 mt-2 space-y-2",children:[f.jsx("li",{children:"You authenticate with your Google Account."}),f.jsxs("li",{children:["We upload your video to your channel as ",f.jsx("strong",{children:"Unlisted"})," (private to you)."]}),f.jsx("li",{children:"We poll YouTube's servers until they generate the automatic captions (ASR)."}),f.jsx("li",{children:"We download the captions and delete the temp data from our interface."})]})]}),f.jsxs("div",{className:"p-4 bg-red-950/30 rounded-lg border border-red-900/50 text-red-200 text-sm",children:[f.jsx("strong",{className:"block mb-1",children:"Quota Warning:"}),'YouTube limits uploads to approx. 6 videos per day for unverified API projects. If you see a "Quota Exceeded" error, please wait 24 hours or switch to an OpenAI/Gemini model.']})]})]})},{id:"youtube-auth",title:"YouTube Authentication",category:"Integrations",content:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{children:["To use features like ",f.jsx("strong",{children:"Channel Browser"})," or ",f.jsx("strong",{children:"Auto-Caption"}),", you must authenticate."]}),f.jsx("h4",{className:"font-bold text-white mt-4",children:"Permissions We Request:"}),f.jsx("ul",{className:"space-y-3",children:f.jsxs("li",{className:"flex gap-3 items-start",children:[f.jsx("div",{className:"mt-1 p-1 bg-neutral-800 rounded",children:f.jsx(cn,{className:"w-3 h-3 text-white"})}),f.jsxs("div",{children:[f.jsx("strong",{className:"text-white block text-sm",children:"Manage your YouTube videos"}),f.jsx("span",{className:"text-xs text-neutral-500",children:"Required to upload videos for transcription and list your channel videos for importing."})]})]})}),f.jsxs("p",{className:"text-xs text-neutral-500 mt-2",children:["We strictly follow the ",f.jsx("a",{href:"https://developers.google.com/youtube/terms/api-services-terms-of-service",target:"_blank",className:"underline hover:text-white",children:"YouTube API Services Terms of Service"}),". Your data is handled securely and keys are stored locally."]})]})},{id:"api-config",title:"Model & API Config",category:"Setup",content:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{children:"SubStream AI supports using your own Google Gemini API Key and selecting different AI models."}),f.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl bg-neutral-900/50 border border-neutral-800 mt-4",children:[f.jsx(Ec,{className:"w-6 h-6 text-green-400 shrink-0 mt-1"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-white",children:"Changing Models"}),f.jsxs("p",{className:"text-sm text-neutral-400 mt-2 mb-3",children:["Click the Model Name in the top right of the navigation bar. This opens the Configuration overlay where you can switch between ",f.jsx("strong",{children:"Gemini 3 Pro"}),", ",f.jsx("strong",{children:"GPT-4o"}),", and ",f.jsx("strong",{children:"YouTube Services"}),"."]})]})]}),f.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl bg-neutral-900/50 border border-neutral-800 mt-4",children:[f.jsx(Tc,{className:"w-6 h-6 text-green-400 shrink-0 mt-1"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-white",children:"Using Custom API Keys"}),f.jsxs("p",{className:"text-sm text-neutral-400 mt-2 mb-3",children:["In the same Configuration overlay, paste your key starting with ",f.jsx("code",{children:"AIzaSy..."})," or ",f.jsx("code",{children:"sk-..."}),"."]}),f.jsxs("ul",{className:"list-disc list-inside text-xs text-neutral-500 space-y-1",children:[f.jsx("li",{children:"Your key is stored in your browser's local storage."}),f.jsx("li",{children:"It is never sent to our servers, only directly to AI APIs."})]})]})]})]})},{id:"context-aware",title:"Context Awareness",category:"Features",content:f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(BS,{className:"w-6 h-6 text-indigo-400"}),f.jsx("h3",{className:"text-xl font-bold text-white",children:"Smart Batching"})]}),f.jsx("p",{children:"Standard translators translate one line at a time, often resulting in broken sentences when a speaker's thought spans multiple subtitles."}),f.jsxs("p",{children:[f.jsx("strong",{children:"SubStream AI"}),' groups subtitles into "Semantic Batches" (typically 10-20 lines). It sends the entire batch to the AI model, allowing it to:']}),f.jsxs("ul",{className:"space-y-2 list-disc list-inside text-neutral-300",children:[f.jsx("li",{children:"See the previous and next lines before translating."}),f.jsx("li",{children:'Understand gender and formality (e.g., distinct "You" in Spanish/French).'}),f.jsx("li",{children:"Maintain consistent terminology for names and places."})]})]})},{id:"common-errors",title:"Common Errors",category:"Support",content:f.jsxs("div",{className:"space-y-6",children:[f.jsx("p",{children:"If you encounter issues, check the error code or message displayed."}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex gap-4 p-4 bg-red-950/20 border border-red-900/30 rounded-xl",children:[f.jsx(js,{className:"w-6 h-6 text-red-500 shrink-0"}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-red-200 font-bold",children:"YouTube Quota Exceeded (403)"}),f.jsx("p",{className:"text-sm text-red-200/70 mt-1",children:"You have uploaded too many videos today using the Auto-Caption feature. This is a limit set by Google."}),f.jsx("div",{className:"mt-3 p-2 bg-black/40 rounded text-xs font-mono text-red-300",children:"Fix: Switch to a Gemini/OpenAI model for transcription or wait 24 hours."})]})]}),f.jsxs("div",{className:"flex gap-4 p-4 bg-neutral-800/30 border border-neutral-800 rounded-xl",children:[f.jsx(Ol,{className:"w-6 h-6 text-blue-400 shrink-0"}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-white font-bold",children:"Import URL Failed"}),f.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:"If importing a direct URL fails, the server might be blocking automated requests. We automatically retry using a proxy, but some secure links (like expired S3 links) cannot be accessed."})]})]})]})]})}],SP=({onBack:t})=>{const[e,n]=A.useState(""),[r,o]=A.useState(ls[0].id),s=A.useMemo(()=>{const a={};return ls.filter(p=>p.title.toLowerCase().includes(e.toLowerCase())||typeof p.content=="string"&&p.content.toLowerCase().includes(e.toLowerCase())).forEach(p=>{a[p.category]||(a[p.category]=[]),a[p.category].push(p)}),Array.from(new Set(ls.map(p=>p.category))).filter(p=>a[p]&&a[p].length>0).map(p=>({category:p,docs:a[p]}))},[e]),i=ls.find(a=>a.id===r)||ls[0];return f.jsxs("div",{className:"min-h-screen bg-black text-neutral-200 animate-fade-in flex flex-col",children:[f.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:f.jsx("div",{className:"absolute top-0 right-0 w-[60%] h-[60%] bg-neutral-900/20 blur-[150px] rounded-full mix-blend-screen"})}),f.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto w-full px-6 py-8 md:py-12 flex flex-col h-screen",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8 shrink-0",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-neutral-800 transition-colors group",children:f.jsx(Ns,{className:"w-6 h-6 text-neutral-400 group-hover:text-white"})}),f.jsx("h1",{className:"text-3xl font-display font-bold text-white",children:"Documentation"})]}),f.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[f.jsx(Ks,{className:"absolute left-4 top-3.5 w-5 h-5 text-neutral-500"}),f.jsx("input",{type:"text",placeholder:"Search guides...",value:e,onChange:a=>n(a.target.value),className:"w-full bg-neutral-900/50 border border-neutral-800 rounded-xl py-3 pl-12 pr-4 text-white focus:ring-1 focus:ring-white focus:border-white transition-all outline-none"})]})]}),f.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-12 gap-8 overflow-hidden min-h-0",children:[f.jsxs("div",{className:"lg:col-span-3 overflow-y-auto pr-2 custom-scrollbar pb-10",children:[f.jsxs("div",{className:"relative w-full md:hidden mb-6 sticky top-0 bg-black z-10 py-2",children:[f.jsx(Ks,{className:"absolute left-4 top-5 w-5 h-5 text-neutral-500"}),f.jsx("input",{type:"text",placeholder:"Search...",value:e,onChange:a=>n(a.target.value),className:"w-full bg-neutral-900/50 border border-neutral-800 rounded-xl py-3 pl-12 pr-4 text-white outline-none"})]}),f.jsx("div",{className:"space-y-2",children:s.length>0?s.map(a=>f.jsxs("div",{className:"animate-slide-up mb-6 relative",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-neutral-700"}),f.jsx("h3",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest",children:a.category})]}),f.jsx("div",{className:"absolute left-[3px] top-6 bottom-4 w-px bg-neutral-900"}),f.jsx("div",{className:"space-y-1 relative",children:a.docs.map((c,d)=>f.jsxs("div",{className:"relative pl-6",children:[f.jsx("div",{className:"absolute left-[3px] top-0 h-[24px] w-4 border-l border-b border-neutral-800 rounded-bl-xl"}),f.jsx("button",{onClick:()=>o(c.id),className:`w-full text-left px-4 py-2 rounded-lg text-sm transition-all flex items-center justify-between group relative
                              ${r===c.id?"text-white bg-neutral-800/50 font-medium":"text-neutral-400 hover:text-white hover:bg-neutral-900/30"}
                            `,children:f.jsx("span",{className:"truncate",children:c.title})})]},c.id))})]},a.category)):f.jsx("div",{className:"text-neutral-500 text-sm italic px-4",children:"No matching articles found."})})]}),f.jsx("div",{className:"lg:col-span-9 bg-neutral-900/30 border border-neutral-800 rounded-3xl p-8 md:p-12 overflow-y-auto custom-scrollbar backdrop-blur-sm relative",children:f.jsxs("div",{className:"max-w-3xl mx-auto pb-20",children:[f.jsx("div",{className:"flex items-center gap-3 mb-6",children:f.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono text-neutral-400 uppercase tracking-wider",children:[f.jsx("span",{children:i.category}),f.jsx("span",{className:"text-neutral-600",children:"/"}),f.jsx("span",{className:"text-white",children:i.title})]})}),f.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white mb-8 tracking-tight",children:i.title}),f.jsx("div",{className:"prose prose-invert prose-lg prose-neutral max-w-none text-neutral-300",children:i.content}),f.jsxs("div",{className:"mt-16 pt-8 border-t border-neutral-800 flex items-center justify-between text-sm text-neutral-500",children:[f.jsx("span",{children:"Last updated: November 2025"}),f.jsx("div",{className:"flex gap-4",children:f.jsxs("button",{className:"flex items-center gap-2 hover:text-white transition-colors",children:[f.jsx(Mo,{className:"w-4 h-4"})," Suggest Edit"]})})]})]})})]})]})]})},EP=({videoSrc:t,srtContent:e,isYouTube:n})=>{const r=A.useRef(null),o=A.useRef(null);return A.useEffect(()=>{if(!n&&r.current&&o.current){const s=new Blob([e],{type:"text/vtt"}),i=URL.createObjectURL(s);o.current.src=i;const a=r.current.currentTime,c=!r.current.paused;return r.current.load(),r.current.currentTime=a,c&&r.current.play().catch(d=>console.log("Auto-resume prevented",d)),()=>{URL.revokeObjectURL(i)}}},[e,n]),n?f.jsxs("div",{className:"w-full bg-black rounded-2xl overflow-hidden aspect-video border border-neutral-800 relative group",children:[f.jsx("iframe",{width:"100%",height:"100%",src:t,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}),f.jsx("div",{className:"absolute top-2 right-2 bg-black/80 px-2 py-1 rounded text-[10px] text-neutral-400 pointer-events-none",children:"YouTube Preview"})]}):f.jsx("div",{className:"w-full bg-black rounded-2xl overflow-hidden aspect-video border border-neutral-800",children:f.jsxs("video",{ref:r,controls:!0,crossOrigin:"anonymous",className:"w-full h-full",src:t,children:[f.jsx("track",{ref:o,label:"Translated",kind:"subtitles",srcLang:"en",default:!0}),"Your browser does not support the video tag."]})})},CP=({tracks:t,onSelectTrack:e,onGenerate:n,activeModel:r,isYouTubeAuthenticated:o,sourceLang:s,setSourceLang:i,targetLang:a,setTargetLang:c})=>{const d=r.provider==="youtube";return f.jsxs("div",{className:"animate-fade-in space-y-6 max-w-2xl mx-auto",children:[f.jsxs("div",{className:"text-center space-y-2",children:[f.jsx("h2",{className:"text-xl font-bold text-white",children:"Configuration"}),f.jsxs("p",{className:"text-neutral-400",children:["Configure languages before generating subtitles with ",f.jsx("strong",{children:r.name}),"."]})]}),f.jsxs("div",{className:"bg-neutral-900/40 border border-neutral-800 rounded-2xl p-6 space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"text-xs font-bold text-neutral-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(Ic,{className:"w-3 h-3"})," Audio Language"]}),f.jsx("div",{className:"relative",children:f.jsxs("select",{className:"w-full appearance-none bg-black border border-neutral-800 text-white px-4 py-3 rounded-xl focus:border-white focus:outline-none transition-colors",value:s,onChange:p=>i(p.target.value),children:[f.jsx("option",{value:"auto",children:" Auto Detect"}),nt.map(p=>f.jsx("option",{value:p.name,children:p.name},`src-${p.code}`))]})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("label",{className:"text-xs font-bold text-neutral-500 uppercase tracking-wider flex items-center gap-2",children:[f.jsx(T0,{className:"w-3 h-3"})," Translate To"]}),f.jsx("div",{className:"relative",children:f.jsx("select",{className:"w-full appearance-none bg-black border border-neutral-800 text-white px-4 py-3 rounded-xl focus:border-white focus:outline-none transition-colors",value:a,onChange:p=>c(p.target.value),children:nt.map(p=>f.jsx("option",{value:p.name,children:p.name},`tgt-${p.code}`))})})]})]}),f.jsxs("button",{onClick:n,className:`w-full flex items-center gap-4 p-4 rounded-xl border transition-all text-left group
            ${d?"bg-red-900/10 border-red-900/30 hover:bg-red-900/20 hover:border-red-500/50":"bg-indigo-900/10 border-indigo-900/30 hover:bg-indigo-900/20 hover:border-indigo-500/50"}
          `,children:[f.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center shrink-0 transition-colors
             ${d?"bg-red-900/20 text-red-500":"bg-indigo-900/20 text-indigo-400"}
          `,children:d?f.jsx(cn,{className:"w-6 h-6"}):f.jsx(R0,{className:"w-6 h-6"})}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("h3",{className:`font-bold flex items-center gap-2 ${d?"text-red-100":"text-indigo-100"}`,children:["Start Processing",d&&!o&&f.jsx("span",{className:"text-[10px] uppercase bg-neutral-800 text-neutral-400 px-1.5 py-0.5 rounded border border-neutral-700",children:"Auth Required"})]}),f.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:d?"Uploads unlisted to YouTube -> Transcribes -> Translates.":`Extracts Audio -> Transcribes (${s==="auto"?"Auto":s}) -> Translates to ${a}.`})]})]})]}),t.length>0&&f.jsxs("div",{className:"relative py-2",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("span",{className:"w-full border-t border-neutral-800"})}),f.jsx("div",{className:"relative flex justify-center",children:f.jsx("span",{className:"bg-neutral-900 px-3 text-xs text-neutral-500 uppercase",children:"Or use embedded track"})})]}),t.length>0&&f.jsx("div",{className:"space-y-3",children:t.map(p=>f.jsxs("button",{onClick:()=>e(p.index),className:"w-full flex items-center gap-4 p-4 rounded-xl border border-neutral-800 bg-neutral-900/20 hover:bg-neutral-800/50 hover:border-neutral-600 transition-all text-left",children:[f.jsx("div",{className:"w-12 h-12 bg-neutral-800 rounded-lg flex items-center justify-center shrink-0",children:f.jsx(Mo,{className:"w-6 h-6 text-neutral-400"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-white",children:p.title||`Subtitle Track ${p.index}`}),f.jsxs("p",{className:"text-xs text-neutral-500 uppercase mt-0.5",children:["Language: ",p.language]})]})]},p.index))})]})},TP=({onLoginSuccess:t,onLogout:e,userInfo:n})=>{const[r,o]=A.useState(!1),s=()=>{const i="474943199780-akmhetcsrtcb9qej7rfepth49abt2fu8.apps.googleusercontent.com",a=window.location.href.split("#")[0],c="youtube_auth",d=["https://www.googleapis.com/auth/youtube.upload","https://www.googleapis.com/auth/youtube.force-ssl","profile","email"].join(" "),h=`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:i,redirect_uri:a,response_type:"token",scope:d,include_granted_scopes:"true",state:c,prompt:"consent"}).toString()}`,m=500,g=600,_=window.screen.width/2-m/2,w=window.screen.height/2-g/2;window.open(h,"Google Auth",`width=${m},height=${g},top=${w},left=${_}`)};return n?f.jsxs("div",{className:"flex items-center gap-3 bg-neutral-900/50 border border-neutral-800 rounded-xl p-2 pr-4 transition-all",children:[f.jsxs("div",{className:"relative shrink-0",children:[r?f.jsx("div",{className:"w-8 h-8 rounded-full border border-neutral-700 bg-neutral-800 flex items-center justify-center text-xs font-bold text-white",children:n.name.charAt(0).toUpperCase()}):f.jsx("img",{src:n.picture,alt:"User",className:"w-8 h-8 rounded-full border border-neutral-700 object-cover",onError:()=>o(!0),referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),f.jsx("div",{className:"absolute -bottom-1 -right-1 bg-red-600 rounded-full p-0.5 border border-black",children:f.jsx(cn,{className:"w-2 h-2 text-white"})})]}),f.jsxs("div",{className:"flex flex-col min-w-0",children:[f.jsx("span",{className:"text-xs font-bold text-white leading-none truncate max-w-[100px]",children:n.name}),f.jsx("span",{className:"text-[10px] text-neutral-500 leading-none mt-1",children:"Connected"})]}),f.jsx("div",{className:"h-4 w-px bg-neutral-800 mx-1"}),f.jsx("button",{onClick:()=>{ZS(),e()},className:"p-1.5 rounded-lg hover:bg-red-900/30 text-neutral-500 hover:text-red-400 transition-colors",title:"Disconnect Channel",children:f.jsx(Nc,{className:"w-4 h-4"})})]}):f.jsx(ze,{onClick:s,type:"button",variant:"secondary",className:"bg-[#151515] hover:bg-[#252525] text-white border border-neutral-800 hover:border-neutral-700 px-4 py-3 transition-colors",icon:f.jsx(cn,{className:"w-4 h-4 text-red-500"}),children:"Authenticate YouTube"})},IP=({isOpen:t,onClose:e,type:n,onImportFile:r,onImportYouTube:o,googleAccessToken:s})=>{const[i,a]=A.useState("INPUT"),[c,d]=A.useState(""),[p,h]=A.useState("IDLE"),[m,g]=A.useState(null),[_,w]=A.useState(null),[C,v]=A.useState(null),[y,x]=A.useState(!1),[S,N]=A.useState(null),[I,T]=A.useState([]),[R,k]=A.useState(!1),[P,G]=A.useState(""),[z,le]=A.useState("date"),[Ie,Pe]=A.useState(!1),ge=A.useRef(null);A.useEffect(()=>{t||(a("INPUT"),d(""),h("IDLE"),g(null),w(null),v(null),N(null),T([]),G(""),Pe(!1),x(!1))},[t]),A.useEffect(()=>{const H=Y=>{ge.current&&!ge.current.contains(Y.target)&&Pe(!1)};return Ie&&document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[Ie]),A.useEffect(()=>{i==="CHANNEL"&&s&&I.length===0&&(k(!0),yP(s).then(H=>T(H)).catch(H=>g(H.message)).finally(()=>k(!1)))},[i,s]);const Be=async(H,Y=!1)=>{var K;x(Y);try{let fe="",Ne=null;if(Y){const L=`http://localhost:4000/api/proxy/file-head?url=${encodeURIComponent(H)}`,re=await(await fetch(L)).json();if(!re.ok)throw new Error(re.error||"Proxy failed");fe=re.contentType,Ne=re.contentLength}else{const L=await fetch(H,{method:"HEAD"});if(!L.ok)throw new Error(`Status ${L.status}`);fe=L.headers.get("content-type"),Ne=L.headers.get("content-length")}const Ft=((K=H.split("/").pop())==null?void 0:K.split("?")[0])||"downloaded_file",at=Ne?`${(parseInt(Ne)/(1024*1024)).toFixed(2)} MB`:"Unknown Size";if(fe!=null&&fe.includes("text")||Ft.endsWith(".srt")||Ft.endsWith(".vtt"))w("SRT"),v({name:Ft,size:at,type:"Subtitle File"}),h("PREVIEW");else if(fe!=null&&fe.includes("video")||Ft.match(/\.(mp4|mkv|mov|webm)$/i))w("VIDEO"),v({name:Ft,size:at,type:"Video File"}),h("PREVIEW");else throw new Error("Unsupported file type. Please provide a direct link to an SRT or Video file.")}catch(fe){Y?(g(`Failed to access URL: ${fe.message}`),h("IDLE")):(console.log("Direct fetch failed, trying proxy...",fe),Be(H,!0))}},b=async()=>{if(g(null),h("LOADING"),n==="YOUTUBE"){if(!hP(c)){g("Invalid YouTube URL."),h("IDLE");return}try{const{meta:Y,captions:K}=await Qc(c);N({...Y,availableCaptions:K}),h("PREVIEW")}catch(Y){g(Y.message||"Failed to fetch YouTube details."),h("IDLE")}}else n==="URL"&&Be(c)},B=async()=>{if(n==="YOUTUBE"&&S)o(S),e();else if(n==="URL"&&C)try{let H=c;y&&(H=`http://localhost:4000/api/proxy/file-get?url=${encodeURIComponent(c)}`);const Y=await fetch(H);if(!Y.ok)throw new Error("Download failed.");const K=await Y.blob(),fe=new File([K],C.name,{type:K.type});r(fe),e()}catch(H){g("Download Failed: "+H.message)}},O=async H=>{a("INPUT");const Y=`https://www.youtube.com/watch?v=${H}`;d(Y),g(null),h("LOADING");try{const{meta:K,captions:fe}=await Qc(Y);N({...K,availableCaptions:fe}),h("PREVIEW")}catch(K){g(K.message||"Failed to fetch YouTube details."),h("IDLE")}},ae=A.useMemo(()=>{let H=I.filter(Y=>Y.title.toLowerCase().includes(P.toLowerCase()));return z==="date"?H.sort((Y,K)=>new Date(K.publishedAt).getTime()-new Date(Y.publishedAt).getTime()):H.sort((Y,K)=>Y.title.localeCompare(K.title)),H},[I,P,z]),ne=n==="YOUTUBE"?i==="CHANNEL"?"Select from My Videos":"Import from YouTube":n==="URL"?"Import from URL":"Import";return f.jsx(ks,{isOpen:t,onClose:e,title:ne,children:f.jsxs("div",{className:"space-y-6",children:[i==="INPUT"&&f.jsxs(f.Fragment,{children:[(p==="IDLE"||p==="LOADING")&&f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-neutral-400 text-sm",children:n==="YOUTUBE"?"Paste a YouTube URL. We will fetch the video details and available captions using the local server.":"Paste a direct link to an .SRT file or a supported Video file (MP4, MKV, etc)."}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute left-4 top-3.5 text-neutral-500",children:n==="YOUTUBE"?f.jsx(cn,{className:"w-5 h-5"}):f.jsx(Ol,{className:"w-5 h-5"})}),f.jsx("input",{type:"text",placeholder:n==="YOUTUBE"?"https://www.youtube.com/watch?v=...":"https://example.com/movie.srt",className:"w-full bg-black border border-neutral-800 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-white transition-colors",value:c,onChange:H=>d(H.target.value),onKeyDown:H=>H.key==="Enter"&&b()})]}),m&&f.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-900/50 rounded-lg text-red-400 text-sm flex gap-2",children:[f.jsx(js,{className:"w-4 h-4 mt-0.5"}),m]}),f.jsxs("div",{className:"flex justify-between items-center pt-2",children:[n==="YOUTUBE"?f.jsxs("button",{onClick:()=>a("CHANNEL"),disabled:!s,className:"flex items-center gap-2 text-sm font-medium text-neutral-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:s?"Browse your uploaded videos":"Authenticate with YouTube in Settings first",children:[f.jsx($l,{className:"w-4 h-4"})," Select from My Videos"]}):f.jsx("div",{}),f.jsx(ze,{onClick:b,disabled:!c||p==="LOADING",icon:p==="LOADING"?f.jsx(wr,{className:"animate-spin w-4 h-4"}):void 0,children:p==="LOADING"?"Checking...":"Continue"})]})]}),p==="PREVIEW"&&n==="YOUTUBE"&&S&&f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("div",{className:"flex gap-4",children:[f.jsx("img",{src:S.thumbnailUrl,alt:"Thumb",className:"w-32 h-24 object-cover rounded-lg border border-neutral-800"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-white line-clamp-2",children:S.title}),f.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:S.channelTitle}),f.jsx("div",{className:"flex gap-2 mt-2",children:f.jsxs("span",{className:"text-[10px] bg-neutral-800 px-2 py-0.5 rounded text-neutral-400",children:["Duration: ",S.duration]})})]})]}),m&&f.jsx("div",{className:"text-red-400 text-sm",children:m}),f.jsxs("div",{className:"flex justify-end gap-3",children:[f.jsx(ze,{variant:"outline",onClick:()=>h("IDLE"),children:"Back"}),f.jsx(ze,{onClick:B,icon:f.jsx(Vl,{className:"w-4 h-4"}),children:"Import Video"})]})]}),p==="PREVIEW"&&n==="URL"&&C&&f.jsxs("div",{className:"space-y-6 animate-fade-in",children:[f.jsxs("div",{className:"p-6 bg-neutral-900/30 border border-neutral-800 rounded-xl flex items-center gap-4",children:[f.jsx("div",{className:"w-12 h-12 rounded-full bg-neutral-800 flex items-center justify-center",children:_==="VIDEO"?f.jsx(JS,{className:"w-6 h-6 text-blue-400"}):f.jsx(Mo,{className:"w-6 h-6 text-green-400"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-white break-all",children:C.name}),f.jsxs("p",{className:"text-sm text-neutral-500",children:[C.type,"  ",C.size]}),y&&f.jsx("span",{className:"text-[10px] text-amber-500 border border-amber-900/50 px-1.5 py-0.5 rounded bg-amber-900/20",children:"Proxy Active"})]})]}),m&&f.jsx("div",{className:"text-red-400 text-sm",children:m}),f.jsxs("div",{className:"flex justify-end gap-3",children:[f.jsx(ze,{variant:"outline",onClick:()=>h("IDLE"),children:"Back"}),f.jsx(ze,{onClick:B,icon:f.jsx(Vl,{className:"w-4 h-4"}),children:"Download & Process"})]})]})]}),i==="CHANNEL"&&f.jsxs("div",{className:"flex flex-col h-[500px]",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-neutral-800 shrink-0 relative z-20",children:[f.jsx("button",{onClick:()=>a("INPUT"),className:"p-2 hover:bg-neutral-800 rounded-full transition-colors",children:f.jsx(Ns,{className:"w-5 h-5 text-white"})}),f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(Ks,{className:"absolute left-3 top-2.5 w-4 h-4 text-neutral-500"}),f.jsx("input",{type:"text",placeholder:"Search your videos...",className:"w-full bg-neutral-900/50 border border-neutral-800 rounded-lg py-2 pl-9 pr-4 text-sm text-white focus:outline-none focus:border-white",value:P,onChange:H=>G(H.target.value)})]}),f.jsxs("div",{className:"relative",ref:ge,children:[f.jsx("button",{onClick:()=>Pe(!Ie),className:`p-2 rounded-lg transition-colors flex items-center gap-2 ${Ie?"bg-neutral-800 text-white":"text-neutral-400 hover:text-white hover:bg-neutral-800"}`,title:"Sort Options",children:f.jsx(NS,{className:"w-5 h-5"})}),Ie&&f.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-neutral-900 border border-neutral-800 rounded-xl shadow-2xl z-30 overflow-hidden",children:f.jsxs("div",{className:"py-1",children:[f.jsxs("button",{onClick:()=>{le("date"),Pe(!1)},className:"w-full px-4 py-2 text-left text-sm text-neutral-300 hover:bg-neutral-800 hover:text-white flex items-center justify-between",children:["Newest First",z==="date"&&f.jsx(Sc,{className:"w-4 h-4 text-white"})]}),f.jsxs("button",{onClick:()=>{le("title"),Pe(!1)},className:"w-full px-4 py-2 text-left text-sm text-neutral-300 hover:bg-neutral-800 hover:text-white flex items-center justify-between",children:["Title (A-Z)",z==="title"&&f.jsx(Sc,{className:"w-4 h-4 text-white"})]})]})})]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-2 relative z-10",children:R?f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-neutral-500 gap-3",children:[f.jsx(wr,{className:"w-8 h-8 animate-spin"}),f.jsx("p",{children:"Loading channel videos..."})]}):m?f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-red-400 gap-2 text-center px-4",children:[f.jsx(js,{className:"w-8 h-8"}),f.jsx("p",{children:m}),f.jsx(ze,{variant:"outline",onClick:()=>a("INPUT"),className:"mt-2",children:"Go Back"})]}):ae.length===0?f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-neutral-500",children:[f.jsx($l,{className:"w-12 h-12 mb-2 opacity-50"}),f.jsx("p",{children:"No videos found."})]}):ae.map(H=>f.jsxs("div",{onClick:()=>O(H.id),className:"flex gap-3 p-2 rounded-xl hover:bg-neutral-800/50 transition-colors cursor-pointer group border border-transparent hover:border-neutral-700",children:[f.jsxs("div",{className:"relative w-32 h-20 shrink-0 rounded-lg overflow-hidden bg-neutral-900",children:[f.jsx("img",{src:H.thumbnail,alt:"",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"}),f.jsx("span",{className:"absolute bottom-1 right-1 bg-black/80 text-[10px] text-white px-1 rounded",children:H.duration})]}),f.jsxs("div",{className:"flex flex-col justify-between py-1 min-w-0",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-bold text-white line-clamp-2 leading-snug group-hover:text-indigo-300 transition-colors",children:H.title}),f.jsx("p",{className:"text-[10px] text-neutral-500 mt-1",children:new Date(H.publishedAt).toLocaleDateString()})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[H.privacyStatus==="private"&&f.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-red-400 bg-red-900/20 px-1.5 py-0.5 rounded",children:[f.jsx(qS,{className:"w-3 h-3"})," Private"]}),H.privacyStatus==="unlisted"&&f.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-yellow-400 bg-yellow-900/20 px-1.5 py-0.5 rounded",children:[f.jsx(LS,{className:"w-3 h-3"})," Unlisted"]}),H.privacyStatus==="public"&&f.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-green-400 bg-green-900/20 px-1.5 py-0.5 rounded",children:[f.jsx(N0,{className:"w-3 h-3"})," Public"]})]})]})]},H.id))})]})]})})},Cx="http://localhost:4000/api/proxy";async function Tx(t,e="root",n=""){let r="";if(e==="virtual-videos"?r="(mimeType contains 'video/') and trashed = false":e==="virtual-subtitles"?r="(fileExtension = 'srt' or fileExtension = 'vtt') and trashed = false":r=`('${e}' in parents and trashed = false) and (mimeType = 'application/vnd.google-apps.folder' or mimeType contains 'video/' or fileExtension = 'srt' or fileExtension = 'vtt')`,n){const p=n.replace(/'/g,"\\'");r+=` and name contains '${p}'`}const o="files(id, name, mimeType, thumbnailLink, iconLink, size, createdTime, modifiedTime, videoMediaMetadata, fileExtension)",s="folder,modifiedTime desc",i=new URLSearchParams({token:t,query:r,fields:o,orderBy:s,pageSize:"1000"}),a=`${Cx}/drive/list?${i.toString()}`,c=await fetch(a);if(!c.ok){const p=await c.json().catch(()=>({}));let h="Unknown Drive Error";throw p.error?typeof p.error=="string"?h=p.error:typeof p.error=="object"&&(h=p.error.message||JSON.stringify(p.error)):h=c.statusText||"Server Error",new Error(h)}return(await c.json()).files||[]}async function NP(t,e,n){const r=`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,o=`${Cx}/file-get?url=${encodeURIComponent(r)}`,s=await fetch(o,{headers:{"x-proxy-auth":`Bearer ${t}`}});if(!s.ok)throw new Error("Failed to download file from Drive via proxy.");const i=await s.blob();return new File([i],n,{type:i.type})}const Au=({className:t})=>f.jsxs("svg",{viewBox:"0 0 2048 2048",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[f.jsx("path",{d:"M2048 1403L1807.52 1823.87C1786.13 1858.36 1756.1 1886.66 1720.4 1905.97C1684.71 1925.27 1644.59 1934.91 1604.02 1933.93H444.259C403.689 1934.91 363.567 1925.27 327.87 1905.97C292.173 1886.66 262.142 1858.36 240.753 1823.87L142 1651.02L550.718 1403H2048Z",fill:"#4285F4"}),f.jsx("path",{d:"M749.556 124C694.923 143.602 649.036 181.981 620.087 232.285L34.7273 1233.7C13.402 1268.24 1.47482 1307.75 0.128208 1348.31C-1.2184 1388.88 8.06235 1429.09 27.0503 1464.97L143.115 1652L550.479 1403.61L1024 593.519L749.556 124Z",fill:"#00AC47"}),f.jsx("path",{d:"M550 1403H5C8.94846 1424.51 16.3732 1445.23 26.9825 1464.36L142.353 1650.51L141.481 1651.05L240.205 1823.89C263.849 1863 299.361 1893.52 341.56 1911L550 1403Z",fill:"#0066DA"}),f.jsx("path",{d:"M1297.45 124C1352.08 143.6 1397.96 181.98 1426.9 232.285L2012.27 1233.7C2033.6 1268.24 2045.52 1307.75 2046.87 1348.31C2048.22 1388.88 2038.94 1429.09 2019.95 1464.97L1903.93 1652L1496.52 1403.61L1023 593.519L1297.45 124Z",fill:"#FFBA00"}),f.jsx("path",{d:"M1497 1403H2042C2038.05 1424.51 2030.63 1445.23 2020.02 1464.36L1904.62 1650.52L1905.5 1651.05L1806.79 1823.89C1783.15 1862.99 1747.64 1893.51 1705.44 1911L1497 1403Z",fill:"#EA4435"}),f.jsx("path",{d:"M1297.62 124.192L1297.8 123.889C1288.86 120.786 1279.73 118.292 1270.46 116.423L1023.8 114L777.129 116.423C767.86 118.292 758.729 120.786 749.795 123.889C740.26 127.481 730.974 131.709 722 136.542L1022.95 594L1325 136.732C1316.16 131.956 1307.01 127.767 1297.62 124.192Z",fill:"#188038"})]}),AP=({className:t})=>f.jsxs("svg",{viewBox:"0 0 1024 1024",className:t,xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{fill:"#D9272E",cx:"512",cy:"512",r:"512"}),f.jsx("path",{fill:"#FFFFFF",d:`M512,256.1c-141.3,0-255.9,114.5-255.9,255.9S370.7,767.9,512,767.9S767.9,653.3,767.9,512\r
      S653.3,256.1,512,256.1z M644.8,602.5c0,4.4-3.5,7.9-7.9,7.9c0,0,0,0-0.1,0h-33.4c-4.4,0-7.9-3.5-7.9-7.9c0,0,0,0,0,0V499.5\r
      c0-0.9-1-1.3-1.7-0.7L523,569.6c-6.2,6.1-16.1,6.1-22.2,0L430,498.8c-0.6-0.6-1.7-0.1-1.7,0.7v102.9c0,4.4-3.5,7.9-7.9,7.9\r
      c0,0,0,0,0,0H387c-4.4,0-7.9-3.5-7.9-7.9c0,0,0,0,0,0v-181c0-4.4,3.5-7.9,7.9-7.9h22.9c4.2,0,8.2,1.7,11.2,4.7l88.1,88.1\r
      c1.5,1.5,3.9,1.6,5.4,0.1c0,0,0.1-0.1,0.1-0.1l88.1-88.1c3-3,6.9-4.7,11.2-4.7h22.9c4.4,0,7.9,3.5,7.9,7.9L644.8,602.5z`})]}),RP=({className:t})=>f.jsxs("svg",{viewBox:"0 0 128 128",className:t,xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("rect",{clipRule:"evenodd",fill:"none",fillRule:"evenodd",height:"128",width:"128"}),f.jsx("path",{clipRule:"evenodd",d:"M128,28.78L90.348,4L64,26.167l37.964,23.626    L128,28.78z M64.077,78.191l-26.424,22.102l-11.308-7.443v8.342L64.077,124l37.732-22.808v-8.342l-11.308,7.443L64.077,78.191z     M37.653,4L0.001,28.779l26.036,21.014l37.964-23.626L37.653,4z M64,73.422L37.652,95.589L0,70.809l26.036-21.014L64,73.422    l37.963-23.63l26.036,21.018L90.347,95.589L64,73.422L64,73.422z",fill:"#0F82E2",fillRule:"evenodd"})]}),Ix=({folder:t,activeFolderId:e,level:n,onSelect:r,accessToken:o,defaultExpanded:s=!1})=>{const[i,a]=A.useState(s),[c,d]=A.useState([]),[p,h]=A.useState(!1);A.useEffect(()=>{s&&!p&&m(null)},[s]);const m=async _=>{if(_==null||_.stopPropagation(),!p)try{const C=(await Tx(o,t.id)).filter(v=>v.mimeType==="application/vnd.google-apps.folder").map(v=>({id:v.id,name:v.name}));d(C),h(!0)}catch(w){console.error("Failed to load subfolders",w)}a(_?!i:!0)},g=t.id===e;return f.jsxs("div",{children:[f.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer transition-colors text-sm
                    ${g?"bg-indigo-900/40 text-white":"text-neutral-400 hover:text-white hover:bg-neutral-800"}
                `,style:{paddingLeft:`${n*12+8}px`},onClick:()=>r(t.id,t.name),children:[f.jsx("button",{onClick:m,className:"p-0.5 hover:bg-neutral-700 rounded text-neutral-500 hover:text-white",children:i?f.jsx(sl,{className:"w-3 h-3"}):f.jsx(I0,{className:"w-3 h-3"})}),f.jsx(Cc,{className:`w-4 h-4 ${g?"text-indigo-400":"text-neutral-500"}`}),f.jsx("span",{className:"truncate",children:t.name})]}),i&&f.jsxs("div",{children:[c.map(_=>f.jsx(Ix,{folder:_,activeFolderId:e,level:n+1,onSelect:r,accessToken:o},_.id)),c.length===0&&p&&f.jsx("div",{className:"text-[10px] text-neutral-600 pl-8 py-1",style:{paddingLeft:`${(n+1)*12+24}px`},children:"Empty"})]})]})},PP=({isOpen:t,onClose:e,onImportFile:n})=>{const[r,o]=A.useState("PROVIDERS"),[s,i]=A.useState(null),[a,c]=A.useState(null),[d,p]=A.useState(null),[h,m]=A.useState(null),[g,_]=A.useState("root"),[w,C]=A.useState([{id:"root",name:"My Drive"}]),[v,y]=A.useState([]),[x,S]=A.useState(!1),[N,I]=A.useState(null),[T,R]=A.useState(null),[k,P]=A.useState(""),[G,z]=A.useState(0),[le,Ie]=A.useState(!1),[Pe,ge]=A.useState(0),[Be,b]=A.useState(!1);A.useEffect(()=>{const L=localStorage.getItem("substream_drive_token"),X=localStorage.getItem("substream_drive_token_timestamp");L&&X&&(Date.now()-parseInt(X,10)<50*60*1e3?(c(L),ne(L)):(localStorage.removeItem("substream_drive_token"),localStorage.removeItem("substream_drive_token_timestamp")))},[]),A.useEffect(()=>{a&&ne(a)},[a]),A.useEffect(()=>{const L=re=>{var Fe;((Fe=re.data)==null?void 0:Fe.type)==="DRIVE_AUTH_SUCCESS"&&re.data.token&&B(re.data.token)};window.addEventListener("message",L);const X=new BroadcastChannel("substream_drive_auth_channel");return X.onmessage=re=>{var Fe;(Fe=re.data)!=null&&Fe.token&&B(re.data.token)},()=>{window.removeEventListener("message",L),X.close()}},[]);const B=L=>{c(L),localStorage.setItem("substream_drive_token",L),localStorage.setItem("substream_drive_token_timestamp",Date.now().toString()),o("EXPLORER"),i("GDRIVE"),ne(L)},O=()=>{c(null),o("PROVIDERS"),i(null),y([]),I(null),localStorage.removeItem("substream_drive_token"),localStorage.removeItem("substream_drive_token_timestamp"),h&&URL.revokeObjectURL(h),m(null),p(null)},ae=()=>{i("GDRIVE"),o(a?"EXPLORER":"AUTH_GDRIVE")};A.useEffect(()=>{r==="EXPLORER"&&a&&(S(!0),I(null),y([]),Tx(a,g,k).then(y).catch(L=>{console.error("List Error:",L);let X=L.message||"Failed to load files";typeof X=="object"&&(X=JSON.stringify(X)),X.includes("403")&&(X="Access Denied: Please enable 'Google Drive API' in your Google Cloud Console."),(X.includes("socket disconnected")||X.includes("500"))&&(X="Connection Error: Server could not connect to Google Drive. Please retry."),X.includes("400")&&(X="Invalid Request: Malformed query or missing permissions."),X.includes("timeout")&&(X="Connection Timed Out: Google Drive is taking too long to respond. Please retry."),I(X)}).finally(()=>S(!1)))},[g,a,k,r,G]);const ne=async L=>{try{const re=await(await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${L}`}})).json();if(p(re),re.picture){const Fe=`http://localhost:4000/api/proxy/file-get?url=${encodeURIComponent(re.picture)}`,dn=await fetch(Fe);if(dn.ok){const ir=await dn.blob(),he=URL.createObjectURL(ir);m(he)}}}catch(X){console.error("Profile fetch failed",X)}},H=()=>{const L="474943199780-akmhetcsrtcb9qej7rfepth49abt2fu8.apps.googleusercontent.com",X=window.location.origin+window.location.pathname,Fe=`https://accounts.google.com/o/oauth2/v2/auth?client_id=${L}&redirect_uri=${X}&response_type=token&scope=https://www.googleapis.com/auth/drive.readonly profile email&state=drive_auth&prompt=consent`,dn=500,ir=600,he=window.screen.width/2-dn/2,Ho=window.screen.height/2-ir/2;window.open(Fe,"Google Drive Auth",`width=${dn},height=${ir},top=${Ho},left=${he}`)},Y=(L,X)=>{if(L==="virtual-videos"||L==="virtual-subtitles")C([{id:"root",name:"My Drive"},{id:L,name:X}]);else if(L==="root")C([{id:"root",name:"My Drive"}]);else{const re=w.findIndex(Fe=>Fe.id===L);C(re!==-1?w.slice(0,re+1):[...w,{id:L,name:X}])}_(L),R(null),b(!1)},K=L=>{L.mimeType==="application/vnd.google-apps.folder"?(C([...w,{id:L.id,name:L.name}]),_(L.id),R(null)):R(L)},fe=()=>{I(null),S(!0),z(L=>L+1)},Ne=async()=>{if(!(!T||!a)){Ie(!0),ge(10);try{const L=await NP(a,T.id,T.name);ge(100),setTimeout(()=>{n(L),e(),Ie(!1)},500)}catch(L){console.error("Import failed",L),Ie(!1),alert("Import failed: "+L.message)}}},Ft=L=>{if(!L)return"Unknown";const X=parseInt(L),re=["Bytes","KB","MB","GB"];if(X===0)return"0 Byte";const Fe=Math.floor(Math.log(X)/Math.log(1024));return Math.round(X/Math.pow(1024,Fe))+" "+re[Fe]},at=L=>{if(!L)return"-";const X=Math.floor(L/6e4),re=(L%6e4/1e3).toFixed(0);return`${X}:${parseInt(re)<10?"0":""}${re}`};return A.useEffect(()=>{t&&o("PROVIDERS")},[t]),f.jsx(ks,{isOpen:t,onClose:e,title:"Import from Cloud",children:f.jsx("div",{className:"h-[600px] flex flex-col overflow-hidden -m-6 md:-m-8 relative",children:f.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[r==="PROVIDERS"&&f.jsx("div",{className:"w-full h-full flex items-center justify-center p-8 bg-neutral-900/20",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl w-full",children:[f.jsxs("button",{onClick:ae,className:"flex flex-col items-center gap-4 p-8 rounded-2xl bg-neutral-900/50 border border-neutral-800 hover:bg-neutral-800 hover:border-blue-500/50 transition-all group",children:[f.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform",children:f.jsx(Au,{className:"w-12 h-12"})}),f.jsxs("div",{className:"text-center",children:[f.jsx("span",{className:"text-lg font-bold text-white block",children:"Google Drive"}),a&&f.jsx("span",{className:"text-xs text-green-400 font-medium bg-green-900/20 px-2 py-0.5 rounded-full border border-green-900/50 mt-1 inline-block",children:"Connected"})]})]}),f.jsxs("button",{disabled:!0,className:"flex flex-col items-center gap-4 p-8 rounded-2xl bg-neutral-900/20 border border-neutral-800 opacity-50 cursor-not-allowed",children:[f.jsx("div",{className:"w-20 h-20 bg-neutral-800 rounded-2xl flex items-center justify-center grayscale",children:f.jsx(AP,{className:"w-12 h-12"})}),f.jsx("span",{className:"text-lg font-bold text-neutral-500",children:"Mega (Coming Soon)"})]}),f.jsxs("button",{disabled:!0,className:"flex flex-col items-center gap-4 p-8 rounded-2xl bg-neutral-900/20 border border-neutral-800 opacity-50 cursor-not-allowed",children:[f.jsx("div",{className:"w-20 h-20 bg-neutral-800 rounded-2xl flex items-center justify-center grayscale",children:f.jsx(RP,{className:"w-12 h-12"})}),f.jsx("span",{className:"text-lg font-bold text-neutral-500",children:"Dropbox (Coming Soon)"})]})]})}),r==="AUTH_GDRIVE"&&f.jsxs("div",{className:"w-full h-full relative flex flex-col items-center justify-center p-8 text-center space-y-6",children:[f.jsx("div",{className:"absolute top-6 left-6",children:f.jsxs("button",{onClick:()=>o("PROVIDERS"),className:"flex items-center gap-2 text-neutral-400 hover:text-white transition-colors",children:[f.jsx(Ns,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm font-medium",children:"Back to Providers"})]})}),f.jsx(Au,{className:"w-24 h-24 mb-4"}),f.jsx("h2",{className:"text-2xl font-bold text-white",children:"Connect Google Drive"}),f.jsx("p",{className:"text-neutral-400 max-w-md",children:"SubStream AI needs read-only access to your Drive to list and download video or subtitle files."}),f.jsx(ze,{onClick:H,className:"px-8 py-4 text-lg",children:"Authenticate Google"}),f.jsx("p",{className:"text-xs text-neutral-600 mt-4",children:"We do not store your credentials. Access is temporary."})]}),r==="EXPLORER"&&a&&f.jsxs("div",{className:"w-full h-full flex flex-col relative",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between p-4 border-b border-neutral-800 bg-neutral-900/50 gap-4 md:gap-0 z-20 relative",children:[f.jsxs("div",{className:"flex items-center justify-between w-full md:w-auto gap-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>o("PROVIDERS"),className:"p-2 hover:bg-neutral-800 rounded-full transition-colors",title:"Back to Providers",children:f.jsx(Ns,{className:"w-5 h-5 text-neutral-400"})}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-400",children:[f.jsx(Au,{className:"w-5 h-5"}),f.jsx("span",{className:"font-bold text-white",children:"Google Drive"})]})]}),f.jsxs("div",{className:"flex items-center gap-3 md:hidden",children:[h?f.jsx("img",{src:h,className:"w-7 h-7 rounded-full border border-neutral-700 object-cover",alt:"User"}):d?f.jsx("div",{className:"w-7 h-7 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold text-xs",children:d.name.charAt(0)}):null,f.jsx("button",{onClick:O,title:"Logout",className:"p-1.5 hover:bg-neutral-800 rounded-full transition-colors text-neutral-500 hover:text-red-400",children:f.jsx(Nc,{className:"w-4 h-4"})})]})]}),f.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto md:flex-1 md:justify-end",children:[f.jsx("button",{className:"md:hidden p-3 bg-neutral-800 rounded-lg text-white hover:bg-neutral-700 transition-colors h-12 w-12 flex items-center justify-center",onClick:()=>b(!0),children:f.jsx(zS,{className:"w-5 h-5"})}),f.jsxs("div",{className:"relative flex-1 md:flex-none md:w-full md:max-w-md h-12",children:[f.jsx(Ks,{className:"absolute left-3 top-3.5 w-4 h-4 text-neutral-500"}),f.jsx("input",{type:"text",placeholder:"Search Drive...",className:"w-full h-full bg-black border border-neutral-800 rounded-lg py-3 pl-9 pr-4 text-sm text-white focus:outline-none focus:border-white",value:k,onChange:L=>P(L.target.value)})]}),f.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[h?f.jsx("img",{src:h,className:"w-8 h-8 rounded-full border border-neutral-700 object-cover",alt:"User"}):d?f.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold text-xs",children:d.name.charAt(0)}):null,f.jsx("button",{onClick:O,title:"Logout",className:"p-2 hover:bg-neutral-800 rounded-full transition-colors text-neutral-500 hover:text-red-400",children:f.jsx(Nc,{className:"w-4 h-4"})})]})]})]}),f.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[f.jsxs("div",{className:`
                                absolute inset-y-0 left-0 w-64 bg-neutral-900 border-r border-neutral-800 z-30 transform transition-transform duration-300
                                md:relative md:translate-x-0 md:bg-neutral-900/30
                                ${Be?"translate-x-0":"-translate-x-full"}
                            `,children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-800 md:hidden",children:[f.jsx("h3",{className:"font-bold text-white",children:"Folders"}),f.jsx("button",{onClick:()=>b(!1),children:f.jsx(P0,{className:"w-5 h-5 text-neutral-400"})})]}),f.jsxs("div",{className:"overflow-y-auto custom-scrollbar p-3 h-full",children:[f.jsx("h3",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest mb-3 px-2 hidden md:block",children:"Folders"}),f.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer transition-colors text-sm mb-1
                                            ${g==="virtual-videos"?"bg-indigo-900/40 text-white":"text-neutral-400 hover:text-white hover:bg-neutral-800"}
                                        `,onClick:()=>Y("virtual-videos","All Videos"),children:[f.jsx($l,{className:`w-4 h-4 ${g==="virtual-videos"?"text-red-400":"text-neutral-500"}`}),f.jsx("span",{className:"truncate",children:"All Videos"})]}),f.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 rounded-lg cursor-pointer transition-colors text-sm mb-3
                                            ${g==="virtual-subtitles"?"bg-indigo-900/40 text-white":"text-neutral-400 hover:text-white hover:bg-neutral-800"}
                                        `,onClick:()=>Y("virtual-subtitles","All Subtitles"),children:[f.jsx(PS,{className:`w-4 h-4 ${g==="virtual-subtitles"?"text-green-400":"text-neutral-500"}`}),f.jsx("span",{className:"truncate",children:"All Subtitles"})]}),f.jsx("div",{className:"h-px bg-neutral-800 my-2 mx-2"}),f.jsx(Ix,{folder:{id:"root",name:"My Drive"},activeFolderId:g,level:0,onSelect:Y,accessToken:a,defaultExpanded:!0})]})]}),Be&&f.jsx("div",{className:"absolute inset-0 bg-black/60 z-20 md:hidden backdrop-blur-sm",onClick:()=>b(!1)}),f.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative",children:[f.jsx("div",{className:"flex items-center gap-2 p-3 text-sm text-neutral-400 border-b border-neutral-800 overflow-x-auto whitespace-nowrap bg-neutral-900/20 no-scrollbar",children:w.map((L,X)=>f.jsxs(Sg.Fragment,{children:[f.jsx("button",{onClick:()=>Y(L.id,L.name),className:"hover:text-white transition-colors shrink-0",children:L.name}),X<w.length-1&&f.jsx(I0,{className:"w-4 h-4 text-neutral-600 shrink-0"})]},L.id))}),f.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4",children:x?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-neutral-500 gap-3",children:[f.jsx(wr,{className:"w-8 h-8 animate-spin"}),f.jsx("span",{children:"Loading files..."})]}):N?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-red-400 gap-4 text-center px-8",children:[f.jsx(js,{className:"w-12 h-12 opacity-50"}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("h3",{className:"font-bold text-lg",children:"Connection Error"}),f.jsx("p",{className:"text-sm text-neutral-400",children:N})]}),f.jsx(ze,{variant:"outline",onClick:fe,icon:f.jsx(A0,{className:"w-4 h-4"}),children:"Try Again"})]}):v.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-neutral-500 gap-3 opacity-50",children:[f.jsx(Cc,{className:"w-12 h-12"}),f.jsx("span",{children:"Folder is empty"})]}):f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:v.map(L=>{const X=L.mimeType==="application/vnd.google-apps.folder",re=(T==null?void 0:T.id)===L.id;return f.jsxs("div",{onClick:()=>K(L),className:`
                                                            group relative p-3 rounded-xl border cursor-pointer transition-all flex flex-col gap-3
                                                            ${re?"bg-indigo-900/30 border-indigo-500/50":"bg-neutral-900/40 border-neutral-800 hover:bg-neutral-800"}
                                                        `,onDoubleClick:()=>X&&Y(L.id,L.name),children:[f.jsxs("div",{className:"aspect-video bg-neutral-950 rounded-lg overflow-hidden relative flex items-center justify-center",children:[L.thumbnailLink&&!X?f.jsx("img",{src:`http://localhost:4000/api/proxy/file-get?url=${encodeURIComponent(L.thumbnailLink)}&token=${encodeURIComponent(a)}`,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100",alt:""}):f.jsx("div",{className:"text-neutral-600",children:X?f.jsx(Cc,{className:"w-10 h-10"}):L.mimeType.includes("video")?f.jsx(fh,{className:"w-10 h-10"}):f.jsx(Mo,{className:"w-10 h-10"})}),L.videoMediaMetadata&&f.jsx("span",{className:"absolute bottom-1 right-1 bg-black/80 text-[10px] text-white px-1.5 py-0.5 rounded",children:at(L.videoMediaMetadata.durationMillis)})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-medium text-white truncate",title:L.name,children:L.name}),f.jsxs("p",{className:"text-[10px] text-neutral-500 mt-1 flex justify-between",children:[f.jsx("span",{children:X?"Folder":Ft(L.size)}),f.jsx("span",{children:new Date(L.modifiedTime).toLocaleDateString()})]})]})]},L.id)})})})]}),f.jsx("div",{className:`
                                absolute inset-0 z-50 bg-black/95 md:bg-neutral-900/30 md:relative md:w-72 md:border-l md:border-neutral-800 md:flex md:flex-col md:inset-auto
                                transition-transform duration-300
                                ${T?"flex translate-x-0":"hidden md:flex translate-x-full md:translate-x-0"}
                            `,children:f.jsxs("div",{className:"h-full p-4 flex flex-col gap-6 overflow-y-auto w-full",children:[f.jsxs("div",{className:"md:hidden flex items-center gap-2 border-b border-neutral-800 pb-4 mb-2",children:[f.jsx("button",{onClick:()=>R(null),className:"p-2 -ml-2 hover:bg-neutral-800 rounded-full text-white",children:f.jsx(Ns,{className:"w-6 h-6"})}),f.jsx("span",{className:"font-bold text-lg",children:"File Details"})]}),T?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"space-y-4 flex-1",children:[f.jsx("div",{className:"aspect-video bg-neutral-950 rounded-xl overflow-hidden flex items-center justify-center border border-neutral-800",children:T.thumbnailLink?f.jsx("img",{src:`http://localhost:4000/api/proxy/file-get?url=${encodeURIComponent(T.thumbnailLink.replace("s220","s600"))}&token=${encodeURIComponent(a)}`,className:"w-full h-full object-cover",alt:"Preview"}):f.jsx("div",{className:"text-neutral-600",children:T.mimeType.includes("video")?f.jsx(fh,{className:"w-16 h-16"}):f.jsx(Mo,{className:"w-16 h-16"})})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-white text-lg leading-tight break-words",children:T.name}),f.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:T.mimeType})]}),f.jsxs("div",{className:"space-y-3 pt-4 border-t border-neutral-800",children:[f.jsxs("div",{className:"flex items-center gap-3 text-sm text-neutral-300",children:[f.jsx(bS,{className:"w-4 h-4 text-neutral-500"}),f.jsx("span",{children:Ft(T.size)})]}),f.jsxs("div",{className:"flex items-center gap-3 text-sm text-neutral-300",children:[f.jsx(RS,{className:"w-4 h-4 text-neutral-500"}),f.jsx("span",{children:new Date(T.createdTime).toLocaleDateString()})]}),T.videoMediaMetadata&&f.jsxs("div",{className:"flex items-center gap-3 text-sm text-neutral-300",children:[f.jsx(MS,{className:"w-4 h-4 text-neutral-500"}),f.jsx("span",{children:at(T.videoMediaMetadata.durationMillis)})]})]})]}),f.jsx(ze,{onClick:Ne,disabled:le,className:"w-full mt-auto md:mt-0 !w-full",progress:le?Pe:void 0,statusText:le?"Downloading...":"",children:"Import File"})]}):f.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-neutral-500 text-center space-y-3",children:[f.jsx(HS,{className:"w-12 h-12 opacity-50"}),f.jsx("p",{children:"Select a file to view details"})]})]})})]})]})]})})})},kP=500,MP=()=>f.jsx(QS,{clientId:"474943199780-akmhetcsrtcb9qej7rfepth49abt2fu8.apps.googleusercontent.com",children:f.jsx(DP,{})}),bP=t=>new Promise(e=>{const n=document.createElement("video");n.preload="metadata";const r=document.createElement("canvas"),o=r.getContext("2d");n.src=URL.createObjectURL(t),n.currentTime=1;const s=()=>{URL.revokeObjectURL(n.src),n.remove(),r.remove()};n.onloadeddata=()=>{n.onseeked=()=>{if(!o)return s(),e("");r.width=n.videoWidth,r.height=n.videoHeight,o.drawImage(n,0,0,n.videoWidth,n.videoHeight);const i=r.toDataURL("image/jpeg",.8);s(),e(i)},n.currentTime=1},n.onerror=()=>{s(),e("")}}),DP=()=>{var Xf,Qf;const[t,e]=A.useState("HOME"),[n,r]=A.useState("NONE"),[o,s]=A.useState(!1),[i,a]=A.useState(!1),[c,d]=A.useState(null),[p,h]=A.useState(null),m=A.useRef(null),[g,_]=A.useState(null),[w,C]=A.useState(null),[v,y]=A.useState([]),[x,S]=A.useState(Ge.IDLE),[N,I]=A.useState(0),[T,R]=A.useState(null),[k,P]=A.useState(void 0),[G,z]=A.useState(""),[le,Ie]=A.useState(!1),[Pe,ge]=A.useState(!1),Be=A.useRef(null),[b,B]=A.useState("auto"),[O,ae]=A.useState(nt[0].name),[ne,H]=A.useState(""),[Y,K]=A.useState(ee.IDLE),[fe,Ne]=A.useState(""),[Ft,at]=A.useState(0),[L,X]=A.useState([]),[re,Fe]=A.useState(null),[dn,ir]=A.useState(null),[he,Ho]=A.useState(null),[Ur,ka]=A.useState(""),[lr,Ma]=A.useState(""),[Kt,Fr]=A.useState("idle"),[Gr,ba]=A.useState(""),[ar,Da]=A.useState(""),[Xt,Vr]=A.useState("idle"),[At,ur]=A.useState(Vt[1].id),[Qt,Ax]=A.useState(""),[Of,La]=A.useState(0),[Zt,Ua]=A.useState(15),[$r,Fa]=A.useState("free"),[An,Ga]=A.useState(null),[di,Va]=A.useState(null),[Bf,Rx]=A.useState(!1),fi=A.useRef(null),$a=A.useRef(null),qo=A.useRef(null),zo=A.useRef(null),cr=A.useRef(null),Jo=A.useRef(null),Oa=A.useMemo(()=>window.location.hash.includes("access_token")&&window.location.hash.includes("state=youtube_auth"),[]),Ba=A.useMemo(()=>window.location.hash.includes("access_token")&&window.location.hash.includes("state=drive_auth"),[]),pe=A.useMemo(()=>Vt.find(E=>E.id===At)||Vt[0],[At]);A.useEffect(()=>{pe.provider==="google"&&pe.rateLimits&&$r==="free"&&!pe.rateLimits.free&&Fa("tier1")},[pe,$r]),A.useEffect(()=>{if(pe.provider==="google"&&pe.rateLimits){const E=pe.rateLimits[$r];E&&(Ua(E),is(E))}else pe.provider==="openai"&&is(Zt)},[$r,pe,Zt]),A.useEffect(()=>{if(Oa){const E=window.location.hash.substring(1),V=new URLSearchParams(E).get("access_token");if(V){const Q=new BroadcastChannel("substream_auth_channel");Q.postMessage({token:V}),Q.close(),window.close()}}if(Ba){const E=window.location.hash.substring(1),V=new URLSearchParams(E).get("access_token");if(V){if(window.opener)try{window.opener.postMessage({type:"DRIVE_AUTH_SUCCESS",token:V},"*")}catch(ie){console.error(ie)}const Q=new BroadcastChannel("substream_drive_auth_channel");Q.postMessage({token:V}),Q.close(),setTimeout(()=>{var ie;window.close(),(ie=window.open("","_self"))==null||ie.close()},1e3)}}},[Oa,Ba]),A.useEffect(()=>{const E=new BroadcastChannel("substream_auth_channel");return E.onmessage=D=>{D.data&&D.data.token&&Hf({access_token:D.data.token})},()=>E.close()},[]),A.useEffect(()=>{const E=D=>{Be.current&&!Be.current.contains(D.target)&&ge(!1)};return Pe&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[Pe]),A.useEffect(()=>{const E=localStorage.getItem("substream_google_api_key"),D=localStorage.getItem("substream_openai_api_key"),V=localStorage.getItem("substream_model_id"),Q=localStorage.getItem("substream_rpm"),ie=localStorage.getItem("substream_gemini_tier"),ut=localStorage.getItem("substream_daily_usage"),Yo=localStorage.getItem("substream_usage_date"),dr=new Date().toDateString();if(E&&(ka(E),Ma(E),Fr("valid")),D&&(ba(D),Da(D),Vr("valid")),ie&&Fa(ie),Q){const jo=Q==="unlimited"?"unlimited":parseInt(Q,10);Ua(jo),is(jo)}else is(15);Yo===dr&&ut?La(parseInt(ut,10)):(La(0),localStorage.setItem("substream_usage_date",dr),localStorage.setItem("substream_daily_usage","0"));const yt=localStorage.getItem("substream_google_user"),Or=localStorage.getItem("substream_google_token"),Zf=localStorage.getItem("substream_google_token_timestamp");let ep=!1;yt&&Or&&Zf&&(Date.now()-parseInt(Zf,10)<3e6?(Ga(JSON.parse(yt)),Va(Or),ep=!0):(console.warn("Google Token Expired. Clearing session."),mi())),V&&Vt.find(jo=>jo.id===V)&&ur(V==="youtube-auto"&&!ep?Vt[1].id:V),Rx(!0)},[]),A.useEffect(()=>{Bf&&At==="youtube-auto"&&!An&&ur(Vt[1].id)},[An,At,Bf]),A.useEffect(()=>{if(lr===""){Fr("idle");return}if(lr===Ur){Fr("valid");return}return Fr("validating"),qo.current&&clearTimeout(qo.current),qo.current=setTimeout(()=>{UR(lr).then(E=>{Fr(E?"valid":"invalid")})},800),()=>{qo.current&&clearTimeout(qo.current)}},[lr,Ur]),A.useEffect(()=>{if(ar===""){Vr("idle");return}if(ar===Gr){Vr("valid");return}return Vr("validating"),zo.current&&clearTimeout(zo.current),zo.current=setTimeout(()=>{FR(ar).then(E=>{Vr(E?"valid":"invalid")})},800),()=>{zo.current&&clearTimeout(zo.current)}},[ar,Gr]);const pi=E=>{m.current&&clearTimeout(m.current),h({message:E,isVisible:!0}),m.current=setTimeout(()=>{h(D=>D?{...D,isVisible:!1}:null),setTimeout(()=>h(null),500)},3e3)},Px=E=>{const D=Of+E;La(D),localStorage.setItem("substream_daily_usage",D.toString()),localStorage.setItem("substream_usage_date",new Date().toDateString())},Ha=E=>{var dr,yt;let D="video";g?D=g.name.substring(0,g.name.lastIndexOf("."))||g.name:he!=null&&he.title&&(D=he.title);const V=D.replace(/[^a-zA-Z0-9 \-_]/g,"").trim(),Q=w==="youtube",ie=!Q&&(b==="auto"||b===O),ut=Q||ie?"Transcribed":"Translated",Yo=Q?((dr=nt.find(Or=>Or.code===ne))==null?void 0:dr.name)||"Unknown":ie?"Auto":((yt=nt.find(Or=>Or.name===O))==null?void 0:yt.name)||"English";return`SubStream_${V}_${ut}_${Yo}.${E}`},hi=()=>{_(null),C(null),y([]),S(Ge.IDLE),I(0),R(null),K(ee.IDLE),Ne(""),at(0),X([]),Ho(null),H(""),P(void 0),z(""),Ie(!1),ir(null),ge(!1),re&&re.startsWith("blob:")&&URL.revokeObjectURL(re),Fe(null)},Hf=E=>{if(!E||!E.access_token)return;const D=E.access_token;Va(D),localStorage.setItem("substream_google_token",D),localStorage.setItem("substream_google_token_timestamp",Date.now().toString()),fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${D}`}}).then(V=>V.json()).then(V=>{Ga(V),localStorage.setItem("substream_google_user",JSON.stringify(V)),pi(`Welcome, ${V.name}!`)}).catch(V=>{console.error("Failed to fetch user info",V),mi()})},mi=()=>{if(At==="youtube-auto"){const E=Vt.find(D=>D.provider==="google")||Vt[1];ur(E.id)}Ga(null),Va(null),localStorage.removeItem("substream_google_token"),localStorage.removeItem("substream_google_user"),localStorage.removeItem("substream_google_token_timestamp"),pi("Disconnected from YouTube.")},kx=()=>{Kt==="valid"&&(localStorage.setItem("substream_google_api_key",lr),ka(lr)),Xt==="valid"&&(localStorage.setItem("substream_openai_api_key",ar),ba(ar)),localStorage.setItem("substream_model_id",At),localStorage.setItem("substream_rpm",Zt.toString()),localStorage.setItem("substream_gemini_tier",$r),is(Zt),r("NONE"),pi("Configuration Saved.")},Mx=()=>{localStorage.removeItem("substream_google_api_key"),ka(""),Ma(""),Fr("idle")},bx=()=>{localStorage.removeItem("substream_openai_api_key"),ba(""),Da(""),Vr("idle")},Dx=async E=>{hi(),C("youtube"),Ho({...E,isOAuthFlow:!1});const D=new File([""],E.title,{type:"video/youtube"});_(D)},Lx=async()=>{if(!ne||!(he!=null&&he.videoUrl)){R("Please select a caption track first.");return}R(null),K(ee.EXTRACTING_SUBTITLES),Ne("Downloading caption track from YouTube...");try{const D=btoa(JSON.stringify({lang:ne,isAuto:!0})),V=await mP(he.videoUrl,D),Q=Li(V);if(Q.length===0)throw new Error("Downloaded caption file is empty or in an unsupported format.");y(Q),S(Ge.COMPLETED),K(ee.DONE),setTimeout(()=>{var ie;return(ie=$a.current)==null?void 0:ie.scrollIntoView({behavior:"smooth"})},100)}catch(E){R(E.message||"Failed to download captions"),K(ee.ERROR)}},Ux=E=>{var V;const D=(V=E.target.files)==null?void 0:V[0];D&&qa(D)},Fx=E=>{E.preventDefault();const D=E.dataTransfer.files[0];D&&qa(D)},qa=E=>{hi(),E.name.endsWith(".srt")||E.name.endsWith(".vtt")?(C("srt"),_(E),Gx(E)):hh.includes(E.type)||E.name.match(/\.(mp4|mkv|mov|webm|avi)$/i)?(C("video"),_(E),Vx(E)):R("Unsupported file type. Please upload an SRT or a supported video file.")},qf=E=>{qa(E)},Gx=async E=>{S(Ge.PARSING);try{const D=await E.text(),V=Li(D);if(V.length===0)throw new Error("No subtitles found in file.");y(V),S(Ge.IDLE)}catch(D){R(D.message||"Failed to parse SRT file."),S(Ge.ERROR)}},Vx=async E=>{try{K(ee.LOADING_FFMPEG);const D=await aP(Q=>Ne(Q));cr.current=D,D.on("progress",({progress:Q})=>{at(Q*100)}),K(ee.ANALYZING),Ne("Analyzing video for subtitle tracks...");const V=await uP(D,E);X(V),Fe(URL.createObjectURL(E)),bP(E).then(ir),K(ee.IDLE)}catch(D){R(`Failed to process video file: ${D.message}`),K(ee.ERROR)}},$x=async E=>{if(cr.current)try{at(0),K(ee.EXTRACTING_SUBTITLES),Ne("Extracting selected subtitle track...");const D=await cP(cr.current,E),V=Li(D);y(V),K(ee.DONE),S(Ge.COMPLETED)}catch(D){R(`Failed to extract subtitle track: ${D.message}`),K(ee.ERROR)}},Ox=async()=>{if(w==="youtube"){R("This action is for local video files. Please select a language to generate captions for your YouTube import.");return}if(pe.provider==="youtube"){if(!di||!An||!g){R("Please authenticate with YouTube in Settings to use this feature."),g||R("No file loaded to upload."),r("CONFIG");return}try{R(null),K(ee.UPLOADING_TO_YOUTUBE),Ne("Uploading video to YouTube (Unlisted)..."),at(0);const D=Ha("").replace("SubStream_","").replace(/\.$/,"").replace(/_/g," "),V=await xP(di,g,D,ie=>at(ie/2));K(ee.AWAITING_YOUTUBE_CAPTIONS),await wP(di,V,(ie,ut)=>{Ne(ie),at(50+ut/2)});let Q=[];try{Q=(await Qc(`https://www.youtube.com/watch?v=${V}`)).meta.availableResolutions||[]}catch{console.warn("Could not fetch resolutions for fresh video, using defaults.")}Q.length===0&&(Q=[1080,720,480,360]),Ho({id:V,title:g.name,description:"Uploaded by SubStream AI for transcription.",thumbnailUrl:dn||"",channelTitle:An.name,videoUrl:`https://www.youtube.com/watch?v=${V}`,availableResolutions:Q,isOAuthFlow:!0}),K(ee.DONE),C("youtube")}catch(D){console.error("YouTube Auto-Caption Error:",D);const V=D.message||"";V.toLowerCase().includes("quota")?R("Daily YouTube Upload Quota Exceeded. Please try again tomorrow or use a Gemini/OpenAI model."):V.includes("401")?(R('Session expired. Please click "Authenticate YouTube" again.'),mi()):R(`YouTube Auto-Caption failed: ${V}`),K(ee.ERROR)}return}const E=pe.provider==="openai"?Gr:Ur;if(!cr.current||!E){r("CONFIG"),R(`Please provide an API Key for ${pe.provider} to generate subtitles.`),K(ee.IDLE);return}try{at(0),K(ee.EXTRACTING_AUDIO),Ne("Extracting audio from video...");const D=await dP(cr.current);K(ee.TRANSCRIBING),Ne(`Transcribing audio in ${b==="auto"?"detected language":b} with ${pe.name}...`);const V=await qR(D,b,E,pe),Q=Li(V);y(Q),setTimeout(()=>{var ie;return(ie=$a.current)==null?void 0:ie.scrollIntoView({behavior:"smooth"})},100),K(ee.DONE),zf(Q,E,pe)}catch(D){R(`Failed to generate subtitles: ${D.message}`),K(ee.ERROR),S(Ge.ERROR)}},zf=async(E,D,V)=>{S(Ge.TRANSLATING),I(0),R(null);try{const Q=await YR(E,b,O,D,V,ut=>I(Math.round(ut/E.length*100)),ut=>y(ut));y(Q);const ie=Math.ceil(E.length/Kl);Px(ie),S(Ge.COMPLETED)}catch(Q){console.error(Q),R(Q.message||"An error occurred during translation. Please try again."),S(Ge.ERROR)}},Bx=async()=>{if(v.length===0)return;const E=pe.provider==="openai"?Gr:Ur;if(!E){r("CONFIG"),R(`Please Provide an API Key for ${pe.provider} to continue.`);return}zf(v,E,pe)},Hx=()=>{if(v.length===0)return;const E=Ui(v),D=Ha("srt");Ac(D,E)},Jf=async E=>{const D=Ha("mp4");if(ge(!1),w==="youtube"){if(!ne||!(he!=null&&he.videoUrl))return;R(null),P(0),z("Initializing..."),Ie(!1),Jo.current=setInterval(()=>{P(V=>V===void 0?0:V>=90?90:V+Math.random()*4)},600);try{const Q=btoa(JSON.stringify({lang:ne,isAuto:!0}));await gP(he.videoUrl,Q,D,E),Jo.current&&clearInterval(Jo.current),P(100),z("Done"),Ie(!0),setTimeout(()=>{P(void 0),z(""),Ie(!1)},3e3)}catch(V){Jo.current&&clearInterval(Jo.current),P(void 0),z(""),R(`Video download failed: ${V.message}`)}return}if(!(!g||!cr.current||x!==Ge.COMPLETED))try{at(0),K(ee.MUXING),Ne("Packaging dual-track video file (Original + Translated)...");const V=Ui(v),Q=Ui(v.map(yt=>({...yt,text:yt.originalText||yt.text}))),ie=nt.find(yt=>yt.name===O),ut=nt.find(yt=>yt.name===b),Yo=D.replace(".mp4",".mkv"),dr=await fP(cr.current,g,V,(ie==null?void 0:ie.code)||"eng",Q,(ut==null?void 0:ut.code)||"und");Ac(Yo,dr),K(ee.DONE)}catch(V){R(`Failed to package video file: ${V.message}`),K(ee.ERROR)}},qx=v.length>0?Math.ceil(v.length/Kl):0,zx=Math.max(0,kP-Of),Wo=Ur||Gr,Wf=A.useMemo(()=>Vt.filter(E=>E.provider==="google"&&(E.name.toLowerCase().includes(Qt.toLowerCase())||E.description.toLowerCase().includes(Qt.toLowerCase()))),[Qt]),Yf=A.useMemo(()=>Vt.filter(E=>E.provider==="openai"&&(E.name.toLowerCase().includes(Qt.toLowerCase())||E.description.toLowerCase().includes(Qt.toLowerCase()))),[Qt]),jf=A.useMemo(()=>Vt.filter(E=>E.provider==="youtube"&&(E.name.toLowerCase().includes(Qt.toLowerCase())||E.description.toLowerCase().includes(Qt.toLowerCase()))),[Qt]),Jx=[ee.EXTRACTING_AUDIO,ee.TRANSCRIBING,ee.MUXING,ee.EXTRACTING_SUBTITLES,ee.UPLOADING_TO_YOUTUBE,ee.AWAITING_YOUTUBE_CAPTIONS].includes(Y),Wx=A.useMemo(()=>yu.findIndex(E=>E.value===Zt),[Zt]),Rn=x===Ge.TRANSLATING,gi=x===Ge.COMPLETED,Kf=!!g&&!Rn&&!gi,gt=w==="youtube",Yx=A.useMemo(()=>{var E;return(E=nt.find(D=>D.name===b))==null?void 0:E.font},[b]),jx=A.useMemo(()=>{var E;return(E=nt.find(D=>D.name===O))==null?void 0:E.font},[O]);return Oa||Ba?f.jsxs("div",{className:"h-screen w-screen bg-black flex flex-col items-center justify-center text-white space-y-6",children:[f.jsx("div",{className:"w-20 h-20 bg-green-900/20 rounded-full flex items-center justify-center border border-green-900/50 animate-pulse-slow",children:f.jsx(Hr,{className:"w-10 h-10 text-green-500"})}),f.jsxs("div",{className:"text-center space-y-2",children:[f.jsx("h2",{className:"text-2xl font-bold font-display",children:"Authentication Successful"}),f.jsx("p",{className:"text-neutral-400",children:"You can safely close this window."})]}),f.jsx("button",{onClick:()=>{var E;window.close();try{(E=window.open("","_self"))==null||E.close()}catch{}},className:"px-6 py-2 bg-neutral-800 border border-neutral-700 rounded-lg hover:bg-neutral-700 hover:text-white transition-colors text-neutral-300",children:"Close Window"})]}):t==="DOCS"?f.jsx(SP,{onBack:()=>e("HOME")}):f.jsxs("div",{className:"min-h-screen bg-black text-neutral-200 font-sans selection:bg-white selection:text-black flex flex-col",children:[f.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[f.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-neutral-900/30 blur-[120px] rounded-full mix-blend-screen"}),f.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[40%] h-[40%] bg-neutral-800/20 blur-[100px] rounded-full mix-blend-screen"})]}),f.jsxs("div",{className:`
          fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 
          flex items-center gap-3 px-6 py-3.5 rounded-full min-w-[320px] justify-center
          bg-neutral-900/30 border border-white/10 text-white shadow-[0_0_30px_rgba(0,0,0,0.3)] backdrop-blur-xl
          transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1)
          ${p!=null&&p.isVisible?"translate-y-0 opacity-100 scale-100":"translate-y-8 opacity-0 scale-95 pointer-events-none"}
      `,children:[f.jsx(R0,{className:"w-5 h-5 text-indigo-400 drop-shadow-[0_0_8px_rgba(129,140,248,0.5)]"}),f.jsx("span",{className:"text-sm font-medium tracking-wide",children:p==null?void 0:p.message})]}),f.jsx("nav",{className:"relative z-20 border-b border-neutral-900 bg-black/80 backdrop-blur-xl sticky top-0 transition-all",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2 cursor-pointer shrink-0",onClick:()=>window.location.reload(),children:[f.jsx("div",{className:"w-8 h-8 bg-white text-black flex items-center justify-center font-bold text-xl rounded-lg font-display",children:"S"}),f.jsxs("span",{className:"font-display font-bold text-lg tracking-tight",children:["SubStream ",f.jsx("span",{className:"text-neutral-600 font-sans font-normal text-sm ml-2",children:"AI"})]})]}),f.jsxs("div",{className:"flex items-center gap-2 md:gap-6 text-sm font-medium text-neutral-400",children:[f.jsx("button",{onClick:()=>e("DOCS"),className:"hidden md:block hover:text-white transition-colors focus:outline-none",children:"Documentation"}),f.jsx("button",{onClick:()=>e("DOCS"),className:"p-2 rounded-full hover:bg-neutral-800 transition-colors group md:hidden","aria-label":"Documentation",children:f.jsx(AS,{className:"w-5 h-5 text-neutral-400 group-hover:text-white"})}),f.jsxs("button",{onClick:()=>r("CONFIG"),className:`flex items-center gap-1.5 md:gap-3 pl-2 md:pl-3 pr-1.5 md:pr-2 py-1 md:py-1.5 rounded-xl border transition-all group ${Wo?"bg-neutral-900/50 border-neutral-800 hover:border-white/30":"bg-neutral-900/50 border-neutral-800 hover:border-neutral-600"}`,children:[f.jsxs("div",{className:"text-xs text-right max-w-[110px] md:max-w-none leading-tight",children:[f.jsx("div",{className:"font-bold text-white",children:pe.name}),f.jsx("div",{className:`text-[10px] uppercase ${Wo?"text-green-400":"text-neutral-500"}`,children:Wo?"Pro Access":`${zx} Credits`})]}),f.jsx("div",{className:`w-8 h-8 rounded-full border relative flex items-center justify-center ${Wo?"border-green-900/50 bg-green-900/20":"border-neutral-700 bg-neutral-800/50"}`,children:f.jsx(Ec,{className:`w-4 h-4 ${Wo?"text-green-400":"text-neutral-400 group-hover:text-white"}`})})]})]})]})}),f.jsxs("main",{className:"relative z-10 max-w-5xl mx-auto px-6 w-full flex-grow flex flex-col",children:[f.jsxs("div",{className:"flex-grow flex flex-col justify-start pt-16 md:pt-30",children:[f.jsxs("section",{className:"mb-14 text-center",children:[f.jsxs("h1",{className:"text-4xl md:text-6xl font-display font-bold tracking-tighter text-white mb-6 animate-slide-up",children:["Bridge the Language",f.jsx("br",{}),f.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-neutral-400 to-neutral-700",children:"Gap Instantly."})]}),f.jsxs("p",{className:"text-base md:text-lg text-neutral-400 max-w-2xl mx-auto leading-relaxed animate-slide-up",style:{animationDelay:"0.1s"},children:["Transform your subtitles with context-aware AI. Powered by ",pe.provider==="google"?"Google's":"OpenAI's"," ",pe.name," for nuance and accuracy across ",nt.length,"+ languages."]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12 items-stretch pb-12",children:[f.jsx("div",{className:"lg:col-span-3",children:f.jsx("div",{className:"lg:sticky lg:top-32 h-full",children:f.jsxs("div",{className:"h-full flex flex-row justify-around p-4 rounded-2xl border border-neutral-900 bg-neutral-950/50 backdrop-blur-sm lg:flex-col lg:p-6 lg:justify-between",children:[f.jsx(Ji,{number:1,title:"Upload",isActive:x===Ge.IDLE&&!g,isCompleted:!!g}),f.jsx(Ji,{number:2,title:"Configure",isActive:Kf,isCompleted:Rn||gi}),f.jsx(Ji,{number:3,title:"Translate",isActive:Rn,isCompleted:gi}),f.jsx(Ji,{number:4,title:"Download",isActive:gi,isCompleted:!1})]})})}),f.jsxs("div",{className:"lg:col-span-9 space-y-8",children:[(w==="video"||w==="youtube")&&f.jsx("div",{className:"w-full bg-black rounded-2xl overflow-hidden aspect-video border border-neutral-800 relative group",children:w==="youtube"&&he?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:he.thumbnailUrl,alt:he.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:f.jsxs("div",{className:"px-4 py-2 bg-black/70 rounded-xl backdrop-blur border border-white/10 text-sm text-white font-medium flex items-center gap-2",children:[f.jsx(cn,{className:"w-4 h-4 text-red-500"})," YouTube Import"]})})]}):re?f.jsx(EP,{videoSrc:re,srtContent:Ui(v),isYouTube:!1}):null}),f.jsx("div",{className:"group relative rounded-3xl border border-neutral-800 bg-neutral-900/20 p-6 hover:bg-neutral-900/30 transition-all duration-300",children:g?Y!==ee.IDLE&&Y!==ee.DONE&&Y!==ee.ERROR?f.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[200px] space-y-4",children:[f.jsx(wr,{className:"w-12 h-12 text-white animate-spin"}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-1 uppercase tracking-widest",children:Y.replace(/_/g," ")}),f.jsx("p",{className:"text-neutral-400",children:fe})]}),Jx&&f.jsxs("div",{className:"w-full max-w-sm",children:[f.jsx("div",{className:"w-full h-2 bg-neutral-800 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${Ft}%`}})}),f.jsxs("p",{className:"text-xs text-neutral-500 mt-1 text-right",children:[Math.round(Ft),"%"]})]})]}):w==="video"&&Y===ee.IDLE&&v.length===0?f.jsx(CP,{tracks:L,onSelectTrack:$x,onGenerate:Ox,activeModel:pe,isYouTubeAuthenticated:!!An,sourceLang:b,setSourceLang:B,targetLang:O,setTargetLang:ae}):f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsxs("div",{className:"flex items-center justify-between gap-6",children:[f.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[f.jsx("div",{className:"w-24 aspect-video rounded-xl bg-neutral-800 text-black flex items-center justify-center overflow-hidden shrink-0 border border-neutral-700",children:w==="srt"?f.jsx(Mo,{className:"w-6 h-6 text-white"}):w==="youtube"&&he?f.jsx("img",{src:he.thumbnailUrl,className:"w-full h-full object-cover",alt:"YouTube thumbnail"}):w==="video"&&dn?f.jsx("img",{src:dn,className:"w-full h-full object-cover",alt:"Video thumbnail"}):f.jsx(kS,{className:"w-6 h-6 text-white"})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("h3",{className:"text-lg font-bold text-white truncate",children:g==null?void 0:g.name}),f.jsx("p",{className:"text-neutral-500 text-sm",children:v.length>0?`${v.length} lines loaded`:gt?"Select a caption track below":"Ready to configure"})]})]}),f.jsx(ze,{variant:"outline",onClick:hi,className:"shrink-0",children:"Change File"})]}),!gt&&v.length>0&&x===Ge.IDLE&&f.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-indigo-900/20 border border-indigo-900/40 text-indigo-300 text-sm",children:[f.jsx($S,{className:"w-4 h-4 shrink-0"}),f.jsxs("span",{children:["Processing this file will require approximately ",f.jsxs("strong",{children:[qx," API requests"]}),"."]})]})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center text-center cursor-pointer min-h-[200px]",onDragOver:E=>E.preventDefault(),onDrop:Fx,children:[f.jsx("input",{type:"file",ref:fi,className:"hidden",accept:`.srt, ${hh.join(",")}`,onChange:Ux}),f.jsx("div",{className:"w-16 h-16 rounded-2xl bg-neutral-800 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",onClick:()=>{var E;return(E=fi.current)==null?void 0:E.click()},children:f.jsx(YS,{className:"text-white w-8 h-8"})}),f.jsx("h2",{className:"text-xl font-bold text-white mb-2",onClick:()=>{var E;return(E=fi.current)==null?void 0:E.click()},children:"Drop your SRT or Video file here"}),f.jsx("p",{className:"text-neutral-500 mb-8",onClick:()=>{var E;return(E=fi.current)==null?void 0:E.click()},children:"or click to browse local files"}),f.jsxs("div",{className:"flex gap-4 z-20",children:[f.jsx("button",{onClick:()=>{d("URL"),s(!0)},className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-neutral-500 transition-all group/btn",title:"Import from URL",children:f.jsx(Ol,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-white"})}),f.jsx("button",{onClick:()=>{d("YOUTUBE"),s(!0)},className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-red-500/50 transition-all group/btn",title:"Import from YouTube",children:f.jsx(cn,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-red-500"})}),f.jsx("button",{onClick:()=>a(!0),className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-blue-500/50 transition-all group/btn",title:"Import from Cloud Drive",children:f.jsx(GS,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-blue-500"})}),f.jsx("button",{onClick:()=>pi("Social Media Integration Coming Soon!"),className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-pink-500/50 transition-all group/btn",title:"Other Sources",children:f.jsx(OS,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-pink-500"})})]})]})}),Kf&&f.jsx(f.Fragment,{children:gt&&v.length===0?f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[f.jsxs("div",{className:"p-6 rounded-2xl border border-neutral-800 bg-neutral-900/20",children:[f.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-wider mb-3",children:"Transcription Language"}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{className:"w-full appearance-none bg-black border border-neutral-800 text-white px-4 py-3 rounded-xl focus:border-white focus:outline-none transition-colors",onChange:E=>H(E.target.value),value:ne,disabled:Y===ee.EXTRACTING_SUBTITLES,children:[f.jsx("option",{value:"",children:"-- Select a Language --"}),nt.map(E=>f.jsx("option",{value:E.code,children:E.name},E.code))]}),f.jsx(Ic,{className:"absolute right-4 top-3.5 w-5 h-5 text-neutral-600 pointer-events-none"})]})]}),f.jsx("div",{className:"p-6 rounded-2xl border border-neutral-800 bg-neutral-900/20 flex flex-col justify-end",children:f.jsx("div",{className:"h-full flex items-end",children:f.jsx(ze,{className:"w-full py-3.5 text-base",onClick:Lx,disabled:!ne||Y===ee.EXTRACTING_SUBTITLES,icon:Y===ee.EXTRACTING_SUBTITLES?f.jsx(wr,{className:"w-5 h-5 animate-spin"}):f.jsx(Vl,{className:"w-5 h-5"}),children:Y===ee.EXTRACTING_SUBTITLES?"Downloading...":"Generate & Process"})})})]}):!gt&&v.length>0?f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[f.jsxs("div",{className:"p-6 rounded-2xl border border-neutral-800 bg-neutral-900/20",children:[f.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-wider mb-3",children:"Source Language"}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{className:"w-full appearance-none bg-black border border-neutral-800 text-white px-4 py-3 rounded-xl focus:border-white focus:outline-none transition-colors",value:b,onChange:E=>B(E.target.value),disabled:Rn,children:[f.jsx("option",{value:"auto",children:" Auto Detect"}),nt.map(E=>f.jsx("option",{value:E.name,children:E.name},`source-${E.code}`))]}),f.jsx(Ic,{className:"absolute right-4 top-3.5 w-5 h-5 text-neutral-600 pointer-events-none"})]})]}),f.jsxs("div",{className:"p-6 rounded-2xl border border-neutral-800 bg-neutral-900/20 flex flex-col justify-end",children:[f.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-wider mb-3",children:"Target Language"}),f.jsxs("div",{className:"relative",children:[f.jsx("select",{className:"w-full appearance-none bg-black border border-neutral-800 text-white px-4 py-3 rounded-xl focus:border-white focus:outline-none transition-colors",value:O,onChange:E=>ae(E.target.value),disabled:Rn,children:nt.map(E=>f.jsx("option",{value:E.name,children:E.name},`target-${E.code}`))}),f.jsx(T0,{className:"absolute right-4 top-3.5 w-5 h-5 text-neutral-600 pointer-events-none"})]})]})]}):null}),!gt&&v.length>0&&f.jsx("div",{className:"flex justify-end gap-4 animate-fade-in",children:Rn?f.jsxs("div",{className:"flex-1 p-4 rounded-xl border border-neutral-800 bg-neutral-900/50 flex items-center gap-4",children:[f.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex justify-between text-xs font-medium mb-1",children:[f.jsxs("span",{children:["Translating with ",pe.name,"..."]}),f.jsxs("span",{children:[N,"%"]})]}),f.jsx("div",{className:"w-full h-1 bg-neutral-800 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${N}%`}})})]})]}):x===Ge.IDLE?f.jsx(ze,{onClick:Bx,className:"w-full md:w-auto text-lg",icon:f.jsx(jS,{className:"w-5 h-5"}),children:"Start Translation"}):null}),T&&f.jsxs("div",{className:"p-4 rounded-xl bg-red-900/10 border border-red-900/40 text-red-200 text-sm flex items-start gap-3 animate-fade-in w-full",children:[f.jsx(js,{className:"w-5 h-5 text-red-500 shrink-0 mt-0.5"}),f.jsx("span",{className:"break-words whitespace-pre-wrap w-full",children:T})]})]})]})]}),v.length>0&&f.jsxs("section",{ref:$a,className:"mt-24 border-t border-neutral-900 pt-12 animate-slide-up pb-24",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8 flex-wrap gap-4",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-2",children:gt?"Transcription Preview":"Live Preview"}),f.jsx("p",{className:"text-neutral-500",children:gt?"Review the generated transcription below.":"Comparing original vs translated output."})]}),f.jsxs("div",{className:"flex items-center gap-4 relative",children:[(w==="video"||w==="youtube")&&f.jsxs("div",{className:"relative",ref:Be,children:[f.jsx(ze,{variant:"secondary",onClick:()=>ge(!Pe),progress:k,statusText:G,completed:le,disabled:k!==void 0||Rn,icon:f.jsx($l,{className:"w-4 h-4"}),className:"",children:"Download Video"}),Pe&&f.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-neutral-900 border border-neutral-800 rounded-xl shadow-xl overflow-hidden z-20 animate-fade-in",children:f.jsx("div",{children:gt&&(he!=null&&he.availableResolutions)&&he.availableResolutions.length>0?he.availableResolutions.map(E=>f.jsxs("button",{onClick:()=>Jf(E),className:"w-full px-4 py-2 text-left text-sm text-neutral-300 hover:bg-neutral-800 hover:text-white flex items-center justify-between transition-colors",children:[f.jsxs("span",{children:[E,"p"]}),f.jsx("span",{className:"text-[10px] bg-neutral-800 px-1.5 py-0.5 rounded text-neutral-500",children:"MP4"})]},E)):f.jsxs("button",{onClick:()=>Jf(),className:"w-full px-4 py-2 text-left text-sm text-neutral-300 hover:bg-neutral-800 hover:text-white flex items-center justify-between transition-colors",children:[f.jsx("span",{children:"Best Quality"}),f.jsx("span",{className:"text-[10px] bg-neutral-800 px-1.5 py-0.5 rounded text-neutral-500",children:gt?"MP4":"MKV"})]})})})]}),f.jsx(ze,{variant:"primary",onClick:Hx,disabled:Rn,icon:f.jsx(Vl,{className:"w-4 h-4"}),children:"Download SRT"})]})]}),f.jsxs("div",{className:"rounded-3xl border border-neutral-800 bg-black/50 backdrop-blur overflow-hidden min-h-[400px]",children:[f.jsxs("div",{className:"grid grid-cols-[100px_1fr] border-b border-neutral-800 bg-neutral-900/50 p-4 text-xs font-bold text-neutral-500 uppercase tracking-wider sticky top-0 z-10",children:[f.jsx("div",{className:"pl-2",children:"Timestamp"}),f.jsxs("div",{className:`grid ${gt?"grid-cols-1":"grid-cols-1 md:grid-cols-2"} gap-6`,children:[f.jsxs("span",{children:["Original (",gt?((Xf=nt.find(E=>E.code===ne))==null?void 0:Xf.name)||"Selected Language":b,")"]}),!gt&&f.jsxs("span",{className:"text-white",children:["Translated (",O,")"]})]})]}),f.jsx("div",{className:"max-h-[800px] overflow-y-auto",children:v.map(E=>f.jsx(_P,{subtitle:E,isActive:E.text!==E.originalText,isSingleColumn:gt,sourceFont:Yx,targetFont:jx},E.id))})]}),f.jsx("div",{className:"mt-8 flex justify-center",children:f.jsx(ze,{variant:"secondary",onClick:hi,icon:f.jsx(A0,{className:"w-4 h-4"}),children:"Process Another File"})})]})]}),f.jsx("footer",{className:"relative z-10 border-t border-neutral-900 bg-black/80 backdrop-blur-xl mt-auto",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8 flex flex-col gap-8",children:[f.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 w-full",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-6 h-6 bg-neutral-800 text-white flex items-center justify-center font-bold text-sm rounded font-display",children:"S"}),f.jsx("span",{className:"font-display font-bold tracking-tight text-neutral-400",children:"SubStream AI"})]}),f.jsxs("div",{className:"text-xs text-neutral-600",children:[" ",new Date().getFullYear()," SubStream AI. Open Source."]}),f.jsxs("div",{className:"flex items-center gap-6 text-sm text-neutral-500",children:[f.jsx("button",{onClick:()=>r("TOS"),className:"hover:text-white transition-colors",children:"Terms"}),f.jsx("button",{onClick:()=>r("PRIVACY"),className:"hover:text-white transition-colors",children:"Privacy"}),f.jsx("a",{href:"https://github.com/imrovoid/SubStream-AI",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:f.jsx(FS,{className:"w-5 h-5"})})]})]}),f.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 text-xs text-neutral-500 w-full",children:[f.jsxs("span",{children:["Developed by ",f.jsx("a",{href:"https://rovoid.ir",target:"_blank",rel:"noopener noreferrer",className:"text-neutral-300 hover:text-white transition-colors font-medium",children:"ROVOID"})]}),f.jsx("span",{className:"hidden md:block w-1 h-1 rounded-full bg-neutral-800"}),f.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-neutral-900/50 border border-neutral-800 text-xs hover:border-neutral-600 hover:bg-neutral-800 transition-all group",children:[f.jsx(VS,{className:"w-3 h-3 text-pink-500 group-hover:scale-110 transition-transform"})," Support Me"]})]})]})}),f.jsx(ks,{isOpen:n==="CONFIG",onClose:()=>r("NONE"),title:"AI Configuration",children:f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-10",children:[f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[f.jsx(Ec,{className:"w-4 h-4"})," Select AI Model"]}),f.jsxs("div",{className:"relative",children:[f.jsx(Ks,{className:"absolute left-3 top-3.5 w-5 h-5 text-neutral-500 pointer-events-none"}),f.jsx("input",{type:"text",placeholder:"Search models...",value:Qt,onChange:E=>Ax(E.target.value),className:"w-full bg-black/50 border border-neutral-700 rounded-xl py-2 pl-10 pr-4 text-white focus:border-white focus:outline-none transition-colors"})]}),f.jsxs("div",{className:"space-y-4 pr-2 overflow-y-auto max-h-[300px] md:max-h-[450px] custom-scrollbar",children:[jf.length>0&&f.jsxs("details",{open:!0,className:"group/youtube",children:[f.jsxs("summary",{className:"list-none flex items-center justify-between p-2 rounded-lg cursor-pointer hover:bg-neutral-800/50 transition-colors",children:[f.jsx("span",{className:"font-bold text-neutral-300",children:"YouTube Services"}),f.jsx(sl,{className:"w-5 h-5 text-neutral-500 transition-transform duration-200 group-open/youtube:rotate-180"})]}),f.jsx("div",{className:"space-y-3 pt-2 pl-2 border-l border-neutral-800 ml-2",children:jf.map(E=>{const D=!An;return f.jsxs("div",{onClick:()=>!D&&ur(E.id),className:`relative cursor-pointer p-4 rounded-xl border transition-all duration-200 
                                    ${D?"opacity-50 cursor-not-allowed bg-neutral-900/30 border-neutral-800":At===E.id?"bg-neutral-800 border-white":"bg-neutral-900/50 border-neutral-800 hover:bg-neutral-800/50 hover:border-neutral-700"}
                                `,children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsxs("h4",{className:"font-bold text-white mb-1 flex items-center gap-2",children:[E.name,!An&&f.jsx("span",{className:"text-[10px] text-red-400 bg-red-900/20 px-1.5 py-0.5 rounded border border-red-900/50",children:"Auth Required"})]}),f.jsx("p",{className:"text-xs text-neutral-400 leading-relaxed pr-8",children:E.description})]}),At===E.id&&f.jsx(Hr,{className:"w-5 h-5 text-white shrink-0"})]}),f.jsx("div",{className:"flex gap-2 mt-3",children:E.tags.map(V=>f.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-black/50 text-neutral-400 border border-neutral-800",children:V},V))})]},E.id)})})]}),Wf.length>0&&f.jsxs("details",{open:!0,className:"group/google",children:[f.jsxs("summary",{className:"list-none flex items-center justify-between p-2 rounded-lg cursor-pointer hover:bg-neutral-800/50 transition-colors",children:[f.jsx("span",{className:"font-bold text-neutral-300",children:"Google Gemini Models"}),f.jsx(sl,{className:"w-5 h-5 text-neutral-500 transition-transform duration-200 group-open/google:rotate-180"})]}),f.jsx("div",{className:"space-y-3 pt-2 pl-2 border-l border-neutral-800 ml-2",children:Wf.map(E=>f.jsxs("div",{onClick:()=>ur(E.id),className:`relative cursor-pointer p-4 rounded-xl border transition-all duration-200 ${At===E.id?"bg-neutral-800 border-white":"bg-neutral-900/50 border-neutral-800 hover:bg-neutral-800/50 hover:border-neutral-700"}`,children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-white mb-1",children:E.name}),f.jsx("p",{className:"text-xs text-neutral-400 leading-relaxed pr-8",children:E.description})]}),At===E.id&&f.jsx(Hr,{className:"w-5 h-5 text-white shrink-0"})]}),f.jsx("div",{className:"flex gap-2 mt-3",children:E.tags.map(D=>f.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-black/50 text-neutral-400 border border-neutral-800",children:D},D))})]},E.id))})]}),Yf.length>0&&f.jsxs("details",{open:!0,className:"group/openai",children:[f.jsxs("summary",{className:"list-none flex items-center justify-between p-2 rounded-lg cursor-pointer hover:bg-neutral-800/50 transition-colors",children:[f.jsx("span",{className:"font-bold text-neutral-300",children:"OpenAI Models"}),f.jsx(sl,{className:"w-5 h-5 text-neutral-500 transition-transform duration-200 group-open/openai:rotate-180"})]}),f.jsx("div",{className:"space-y-3 pt-2 pl-2 border-l border-neutral-800 ml-2",children:Yf.map(E=>f.jsxs("div",{onClick:()=>ur(E.id),className:`relative cursor-pointer p-4 rounded-xl border transition-all duration-200 ${At===E.id?"bg-neutral-800 border-white":"bg-neutral-900/50 border-neutral-800 hover:bg-neutral-800/50 hover:border-neutral-700"}`,children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-white mb-1",children:E.name}),f.jsx("p",{className:"text-xs text-neutral-400 leading-relaxed pr-8",children:E.description})]}),At===E.id&&f.jsx(Hr,{className:"w-5 h-5 text-white shrink-0"})]}),f.jsx("div",{className:"flex gap-2 mt-3",children:E.tags.map(D=>f.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-black/50 text-neutral-400 border border-neutral-800",children:D},D))})]},E.id))})]})]})]}),f.jsxs("div",{className:"space-y-6 flex flex-col h-full",children:[f.jsxs("div",{className:"space-y-6 flex-grow",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[f.jsx(Tc,{className:"w-4 h-4"})," Google AI API Key"]}),Ur&&f.jsx("button",{onClick:Mx,className:"text-xs text-red-500 hover:text-red-400",children:"Clear Key"})]}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"password",placeholder:"AIzaSy...",value:lr,onChange:E=>Ma(E.target.value),className:`w-full bg-black border rounded-xl px-4 py-3 text-white focus:outline-none transition-colors ${Kt==="idle"?"border-neutral-800 focus:border-white":""} ${Kt==="validating"?"border-neutral-700 animate-pulse":""} ${Kt==="valid"?"border-green-700/50 focus:border-green-500 focus:ring-1 focus:ring-green-500/50":""} ${Kt==="invalid"?"border-red-700/50 focus:border-red-500 focus:ring-1 focus:ring-red-500/50":""}`}),f.jsxs("div",{className:"absolute right-3 top-3.5",children:[Kt==="validating"&&f.jsx(wr,{className:"w-5 h-5 text-neutral-500 animate-spin"}),Kt==="valid"&&f.jsx(Hr,{className:"w-5 h-5 text-green-500"}),Kt==="invalid"&&f.jsx(ph,{className:"w-5 h-5 text-red-500"})]})]}),f.jsx("p",{className:"text-xs text-neutral-500",children:"For Gemini models. Stored locally in your browser."})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[f.jsx(Tc,{className:"w-4 h-4"})," OpenAI API Key"]}),Gr&&f.jsx("button",{onClick:bx,className:"text-xs text-red-500 hover:text-red-400",children:"Clear Key"})]}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"password",placeholder:"sk-...",value:ar,onChange:E=>Da(E.target.value),className:`w-full bg-black border rounded-xl px-4 py-3 text-white focus:outline-none transition-colors ${Xt==="idle"?"border-neutral-800 focus:border-white":""} ${Xt==="validating"?"border-neutral-700 animate-pulse":""} ${Xt==="valid"?"border-green-700/50 focus:border-green-500 focus:ring-1 focus:ring-green-500/50":""} ${Xt==="invalid"?"border-red-700/50 focus:border-red-500 focus:ring-1 focus:ring-red-500/50":""}`}),f.jsxs("div",{className:"absolute right-3 top-3.5",children:[Xt==="validating"&&f.jsx(wr,{className:"w-5 h-5 text-neutral-500 animate-spin"}),Xt==="valid"&&f.jsx(Hr,{className:"w-5 h-5 text-green-500"}),Xt==="invalid"&&f.jsx(ph,{className:"w-5 h-5 text-red-500"})]})]}),f.jsx("p",{className:"text-xs text-neutral-500",children:"For GPT models. Stored locally in your browser."})]}),pe.provider!=="youtube"&&f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[f.jsx(US,{className:"w-4 h-4"})," Rate Limit"]}),f.jsx("p",{className:"font-medium text-white text-sm",children:Zt==="unlimited"?"Unlimited":`${Zt} RPM`})]}),pe.provider==="google"&&pe.rateLimits?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid grid-cols-4 gap-1 w-full bg-neutral-900 border border-neutral-800 rounded-xl p-1",children:["free","tier1","tier2","tier3"].map(E=>{const D=pe.rateLimits[E],V=D===void 0,Q=$r===E,ie={free:"Free Tier",tier1:"Tier 1",tier2:"Tier 2",tier3:"Tier 3"};return f.jsxs("button",{onClick:()=>!V&&Fa(E),disabled:V,className:`
                                                    relative flex flex-col items-center justify-center py-2 rounded-lg text-xs transition-all duration-200
                                                    ${V?"opacity-30 cursor-not-allowed text-neutral-600":Q?"bg-neutral-700 text-white shadow-sm":"text-neutral-400 hover:text-neutral-200 hover:bg-neutral-800"}
                                                `,children:[f.jsx("span",{className:"font-bold mb-0.5",children:ie[E]}),f.jsx("span",{className:"text-[10px] opacity-80",children:D||"N/A"})]},E)})}),f.jsx("div",{className:"mt-2 text-center",children:f.jsxs("a",{href:"https://aistudio.google.com/usage?timeRange=last-28-days&tab=rate-limit",target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-neutral-500 hover:text-white flex items-center justify-center gap-1 transition-colors",children:["Check your limits on Google AI Studio ",f.jsx(DS,{className:"w-3 h-3"})]})})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"relative flex w-full p-1 bg-neutral-900 border border-neutral-800 rounded-xl",children:[f.jsx("div",{className:"absolute top-1 bottom-1 left-1 w-1/4 bg-neutral-700 rounded-lg transition-all duration-300 ease-out",style:{transform:`translateX(${Wx*100}%)`}}),yu.map(E=>f.jsx("button",{onClick:()=>Ua(E.value),className:`relative z-10 w-1/4 py-2 text-sm font-medium transition-colors duration-300 rounded-lg ${Zt===E.value?"text-white":"text-neutral-400 hover:text-white"}`,children:E.label},E.value))]}),f.jsx("p",{className:"text-xs text-neutral-500 text-center mt-2",children:(Qf=yu.find(E=>E.value===Zt))==null?void 0:Qf.description})]})]})]}),f.jsxs("div",{className:"flex items-center justify-between w-full pt-6 mt-8 border-t border-neutral-800",children:[f.jsx(TP,{onLoginSuccess:Hf,onLogout:mi,userInfo:An}),f.jsx(ze,{onClick:kx,disabled:Kt==="invalid"||Kt==="validating"||Xt==="invalid"||Xt==="validating",children:"Save Settings"})]})]})]})}),f.jsx(ks,{isOpen:n==="PRIVACY",onClose:()=>r("NONE"),title:"Privacy Policy",children:f.jsxs("div",{className:"space-y-6 text-sm text-neutral-300 leading-relaxed",children:[f.jsx("p",{className:"text-xs text-neutral-500",children:"Last Updated: November 2025"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[f.jsx(WS,{className:"w-4 h-4 text-green-400"})," Data Handling & Storage"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"SubStream AI"}),` is a "Client-Side" application. We do not store your API keys, subtitle files, or personal data on our servers. All API keys are stored locally in your browser's `,f.jsx("code",{children:"localStorage"}),"."]})]}),f.jsxs("div",{className:"space-y-3 pt-4 border-t border-neutral-800",children:[f.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[f.jsx(cn,{className:"w-4 h-4 text-red-500"})," YouTube API Services"]}),f.jsxs("p",{children:["This application uses YouTube API Services to provide features such as importing videos from your channel and uploading videos for auto-captioning. By using these features, you agree to be bound by the ",f.jsx("a",{href:"https://www.youtube.com/t/terms",target:"_blank",className:"text-white underline",children:"YouTube Terms of Service"}),"."]}),f.jsx("p",{children:"We access the following data only when you explicitly authenticate:"}),f.jsxs("ul",{className:"list-disc list-inside pl-2 mt-1 space-y-1 text-neutral-400",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"Uploads:"}),' To upload videos as "Unlisted" for transcription purposes.']}),f.jsxs("li",{children:[f.jsx("strong",{children:"Channel List:"})," To display your videos in the import selector."]})]}),f.jsxs("p",{children:["Please refer to the ",f.jsx("a",{href:"http://www.google.com/policies/privacy",target:"_blank",className:"text-white underline",children:"Google Privacy Policy"})," for more information on how Google handles your data."]})]}),f.jsxs("div",{className:"space-y-3 pt-4 border-t border-neutral-800",children:[f.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[f.jsx(Ol,{className:"w-4 h-4 text-blue-400"})," Proxy Usage"]}),f.jsx("p",{children:"When importing files from external URLs, data is streamed through a temporary local proxy to bypass CORS restrictions. The data is not persisted on the server."})]})]})}),f.jsx(ks,{isOpen:n==="TOS",onClose:()=>r("NONE"),title:"Terms of Service",children:f.jsxs("div",{className:"space-y-6 text-sm text-neutral-300 leading-relaxed",children:[f.jsx("p",{className:"text-xs text-neutral-500",children:"Last Updated: November 2025"}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h3",{className:"text-white font-bold text-lg",children:"1. Acceptance of Terms"}),f.jsx("p",{children:"By accessing and using SubStream AI, you accept and agree to be bound by the terms and provision of this agreement."})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h3",{className:"text-white font-bold text-lg",children:"2. YouTube Integration"}),f.jsxs("p",{children:["Our service integrates with YouTube. By using the YouTube features (Import, Auto-Caption), you agree to the ",f.jsx("a",{href:"https://www.youtube.com/t/terms",target:"_blank",className:"text-white underline",children:"YouTube Terms of Service"}),"."]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h3",{className:"text-white font-bold text-lg",children:"3. User Responsibility"}),f.jsx("p",{children:"You are solely responsible for the content you process using this tool. You agree not to upload content that violates copyright laws, contains illegal material, or infringes on the rights of others."})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h3",{className:"text-white font-bold text-lg",children:"4. Disclaimer"}),f.jsx("p",{children:'This software is provided "as is", without warranty of any kind, express or implied. The developers are not liable for any damages or data loss arising from the use of this software.'})]})]})}),f.jsx(IP,{isOpen:o,onClose:()=>s(!1),type:c,onImportFile:qf,onImportYouTube:Dx,googleAccessToken:di}),f.jsx(PP,{isOpen:i,onClose:()=>a(!1),onImportFile:qf})]})},Nx=document.getElementById("root");if(!Nx)throw new Error("Could not find root element to mount to");const LP=Ru.createRoot(Nx);LP.render(f.jsx(MP,{}));
