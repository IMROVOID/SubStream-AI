var Q0=Object.defineProperty;var af=t=>{throw TypeError(t)};var Z0=(t,e,n)=>e in t?Q0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var He=(t,e,n)=>Z0(t,typeof e!="symbol"?e+"":e,n),uf=(t,e,n)=>e.has(t)||af("Cannot "+n);var z=(t,e,n)=>(uf(t,e,"read from private field"),n?n.call(t):e.get(t)),dn=(t,e,n)=>e.has(t)?af("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Eo=(t,e,n,r)=>(uf(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function j0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _m={exports:{}},yl={},wm={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ei=Symbol.for("react.element"),e_=Symbol.for("react.portal"),t_=Symbol.for("react.fragment"),n_=Symbol.for("react.strict_mode"),r_=Symbol.for("react.profiler"),o_=Symbol.for("react.provider"),i_=Symbol.for("react.context"),s_=Symbol.for("react.forward_ref"),l_=Symbol.for("react.suspense"),a_=Symbol.for("react.memo"),u_=Symbol.for("react.lazy"),cf=Symbol.iterator;function c_(t){return t===null||typeof t!="object"?null:(t=cf&&t[cf]||t["@@iterator"],typeof t=="function"?t:null)}var xm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Em=Object.assign,Sm={};function ao(t,e,n){this.props=t,this.context=e,this.refs=Sm,this.updater=n||xm}ao.prototype.isReactComponent={};ao.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ao.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Tm(){}Tm.prototype=ao.prototype;function uc(t,e,n){this.props=t,this.context=e,this.refs=Sm,this.updater=n||xm}var cc=uc.prototype=new Tm;cc.constructor=uc;Em(cc,ao.prototype);cc.isPureReactComponent=!0;var df=Array.isArray,Cm=Object.prototype.hasOwnProperty,dc={current:null},Im={key:!0,ref:!0,__self:!0,__source:!0};function Am(t,e,n){var r,o={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)Cm.call(e,r)&&!Im.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];o.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Ei,type:t,key:i,ref:s,props:o,_owner:dc.current}}function d_(t,e){return{$$typeof:Ei,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ei}function f_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ff=/\/+/g;function oa(t,e){return typeof t=="object"&&t!==null&&t.key!=null?f_(""+t.key):e.toString(36)}function ps(t,e,n,r,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ei:case e_:s=!0}}if(s)return s=t,o=o(s),t=r===""?"."+oa(s,0):r,df(o)?(n="",t!=null&&(n=t.replace(ff,"$&/")+"/"),ps(o,e,n,"",function(d){return d})):o!=null&&(fc(o)&&(o=d_(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(ff,"$&/")+"/")+t)),e.push(o)),1;if(s=0,r=r===""?".":r+":",df(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+oa(i,a);s+=ps(i,e,n,c,o)}else if(c=c_(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+oa(i,a++),s+=ps(i,e,n,c,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Gi(t,e,n){if(t==null)return t;var r=[],o=0;return ps(t,r,"","",function(i){return e.call(n,i,o++)}),r}function p_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var We={current:null},hs={transition:null},h_={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:hs,ReactCurrentOwner:dc};function Nm(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:Gi,forEach:function(t,e,n){Gi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gi(t,function(){e++}),e},toArray:function(t){return Gi(t,function(e){return e})||[]},only:function(t){if(!fc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=ao;J.Fragment=t_;J.Profiler=r_;J.PureComponent=uc;J.StrictMode=n_;J.Suspense=l_;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h_;J.act=Nm;J.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Em({},t.props),o=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=dc.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Cm.call(e,c)&&!Im.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Ei,type:t.type,key:o,ref:i,props:r,_owner:s}};J.createContext=function(t){return t={$$typeof:i_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o_,_context:t},t.Consumer=t};J.createElement=Am;J.createFactory=function(t){var e=Am.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:s_,render:t}};J.isValidElement=fc;J.lazy=function(t){return{$$typeof:u_,_payload:{_status:-1,_result:t},_init:p_}};J.memo=function(t,e){return{$$typeof:a_,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=hs.transition;hs.transition={};try{t()}finally{hs.transition=e}};J.unstable_act=Nm;J.useCallback=function(t,e){return We.current.useCallback(t,e)};J.useContext=function(t){return We.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return We.current.useDeferredValue(t)};J.useEffect=function(t,e){return We.current.useEffect(t,e)};J.useId=function(){return We.current.useId()};J.useImperativeHandle=function(t,e,n){return We.current.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return We.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return We.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return We.current.useMemo(t,e)};J.useReducer=function(t,e,n){return We.current.useReducer(t,e,n)};J.useRef=function(t){return We.current.useRef(t)};J.useState=function(t){return We.current.useState(t)};J.useSyncExternalStore=function(t,e,n){return We.current.useSyncExternalStore(t,e,n)};J.useTransition=function(){return We.current.useTransition()};J.version="18.3.1";wm.exports=J;var M=wm.exports;const m_=j0(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_=M,y_=Symbol.for("react.element"),v_=Symbol.for("react.fragment"),__=Object.prototype.hasOwnProperty,w_=g_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x_={key:!0,ref:!0,__self:!0,__source:!0};function Rm(t,e,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)__.call(e,r)&&!x_.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:y_,type:t,key:i,ref:s,props:o,_owner:w_.current}}yl.Fragment=v_;yl.jsx=Rm;yl.jsxs=Rm;_m.exports=yl;var m=_m.exports,qa={},Pm={exports:{}},ct={},km={exports:{}},Mm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,V){var H=L.length;L.push(V);e:for(;0<H;){var ee=H-1>>>1,we=L[ee];if(0<o(we,V))L[ee]=V,L[H]=we,H=ee;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var V=L[0],H=L.pop();if(H!==V){L[0]=H;e:for(var ee=0,we=L.length,an=we>>>1;ee<an;){var Fe=2*(ee+1)-1,$n=L[Fe],ne=Fe+1,Hn=L[ne];if(0>o($n,H))ne<we&&0>o(Hn,$n)?(L[ee]=Hn,L[ne]=H,ee=ne):(L[ee]=$n,L[Fe]=H,ee=Fe);else if(ne<we&&0>o(Hn,H))L[ee]=Hn,L[ne]=H,ee=ne;else break e}}return V}function o(L,V){var H=L.sortIndex-V.sortIndex;return H!==0?H:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],d=[],f=1,p=null,h=3,g=!1,w=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(L){for(var V=n(d);V!==null;){if(V.callback===null)r(d);else if(V.startTime<=L)r(d),V.sortIndex=V.expirationTime,e(c,V);else break;V=n(d)}}function E(L){if(x=!1,v(L),!w)if(n(c)!==null)w=!0,ae(S);else{var V=n(d);V!==null&&j(E,V.startTime-L)}}function S(L,V){w=!1,x&&(x=!1,_(k),k=-1),g=!0;var H=h;try{for(v(V),p=n(c);p!==null&&(!(p.expirationTime>V)||L&&!U());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,h=p.priorityLevel;var we=ee(p.expirationTime<=V);V=t.unstable_now(),typeof we=="function"?p.callback=we:p===n(c)&&r(c),v(V)}else r(c);p=n(c)}if(p!==null)var an=!0;else{var Fe=n(d);Fe!==null&&j(E,Fe.startTime-V),an=!1}return an}finally{p=null,h=H,g=!1}}var I=!1,T=null,k=-1,N=5,R=-1;function U(){return!(t.unstable_now()-R<N)}function q(){if(T!==null){var L=t.unstable_now();R=L;var V=!0;try{V=T(!0,L)}finally{V?ye():(I=!1,T=null)}}else I=!1}var ye;if(typeof y=="function")ye=function(){y(q)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,Et=$e.port2;$e.port1.onmessage=q,ye=function(){Et.postMessage(null)}}else ye=function(){C(q,0)};function ae(L){T=L,I||(I=!0,ye())}function j(L,V){k=C(function(){L(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,ae(S))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var H=h;h=V;try{return L()}finally{h=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var H=h;h=L;try{return V()}finally{h=H}},t.unstable_scheduleCallback=function(L,V,H){var ee=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?ee+H:ee):H=ee,L){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=H+we,L={id:f++,callback:V,priorityLevel:L,startTime:H,expirationTime:we,sortIndex:-1},H>ee?(L.sortIndex=H,e(d,L),n(c)===null&&L===n(d)&&(x?(_(k),k=-1):x=!0,j(E,H-ee))):(L.sortIndex=we,e(c,L),w||g||(w=!0,ae(S))),L},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(L){var V=h;return function(){var H=h;h=V;try{return L.apply(this,arguments)}finally{h=H}}}})(Mm);km.exports=Mm;var E_=km.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_=M,ut=E_;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dm=new Set,ri={};function fr(t,e){to(t,e),to(t+"Capture",e)}function to(t,e){for(ri[t]=e,t=0;t<e.length;t++)Dm.add(e[t])}var jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=Object.prototype.hasOwnProperty,T_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pf={},hf={};function C_(t){return za.call(hf,t)?!0:za.call(pf,t)?!1:T_.test(t)?hf[t]=!0:(pf[t]=!0,!1)}function I_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function A_(t,e,n,r){if(e===null||typeof e>"u"||I_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ye(t,e,n,r,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){De[t]=new Ye(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];De[e]=new Ye(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){De[t]=new Ye(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){De[t]=new Ye(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){De[t]=new Ye(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){De[t]=new Ye(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){De[t]=new Ye(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){De[t]=new Ye(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){De[t]=new Ye(t,5,!1,t.toLowerCase(),null,!1,!1)});var pc=/[\-:]([a-z])/g;function hc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pc,hc);De[e]=new Ye(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pc,hc);De[e]=new Ye(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pc,hc);De[e]=new Ye(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){De[t]=new Ye(t,1,!1,t.toLowerCase(),null,!1,!1)});De.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){De[t]=new Ye(t,1,!1,t.toLowerCase(),null,!0,!0)});function mc(t,e,n,r){var o=De.hasOwnProperty(e)?De[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(A_(e,n,o,r)&&(n=null),r||o===null?C_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var on=S_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vi=Symbol.for("react.element"),Rr=Symbol.for("react.portal"),Pr=Symbol.for("react.fragment"),gc=Symbol.for("react.strict_mode"),Ja=Symbol.for("react.profiler"),Lm=Symbol.for("react.provider"),Fm=Symbol.for("react.context"),yc=Symbol.for("react.forward_ref"),Wa=Symbol.for("react.suspense"),Ya=Symbol.for("react.suspense_list"),vc=Symbol.for("react.memo"),yn=Symbol.for("react.lazy"),Um=Symbol.for("react.offscreen"),mf=Symbol.iterator;function So(t){return t===null||typeof t!="object"?null:(t=mf&&t[mf]||t["@@iterator"],typeof t=="function"?t:null)}var me=Object.assign,ia;function Do(t){if(ia===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ia=e&&e[1]||""}return`
`+ia+t}var sa=!1;function la(t,e){if(!t||sa)return"";sa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var c=`
`+o[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{sa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Do(t):""}function N_(t){switch(t.tag){case 5:return Do(t.type);case 16:return Do("Lazy");case 13:return Do("Suspense");case 19:return Do("SuspenseList");case 0:case 2:case 15:return t=la(t.type,!1),t;case 11:return t=la(t.type.render,!1),t;case 1:return t=la(t.type,!0),t;default:return""}}function Ka(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pr:return"Fragment";case Rr:return"Portal";case Ja:return"Profiler";case gc:return"StrictMode";case Wa:return"Suspense";case Ya:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Fm:return(t.displayName||"Context")+".Consumer";case Lm:return(t._context.displayName||"Context")+".Provider";case yc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vc:return e=t.displayName||null,e!==null?e:Ka(t.type)||"Memo";case yn:e=t._payload,t=t._init;try{return Ka(t(e))}catch{}}return null}function R_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ka(e);case 8:return e===gc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ln(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function P_(t){var e=bm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bi(t){t._valueTracker||(t._valueTracker=P_(t))}function Gm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xa(t,e){var n=e.checked;return me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ln(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vm(t,e){e=e.checked,e!=null&&mc(t,"checked",e,!1)}function Qa(t,e){Vm(t,e);var n=Ln(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Za(t,e.type,n):e.hasOwnProperty("defaultValue")&&Za(t,e.type,Ln(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Za(t,e,n){(e!=="number"||Fs(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lo=Array.isArray;function Hr(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ln(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function ja(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(Lo(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ln(n)}}function Bm(t,e){var n=Ln(e.value),r=Ln(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _f(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Om(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Om(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oi,$m=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oi=Oi||document.createElement("div"),Oi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k_=["Webkit","ms","Moz","O"];Object.keys(zo).forEach(function(t){k_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zo[e]=zo[t]})});function Hm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zo.hasOwnProperty(t)&&zo[t]?(""+e).trim():e+"px"}function qm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Hm(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var M_=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tu(t,e){if(e){if(M_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function nu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ru=null;function _c(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ou=null,qr=null,zr=null;function wf(t){if(t=Ci(t)){if(typeof ou!="function")throw Error(P(280));var e=t.stateNode;e&&(e=El(e),ou(t.stateNode,t.type,e))}}function zm(t){qr?zr?zr.push(t):zr=[t]:qr=t}function Jm(){if(qr){var t=qr,e=zr;if(zr=qr=null,wf(t),e)for(t=0;t<e.length;t++)wf(e[t])}}function Wm(t,e){return t(e)}function Ym(){}var aa=!1;function Km(t,e,n){if(aa)return t(e,n);aa=!0;try{return Wm(t,e,n)}finally{aa=!1,(qr!==null||zr!==null)&&(Ym(),Jm())}}function ii(t,e){var n=t.stateNode;if(n===null)return null;var r=El(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var iu=!1;if(jt)try{var To={};Object.defineProperty(To,"passive",{get:function(){iu=!0}}),window.addEventListener("test",To,To),window.removeEventListener("test",To,To)}catch{iu=!1}function D_(t,e,n,r,o,i,s,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Jo=!1,Us=null,bs=!1,su=null,L_={onError:function(t){Jo=!0,Us=t}};function F_(t,e,n,r,o,i,s,a,c){Jo=!1,Us=null,D_.apply(L_,arguments)}function U_(t,e,n,r,o,i,s,a,c){if(F_.apply(this,arguments),Jo){if(Jo){var d=Us;Jo=!1,Us=null}else throw Error(P(198));bs||(bs=!0,su=d)}}function pr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xf(t){if(pr(t)!==t)throw Error(P(188))}function b_(t){var e=t.alternate;if(!e){if(e=pr(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return xf(o),t;if(i===r)return xf(o),e;i=i.sibling}throw Error(P(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function Qm(t){return t=b_(t),t!==null?Zm(t):null}function Zm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zm(t);if(e!==null)return e;t=t.sibling}return null}var jm=ut.unstable_scheduleCallback,Ef=ut.unstable_cancelCallback,G_=ut.unstable_shouldYield,V_=ut.unstable_requestPaint,_e=ut.unstable_now,B_=ut.unstable_getCurrentPriorityLevel,wc=ut.unstable_ImmediatePriority,eg=ut.unstable_UserBlockingPriority,Gs=ut.unstable_NormalPriority,O_=ut.unstable_LowPriority,tg=ut.unstable_IdlePriority,vl=null,Ht=null;function $_(t){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(vl,t,void 0,(t.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:z_,H_=Math.log,q_=Math.LN2;function z_(t){return t>>>=0,t===0?32:31-(H_(t)/q_|0)|0}var $i=64,Hi=4194304;function Fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~o;a!==0?r=Fo(a):(i&=s,i!==0&&(r=Fo(i)))}else s=n&~o,s!==0?r=Fo(s):i!==0&&(r=Fo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Pt(e),o=1<<n,r|=t[n],e&=~o;return r}function J_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Pt(i),a=1<<s,c=o[s];c===-1?(!(a&n)||a&r)&&(o[s]=J_(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function lu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ng(){var t=$i;return $i<<=1,!($i&4194240)&&($i=64),t}function ua(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Si(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pt(e),t[e]=n}function Y_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Pt(n),i=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~i}}function xc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Pt(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var Z=0;function rg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var og,Ec,ig,sg,lg,au=!1,qi=[],Cn=null,In=null,An=null,si=new Map,li=new Map,_n=[],K_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sf(t,e){switch(t){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":In=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":si.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":li.delete(e.pointerId)}}function Co(t,e,n,r,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=Ci(e),e!==null&&Ec(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function X_(t,e,n,r,o){switch(e){case"focusin":return Cn=Co(Cn,t,e,n,r,o),!0;case"dragenter":return In=Co(In,t,e,n,r,o),!0;case"mouseover":return An=Co(An,t,e,n,r,o),!0;case"pointerover":var i=o.pointerId;return si.set(i,Co(si.get(i)||null,t,e,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,li.set(i,Co(li.get(i)||null,t,e,n,r,o)),!0}return!1}function ag(t){var e=Zn(t.target);if(e!==null){var n=pr(e);if(n!==null){if(e=n.tag,e===13){if(e=Xm(n),e!==null){t.blockedOn=e,lg(t.priority,function(){ig(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ms(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ru=r,n.target.dispatchEvent(r),ru=null}else return e=Ci(n),e!==null&&Ec(e),t.blockedOn=n,!1;e.shift()}return!0}function Tf(t,e,n){ms(t)&&n.delete(e)}function Q_(){au=!1,Cn!==null&&ms(Cn)&&(Cn=null),In!==null&&ms(In)&&(In=null),An!==null&&ms(An)&&(An=null),si.forEach(Tf),li.forEach(Tf)}function Io(t,e){t.blockedOn===e&&(t.blockedOn=null,au||(au=!0,ut.unstable_scheduleCallback(ut.unstable_NormalPriority,Q_)))}function ai(t){function e(o){return Io(o,t)}if(0<qi.length){Io(qi[0],t);for(var n=1;n<qi.length;n++){var r=qi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Cn!==null&&Io(Cn,t),In!==null&&Io(In,t),An!==null&&Io(An,t),si.forEach(e),li.forEach(e),n=0;n<_n.length;n++)r=_n[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_n.length&&(n=_n[0],n.blockedOn===null);)ag(n),n.blockedOn===null&&_n.shift()}var Jr=on.ReactCurrentBatchConfig,Bs=!0;function Z_(t,e,n,r){var o=Z,i=Jr.transition;Jr.transition=null;try{Z=1,Sc(t,e,n,r)}finally{Z=o,Jr.transition=i}}function j_(t,e,n,r){var o=Z,i=Jr.transition;Jr.transition=null;try{Z=4,Sc(t,e,n,r)}finally{Z=o,Jr.transition=i}}function Sc(t,e,n,r){if(Bs){var o=uu(t,e,n,r);if(o===null)_a(t,e,r,Os,n),Sf(t,r);else if(X_(o,t,e,n,r))r.stopPropagation();else if(Sf(t,r),e&4&&-1<K_.indexOf(t)){for(;o!==null;){var i=Ci(o);if(i!==null&&og(i),i=uu(t,e,n,r),i===null&&_a(t,e,r,Os,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else _a(t,e,r,null,n)}}var Os=null;function uu(t,e,n,r){if(Os=null,t=_c(r),t=Zn(t),t!==null)if(e=pr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Os=t,null}function ug(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(B_()){case wc:return 1;case eg:return 4;case Gs:case O_:return 16;case tg:return 536870912;default:return 16}default:return 16}}var En=null,Tc=null,gs=null;function cg(){if(gs)return gs;var t,e=Tc,n=e.length,r,o="value"in En?En.value:En.textContent,i=o.length;for(t=0;t<n&&e[t]===o[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===o[i-r];r++);return gs=o.slice(t,1<r?1-r:void 0)}function ys(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zi(){return!0}function Cf(){return!1}function dt(t){function e(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zi:Cf,this.isPropagationStopped=Cf,this}return me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),e}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=dt(uo),Ti=me({},uo,{view:0,detail:0}),ew=dt(Ti),ca,da,Ao,_l=me({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ic,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ao&&(Ao&&t.type==="mousemove"?(ca=t.screenX-Ao.screenX,da=t.screenY-Ao.screenY):da=ca=0,Ao=t),ca)},movementY:function(t){return"movementY"in t?t.movementY:da}}),If=dt(_l),tw=me({},_l,{dataTransfer:0}),nw=dt(tw),rw=me({},Ti,{relatedTarget:0}),fa=dt(rw),ow=me({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),iw=dt(ow),sw=me({},uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lw=dt(sw),aw=me({},uo,{data:0}),Af=dt(aw),uw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dw[t])?!!e[t]:!1}function Ic(){return fw}var pw=me({},Ti,{key:function(t){if(t.key){var e=uw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ys(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ic,charCode:function(t){return t.type==="keypress"?ys(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ys(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hw=dt(pw),mw=me({},_l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nf=dt(mw),gw=me({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ic}),yw=dt(gw),vw=me({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_w=dt(vw),ww=me({},_l,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xw=dt(ww),Ew=[9,13,27,32],Ac=jt&&"CompositionEvent"in window,Wo=null;jt&&"documentMode"in document&&(Wo=document.documentMode);var Sw=jt&&"TextEvent"in window&&!Wo,dg=jt&&(!Ac||Wo&&8<Wo&&11>=Wo),Rf=" ",Pf=!1;function fg(t,e){switch(t){case"keyup":return Ew.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kr=!1;function Tw(t,e){switch(t){case"compositionend":return pg(e);case"keypress":return e.which!==32?null:(Pf=!0,Rf);case"textInput":return t=e.data,t===Rf&&Pf?null:t;default:return null}}function Cw(t,e){if(kr)return t==="compositionend"||!Ac&&fg(t,e)?(t=cg(),gs=Tc=En=null,kr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dg&&e.locale!=="ko"?null:e.data;default:return null}}var Iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Iw[t.type]:e==="textarea"}function hg(t,e,n,r){zm(r),e=$s(e,"onChange"),0<e.length&&(n=new Cc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yo=null,ui=null;function Aw(t){Cg(t,0)}function wl(t){var e=Lr(t);if(Gm(e))return t}function Nw(t,e){if(t==="change")return e}var mg=!1;if(jt){var pa;if(jt){var ha="oninput"in document;if(!ha){var Mf=document.createElement("div");Mf.setAttribute("oninput","return;"),ha=typeof Mf.oninput=="function"}pa=ha}else pa=!1;mg=pa&&(!document.documentMode||9<document.documentMode)}function Df(){Yo&&(Yo.detachEvent("onpropertychange",gg),ui=Yo=null)}function gg(t){if(t.propertyName==="value"&&wl(ui)){var e=[];hg(e,ui,t,_c(t)),Km(Aw,e)}}function Rw(t,e,n){t==="focusin"?(Df(),Yo=e,ui=n,Yo.attachEvent("onpropertychange",gg)):t==="focusout"&&Df()}function Pw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wl(ui)}function kw(t,e){if(t==="click")return wl(e)}function Mw(t,e){if(t==="input"||t==="change")return wl(e)}function Dw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mt=typeof Object.is=="function"?Object.is:Dw;function ci(t,e){if(Mt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!za.call(e,o)||!Mt(t[o],e[o]))return!1}return!0}function Lf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ff(t,e){var n=Lf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lf(n)}}function yg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vg(){for(var t=window,e=Fs();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fs(t.document)}return e}function Nc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Lw(t){var e=vg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&yg(n.ownerDocument.documentElement,n)){if(r!==null&&Nc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!t.extend&&i>r&&(o=r,r=i,i=o),o=Ff(n,i);var s=Ff(n,r);o&&s&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fw=jt&&"documentMode"in document&&11>=document.documentMode,Mr=null,cu=null,Ko=null,du=!1;function Uf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;du||Mr==null||Mr!==Fs(r)||(r=Mr,"selectionStart"in r&&Nc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ko&&ci(Ko,r)||(Ko=r,r=$s(cu,"onSelect"),0<r.length&&(e=new Cc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mr)))}function Ji(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Dr={animationend:Ji("Animation","AnimationEnd"),animationiteration:Ji("Animation","AnimationIteration"),animationstart:Ji("Animation","AnimationStart"),transitionend:Ji("Transition","TransitionEnd")},ma={},_g={};jt&&(_g=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function xl(t){if(ma[t])return ma[t];if(!Dr[t])return t;var e=Dr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _g)return ma[t]=e[n];return t}var wg=xl("animationend"),xg=xl("animationiteration"),Eg=xl("animationstart"),Sg=xl("transitionend"),Tg=new Map,bf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Un(t,e){Tg.set(t,e),fr(e,[t])}for(var ga=0;ga<bf.length;ga++){var ya=bf[ga],Uw=ya.toLowerCase(),bw=ya[0].toUpperCase()+ya.slice(1);Un(Uw,"on"+bw)}Un(wg,"onAnimationEnd");Un(xg,"onAnimationIteration");Un(Eg,"onAnimationStart");Un("dblclick","onDoubleClick");Un("focusin","onFocus");Un("focusout","onBlur");Un(Sg,"onTransitionEnd");to("onMouseEnter",["mouseout","mouseover"]);to("onMouseLeave",["mouseout","mouseover"]);to("onPointerEnter",["pointerout","pointerover"]);to("onPointerLeave",["pointerout","pointerover"]);fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function Gf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,U_(r,e,void 0,t),t.currentTarget=null}function Cg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&o.isPropagationStopped())break e;Gf(o,a,d),i=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&o.isPropagationStopped())break e;Gf(o,a,d),i=c}}}if(bs)throw t=su,bs=!1,su=null,t}function oe(t,e){var n=e[gu];n===void 0&&(n=e[gu]=new Set);var r=t+"__bubble";n.has(r)||(Ig(e,t,2,!1),n.add(r))}function va(t,e,n){var r=0;e&&(r|=4),Ig(n,t,r,e)}var Wi="_reactListening"+Math.random().toString(36).slice(2);function di(t){if(!t[Wi]){t[Wi]=!0,Dm.forEach(function(n){n!=="selectionchange"&&(Gw.has(n)||va(n,!1,t),va(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wi]||(e[Wi]=!0,va("selectionchange",!1,e))}}function Ig(t,e,n,r){switch(ug(e)){case 1:var o=Z_;break;case 4:o=j_;break;default:o=Sc}n=o.bind(null,e,n,t),o=void 0,!iu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function _a(t,e,n,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;s=s.return}for(;a!==null;){if(s=Zn(a),s===null)return;if(c=s.tag,c===5||c===6){r=i=s;continue e}a=a.parentNode}}r=r.return}Km(function(){var d=i,f=_c(n),p=[];e:{var h=Tg.get(t);if(h!==void 0){var g=Cc,w=t;switch(t){case"keypress":if(ys(n)===0)break e;case"keydown":case"keyup":g=hw;break;case"focusin":w="focus",g=fa;break;case"focusout":w="blur",g=fa;break;case"beforeblur":case"afterblur":g=fa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=If;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=nw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=yw;break;case wg:case xg:case Eg:g=iw;break;case Sg:g=_w;break;case"scroll":g=ew;break;case"wheel":g=xw;break;case"copy":case"cut":case"paste":g=lw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Nf}var x=(e&4)!==0,C=!x&&t==="scroll",_=x?h!==null?h+"Capture":null:h;x=[];for(var y=d,v;y!==null;){v=y;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,_!==null&&(E=ii(y,_),E!=null&&x.push(fi(y,E,v)))),C)break;y=y.return}0<x.length&&(h=new g(h,w,null,n,f),p.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==ru&&(w=n.relatedTarget||n.fromElement)&&(Zn(w)||w[en]))break e;if((g||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=d,w=w?Zn(w):null,w!==null&&(C=pr(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=d),g!==w)){if(x=If,E="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=Nf,E="onPointerLeave",_="onPointerEnter",y="pointer"),C=g==null?h:Lr(g),v=w==null?h:Lr(w),h=new x(E,y+"leave",g,n,f),h.target=C,h.relatedTarget=v,E=null,Zn(f)===d&&(x=new x(_,y+"enter",w,n,f),x.target=v,x.relatedTarget=C,E=x),C=E,g&&w)t:{for(x=g,_=w,y=0,v=x;v;v=wr(v))y++;for(v=0,E=_;E;E=wr(E))v++;for(;0<y-v;)x=wr(x),y--;for(;0<v-y;)_=wr(_),v--;for(;y--;){if(x===_||_!==null&&x===_.alternate)break t;x=wr(x),_=wr(_)}x=null}else x=null;g!==null&&Vf(p,h,g,x,!1),w!==null&&C!==null&&Vf(p,C,w,x,!0)}}e:{if(h=d?Lr(d):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var S=Nw;else if(kf(h))if(mg)S=Mw;else{S=Pw;var I=Rw}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=kw);if(S&&(S=S(t,d))){hg(p,S,n,f);break e}I&&I(t,h,d),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&Za(h,"number",h.value)}switch(I=d?Lr(d):window,t){case"focusin":(kf(I)||I.contentEditable==="true")&&(Mr=I,cu=d,Ko=null);break;case"focusout":Ko=cu=Mr=null;break;case"mousedown":du=!0;break;case"contextmenu":case"mouseup":case"dragend":du=!1,Uf(p,n,f);break;case"selectionchange":if(Fw)break;case"keydown":case"keyup":Uf(p,n,f)}var T;if(Ac)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else kr?fg(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(dg&&n.locale!=="ko"&&(kr||k!=="onCompositionStart"?k==="onCompositionEnd"&&kr&&(T=cg()):(En=f,Tc="value"in En?En.value:En.textContent,kr=!0)),I=$s(d,k),0<I.length&&(k=new Af(k,t,null,n,f),p.push({event:k,listeners:I}),T?k.data=T:(T=pg(n),T!==null&&(k.data=T)))),(T=Sw?Tw(t,n):Cw(t,n))&&(d=$s(d,"onBeforeInput"),0<d.length&&(f=new Af("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=T))}Cg(p,e)})}function fi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $s(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=ii(t,n),i!=null&&r.unshift(fi(t,i,o)),i=ii(t,e),i!=null&&r.push(fi(t,i,o))),t=t.return}return r}function wr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vf(t,e,n,r,o){for(var i=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,o?(c=ii(n,i),c!=null&&s.unshift(fi(n,c,a))):o||(c=ii(n,i),c!=null&&s.push(fi(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Vw=/\r\n?/g,Bw=/\u0000|\uFFFD/g;function Bf(t){return(typeof t=="string"?t:""+t).replace(Vw,`
`).replace(Bw,"")}function Yi(t,e,n){if(e=Bf(e),Bf(t)!==e&&n)throw Error(P(425))}function Hs(){}var fu=null,pu=null;function hu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mu=typeof setTimeout=="function"?setTimeout:void 0,Ow=typeof clearTimeout=="function"?clearTimeout:void 0,Of=typeof Promise=="function"?Promise:void 0,$w=typeof queueMicrotask=="function"?queueMicrotask:typeof Of<"u"?function(t){return Of.resolve(null).then(t).catch(Hw)}:mu;function Hw(t){setTimeout(function(){throw t})}function wa(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),ai(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);ai(e)}function Nn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $f(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var co=Math.random().toString(36).slice(2),Ot="__reactFiber$"+co,pi="__reactProps$"+co,en="__reactContainer$"+co,gu="__reactEvents$"+co,qw="__reactListeners$"+co,zw="__reactHandles$"+co;function Zn(t){var e=t[Ot];if(e)return e;for(var n=t.parentNode;n;){if(e=n[en]||n[Ot]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$f(t);t!==null;){if(n=t[Ot])return n;t=$f(t)}return e}t=n,n=t.parentNode}return null}function Ci(t){return t=t[Ot]||t[en],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function El(t){return t[pi]||null}var yu=[],Fr=-1;function bn(t){return{current:t}}function le(t){0>Fr||(t.current=yu[Fr],yu[Fr]=null,Fr--)}function re(t,e){Fr++,yu[Fr]=t.current,t.current=e}var Fn={},Oe=bn(Fn),je=bn(!1),sr=Fn;function no(t,e){var n=t.type.contextTypes;if(!n)return Fn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function et(t){return t=t.childContextTypes,t!=null}function qs(){le(je),le(Oe)}function Hf(t,e,n){if(Oe.current!==Fn)throw Error(P(168));re(Oe,e),re(je,n)}function Ag(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(P(108,R_(t)||"Unknown",o));return me({},n,r)}function zs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fn,sr=Oe.current,re(Oe,t),re(je,je.current),!0}function qf(t,e,n){var r=t.stateNode;if(!r)throw Error(P(169));n?(t=Ag(t,e,sr),r.__reactInternalMemoizedMergedChildContext=t,le(je),le(Oe),re(Oe,t)):le(je),re(je,n)}var Yt=null,Sl=!1,xa=!1;function Ng(t){Yt===null?Yt=[t]:Yt.push(t)}function Jw(t){Sl=!0,Ng(t)}function Gn(){if(!xa&&Yt!==null){xa=!0;var t=0,e=Z;try{var n=Yt;for(Z=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yt=null,Sl=!1}catch(o){throw Yt!==null&&(Yt=Yt.slice(t+1)),jm(wc,Gn),o}finally{Z=e,xa=!1}}return null}var Ur=[],br=0,Js=null,Ws=0,ht=[],mt=0,lr=null,Xt=1,Qt="";function Kn(t,e){Ur[br++]=Ws,Ur[br++]=Js,Js=t,Ws=e}function Rg(t,e,n){ht[mt++]=Xt,ht[mt++]=Qt,ht[mt++]=lr,lr=t;var r=Xt;t=Qt;var o=32-Pt(r)-1;r&=~(1<<o),n+=1;var i=32-Pt(e)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Xt=1<<32-Pt(e)+o|n<<o|r,Qt=i+t}else Xt=1<<i|n<<o|r,Qt=t}function Rc(t){t.return!==null&&(Kn(t,1),Rg(t,1,0))}function Pc(t){for(;t===Js;)Js=Ur[--br],Ur[br]=null,Ws=Ur[--br],Ur[br]=null;for(;t===lr;)lr=ht[--mt],ht[mt]=null,Qt=ht[--mt],ht[mt]=null,Xt=ht[--mt],ht[mt]=null}var at=null,lt=null,ce=!1,Nt=null;function Pg(t,e){var n=gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,at=t,lt=Nn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,at=t,lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=lr!==null?{id:Xt,overflow:Qt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,at=t,lt=null,!0):!1;default:return!1}}function vu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _u(t){if(ce){var e=lt;if(e){var n=e;if(!zf(t,e)){if(vu(t))throw Error(P(418));e=Nn(n.nextSibling);var r=at;e&&zf(t,e)?Pg(r,n):(t.flags=t.flags&-4097|2,ce=!1,at=t)}}else{if(vu(t))throw Error(P(418));t.flags=t.flags&-4097|2,ce=!1,at=t}}}function Jf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;at=t}function Ki(t){if(t!==at)return!1;if(!ce)return Jf(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hu(t.type,t.memoizedProps)),e&&(e=lt)){if(vu(t))throw kg(),Error(P(418));for(;e;)Pg(t,e),e=Nn(e.nextSibling)}if(Jf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){lt=Nn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}lt=null}}else lt=at?Nn(t.stateNode.nextSibling):null;return!0}function kg(){for(var t=lt;t;)t=Nn(t.nextSibling)}function ro(){lt=at=null,ce=!1}function kc(t){Nt===null?Nt=[t]:Nt.push(t)}var Ww=on.ReactCurrentBatchConfig;function No(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,t));var o=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var a=o.refs;s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function Xi(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Wf(t){var e=t._init;return e(t._payload)}function Mg(t){function e(_,y){if(t){var v=_.deletions;v===null?(_.deletions=[y],_.flags|=16):v.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function o(_,y){return _=Mn(_,y),_.index=0,_.sibling=null,_}function i(_,y,v){return _.index=v,t?(v=_.alternate,v!==null?(v=v.index,v<y?(_.flags|=2,y):v):(_.flags|=2,y)):(_.flags|=1048576,y)}function s(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,v,E){return y===null||y.tag!==6?(y=Na(v,_.mode,E),y.return=_,y):(y=o(y,v),y.return=_,y)}function c(_,y,v,E){var S=v.type;return S===Pr?f(_,y,v.props.children,E,v.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===yn&&Wf(S)===y.type)?(E=o(y,v.props),E.ref=No(_,y,v),E.return=_,E):(E=Ts(v.type,v.key,v.props,null,_.mode,E),E.ref=No(_,y,v),E.return=_,E)}function d(_,y,v,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Ra(v,_.mode,E),y.return=_,y):(y=o(y,v.children||[]),y.return=_,y)}function f(_,y,v,E,S){return y===null||y.tag!==7?(y=ir(v,_.mode,E,S),y.return=_,y):(y=o(y,v),y.return=_,y)}function p(_,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Na(""+y,_.mode,v),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vi:return v=Ts(y.type,y.key,y.props,null,_.mode,v),v.ref=No(_,null,y),v.return=_,v;case Rr:return y=Ra(y,_.mode,v),y.return=_,y;case yn:var E=y._init;return p(_,E(y._payload),v)}if(Lo(y)||So(y))return y=ir(y,_.mode,v,null),y.return=_,y;Xi(_,y)}return null}function h(_,y,v,E){var S=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:a(_,y,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Vi:return v.key===S?c(_,y,v,E):null;case Rr:return v.key===S?d(_,y,v,E):null;case yn:return S=v._init,h(_,y,S(v._payload),E)}if(Lo(v)||So(v))return S!==null?null:f(_,y,v,E,null);Xi(_,v)}return null}function g(_,y,v,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return _=_.get(v)||null,a(y,_,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Vi:return _=_.get(E.key===null?v:E.key)||null,c(y,_,E,S);case Rr:return _=_.get(E.key===null?v:E.key)||null,d(y,_,E,S);case yn:var I=E._init;return g(_,y,v,I(E._payload),S)}if(Lo(E)||So(E))return _=_.get(v)||null,f(y,_,E,S,null);Xi(y,E)}return null}function w(_,y,v,E){for(var S=null,I=null,T=y,k=y=0,N=null;T!==null&&k<v.length;k++){T.index>k?(N=T,T=null):N=T.sibling;var R=h(_,T,v[k],E);if(R===null){T===null&&(T=N);break}t&&T&&R.alternate===null&&e(_,T),y=i(R,y,k),I===null?S=R:I.sibling=R,I=R,T=N}if(k===v.length)return n(_,T),ce&&Kn(_,k),S;if(T===null){for(;k<v.length;k++)T=p(_,v[k],E),T!==null&&(y=i(T,y,k),I===null?S=T:I.sibling=T,I=T);return ce&&Kn(_,k),S}for(T=r(_,T);k<v.length;k++)N=g(T,_,k,v[k],E),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?k:N.key),y=i(N,y,k),I===null?S=N:I.sibling=N,I=N);return t&&T.forEach(function(U){return e(_,U)}),ce&&Kn(_,k),S}function x(_,y,v,E){var S=So(v);if(typeof S!="function")throw Error(P(150));if(v=S.call(v),v==null)throw Error(P(151));for(var I=S=null,T=y,k=y=0,N=null,R=v.next();T!==null&&!R.done;k++,R=v.next()){T.index>k?(N=T,T=null):N=T.sibling;var U=h(_,T,R.value,E);if(U===null){T===null&&(T=N);break}t&&T&&U.alternate===null&&e(_,T),y=i(U,y,k),I===null?S=U:I.sibling=U,I=U,T=N}if(R.done)return n(_,T),ce&&Kn(_,k),S;if(T===null){for(;!R.done;k++,R=v.next())R=p(_,R.value,E),R!==null&&(y=i(R,y,k),I===null?S=R:I.sibling=R,I=R);return ce&&Kn(_,k),S}for(T=r(_,T);!R.done;k++,R=v.next())R=g(T,_,k,R.value,E),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?k:R.key),y=i(R,y,k),I===null?S=R:I.sibling=R,I=R);return t&&T.forEach(function(q){return e(_,q)}),ce&&Kn(_,k),S}function C(_,y,v,E){if(typeof v=="object"&&v!==null&&v.type===Pr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Vi:e:{for(var S=v.key,I=y;I!==null;){if(I.key===S){if(S=v.type,S===Pr){if(I.tag===7){n(_,I.sibling),y=o(I,v.props.children),y.return=_,_=y;break e}}else if(I.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===yn&&Wf(S)===I.type){n(_,I.sibling),y=o(I,v.props),y.ref=No(_,I,v),y.return=_,_=y;break e}n(_,I);break}else e(_,I);I=I.sibling}v.type===Pr?(y=ir(v.props.children,_.mode,E,v.key),y.return=_,_=y):(E=Ts(v.type,v.key,v.props,null,_.mode,E),E.ref=No(_,y,v),E.return=_,_=E)}return s(_);case Rr:e:{for(I=v.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(_,y.sibling),y=o(y,v.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Ra(v,_.mode,E),y.return=_,_=y}return s(_);case yn:return I=v._init,C(_,y,I(v._payload),E)}if(Lo(v))return w(_,y,v,E);if(So(v))return x(_,y,v,E);Xi(_,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(_,y.sibling),y=o(y,v),y.return=_,_=y):(n(_,y),y=Na(v,_.mode,E),y.return=_,_=y),s(_)):n(_,y)}return C}var oo=Mg(!0),Dg=Mg(!1),Ys=bn(null),Ks=null,Gr=null,Mc=null;function Dc(){Mc=Gr=Ks=null}function Lc(t){var e=Ys.current;le(Ys),t._currentValue=e}function wu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wr(t,e){Ks=t,Mc=Gr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ze=!0),t.firstContext=null)}function wt(t){var e=t._currentValue;if(Mc!==t)if(t={context:t,memoizedValue:e,next:null},Gr===null){if(Ks===null)throw Error(P(308));Gr=t,Ks.dependencies={lanes:0,firstContext:t}}else Gr=Gr.next=t;return e}var jn=null;function Fc(t){jn===null?jn=[t]:jn.push(t)}function Lg(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,Fc(e)):(n.next=o.next,o.next=n),e.interleaved=n,tn(t,r)}function tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vn=!1;function Uc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Y&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,tn(t,n)}return o=r.interleaved,o===null?(e.next=e,Fc(r)):(e.next=o.next,o.next=e),r.interleaved=e,tn(t,n)}function vs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xc(t,n)}}function Yf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=e:i=i.next=e}else o=i=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xs(t,e,n,r){var o=t.updateQueue;vn=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,d=c.next;c.next=null,s===null?i=d:s.next=d,s=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(i!==null){var p=o.baseState;s=0,f=d=c=null,a=i;do{var h=a.lane,g=a.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,x=a;switch(h=e,g=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){p=w.call(g,p,h);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,h=typeof w=="function"?w.call(g,p,h):w,h==null)break e;p=me({},p,h);break e;case 2:vn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=g,c=p):f=f.next=g,s|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(f===null&&(c=p),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=f,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);ur|=s,t.lanes=s,t.memoizedState=p}}function Kf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(P(191,o));o.call(r)}}}var Ii={},qt=bn(Ii),hi=bn(Ii),mi=bn(Ii);function er(t){if(t===Ii)throw Error(P(174));return t}function bc(t,e){switch(re(mi,e),re(hi,t),re(qt,Ii),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:eu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=eu(e,t)}le(qt),re(qt,e)}function io(){le(qt),le(hi),le(mi)}function Ug(t){er(mi.current);var e=er(qt.current),n=eu(e,t.type);e!==n&&(re(hi,t),re(qt,n))}function Gc(t){hi.current===t&&(le(qt),le(hi))}var pe=bn(0);function Qs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ea=[];function Vc(){for(var t=0;t<Ea.length;t++)Ea[t]._workInProgressVersionPrimary=null;Ea.length=0}var _s=on.ReactCurrentDispatcher,Sa=on.ReactCurrentBatchConfig,ar=0,he=null,Te=null,Ne=null,Zs=!1,Xo=!1,gi=0,Yw=0;function Ue(){throw Error(P(321))}function Bc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mt(t[n],e[n]))return!1;return!0}function Oc(t,e,n,r,o,i){if(ar=i,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_s.current=t===null||t.memoizedState===null?Zw:jw,t=n(r,o),Xo){i=0;do{if(Xo=!1,gi=0,25<=i)throw Error(P(301));i+=1,Ne=Te=null,e.updateQueue=null,_s.current=ex,t=n(r,o)}while(Xo)}if(_s.current=js,e=Te!==null&&Te.next!==null,ar=0,Ne=Te=he=null,Zs=!1,e)throw Error(P(300));return t}function $c(){var t=gi!==0;return gi=0,t}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?he.memoizedState=Ne=t:Ne=Ne.next=t,Ne}function xt(){if(Te===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=Te.next;var e=Ne===null?he.memoizedState:Ne.next;if(e!==null)Ne=e,Te=t;else{if(t===null)throw Error(P(310));Te=t,t={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ne===null?he.memoizedState=Ne=t:Ne=Ne.next=t}return Ne}function yi(t,e){return typeof e=="function"?e(t):e}function Ta(t){var e=xt(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=Te,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=s=null,c=null,d=i;do{var f=d.lane;if((ar&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=p,s=r):c=c.next=p,he.lanes|=f,ur|=f}d=d.next}while(d!==null&&d!==i);c===null?s=r:c.next=a,Mt(r,e.memoizedState)||(Ze=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do i=o.lane,he.lanes|=i,ur|=i,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ca(t){var e=xt(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,i=e.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=t(i,s.action),s=s.next;while(s!==o);Mt(i,e.memoizedState)||(Ze=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function bg(){}function Gg(t,e){var n=he,r=xt(),o=e(),i=!Mt(r.memoizedState,o);if(i&&(r.memoizedState=o,Ze=!0),r=r.queue,Hc(Og.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ne!==null&&Ne.memoizedState.tag&1){if(n.flags|=2048,vi(9,Bg.bind(null,n,r,o,e),void 0,null),Re===null)throw Error(P(349));ar&30||Vg(n,e,o)}return o}function Vg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Bg(t,e,n,r){e.value=n,e.getSnapshot=r,$g(e)&&Hg(t)}function Og(t,e,n){return n(function(){$g(e)&&Hg(t)})}function $g(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mt(t,n)}catch{return!0}}function Hg(t){var e=tn(t,1);e!==null&&kt(e,t,1,-1)}function Xf(t){var e=Gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:t},e.queue=t,t=t.dispatch=Qw.bind(null,he,t),[e.memoizedState,t]}function vi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qg(){return xt().memoizedState}function ws(t,e,n,r){var o=Gt();he.flags|=t,o.memoizedState=vi(1|e,n,void 0,r===void 0?null:r)}function Tl(t,e,n,r){var o=xt();r=r===void 0?null:r;var i=void 0;if(Te!==null){var s=Te.memoizedState;if(i=s.destroy,r!==null&&Bc(r,s.deps)){o.memoizedState=vi(e,n,i,r);return}}he.flags|=t,o.memoizedState=vi(1|e,n,i,r)}function Qf(t,e){return ws(8390656,8,t,e)}function Hc(t,e){return Tl(2048,8,t,e)}function zg(t,e){return Tl(4,2,t,e)}function Jg(t,e){return Tl(4,4,t,e)}function Wg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Yg(t,e,n){return n=n!=null?n.concat([t]):null,Tl(4,4,Wg.bind(null,e,t),n)}function qc(){}function Kg(t,e){var n=xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Xg(t,e){var n=xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qg(t,e,n){return ar&21?(Mt(n,e)||(n=ng(),he.lanes|=n,ur|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ze=!0),t.memoizedState=n)}function Kw(t,e){var n=Z;Z=n!==0&&4>n?n:4,t(!0);var r=Sa.transition;Sa.transition={};try{t(!1),e()}finally{Z=n,Sa.transition=r}}function Zg(){return xt().memoizedState}function Xw(t,e,n){var r=kn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jg(t))ey(e,n);else if(n=Lg(t,e,n,r),n!==null){var o=Je();kt(n,t,r,o),ty(n,e,r)}}function Qw(t,e,n){var r=kn(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jg(t))ey(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,Mt(a,s)){var c=e.interleaved;c===null?(o.next=o,Fc(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}n=Lg(t,e,o,r),n!==null&&(o=Je(),kt(n,t,r,o),ty(n,e,r))}}function jg(t){var e=t.alternate;return t===he||e!==null&&e===he}function ey(t,e){Xo=Zs=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ty(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xc(t,n)}}var js={readContext:wt,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},Zw={readContext:wt,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:wt,useEffect:Qf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ws(4194308,4,Wg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ws(4194308,4,t,e)},useInsertionEffect:function(t,e){return ws(4,2,t,e)},useMemo:function(t,e){var n=Gt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Xw.bind(null,he,t),[r.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:Xf,useDebugValue:qc,useDeferredValue:function(t){return Gt().memoizedState=t},useTransition:function(){var t=Xf(!1),e=t[0];return t=Kw.bind(null,t[1]),Gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=he,o=Gt();if(ce){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),Re===null)throw Error(P(349));ar&30||Vg(r,e,n)}o.memoizedState=n;var i={value:n,getSnapshot:e};return o.queue=i,Qf(Og.bind(null,r,i,t),[t]),r.flags|=2048,vi(9,Bg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Gt(),e=Re.identifierPrefix;if(ce){var n=Qt,r=Xt;n=(r&~(1<<32-Pt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=gi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Yw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jw={readContext:wt,useCallback:Kg,useContext:wt,useEffect:Hc,useImperativeHandle:Yg,useInsertionEffect:zg,useLayoutEffect:Jg,useMemo:Xg,useReducer:Ta,useRef:qg,useState:function(){return Ta(yi)},useDebugValue:qc,useDeferredValue:function(t){var e=xt();return Qg(e,Te.memoizedState,t)},useTransition:function(){var t=Ta(yi)[0],e=xt().memoizedState;return[t,e]},useMutableSource:bg,useSyncExternalStore:Gg,useId:Zg,unstable_isNewReconciler:!1},ex={readContext:wt,useCallback:Kg,useContext:wt,useEffect:Hc,useImperativeHandle:Yg,useInsertionEffect:zg,useLayoutEffect:Jg,useMemo:Xg,useReducer:Ca,useRef:qg,useState:function(){return Ca(yi)},useDebugValue:qc,useDeferredValue:function(t){var e=xt();return Te===null?e.memoizedState=t:Qg(e,Te.memoizedState,t)},useTransition:function(){var t=Ca(yi)[0],e=xt().memoizedState;return[t,e]},useMutableSource:bg,useSyncExternalStore:Gg,useId:Zg,unstable_isNewReconciler:!1};function Ct(t,e){if(t&&t.defaultProps){e=me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cl={isMounted:function(t){return(t=t._reactInternals)?pr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Je(),o=kn(t),i=Zt(r,o);i.payload=e,n!=null&&(i.callback=n),e=Rn(t,i,o),e!==null&&(kt(e,t,o,r),vs(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Je(),o=kn(t),i=Zt(r,o);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Rn(t,i,o),e!==null&&(kt(e,t,o,r),vs(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Je(),r=kn(t),o=Zt(n,r);o.tag=2,e!=null&&(o.callback=e),e=Rn(t,o,r),e!==null&&(kt(e,t,r,n),vs(e,t,r))}};function Zf(t,e,n,r,o,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!ci(n,r)||!ci(o,i):!0}function ny(t,e,n){var r=!1,o=Fn,i=e.contextType;return typeof i=="object"&&i!==null?i=wt(i):(o=et(e)?sr:Oe.current,r=e.contextTypes,i=(r=r!=null)?no(t,o):Fn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function jf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cl.enqueueReplaceState(e,e.state,null)}function Eu(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},Uc(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=wt(i):(i=et(e)?sr:Oe.current,o.context=no(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(xu(t,e,i,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Cl.enqueueReplaceState(o,o.state,null),Xs(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function so(t,e){try{var n="",r=e;do n+=N_(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function Ia(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Su(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tx=typeof WeakMap=="function"?WeakMap:Map;function ry(t,e,n){n=Zt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tl||(tl=!0,Du=r),Su(t,e)},n}function oy(t,e,n){n=Zt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){Su(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Su(t,e),typeof r!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function ep(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tx;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=mx.bind(null,t,e,n),e.then(t,t))}function tp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function np(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zt(-1,1),e.tag=2,Rn(n,e,1))),n.lanes|=1),t)}var nx=on.ReactCurrentOwner,Ze=!1;function ze(t,e,n,r){e.child=t===null?Dg(e,null,n,r):oo(e,t.child,n,r)}function rp(t,e,n,r,o){n=n.render;var i=e.ref;return Wr(e,o),r=Oc(t,e,n,r,i,o),n=$c(),t!==null&&!Ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,nn(t,e,o)):(ce&&n&&Rc(e),e.flags|=1,ze(t,e,r,o),e.child)}function op(t,e,n,r,o){if(t===null){var i=n.type;return typeof i=="function"&&!Zc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iy(t,e,i,r,o)):(t=Ts(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:ci,n(s,r)&&t.ref===e.ref)return nn(t,e,o)}return e.flags|=1,t=Mn(i,r),t.ref=e.ref,t.return=e,e.child=t}function iy(t,e,n,r,o){if(t!==null){var i=t.memoizedProps;if(ci(i,r)&&t.ref===e.ref)if(Ze=!1,e.pendingProps=r=i,(t.lanes&o)!==0)t.flags&131072&&(Ze=!0);else return e.lanes=t.lanes,nn(t,e,o)}return Tu(t,e,n,r,o)}function sy(t,e,n){var r=e.pendingProps,o=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(Br,st),st|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(Br,st),st|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,re(Br,st),st|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,re(Br,st),st|=r;return ze(t,e,o,n),e.child}function ly(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tu(t,e,n,r,o){var i=et(n)?sr:Oe.current;return i=no(e,i),Wr(e,o),n=Oc(t,e,n,r,i,o),r=$c(),t!==null&&!Ze?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,nn(t,e,o)):(ce&&r&&Rc(e),e.flags|=1,ze(t,e,n,o),e.child)}function ip(t,e,n,r,o){if(et(n)){var i=!0;zs(e)}else i=!1;if(Wr(e,o),e.stateNode===null)xs(t,e),ny(e,n,r),Eu(e,n,r,o),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=wt(d):(d=et(n)?sr:Oe.current,d=no(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==d)&&jf(e,s,r,d),vn=!1;var h=e.memoizedState;s.state=h,Xs(e,r,s,o),c=e.memoizedState,a!==r||h!==c||je.current||vn?(typeof f=="function"&&(xu(e,n,f,r),c=e.memoizedState),(a=vn||Zf(e,n,a,r,h,c,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=d,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Fg(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Ct(e.type,a),s.props=d,p=e.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=wt(c):(c=et(n)?sr:Oe.current,c=no(e,c));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||h!==c)&&jf(e,s,r,c),vn=!1,h=e.memoizedState,s.state=h,Xs(e,r,s,o);var w=e.memoizedState;a!==p||h!==w||je.current||vn?(typeof g=="function"&&(xu(e,n,g,r),w=e.memoizedState),(d=vn||Zf(e,n,d,r,h,w,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,w,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,w,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),s.props=r,s.state=w,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Cu(t,e,n,r,i,o)}function Cu(t,e,n,r,o,i){ly(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return o&&qf(e,n,!1),nn(t,e,i);r=e.stateNode,nx.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=oo(e,t.child,null,i),e.child=oo(e,null,a,i)):ze(t,e,a,i),e.memoizedState=r.state,o&&qf(e,n,!0),e.child}function ay(t){var e=t.stateNode;e.pendingContext?Hf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hf(t,e.context,!1),bc(t,e.containerInfo)}function sp(t,e,n,r,o){return ro(),kc(o),e.flags|=256,ze(t,e,n,r),e.child}var Iu={dehydrated:null,treeContext:null,retryLane:0};function Au(t){return{baseLanes:t,cachePool:null,transitions:null}}function uy(t,e,n){var r=e.pendingProps,o=pe.current,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),re(pe,o&1),t===null)return _u(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,i?(r=e.mode,i=e.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Nl(s,r,0,null),t=ir(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Au(n),e.memoizedState=Iu,t):zc(e,s));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return rx(t,e,s,r,a,o,n);if(i){i=r.fallback,s=e.mode,o=t.child,a=o.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Mn(o,c),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=Mn(a,i):(i=ir(i,s,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,s=t.child.memoizedState,s=s===null?Au(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=Iu,r}return i=t.child,t=i.sibling,r=Mn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zc(t,e){return e=Nl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qi(t,e,n,r){return r!==null&&kc(r),oo(e,t.child,null,n),t=zc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rx(t,e,n,r,o,i,s){if(n)return e.flags&256?(e.flags&=-257,r=Ia(Error(P(422))),Qi(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=Nl({mode:"visible",children:r.children},o,0,null),i=ir(i,o,s,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&oo(e,t.child,null,s),e.child.memoizedState=Au(s),e.memoizedState=Iu,i);if(!(e.mode&1))return Qi(t,e,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(P(419)),r=Ia(i,r,void 0),Qi(t,e,s,r)}if(a=(s&t.childLanes)!==0,Ze||a){if(r=Re,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,tn(t,o),kt(r,t,o,-1))}return Qc(),r=Ia(Error(P(421))),Qi(t,e,s,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=gx.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,lt=Nn(o.nextSibling),at=e,ce=!0,Nt=null,t!==null&&(ht[mt++]=Xt,ht[mt++]=Qt,ht[mt++]=lr,Xt=t.id,Qt=t.overflow,lr=e),e=zc(e,r.children),e.flags|=4096,e)}function lp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wu(t.return,e,n)}function Aa(t,e,n,r,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function cy(t,e,n){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(ze(t,e,r.children,n),r=pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lp(t,n,e);else if(t.tag===19)lp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(re(pe,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Qs(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Aa(e,!1,o,n,i);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Qs(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Aa(e,!0,n,null,i);break;case"together":Aa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ur|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=Mn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ox(t,e,n){switch(e.tag){case 3:ay(e),ro();break;case 5:Ug(e);break;case 1:et(e.type)&&zs(e);break;case 4:bc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;re(Ys,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(re(pe,pe.current&1),e.flags|=128,null):n&e.child.childLanes?uy(t,e,n):(re(pe,pe.current&1),t=nn(t,e,n),t!==null?t.sibling:null);re(pe,pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return cy(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),re(pe,pe.current),r)break;return null;case 22:case 23:return e.lanes=0,sy(t,e,n)}return nn(t,e,n)}var dy,Nu,fy,py;dy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nu=function(){};fy=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,er(qt.current);var i=null;switch(n){case"input":o=Xa(t,o),r=Xa(t,r),i=[];break;case"select":o=me({},o,{value:void 0}),r=me({},r,{value:void 0}),i=[];break;case"textarea":o=ja(t,o),r=ja(t,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Hs)}tu(n,r);var s;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var a=o[d];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ri.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(a=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ri.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&oe("scroll",t),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};py=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ro(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function be(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ix(t,e,n){var r=e.pendingProps;switch(Pc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(e),null;case 1:return et(e.type)&&qs(),be(e),null;case 3:return r=e.stateNode,io(),le(je),le(Oe),Vc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ki(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nt!==null&&(Uu(Nt),Nt=null))),Nu(t,e),be(e),null;case 5:Gc(e);var o=er(mi.current);if(n=e.type,t!==null&&e.stateNode!=null)fy(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return be(e),null}if(t=er(qt.current),Ki(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ot]=e,r[pi]=i,t=(e.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(o=0;o<Uo.length;o++)oe(Uo[o],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":gf(r,i),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},oe("invalid",r);break;case"textarea":vf(r,i),oe("invalid",r)}tu(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Yi(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Yi(r.textContent,a,t),o=["children",""+a]):ri.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&oe("scroll",r)}switch(n){case"input":Bi(r),yf(r,i,!0);break;case"textarea":Bi(r),_f(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Hs)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Om(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Ot]=e,t[pi]=r,dy(t,e,!1,!1),e.stateNode=t;e:{switch(s=nu(n,r),n){case"dialog":oe("cancel",t),oe("close",t),o=r;break;case"iframe":case"object":case"embed":oe("load",t),o=r;break;case"video":case"audio":for(o=0;o<Uo.length;o++)oe(Uo[o],t);o=r;break;case"source":oe("error",t),o=r;break;case"img":case"image":case"link":oe("error",t),oe("load",t),o=r;break;case"details":oe("toggle",t),o=r;break;case"input":gf(t,r),o=Xa(t,r),oe("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=me({},r,{value:void 0}),oe("invalid",t);break;case"textarea":vf(t,r),o=ja(t,r),oe("invalid",t);break;default:o=r}tu(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?qm(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$m(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&oi(t,c):typeof c=="number"&&oi(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ri.hasOwnProperty(i)?c!=null&&i==="onScroll"&&oe("scroll",t):c!=null&&mc(t,i,c,s))}switch(n){case"input":Bi(t),yf(t,r,!1);break;case"textarea":Bi(t),_f(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ln(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Hr(t,!!r.multiple,i,!1):r.defaultValue!=null&&Hr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Hs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return be(e),null;case 6:if(t&&e.stateNode!=null)py(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(n=er(mi.current),er(qt.current),Ki(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ot]=e,(i=r.nodeValue!==n)&&(t=at,t!==null))switch(t.tag){case 3:Yi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ot]=e,e.stateNode=r}return be(e),null;case 13:if(le(pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&lt!==null&&e.mode&1&&!(e.flags&128))kg(),ro(),e.flags|=98560,i=!1;else if(i=Ki(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(P(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[Ot]=e}else ro(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;be(e),i=!1}else Nt!==null&&(Uu(Nt),Nt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pe.current&1?Ce===0&&(Ce=3):Qc())),e.updateQueue!==null&&(e.flags|=4),be(e),null);case 4:return io(),Nu(t,e),t===null&&di(e.stateNode.containerInfo),be(e),null;case 10:return Lc(e.type._context),be(e),null;case 17:return et(e.type)&&qs(),be(e),null;case 19:if(le(pe),i=e.memoizedState,i===null)return be(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)Ro(i,!1);else{if(Ce!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Qs(t),s!==null){for(e.flags|=128,Ro(i,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(pe,pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&_e()>lo&&(e.flags|=128,r=!0,Ro(i,!1),e.lanes=4194304)}else{if(!r)if(t=Qs(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ro(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!ce)return be(e),null}else 2*_e()-i.renderingStartTime>lo&&n!==1073741824&&(e.flags|=128,r=!0,Ro(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=_e(),e.sibling=null,n=pe.current,re(pe,r?n&1|2:n&1),e):(be(e),null);case 22:case 23:return Xc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?st&1073741824&&(be(e),e.subtreeFlags&6&&(e.flags|=8192)):be(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function sx(t,e){switch(Pc(e),e.tag){case 1:return et(e.type)&&qs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return io(),le(je),le(Oe),Vc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gc(e),null;case 13:if(le(pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));ro()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(pe),null;case 4:return io(),null;case 10:return Lc(e.type._context),null;case 22:case 23:return Xc(),null;case 24:return null;default:return null}}var Zi=!1,Ve=!1,lx=typeof WeakSet=="function"?WeakSet:Set,F=null;function Vr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(t,e,r)}else n.current=null}function Ru(t,e,n){try{n()}catch(r){ve(t,e,r)}}var ap=!1;function ax(t,e){if(fu=Bs,t=vg(),Nc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,d=0,f=0,p=t,h=null;t:for(;;){for(var g;p!==n||o!==0&&p.nodeType!==3||(a=s+o),p!==i||r!==0&&p.nodeType!==3||(c=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(g=p.firstChild)!==null;)h=p,p=g;for(;;){if(p===t)break t;if(h===n&&++d===o&&(a=s),h===i&&++f===r&&(c=s),(g=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pu={focusedElem:t,selectionRange:n},Bs=!1,F=e;F!==null;)if(e=F,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,F=t;else for(;F!==null;){e=F;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,C=w.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?x:Ct(e.type,x),C);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(E){ve(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,F=t;break}F=e.return}return w=ap,ap=!1,w}function Qo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&Ru(e,n,i)}o=o.next}while(o!==r)}}function Il(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hy(t){var e=t.alternate;e!==null&&(t.alternate=null,hy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ot],delete e[pi],delete e[gu],delete e[qw],delete e[zw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function my(t){return t.tag===5||t.tag===3||t.tag===4}function up(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||my(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ku(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hs));else if(r!==4&&(t=t.child,t!==null))for(ku(t,e,n),t=t.sibling;t!==null;)ku(t,e,n),t=t.sibling}function Mu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mu(t,e,n),t=t.sibling;t!==null;)Mu(t,e,n),t=t.sibling}var Pe=null,At=!1;function fn(t,e,n){for(n=n.child;n!==null;)gy(t,e,n),n=n.sibling}function gy(t,e,n){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(vl,n)}catch{}switch(n.tag){case 5:Ve||Vr(n,e);case 6:var r=Pe,o=At;Pe=null,fn(t,e,n),Pe=r,At=o,Pe!==null&&(At?(t=Pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(At?(t=Pe,n=n.stateNode,t.nodeType===8?wa(t.parentNode,n):t.nodeType===1&&wa(t,n),ai(t)):wa(Pe,n.stateNode));break;case 4:r=Pe,o=At,Pe=n.stateNode.containerInfo,At=!0,fn(t,e,n),Pe=r,At=o;break;case 0:case 11:case 14:case 15:if(!Ve&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Ru(n,e,s),o=o.next}while(o!==r)}fn(t,e,n);break;case 1:if(!Ve&&(Vr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ve(n,e,a)}fn(t,e,n);break;case 21:fn(t,e,n);break;case 22:n.mode&1?(Ve=(r=Ve)||n.memoizedState!==null,fn(t,e,n),Ve=r):fn(t,e,n);break;default:fn(t,e,n)}}function cp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lx),e.forEach(function(r){var o=yx.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function St(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Pe=a.stateNode,At=!1;break e;case 3:Pe=a.stateNode.containerInfo,At=!0;break e;case 4:Pe=a.stateNode.containerInfo,At=!0;break e}a=a.return}if(Pe===null)throw Error(P(160));gy(i,s,o),Pe=null,At=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(d){ve(o,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yy(e,t),e=e.sibling}function yy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(St(e,t),Ut(t),r&4){try{Qo(3,t,t.return),Il(3,t)}catch(x){ve(t,t.return,x)}try{Qo(5,t,t.return)}catch(x){ve(t,t.return,x)}}break;case 1:St(e,t),Ut(t),r&512&&n!==null&&Vr(n,n.return);break;case 5:if(St(e,t),Ut(t),r&512&&n!==null&&Vr(n,n.return),t.flags&32){var o=t.stateNode;try{oi(o,"")}catch(x){ve(t,t.return,x)}}if(r&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Vm(o,i),nu(a,s);var d=nu(a,i);for(s=0;s<c.length;s+=2){var f=c[s],p=c[s+1];f==="style"?qm(o,p):f==="dangerouslySetInnerHTML"?$m(o,p):f==="children"?oi(o,p):mc(o,f,p,d)}switch(a){case"input":Qa(o,i);break;case"textarea":Bm(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Hr(o,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?Hr(o,!!i.multiple,i.defaultValue,!0):Hr(o,!!i.multiple,i.multiple?[]:"",!1))}o[pi]=i}catch(x){ve(t,t.return,x)}}break;case 6:if(St(e,t),Ut(t),r&4){if(t.stateNode===null)throw Error(P(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(x){ve(t,t.return,x)}}break;case 3:if(St(e,t),Ut(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ai(e.containerInfo)}catch(x){ve(t,t.return,x)}break;case 4:St(e,t),Ut(t);break;case 13:St(e,t),Ut(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Yc=_e())),r&4&&cp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ve=(d=Ve)||f,St(e,t),Ve=d):St(e,t),Ut(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(F=t,f=t.child;f!==null;){for(p=F=f;F!==null;){switch(h=F,g=h.child,h.tag){case 0:case 11:case 14:case 15:Qo(4,h,h.return);break;case 1:Vr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){ve(r,n,x)}}break;case 5:Vr(h,h.return);break;case 22:if(h.memoizedState!==null){fp(p);continue}}g!==null?(g.return=h,F=g):fp(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{o=p.stateNode,d?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Hm("display",s))}catch(x){ve(t,t.return,x)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(x){ve(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:St(e,t),Ut(t),r&4&&cp(t);break;case 21:break;default:St(e,t),Ut(t)}}function Ut(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(my(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(oi(o,""),r.flags&=-33);var i=up(t);Mu(t,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,a=up(t);ku(t,a,s);break;default:throw Error(P(161))}}catch(c){ve(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ux(t,e,n){F=t,vy(t)}function vy(t,e,n){for(var r=(t.mode&1)!==0;F!==null;){var o=F,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Zi;if(!s){var a=o.alternate,c=a!==null&&a.memoizedState!==null||Ve;a=Zi;var d=Ve;if(Zi=s,(Ve=c)&&!d)for(F=o;F!==null;)s=F,c=s.child,s.tag===22&&s.memoizedState!==null?pp(o):c!==null?(c.return=s,F=c):pp(o);for(;i!==null;)F=i,vy(i),i=i.sibling;F=o,Zi=a,Ve=d}dp(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,F=i):dp(t)}}function dp(t){for(;F!==null;){var e=F;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ve||Il(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ve)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Ct(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Kf(e,i,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Kf(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&ai(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}Ve||e.flags&512&&Pu(e)}catch(h){ve(e,e.return,h)}}if(e===t){F=null;break}if(n=e.sibling,n!==null){n.return=e.return,F=n;break}F=e.return}}function fp(t){for(;F!==null;){var e=F;if(e===t){F=null;break}var n=e.sibling;if(n!==null){n.return=e.return,F=n;break}F=e.return}}function pp(t){for(;F!==null;){var e=F;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Il(4,e)}catch(c){ve(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(c){ve(e,o,c)}}var i=e.return;try{Pu(e)}catch(c){ve(e,i,c)}break;case 5:var s=e.return;try{Pu(e)}catch(c){ve(e,s,c)}}}catch(c){ve(e,e.return,c)}if(e===t){F=null;break}var a=e.sibling;if(a!==null){a.return=e.return,F=a;break}F=e.return}}var cx=Math.ceil,el=on.ReactCurrentDispatcher,Jc=on.ReactCurrentOwner,vt=on.ReactCurrentBatchConfig,Y=0,Re=null,xe=null,Me=0,st=0,Br=bn(0),Ce=0,_i=null,ur=0,Al=0,Wc=0,Zo=null,Qe=null,Yc=0,lo=1/0,Wt=null,tl=!1,Du=null,Pn=null,ji=!1,Sn=null,nl=0,jo=0,Lu=null,Es=-1,Ss=0;function Je(){return Y&6?_e():Es!==-1?Es:Es=_e()}function kn(t){return t.mode&1?Y&2&&Me!==0?Me&-Me:Ww.transition!==null?(Ss===0&&(Ss=ng()),Ss):(t=Z,t!==0||(t=window.event,t=t===void 0?16:ug(t.type)),t):1}function kt(t,e,n,r){if(50<jo)throw jo=0,Lu=null,Error(P(185));Si(t,n,r),(!(Y&2)||t!==Re)&&(t===Re&&(!(Y&2)&&(Al|=n),Ce===4&&wn(t,Me)),tt(t,r),n===1&&Y===0&&!(e.mode&1)&&(lo=_e()+500,Sl&&Gn()))}function tt(t,e){var n=t.callbackNode;W_(t,e);var r=Vs(t,t===Re?Me:0);if(r===0)n!==null&&Ef(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ef(n),e===1)t.tag===0?Jw(hp.bind(null,t)):Ng(hp.bind(null,t)),$w(function(){!(Y&6)&&Gn()}),n=null;else{switch(rg(r)){case 1:n=wc;break;case 4:n=eg;break;case 16:n=Gs;break;case 536870912:n=tg;break;default:n=Gs}n=Iy(n,_y.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _y(t,e){if(Es=-1,Ss=0,Y&6)throw Error(P(327));var n=t.callbackNode;if(Yr()&&t.callbackNode!==n)return null;var r=Vs(t,t===Re?Me:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rl(t,r);else{e=r;var o=Y;Y|=2;var i=xy();(Re!==t||Me!==e)&&(Wt=null,lo=_e()+500,or(t,e));do try{px();break}catch(a){wy(t,a)}while(!0);Dc(),el.current=i,Y=o,xe!==null?e=0:(Re=null,Me=0,e=Ce)}if(e!==0){if(e===2&&(o=lu(t),o!==0&&(r=o,e=Fu(t,o))),e===1)throw n=_i,or(t,0),wn(t,r),tt(t,_e()),n;if(e===6)wn(t,r);else{if(o=t.current.alternate,!(r&30)&&!dx(o)&&(e=rl(t,r),e===2&&(i=lu(t),i!==0&&(r=i,e=Fu(t,i))),e===1))throw n=_i,or(t,0),wn(t,r),tt(t,_e()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:Xn(t,Qe,Wt);break;case 3:if(wn(t,r),(r&130023424)===r&&(e=Yc+500-_e(),10<e)){if(Vs(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Je(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=mu(Xn.bind(null,t,Qe,Wt),e);break}Xn(t,Qe,Wt);break;case 4:if(wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var s=31-Pt(r);i=1<<s,s=e[s],s>o&&(o=s),r&=~i}if(r=o,r=_e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cx(r/1960))-r,10<r){t.timeoutHandle=mu(Xn.bind(null,t,Qe,Wt),r);break}Xn(t,Qe,Wt);break;case 5:Xn(t,Qe,Wt);break;default:throw Error(P(329))}}}return tt(t,_e()),t.callbackNode===n?_y.bind(null,t):null}function Fu(t,e){var n=Zo;return t.current.memoizedState.isDehydrated&&(or(t,e).flags|=256),t=rl(t,e),t!==2&&(e=Qe,Qe=n,e!==null&&Uu(e)),t}function Uu(t){Qe===null?Qe=t:Qe.push.apply(Qe,t)}function dx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Mt(i(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wn(t,e){for(e&=~Wc,e&=~Al,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pt(e),r=1<<n;t[n]=-1,e&=~r}}function hp(t){if(Y&6)throw Error(P(327));Yr();var e=Vs(t,0);if(!(e&1))return tt(t,_e()),null;var n=rl(t,e);if(t.tag!==0&&n===2){var r=lu(t);r!==0&&(e=r,n=Fu(t,r))}if(n===1)throw n=_i,or(t,0),wn(t,e),tt(t,_e()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xn(t,Qe,Wt),tt(t,_e()),null}function Kc(t,e){var n=Y;Y|=1;try{return t(e)}finally{Y=n,Y===0&&(lo=_e()+500,Sl&&Gn())}}function cr(t){Sn!==null&&Sn.tag===0&&!(Y&6)&&Yr();var e=Y;Y|=1;var n=vt.transition,r=Z;try{if(vt.transition=null,Z=1,t)return t()}finally{Z=r,vt.transition=n,Y=e,!(Y&6)&&Gn()}}function Xc(){st=Br.current,le(Br)}function or(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ow(n)),xe!==null)for(n=xe.return;n!==null;){var r=n;switch(Pc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qs();break;case 3:io(),le(je),le(Oe),Vc();break;case 5:Gc(r);break;case 4:io();break;case 13:le(pe);break;case 19:le(pe);break;case 10:Lc(r.type._context);break;case 22:case 23:Xc()}n=n.return}if(Re=t,xe=t=Mn(t.current,null),Me=st=e,Ce=0,_i=null,Wc=Al=ur=0,Qe=Zo=null,jn!==null){for(e=0;e<jn.length;e++)if(n=jn[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}jn=null}return t}function wy(t,e){do{var n=xe;try{if(Dc(),_s.current=js,Zs){for(var r=he.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Zs=!1}if(ar=0,Ne=Te=he=null,Xo=!1,gi=0,Jc.current=null,n===null||n.return===null){Ce=1,_i=e,xe=null;break}e:{var i=t,s=n.return,a=n,c=e;if(e=Me,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=tp(s);if(g!==null){g.flags&=-257,np(g,s,a,i,e),g.mode&1&&ep(i,d,e),e=g,c=d;var w=e.updateQueue;if(w===null){var x=new Set;x.add(c),e.updateQueue=x}else w.add(c);break e}else{if(!(e&1)){ep(i,d,e),Qc();break e}c=Error(P(426))}}else if(ce&&a.mode&1){var C=tp(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),np(C,s,a,i,e),kc(so(c,a));break e}}i=c=so(c,a),Ce!==4&&(Ce=2),Zo===null?Zo=[i]:Zo.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=ry(i,c,e);Yf(i,_);break e;case 1:a=c;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Pn===null||!Pn.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=oy(i,a,e);Yf(i,E);break e}}i=i.return}while(i!==null)}Sy(n)}catch(S){e=S,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(!0)}function xy(){var t=el.current;return el.current=js,t===null?js:t}function Qc(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Re===null||!(ur&268435455)&&!(Al&268435455)||wn(Re,Me)}function rl(t,e){var n=Y;Y|=2;var r=xy();(Re!==t||Me!==e)&&(Wt=null,or(t,e));do try{fx();break}catch(o){wy(t,o)}while(!0);if(Dc(),Y=n,el.current=r,xe!==null)throw Error(P(261));return Re=null,Me=0,Ce}function fx(){for(;xe!==null;)Ey(xe)}function px(){for(;xe!==null&&!G_();)Ey(xe)}function Ey(t){var e=Cy(t.alternate,t,st);t.memoizedProps=t.pendingProps,e===null?Sy(t):xe=e,Jc.current=null}function Sy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sx(n,e),n!==null){n.flags&=32767,xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ce=6,xe=null;return}}else if(n=ix(n,e,st),n!==null){xe=n;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);Ce===0&&(Ce=5)}function Xn(t,e,n){var r=Z,o=vt.transition;try{vt.transition=null,Z=1,hx(t,e,n,r)}finally{vt.transition=o,Z=r}return null}function hx(t,e,n,r){do Yr();while(Sn!==null);if(Y&6)throw Error(P(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Y_(t,i),t===Re&&(xe=Re=null,Me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ji||(ji=!0,Iy(Gs,function(){return Yr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vt.transition,vt.transition=null;var s=Z;Z=1;var a=Y;Y|=4,Jc.current=null,ax(t,n),yy(n,t),Lw(pu),Bs=!!fu,pu=fu=null,t.current=n,ux(n),V_(),Y=a,Z=s,vt.transition=i}else t.current=n;if(ji&&(ji=!1,Sn=t,nl=o),i=t.pendingLanes,i===0&&(Pn=null),$_(n.stateNode),tt(t,_e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(tl)throw tl=!1,t=Du,Du=null,t;return nl&1&&t.tag!==0&&Yr(),i=t.pendingLanes,i&1?t===Lu?jo++:(jo=0,Lu=t):jo=0,Gn(),null}function Yr(){if(Sn!==null){var t=rg(nl),e=vt.transition,n=Z;try{if(vt.transition=null,Z=16>t?16:t,Sn===null)var r=!1;else{if(t=Sn,Sn=null,nl=0,Y&6)throw Error(P(331));var o=Y;for(Y|=4,F=t.current;F!==null;){var i=F,s=i.child;if(F.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(F=d;F!==null;){var f=F;switch(f.tag){case 0:case 11:case 15:Qo(8,f,i)}var p=f.child;if(p!==null)p.return=f,F=p;else for(;F!==null;){f=F;var h=f.sibling,g=f.return;if(hy(f),f===d){F=null;break}if(h!==null){h.return=g,F=h;break}F=g}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}F=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,F=s;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qo(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,F=_;break e}F=i.return}}var y=t.current;for(F=y;F!==null;){s=F;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,F=v;else e:for(s=y;F!==null;){if(a=F,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Il(9,a)}}catch(S){ve(a,a.return,S)}if(a===s){F=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,F=E;break e}F=a.return}}if(Y=o,Gn(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(vl,t)}catch{}r=!0}return r}finally{Z=n,vt.transition=e}}return!1}function mp(t,e,n){e=so(n,e),e=ry(t,e,1),t=Rn(t,e,1),e=Je(),t!==null&&(Si(t,1,e),tt(t,e))}function ve(t,e,n){if(t.tag===3)mp(t,t,n);else for(;e!==null;){if(e.tag===3){mp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pn===null||!Pn.has(r))){t=so(n,t),t=oy(e,t,1),e=Rn(e,t,1),t=Je(),e!==null&&(Si(e,1,t),tt(e,t));break}}e=e.return}}function mx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Je(),t.pingedLanes|=t.suspendedLanes&n,Re===t&&(Me&n)===n&&(Ce===4||Ce===3&&(Me&130023424)===Me&&500>_e()-Yc?or(t,0):Wc|=n),tt(t,e)}function Ty(t,e){e===0&&(t.mode&1?(e=Hi,Hi<<=1,!(Hi&130023424)&&(Hi=4194304)):e=1);var n=Je();t=tn(t,e),t!==null&&(Si(t,e,n),tt(t,n))}function gx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ty(t,n)}function yx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),Ty(t,n)}var Cy;Cy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||je.current)Ze=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ze=!1,ox(t,e,n);Ze=!!(t.flags&131072)}else Ze=!1,ce&&e.flags&1048576&&Rg(e,Ws,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xs(t,e),t=e.pendingProps;var o=no(e,Oe.current);Wr(e,n),o=Oc(null,e,r,t,o,n);var i=$c();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(r)?(i=!0,zs(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Uc(e),o.updater=Cl,e.stateNode=o,o._reactInternals=e,Eu(e,r,t,n),e=Cu(null,e,r,!0,i,n)):(e.tag=0,ce&&i&&Rc(e),ze(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xs(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=_x(r),t=Ct(r,t),o){case 0:e=Tu(null,e,r,t,n);break e;case 1:e=ip(null,e,r,t,n);break e;case 11:e=rp(null,e,r,t,n);break e;case 14:e=op(null,e,r,Ct(r.type,t),n);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ct(r,o),Tu(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ct(r,o),ip(t,e,r,o,n);case 3:e:{if(ay(e),t===null)throw Error(P(387));r=e.pendingProps,i=e.memoizedState,o=i.element,Fg(t,e),Xs(e,r,null,n);var s=e.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=so(Error(P(423)),e),e=sp(t,e,r,n,o);break e}else if(r!==o){o=so(Error(P(424)),e),e=sp(t,e,r,n,o);break e}else for(lt=Nn(e.stateNode.containerInfo.firstChild),at=e,ce=!0,Nt=null,n=Dg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ro(),r===o){e=nn(t,e,n);break e}ze(t,e,r,n)}e=e.child}return e;case 5:return Ug(e),t===null&&_u(e),r=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,s=o.children,hu(r,o)?s=null:i!==null&&hu(r,i)&&(e.flags|=32),ly(t,e),ze(t,e,s,n),e.child;case 6:return t===null&&_u(e),null;case 13:return uy(t,e,n);case 4:return bc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oo(e,null,r,n):ze(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ct(r,o),rp(t,e,r,o,n);case 7:return ze(t,e,e.pendingProps,n),e.child;case 8:return ze(t,e,e.pendingProps.children,n),e.child;case 12:return ze(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,re(Ys,r._currentValue),r._currentValue=s,i!==null)if(Mt(i.value,s)){if(i.children===o.children&&!je.current){e=nn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Zt(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),wu(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(P(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),wu(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}ze(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Wr(e,n),o=wt(o),r=r(o),e.flags|=1,ze(t,e,r,n),e.child;case 14:return r=e.type,o=Ct(r,e.pendingProps),o=Ct(r.type,o),op(t,e,r,o,n);case 15:return iy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ct(r,o),xs(t,e),e.tag=1,et(r)?(t=!0,zs(e)):t=!1,Wr(e,n),ny(e,r,o),Eu(e,r,o,n),Cu(null,e,r,!0,t,n);case 19:return cy(t,e,n);case 22:return sy(t,e,n)}throw Error(P(156,e.tag))};function Iy(t,e){return jm(t,e)}function vx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(t,e,n,r){return new vx(t,e,n,r)}function Zc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _x(t){if(typeof t=="function")return Zc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yc)return 11;if(t===vc)return 14}return 2}function Mn(t,e){var n=t.alternate;return n===null?(n=gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ts(t,e,n,r,o,i){var s=2;if(r=t,typeof t=="function")Zc(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Pr:return ir(n.children,o,i,e);case gc:s=8,o|=8;break;case Ja:return t=gt(12,n,e,o|2),t.elementType=Ja,t.lanes=i,t;case Wa:return t=gt(13,n,e,o),t.elementType=Wa,t.lanes=i,t;case Ya:return t=gt(19,n,e,o),t.elementType=Ya,t.lanes=i,t;case Um:return Nl(n,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lm:s=10;break e;case Fm:s=9;break e;case yc:s=11;break e;case vc:s=14;break e;case yn:s=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=gt(s,n,e,o),e.elementType=t,e.type=r,e.lanes=i,e}function ir(t,e,n,r){return t=gt(7,t,r,e),t.lanes=n,t}function Nl(t,e,n,r){return t=gt(22,t,r,e),t.elementType=Um,t.lanes=n,t.stateNode={isHidden:!1},t}function Na(t,e,n){return t=gt(6,t,null,e),t.lanes=n,t}function Ra(t,e,n){return e=gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wx(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ua(0),this.expirationTimes=ua(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ua(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function jc(t,e,n,r,o,i,s,a,c){return t=new wx(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=gt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uc(i),t}function xx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ay(t){if(!t)return Fn;t=t._reactInternals;e:{if(pr(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if(et(n))return Ag(t,n,e)}return e}function Ny(t,e,n,r,o,i,s,a,c){return t=jc(n,r,!0,t,o,i,s,a,c),t.context=Ay(null),n=t.current,r=Je(),o=kn(n),i=Zt(r,o),i.callback=e??null,Rn(n,i,o),t.current.lanes=o,Si(t,o,r),tt(t,r),t}function Rl(t,e,n,r){var o=e.current,i=Je(),s=kn(o);return n=Ay(n),e.context===null?e.context=n:e.pendingContext=n,e=Zt(i,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Rn(o,e,s),t!==null&&(kt(t,o,s,i),vs(t,o,s)),s}function ol(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function gp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ed(t,e){gp(t,e),(t=t.alternate)&&gp(t,e)}function Ex(){return null}var Ry=typeof reportError=="function"?reportError:function(t){console.error(t)};function td(t){this._internalRoot=t}Pl.prototype.render=td.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));Rl(t,e,null,null)};Pl.prototype.unmount=td.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cr(function(){Rl(null,t,null,null)}),e[en]=null}};function Pl(t){this._internalRoot=t}Pl.prototype.unstable_scheduleHydration=function(t){if(t){var e=sg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_n.length&&e!==0&&e<_n[n].priority;n++);_n.splice(n,0,t),n===0&&ag(t)}};function nd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yp(){}function Sx(t,e,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var d=ol(s);i.call(d)}}var s=Ny(e,r,t,0,null,!1,!1,"",yp);return t._reactRootContainer=s,t[en]=s.current,di(t.nodeType===8?t.parentNode:t),cr(),s}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var d=ol(c);a.call(d)}}var c=jc(t,0,!1,null,null,!1,!1,"",yp);return t._reactRootContainer=c,t[en]=c.current,di(t.nodeType===8?t.parentNode:t),cr(function(){Rl(e,c,n,r)}),c}function Ml(t,e,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var c=ol(s);a.call(c)}}Rl(e,s,t,o)}else s=Sx(n,e,t,o,r);return ol(s)}og=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fo(e.pendingLanes);n!==0&&(xc(e,n|1),tt(e,_e()),!(Y&6)&&(lo=_e()+500,Gn()))}break;case 13:cr(function(){var r=tn(t,1);if(r!==null){var o=Je();kt(r,t,1,o)}}),ed(t,1)}};Ec=function(t){if(t.tag===13){var e=tn(t,134217728);if(e!==null){var n=Je();kt(e,t,134217728,n)}ed(t,134217728)}};ig=function(t){if(t.tag===13){var e=kn(t),n=tn(t,e);if(n!==null){var r=Je();kt(n,t,e,r)}ed(t,e)}};sg=function(){return Z};lg=function(t,e){var n=Z;try{return Z=t,e()}finally{Z=n}};ou=function(t,e,n){switch(e){case"input":if(Qa(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=El(r);if(!o)throw Error(P(90));Gm(r),Qa(r,o)}}}break;case"textarea":Bm(t,n);break;case"select":e=n.value,e!=null&&Hr(t,!!n.multiple,e,!1)}};Wm=Kc;Ym=cr;var Tx={usingClientEntryPoint:!1,Events:[Ci,Lr,El,zm,Jm,Kc]},Po={findFiberByHostInstance:Zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cx={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:on.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qm(t),t===null?null:t.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||Ex,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var es=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!es.isDisabled&&es.supportsFiber)try{vl=es.inject(Cx),Ht=es}catch{}}ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tx;ct.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nd(e))throw Error(P(200));return xx(t,e,null,n)};ct.createRoot=function(t,e){if(!nd(t))throw Error(P(299));var n=!1,r="",o=Ry;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=jc(t,1,!1,null,null,n,!1,r,o),t[en]=e.current,di(t.nodeType===8?t.parentNode:t),new td(e)};ct.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=Qm(e),t=t===null?null:t.stateNode,t};ct.flushSync=function(t){return cr(t)};ct.hydrate=function(t,e,n){if(!kl(e))throw Error(P(200));return Ml(null,t,e,!0,n)};ct.hydrateRoot=function(t,e,n){if(!nd(t))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=Ry;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Ny(e,null,t,1,n??null,o,!1,i,s),t[en]=e.current,di(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new Pl(e)};ct.render=function(t,e,n){if(!kl(e))throw Error(P(200));return Ml(null,t,e,!1,n)};ct.unmountComponentAtNode=function(t){if(!kl(t))throw Error(P(40));return t._reactRootContainer?(cr(function(){Ml(null,null,t,!1,function(){t._reactRootContainer=null,t[en]=null})}),!0):!1};ct.unstable_batchedUpdates=Kc;ct.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kl(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return Ml(t,e,n,!1,r)};ct.version="18.3.1-next-f1338f8080-20240426";function Py(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Py)}catch(t){console.error(t)}}Py(),Pm.exports=ct;var Ix=Pm.exports,vp=Ix;qa.createRoot=vp.createRoot,qa.hydrateRoot=vp.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ax={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),K=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:a="",children:c,...d},f)=>M.createElement("svg",{ref:f,...Ax,width:o,height:o,stroke:r,strokeWidth:s?Number(i)*24/Number(o):i,className:["lucide",`lucide-${Nx(t)}`,a].join(" "),...d},[...e.map(([p,h])=>M.createElement(p,h)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=K("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=K("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=K("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M8 7h6",key:"1f0q6e"}],["path",{d:"M8 11h8",key:"vwpz6n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=K("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=K("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=K("Clapperboard",[["path",{d:"M20.2 6 3 11l-.9-2.4c-.3-1.1.3-2.2 1.3-2.5l13.5-4c1.1-.3 2.2.3 2.5 1.3Z",key:"1tn4o7"}],["path",{d:"m6.2 5.3 3.1 3.9",key:"iuk76l"}],["path",{d:"m12.4 3.4 3.1 4",key:"6hsd6n"}],["path",{d:"M3 11h18v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2Z",key:"ltgou9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=K("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=K("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=K("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=K("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=K("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=K("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=K("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=K("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=K("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=K("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=K("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=K("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=K("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=K("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=K("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=K("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=K("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=K("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=K("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=K("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Yx(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[o,i]=M.useState(!1),s=M.useRef(n);s.current=n;const a=M.useRef(r);return a.current=r,M.useEffect(()=>{const c=document.createElement("script");return c.src="https://accounts.google.com/gsi/client",c.async=!0,c.defer=!0,c.nonce=e,c.onload=()=>{var d;i(!0),(d=s.current)===null||d===void 0||d.call(s)},c.onerror=()=>{var d;i(!1),(d=a.current)===null||d===void 0||d.call(a)},document.body.appendChild(c),()=>{document.body.removeChild(c)}},[e]),o}const Kx=M.createContext(null);function Xx({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:o}){const i=Yx({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),s=M.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:i}),[t,i]);return m_.createElement(Kx.Provider,{value:s},o)}var ie=(t=>(t.IDLE="IDLE",t.PARSING="PARSING",t.TRANSLATING="TRANSLATING",t.COMPLETED="COMPLETED",t.ERROR="ERROR",t))(ie||{}),W=(t=>(t.IDLE="IDLE",t.LOADING_FFMPEG="LOADING_FFMPEG",t.ANALYZING="ANALYZING",t.EXTRACTING_AUDIO="EXTRACTING_AUDIO",t.TRANSCRIBING="TRANSCRIBING",t.EXTRACTING_SUBTITLES="EXTRACTING_SUBTITLES",t.MUXING="MUXING",t.DONE="DONE",t.ERROR="ERROR",t.UPLOADING_TO_YOUTUBE="UPLOADING_TO_YOUTUBE",t.AWAITING_YOUTUBE_CAPTIONS="AWAITING_YOUTUBE_CAPTIONS",t.DOWNLOADING_FROM_URL="DOWNLOADING_FROM_URL",t.FETCHING_YOUTUBE_INFO="FETCHING_YOUTUBE_INFO",t.DOWNLOADING_VIDEO="DOWNLOADING_VIDEO",t))(W||{});const pn=[{id:"gemini-3-pro-preview",name:"Gemini 3 Pro",description:"Highest reasoning capability. Best for complex dialogue, cultural nuances, and context retention.",tags:["Best Quality","Slower"],provider:"google"},{id:"gemini-2.5-pro-preview",name:"Gemini 2.5 Pro",description:"Balanced performance with advanced reasoning capabilities. Great for most subtitles.",tags:["Balanced","High Quality"],provider:"google"},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Next-generation high-speed model. Ideal for large files and quick turnaround.",tags:["Ultra Fast","New"],provider:"google"},{id:"gemini-2.0-pro-exp-02-05",name:"Gemini 2.0 Pro",description:"Previous generation high-intelligence model. Reliable for standard translation tasks.",tags:["Reliable","Smart"],provider:"google"},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Optimized for speed and efficiency. Good for straightforward content and quick results.",tags:["Fast","Efficient"],provider:"google"},{id:"gpt-5.1",name:"GPT-5.1",description:"The latest iteration, offering cutting-edge performance and multimodal capabilities.",tags:["Bleeding-Edge","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5-pro",name:"GPT-5 Pro",description:"A professional-grade model from the GPT-5 series with top-tier reasoning.",tags:["Pro","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5",name:"GPT-5",description:"The foundational next-gen model for advanced understanding and generation.",tags:["Next-Gen","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5-mini",name:"GPT-5 Mini",description:"A balanced and efficient model from the GPT-5 series, ideal for speed.",tags:["Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-5-nano",name:"GPT-5 Nano",description:"The most compact and fastest model in the GPT-5 family for lightweight tasks.",tags:["Ultra-Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4.1",name:"GPT-4.1",description:"An enhanced version of GPT-4 with improved speed and context handling.",tags:["Advanced","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4.1-mini",name:"GPT-4.1 Mini",description:"A faster, more efficient variant of the GPT-4.1 architecture.",tags:["Efficient","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4.1-nano",name:"GPT-4.1 Nano",description:"The smallest and quickest model from the GPT-4.1 series for rapid responses.",tags:["Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4o",name:"GPT-4o",description:"OpenAI's flagship Omni model. Excellent for nuanced understanding and generation.",tags:["Flagship","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"A smaller, faster, and more affordable version of GPT-4o with strong performance.",tags:["Fast","OpenAI"],provider:"openai",transcriptionModel:"whisper-1"}],Go=[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"nl",name:"Dutch"},{code:"pl",name:"Polish"},{code:"ru",name:"Russian"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"zh",name:"Chinese (Simplified)"},{code:"ar",name:"Arabic"},{code:"tr",name:"Turkish"},{code:"hi",name:"Hindi"},{code:"fa",name:"Persian"}],wp=["video/mp4","video/x-matroska","video/quicktime","video/x-ms-wmv","video/webm","video/x-msvideo"],ka=[{value:2,label:"Low",description:"Best for avoiding strict rate limits on free tiers (2 RPM)."},{value:15,label:"Medium",description:"Recommended default. Good balance of speed and safety (15 RPM)."},{value:30,label:"High",description:"Faster, but higher risk of rate limits (30 RPM)."},{value:"unlimited",label:"Unlimited",description:"No artificial delay. Only for high-tier paid keys."}],xp=t=>{const[e,n]=t.split(","),[r,o,i]=e.split(":").map(Number),s=Number(n);return r*36e5+o*6e4+i*1e3+s},ns=t=>{var a,c;const n=t.replace(/\r\n/g,`
`).trim().replace(/^WEBVTT.*\n+/,"");let r=[];const o=n.split(/\n\n+/);let i=1;o.forEach(d=>{const f=d.split(`
`);if(f.length===0)return;const p=f.findIndex(h=>h.includes("-->"));if(p!==-1){const g=f[p].split(" --> ");if(g.length===2){const C=f.slice(p+1).filter(_=>_.trim()!==""&&!_.trim().match(/^NOTE/)).join(`
`).trim();if(C){const _=C.replace(/<[^>]*>/g,""),y=g[0].trim().replace(".",","),v=g[1].trim().replace(".",",");r.push({id:i++,startTime:y,endTime:v,text:_,originalText:_})}}}});const s=[];for(let d=0;d<r.length;d++){const f=r[d],p=r[d+1];if(p){const h=xp(f.startTime),g=xp(p.startTime);if(Math.abs(g-h)<500){const w=((a=f.originalText)==null?void 0:a.toLowerCase().trim())||"";if((((c=p.originalText)==null?void 0:c.toLowerCase().trim())||"").startsWith(w))continue}}s.push({...f,id:s.length+1})}return s},Ma=t=>t.map(e=>`${e.id}
${e.startTime} --> ${e.endTime}
${e.text}`).join(`

`),Vu=(t,e)=>{const n=document.createElement("a"),r=typeof e=="string"?new Blob([e],{type:"text/plain"}):e;n.href=URL.createObjectURL(r),n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Qx,Zx;function jx(){return{geminiUrl:Qx,vertexUrl:Zx}}function eE(t,e,n,r){var o,i;if(!(t!=null&&t.baseUrl)){const s=jx();return e?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(i=s.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sn{}function D(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function u(t,e,n){for(let i=0;i<e.length-1;i++){const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];u(f,e.slice(i+1),n[d])}else for(const d of c)u(d,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];u(c[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],o=t[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const o=e[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(a=>l(a,e.slice(r+1),n)):n}else return n}else t=t[o]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function tE(t,e){for(const[n,r]of Object.entries(e)){const o=n.split("."),i=r.split("."),s=new Set;let a=-1;for(let c=0;c<o.length;c++)if(o[c]==="*"){a=c;break}if(a!==-1&&i.length>a)for(let c=a;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Bu(t,o,i,0,s)}}function Bu(t,e,n,r,o){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const c of a[s])Bu(c,e,n,r+1,o)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(d=>!d.startsWith("_")&&!o.has(d)),c={};for(const d of a)c[d]=s[d];for(const[d,f]of Object.entries(c)){const p=[];for(const h of n.slice(r))h==="*"?p.push(d):p.push(h);u(s,p,f)}for(const d of a)delete s[d]}}else{const s=t;i in s&&Bu(s[i],e,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function od(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nE(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["operationName"],n);const r=l(t,["resourceName"]);return r!=null&&u(e,["_url","resourceName"],r),e}function rE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],iE(s)),e}function oE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],sE(s)),e}function iE(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>lE(s))),u(e,["generatedVideos"],i)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function sE(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>aE(s))),u(e,["generatedVideos"],i)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function lE(t){const e={},n=l(t,["video"]);return n!=null&&u(e,["video"],hE(n)),e}function aE(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],mE(n)),e}function uE(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function cE(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function dE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],fE(s)),e}function fE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function Ly(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],pE(s)),e}function pE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function hE(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&u(e,["videoBytes"],od(r));const o=l(t,["encoding"]);return o!=null&&u(e,["mimeType"],o),e}function mE(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],od(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ep;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ep||(Ep={}));var Sp;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Sp||(Sp={}));var Tp;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Tp||(Tp={}));var Tn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Tn||(Tn={}));var Cp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Cp||(Cp={}));var Ip;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ip||(Ip={}));var Ap;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ap||(Ap={}));var Np;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Np||(Np={}));var Rp;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Rp||(Rp={}));var Pp;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Pp||(Pp={}));var kp;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(kp||(kp={}));var Mp;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Mp||(Mp={}));var Dp;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Dp||(Dp={}));var Lp;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Lp||(Lp={}));var Fp;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Fp||(Fp={}));var Up;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Up||(Up={}));var bp;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(bp||(bp={}));var Gp;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Gp||(Gp={}));var Vp;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Vp||(Vp={}));var al;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(al||(al={}));var Bp;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Bp||(Bp={}));var Op;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Op||(Op={}));var $p;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})($p||($p={}));var Ou;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ou||(Ou={}));var Hp;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Hp||(Hp={}));var qp;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(qp||(qp={}));var zp;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(zp||(zp={}));var Jp;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Jp||(Jp={}));var Wp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Wp||(Wp={}));var Yp;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Yp||(Yp={}));var Kp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Kp||(Kp={}));var Xp;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Xp||(Xp={}));var Qp;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Qp||(Qp={}));var Zp;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Zp||(Zp={}));var jp;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(jp||(jp={}));var eh;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(eh||(eh={}));var th;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(th||(th={}));var nh;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(nh||(nh={}));var rh;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(rh||(rh={}));var oh;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(oh||(oh={}));var ih;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(ih||(ih={}));var sh;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(sh||(sh={}));var lh;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(lh||(lh={}));var ah;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(ah||(ah={}));var uh;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(uh||(uh={}));var ch;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(ch||(ch={}));var dh;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(dh||(dh={}));var fh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(fh||(fh={}));var ph;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ph||(ph={}));var hh;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(hh||(hh={}));var mh;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(mh||(mh={}));var gh;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(gh||(gh={}));var yh;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(yh||(yh={}));var vh;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(vh||(vh={}));var Or;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Or||(Or={}));class $u{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ko{get text(){var e,n,r,o,i,s,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const h of(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[g,w]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(w!==null||w!==void 0)&&p.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,d+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,r,o,i,s,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[h,g]of Object.entries(p))h!=="inlineData"&&(g!==null||g!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,o,i,s,a,c;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,o,i,s,a,c,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,o,i,s,a,c,d;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class _h{}class wh{}class gE{}class yE{}class vE{}class _E{}class xh{}class Eh{}class Sh{}class wE{}class ul{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ul;let o;const i=e;return n?o=oE(i):o=rE(i),Object.assign(r,o),r}}class Th{}class Ch{}class Ih{}class xE{}class EE{}class SE{}class id{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new id,i=dE(e);return Object.assign(r,i),r}}class TE{}class CE{}class IE{}class Ah{}class AE{get text(){var e,n,r;let o="",i=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(a))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,o+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var e,n,r;let o="";const i=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,c]of Object.entries(s))a!=="inlineData"&&c!==null&&i.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class NE{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class sd{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new sd,i=Ly(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Fy(t,e){const n=X(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Uy(t){return Array.isArray(t)?t.map(e=>cl(e)):[cl(t)]}function cl(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function by(t){const e=cl(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gy(t){const e=cl(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Nh(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Vy(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Nh(e)):[Nh(t)]}function Hu(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Rh(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Ph(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Be(t){if(t==null)throw new Error("ContentUnion is required");return Hu(t)?t:{role:"user",parts:Vy(t)}}function ld(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Be(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Be(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Be(n)):[Be(e)]}function _t(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Rh(t)||Ph(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Be(t)]}const e=[],n=[],r=Hu(t[0]);for(const o of t){const i=Hu(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(o);else{if(Rh(o)||Ph(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||e.push({role:"user",parts:Vy(n)}),e}function RE(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Tn).includes(n[0].toUpperCase())?n[0].toUpperCase():Tn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Tn).includes(r.toUpperCase())?r.toUpperCase():Tn.TYPE_UNSPECIFIED})}}function Kr(t){const e={},n=["items"],r=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&RE(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Tn).includes(a.toUpperCase())?a.toUpperCase():Tn.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Kr(a);else if(r.includes(s)){const c=[];for(const d of a){if(d.type=="null"){e.nullable=!0;continue}c.push(Kr(d))}e[s]=c}else if(o.includes(s)){const c={};for(const[d,f]of Object.entries(a))c[d]=Kr(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=a}return e}function ad(t){return Kr(t)}function ud(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function cd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function fo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Kr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Kr(e.response));return t}function po(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function PE(t,e,n,r=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function ln(t,e){if(typeof e!="string")throw new Error("name must be a string");return PE(t,e,"cachedContents")}function By(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Vn(t){return od(t)}function kE(t){return t!=null&&typeof t=="object"&&"name"in t}function ME(t){return t!=null&&typeof t=="object"&&"video"in t}function DE(t){return t!=null&&typeof t=="object"&&"uri"in t}function Oy(t){var e;let n;if(kE(t)&&(n=t.name),!(DE(t)&&(n=t.uri,n===void 0))&&!(ME(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function $y(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Hy(t){for(const e of["models","tunedModels","publisherModels"])if(LE(t,e))return t[e];return[]}function LE(t,e){return t!==null&&typeof t=="object"&&e in t}function FE(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function UE(t,e={}){const n=[],r=new Set;for(const o of t){const i=o.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const s=FE(o,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function qy(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function bE(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function zy(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let i=!1;for(const s of o){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ho(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Jy(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GE(t){const e={},n=l(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>vS(s))),u(e,["inlinedResponses"],i)}const o=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["inlinedEmbedContentResponses"],i)}return e}function VE(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&u(e,["gcsUri"],r);const o=l(t,["bigqueryDestination","outputUri"]);return o!=null&&u(e,["bigqueryUri"],o),e}function BE(t){const e={},n=l(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsDestination","outputUriPrefix"],r);const o=l(t,["bigqueryUri"]);if(o!=null&&u(e,["bigqueryDestination","outputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Cs(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["metadata","state"]);o!=null&&u(e,["state"],Jy(o));const i=l(t,["metadata","createTime"]);i!=null&&u(e,["createTime"],i);const s=l(t,["metadata","endTime"]);s!=null&&u(e,["endTime"],s);const a=l(t,["metadata","updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["metadata","model"]);c!=null&&u(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&u(e,["dest"],GE(zy(d))),e}function qu(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["state"]);o!=null&&u(e,["state"],Jy(o));const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["startTime"]);a!=null&&u(e,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(e,["updateTime"],d);const f=l(t,["model"]);f!=null&&u(e,["model"],f);const p=l(t,["inputConfig"]);p!=null&&u(e,["src"],OE(p));const h=l(t,["outputConfig"]);h!=null&&u(e,["dest"],VE(zy(h)));const g=l(t,["completionStats"]);return g!=null&&u(e,["completionStats"],g),e}function OE(t){const e={},n=l(t,["instancesFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&u(e,["gcsUri"],r);const o=l(t,["bigquerySource","inputUri"]);return o!=null&&u(e,["bigqueryUri"],o),e}function $E(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&u(n,["fileName"],r);const o=l(e,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>yS(t,s))),u(n,["requests","requests"],i)}return n}function HE(t){const e={},n=l(t,["format"]);n!=null&&u(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsSource","uris"],r);const o=l(t,["bigqueryUri"]);if(o!=null&&u(e,["bigquerySource","inputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function qE(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function zE(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],ho(t,r)),n}function JE(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],ho(t,r)),n}function WE(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],YE(r));const o=l(t,["tokenCount"]);o!=null&&u(e,["tokenCount"],o);const i=l(t,["finishReason"]);i!=null&&u(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&u(e,["avgLogprobs"],s);const a=l(t,["groundingMetadata"]);a!=null&&u(e,["groundingMetadata"],a);const c=l(t,["index"]);c!=null&&u(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),u(e,["safetyRatings"],h)}const p=l(t,["urlContextMetadata"]);return p!=null&&u(e,["urlContextMetadata"],p),e}function YE(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["citations"],r)}return e}function Wy(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>CS(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function KE(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&u(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function XE(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["dest"]);return e!==void 0&&o!=null&&u(e,["outputConfig"],BE(bE(o))),n}function kh(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["src"]);o!=null&&u(n,["batch","inputConfig"],$E(t,qy(t,o)));const i=l(e,["config"]);return i!=null&&KE(i,n),n}function QE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],X(t,r));const o=l(e,["src"]);o!=null&&u(n,["inputConfig"],HE(qy(t,o)));const i=l(e,["config"]);return i!=null&&XE(i,n),n}function ZE(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&u(e,["batch","displayName"],r),n}function jE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["src"]);o!=null&&u(n,["batch","inputConfig"],sS(t,o));const i=l(e,["config"]);return i!=null&&ZE(i,n),n}function eS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],ho(t,r)),n}function tS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],ho(t,r)),n}function nS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);return i!=null&&u(e,["error"],i),e}function rS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);return i!=null&&u(e,["error"],i),e}function oS(t,e){const n={},r=l(e,["contents"]);if(r!=null){let i=ld(t,r);Array.isArray(i)&&(i=i.map(s=>s)),u(n,["requests[]","request","content"],i)}const o=l(e,["config"]);return o!=null&&(u(n,["_self"],iS(o,n)),tE(n,{"requests[].*":"requests[].request.*"})),n}function iS(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const o=l(t,["title"]);e!==void 0&&o!=null&&u(e,["requests[]","title"],o);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&u(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function sS(t,e){const n={},r=l(e,["fileName"]);r!=null&&u(n,["file_name"],r);const o=l(e,["inlinedRequests"]);return o!=null&&u(n,["requests"],oS(t,o)),n}function lS(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function aS(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uS(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cS(t,e,n){const r={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],Wy(Be(o)));const i=l(e,["temperature"]);i!=null&&u(r,["temperature"],i);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const p=l(e,["responseLogprobs"]);p!=null&&u(r,["responseLogprobs"],p);const h=l(e,["logprobs"]);h!=null&&u(r,["logprobs"],h);const g=l(e,["presencePenalty"]);g!=null&&u(r,["presencePenalty"],g);const w=l(e,["frequencyPenalty"]);w!=null&&u(r,["frequencyPenalty"],w);const x=l(e,["seed"]);x!=null&&u(r,["seed"],x);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const _=l(e,["responseSchema"]);_!=null&&u(r,["responseSchema"],ad(_));const y=l(e,["responseJsonSchema"]);if(y!=null&&u(r,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=l(e,["safetySettings"]);if(n!==void 0&&v!=null){let q=v;Array.isArray(q)&&(q=q.map(ye=>IS(ye))),u(n,["safetySettings"],q)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let q=po(E);Array.isArray(q)&&(q=q.map(ye=>NS(fo(ye)))),u(n,["tools"],q)}const S=l(e,["toolConfig"]);if(n!==void 0&&S!=null&&u(n,["toolConfig"],AS(S)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=l(e,["cachedContent"]);n!==void 0&&I!=null&&u(n,["cachedContent"],ln(t,I));const T=l(e,["responseModalities"]);T!=null&&u(r,["responseModalities"],T);const k=l(e,["mediaResolution"]);k!=null&&u(r,["mediaResolution"],k);const N=l(e,["speechConfig"]);if(N!=null&&u(r,["speechConfig"],ud(N)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=l(e,["thinkingConfig"]);R!=null&&u(r,["thinkingConfig"],R);const U=l(e,["imageConfig"]);return U!=null&&u(r,["imageConfig"],gS(U)),r}function dS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>WE(d))),u(e,["candidates"],c)}const o=l(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const i=l(t,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function fS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],ho(t,r)),n}function pS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],ho(t,r)),n}function hS(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function mS(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function gS(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&u(e,["imageSize"],r),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function yS(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["request","model"],X(t,r));const o=l(e,["contents"]);if(o!=null){let a=_t(o);Array.isArray(a)&&(a=a.map(c=>Wy(c))),u(n,["request","contents"],a)}const i=l(e,["metadata"]);i!=null&&u(n,["metadata"],i);const s=l(e,["config"]);return s!=null&&u(n,["request","generationConfig"],cS(t,s,l(n,["request"],{}))),n}function vS(t){const e={},n=l(t,["response"]);n!=null&&u(e,["response"],dS(n));const r=l(t,["error"]);return r!=null&&u(e,["error"],r),e}function _S(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);if(e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function wS(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);e!==void 0&&o!=null&&u(e,["_query","pageToken"],o);const i=l(t,["filter"]);return e!==void 0&&i!=null&&u(e,["_query","filter"],i),n}function xS(t){const e={},n=l(t,["config"]);return n!=null&&_S(n,e),e}function ES(t){const e={},n=l(t,["config"]);return n!=null&&wS(n,e),e}function SS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Cs(s))),u(e,["batchJobs"],i)}return e}function TS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>qu(s))),u(e,["batchJobs"],i)}return e}function CS(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],lS(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],aS(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],qE(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const p=l(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);const h=l(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function IS(t){const e={},n=l(t,["category"]);if(n!=null&&u(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function AS(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],uS(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function NS(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const i=l(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],hS(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],mS(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(rn||(rn={}));class hr{constructor(e,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,o)}init(e,n,r){var o,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let RS=class extends sn{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new hr(rn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=kh(this.apiClient,e),r=n._url,o=D("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,c=a.requests,d=[];for(const f of c){const p=Object.assign({},f);if(p.systemInstruction){const h=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=h,p.request=g}d.push(p)}return a.requests=d,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${o}`;else if(s)r.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=QE(this.apiClient,e);return a=D("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>qu(f))}else{const d=kh(this.apiClient,e);return a=D("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Cs(f))}}async createEmbeddingsInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=jE(this.apiClient,e);return i=D("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>Cs(c))}}async get(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=pS(this.apiClient,e);return a=D("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>qu(f))}else{const d=fS(this.apiClient,e);return a=D("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Cs(f))}}async cancel(e){var n,r,o,i;let s="",a={};if(this.apiClient.isVertexAI()){const c=JE(this.apiClient,e);s=D("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=zE(this.apiClient,e);s=D("batches/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=ES(e);return a=D("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=TS(f),h=new Ah;return Object.assign(h,p),h})}else{const d=xS(e);return a=D("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=SS(f),h=new Ah;return Object.assign(h,p),h})}}async delete(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=tS(this.apiClient,e);return a=D("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>rS(f))}else{const d=eS(this.apiClient,e);return a=D("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>nS(f))}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PS(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Mh(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>jS(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function kS(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);e!==void 0&&o!=null&&u(e,["expireTime"],o);const i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let f=_t(s);Array.isArray(f)&&(f=f.map(p=>Mh(p))),u(e,["contents"],f)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],Mh(Be(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>tT(p))),u(e,["tools"],f)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&u(e,["toolConfig"],eT(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function MS(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);e!==void 0&&o!=null&&u(e,["expireTime"],o);const i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let p=_t(s);Array.isArray(p)&&(p=p.map(h=>h)),u(e,["contents"],p)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],Be(a));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>nT(h))),u(e,["tools"],p)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&u(e,["toolConfig"],d);const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&u(e,["encryption_spec","kmsKeyName"],f),n}function DS(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],Fy(t,r));const o=l(e,["config"]);return o!=null&&kS(o,n),n}function LS(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],Fy(t,r));const o=l(e,["config"]);return o!=null&&MS(o,n),n}function FS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],ln(t,r)),n}function US(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],ln(t,r)),n}function bS(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function GS(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function VS(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function BS(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function OS(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function $S(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const i=l(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function HS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],ln(t,r)),n}function qS(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],ln(t,r)),n}function zS(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function JS(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function WS(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function YS(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function KS(t){const e={},n=l(t,["config"]);return n!=null&&WS(n,e),e}function XS(t){const e={},n=l(t,["config"]);return n!=null&&YS(n,e),e}function QS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function ZS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function jS(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],VS(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],BS(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],PS(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const p=l(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);const h=l(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function eT(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],OS(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function tT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const i=l(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],zS(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],JS(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function nT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>$S(h))),u(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);const i=l(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function rT(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);return e!==void 0&&o!=null&&u(e,["expireTime"],o),n}function oT(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const o=l(t,["expireTime"]);return e!==void 0&&o!=null&&u(e,["expireTime"],o),n}function iT(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],ln(t,r));const o=l(e,["config"]);return o!=null&&rT(o,n),n}function sT(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],ln(t,r));const o=l(e,["config"]);return o!=null&&oT(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lT extends sn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new hr(rn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=LS(this.apiClient,e);return a=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=DS(this.apiClient,e);return a=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=qS(this.apiClient,e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=HS(this.apiClient,e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=US(this.apiClient,e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=GS(f),h=new Ch;return Object.assign(h,p),h})}else{const d=FS(this.apiClient,e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=bS(f),h=new Ch;return Object.assign(h,p),h})}}async update(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=sT(this.apiClient,e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=iT(this.apiClient,e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=XS(e);return a=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=ZS(f),h=new Ih;return Object.assign(h,p),h})}else{const d=KS(e);return a=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=QS(f),h=new Ih;return Object.assign(h,p),h})}}}function Dh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function se(t){return this instanceof se?(this.v=t,this):new se(t)}function Xr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(g){return function(w){return Promise.resolve(w).then(g,p)}}function a(g,w){r[g]&&(o[g]=function(x){return new Promise(function(C,_){i.push([g,x,C,_])>1||c(g,x)})},w&&(o[g]=w(o[g])))}function c(g,w){try{d(r[g](w))}catch(x){h(i[0][3],x)}}function d(g){g.value instanceof se?Promise.resolve(g.value.v).then(f,p):h(i[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function h(g,w){g(w),i.shift(),i.length&&c(i[0][0],i[0][1])}}function ei(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Dh=="function"?Dh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,c){s=t[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(d){i({value:d,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aT(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Yy(n)}function Yy(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function uT(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Lh(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const o=[];let i=!0;for(;r<n&&t[r].role==="model";)o.push(t[r]),i&&!Yy(t[r])&&(i=!1),r++;i?e.push(...o):e.pop()}return e}class cT{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new dT(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}let dT=class{constructor(e,n,r,o={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),uT(i)}async sendMessage(e){var n;await this.sendPromise;const r=Be(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,a;const c=await o,d=(s=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let h=[];f!=null&&(h=(a=f.slice(p))!==null&&a!==void 0?a:[]);const g=d?[d]:[];this.recordHistory(r,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const r=Be(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const i=await o;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?Lh(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,o;return Xr(this,arguments,function*(){var s,a,c,d;const f=[];try{for(var p=!0,h=ei(e),g;g=yield se(h.next()),s=g.done,!s;p=!0){d=g.value,p=!1;const w=d;if(aT(w)){const x=(o=(r=w.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;x!==void 0&&f.push(x)}yield yield se(w)}}catch(w){a={error:w}}finally{try{!p&&!s&&(c=h.return)&&(yield se(c.call(h)))}finally{if(a)throw a.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let o=[];n.length>0&&n.every(i=>i.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Lh(r)):this.history.push(e),this.history.push(...o)}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Dl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fT(t){const e={},n=l(t,["file"]);return n!=null&&u(e,["file"],n),e}function pT(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function hT(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],Oy(n)),e}function mT(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function gT(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],Oy(n)),e}function yT(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function vT(t){const e={},n=l(t,["config"]);return n!=null&&yT(n,e),e}function _T(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let wT=class extends sn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new hr(rn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=vT(e);return i=D("files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=_T(c),f=new TE;return Object.assign(f,d),f})}}async createInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=fT(e);return i=D("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=pT(c),f=new CE;return Object.assign(f,d),f})}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=gT(e);return i=D("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hT(e);return i=D("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=mT(c),f=new IE;return Object.assign(f,d),f})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Is(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function xT(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>bT(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function ET(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function ST(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TT(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const i=l(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function CT(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&u(e,["responseJsonSchema"],r);const o=l(t,["audioTimestamp"]);o!=null&&u(e,["audioTimestamp"],o);const i=l(t,["candidateCount"]);i!=null&&u(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&u(e,["enableAffectiveDialog"],s);const a=l(t,["frequencyPenalty"]);a!=null&&u(e,["frequencyPenalty"],a);const c=l(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&u(e,["mediaResolution"],f);const p=l(t,["presencePenalty"]);p!=null&&u(e,["presencePenalty"],p);const h=l(t,["responseLogprobs"]);h!=null&&u(e,["responseLogprobs"],h);const g=l(t,["responseMimeType"]);g!=null&&u(e,["responseMimeType"],g);const w=l(t,["responseModalities"]);w!=null&&u(e,["responseModalities"],w);const x=l(t,["responseSchema"]);x!=null&&u(e,["responseSchema"],x);const C=l(t,["routingConfig"]);C!=null&&u(e,["routingConfig"],C);const _=l(t,["seed"]);_!=null&&u(e,["seed"],_);const y=l(t,["speechConfig"]);y!=null&&u(e,["speechConfig"],Ky(y));const v=l(t,["stopSequences"]);v!=null&&u(e,["stopSequences"],v);const E=l(t,["temperature"]);E!=null&&u(e,["temperature"],E);const S=l(t,["thinkingConfig"]);S!=null&&u(e,["thinkingConfig"],S);const I=l(t,["topK"]);I!=null&&u(e,["topK"],I);const T=l(t,["topP"]);if(T!=null&&u(e,["topP"],T),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function IT(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function AT(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function NT(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","speechConfig"],cd(p));const h=l(t,["thinkingConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","thinkingConfig"],h);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);const w=l(t,["systemInstruction"]);e!==void 0&&w!=null&&u(e,["setup","systemInstruction"],xT(Be(w)));const x=l(t,["tools"]);if(e!==void 0&&x!=null){let I=po(x);Array.isArray(I)&&(I=I.map(T=>VT(fo(T)))),u(e,["setup","tools"],I)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&u(e,["setup","sessionResumption"],GT(C));const _=l(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&u(e,["setup","inputAudioTranscription"],_);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],y);const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],v);const E=l(t,["contextWindowCompression"]);e!==void 0&&E!=null&&u(e,["setup","contextWindowCompression"],E);const S=l(t,["proactivity"]);return e!==void 0&&S!=null&&u(e,["setup","proactivity"],S),n}function RT(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],CT(r));const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","speechConfig"],Ky(cd(p)));const h=l(t,["thinkingConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","thinkingConfig"],h);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);const w=l(t,["systemInstruction"]);e!==void 0&&w!=null&&u(e,["setup","systemInstruction"],Be(w));const x=l(t,["tools"]);if(e!==void 0&&x!=null){let I=po(x);Array.isArray(I)&&(I=I.map(T=>BT(fo(T)))),u(e,["setup","tools"],I)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&u(e,["setup","sessionResumption"],C);const _=l(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&u(e,["setup","inputAudioTranscription"],_);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],y);const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],v);const E=l(t,["contextWindowCompression"]);e!==void 0&&E!=null&&u(e,["setup","contextWindowCompression"],E);const S=l(t,["proactivity"]);return e!==void 0&&S!=null&&u(e,["setup","proactivity"],S),n}function PT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],X(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],NT(o,n)),n}function kT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],X(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],RT(o,n)),n}function MT(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],n),e}function DT(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["weightedPrompts"],r)}return e}function LT(t){const e={},n=l(t,["media"]);if(n!=null){let d=Uy(n);Array.isArray(d)&&(d=d.map(f=>Is(f))),u(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&u(e,["audio"],Is(Gy(r)));const o=l(t,["audioStreamEnd"]);o!=null&&u(e,["audioStreamEnd"],o);const i=l(t,["video"]);i!=null&&u(e,["video"],Is(by(i)));const s=l(t,["text"]);s!=null&&u(e,["text"],s);const a=l(t,["activityStart"]);a!=null&&u(e,["activityStart"],a);const c=l(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function FT(t){const e={},n=l(t,["media"]);if(n!=null){let d=Uy(n);Array.isArray(d)&&(d=d.map(f=>f)),u(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&u(e,["audio"],Gy(r));const o=l(t,["audioStreamEnd"]);o!=null&&u(e,["audioStreamEnd"],o);const i=l(t,["video"]);i!=null&&u(e,["video"],by(i));const s=l(t,["text"]);s!=null&&u(e,["text"],s);const a=l(t,["activityStart"]);a!=null&&u(e,["activityStart"],a);const c=l(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function UT(t){const e={},n=l(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],n);const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],r);const o=l(t,["toolCall"]);o!=null&&u(e,["toolCall"],o);const i=l(t,["toolCallCancellation"]);i!=null&&u(e,["toolCallCancellation"],i);const s=l(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],OT(s));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],a);const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],c),e}function bT(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],ET(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],ST(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],Is(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const p=l(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);const h=l(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function GT(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ky(t){const e={},n=l(t,["languageCode"]);n!=null&&u(e,["languageCode"],n);const r=l(t,["voiceConfig"]);if(r!=null&&u(e,["voiceConfig"],r),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function VT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const i=l(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],IT(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],AT(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function BT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>TT(h))),u(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);const i=l(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function OT(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const o=l(t,["candidatesTokenCount"]);o!=null&&u(e,["responseTokenCount"],o);const i=l(t,["toolUsePromptTokenCount"]);i!=null&&u(e,["toolUsePromptTokenCount"],i);const s=l(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(w=>w)),u(e,["promptTokensDetails"],g)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(w=>w)),u(e,["cacheTokensDetails"],g)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(w=>w)),u(e,["responseTokensDetails"],g)}const p=l(t,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(w=>w)),u(e,["toolUsePromptTokensDetails"],g)}const h=l(t,["trafficType"]);return h!=null&&u(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $T(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function HT(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],qT(r));const o=l(t,["tokenCount"]);o!=null&&u(e,["tokenCount"],o);const i=l(t,["finishReason"]);i!=null&&u(e,["finishReason"],i);const s=l(t,["avgLogprobs"]);s!=null&&u(e,["avgLogprobs"],s);const a=l(t,["groundingMetadata"]);a!=null&&u(e,["groundingMetadata"],a);const c=l(t,["index"]);c!=null&&u(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),u(e,["safetyRatings"],h)}const p=l(t,["urlContextMetadata"]);return p!=null&&u(e,["urlContextMetadata"],p),e}function qT(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),u(e,["citations"],r)}return e}function zT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["contents"]);if(o!=null){let i=_t(o);Array.isArray(i)&&(i=i.map(s=>s)),u(n,["contents"],i)}return n}function JT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),u(e,["tokensInfo"],o)}return e}function WT(t){const e={},n=l(t,["values"]);n!=null&&u(e,["values"],n);const r=l(t,["statistics"]);return r!=null&&u(e,["statistics"],YT(r)),e}function YT(t){const e={},n=l(t,["truncated"]);n!=null&&u(e,["truncated"],n);const r=l(t,["token_count"]);return r!=null&&u(e,["tokenCount"],r),e}function Ll(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>rI(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function KT(t){const e={},n=l(t,["controlType"]);n!=null&&u(e,["controlType"],n);const r=l(t,["enableControlImageComputation"]);return r!=null&&u(e,["computeControl"],r),e}function XT(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function QT(t,e){const n={},r=l(t,["systemInstruction"]);e!==void 0&&r!=null&&u(e,["systemInstruction"],Be(r));const o=l(t,["tools"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>ev(a))),u(e,["tools"],s)}const i=l(t,["generationConfig"]);return e!==void 0&&i!=null&&u(e,["generationConfig"],$C(i)),n}function ZT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["contents"]);if(o!=null){let s=_t(o);Array.isArray(s)&&(s=s.map(a=>Ll(a))),u(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&XT(i),n}function jT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["contents"]);if(o!=null){let s=_t(o);Array.isArray(s)&&(s=s.map(a=>a)),u(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&QT(i,n),n}function eC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);r!=null&&u(e,["totalTokens"],r);const o=l(t,["cachedContentTokenCount"]);return o!=null&&u(e,["cachedContentTokenCount"],o),e}function tC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);return r!=null&&u(e,["totalTokens"],r),e}function nC(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],X(t,r)),n}function rC(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],X(t,r)),n}function oC(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function iC(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function sC(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(t,["negativePrompt"]);e!==void 0&&o!=null&&u(e,["parameters","negativePrompt"],o);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&u(e,["parameters","includeSafetyAttributes"],p);const h=l(t,["includeRaiReason"]);e!==void 0&&h!=null&&u(e,["parameters","includeRaiReason"],h);const g=l(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);const w=l(t,["outputMimeType"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","mimeType"],w);const x=l(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&u(e,["parameters","outputOptions","compressionQuality"],x);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&u(e,["parameters","addWatermark"],C);const _=l(t,["labels"]);e!==void 0&&_!=null&&u(e,["labels"],_);const y=l(t,["editMode"]);e!==void 0&&y!=null&&u(e,["parameters","editMode"],y);const v=l(t,["baseSteps"]);return e!==void 0&&v!=null&&u(e,["parameters","editConfig","baseSteps"],v),n}function lC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const i=l(e,["referenceImages"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>uI(c))),u(n,["instances[0]","referenceImages"],a)}const s=l(e,["config"]);return s!=null&&sC(s,n),n}function aC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Fl(i))),u(e,["generatedImages"],o)}return e}function uC(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const o=l(t,["title"]);e!==void 0&&o!=null&&u(e,["requests[]","title"],o);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&u(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function cC(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["instances[]","task_type"],r);const o=l(t,["title"]);e!==void 0&&o!=null&&u(e,["instances[]","title"],o);const i=l(t,["outputDimensionality"]);e!==void 0&&i!=null&&u(e,["parameters","outputDimensionality"],i);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&u(e,["instances[]","mimeType"],s);const a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&u(e,["parameters","autoTruncate"],a),n}function dC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["contents"]);if(o!=null){let a=ld(t,o);Array.isArray(a)&&(a=a.map(c=>c)),u(n,["requests[]","content"],a)}const i=l(e,["config"]);i!=null&&uC(i,n);const s=l(e,["model"]);return s!==void 0&&u(n,["requests[]","model"],X(t,s)),n}function fC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["contents"]);if(o!=null){let s=ld(t,o);Array.isArray(s)&&(s=s.map(a=>a)),u(n,["instances[]","content"],s)}const i=l(e,["config"]);return i!=null&&cC(i,n),n}function pC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["embeddings"],i)}const o=l(t,["metadata"]);return o!=null&&u(e,["metadata"],o),e}function hC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>WT(s))),u(e,["embeddings"],i)}const o=l(t,["metadata"]);return o!=null&&u(e,["metadata"],o),e}function mC(t){const e={},n=l(t,["endpoint"]);n!=null&&u(e,["name"],n);const r=l(t,["deployedModelId"]);return r!=null&&u(e,["deployedModelId"],r),e}function gC(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function yC(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vC(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _C(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const o=l(t,["parameters"]);o!=null&&u(e,["parameters"],o);const i=l(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function wC(t,e,n){const r={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],Ll(Be(o)));const i=l(e,["temperature"]);i!=null&&u(r,["temperature"],i);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const p=l(e,["responseLogprobs"]);p!=null&&u(r,["responseLogprobs"],p);const h=l(e,["logprobs"]);h!=null&&u(r,["logprobs"],h);const g=l(e,["presencePenalty"]);g!=null&&u(r,["presencePenalty"],g);const w=l(e,["frequencyPenalty"]);w!=null&&u(r,["frequencyPenalty"],w);const x=l(e,["seed"]);x!=null&&u(r,["seed"],x);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const _=l(e,["responseSchema"]);_!=null&&u(r,["responseSchema"],ad(_));const y=l(e,["responseJsonSchema"]);if(y!=null&&u(r,["responseJsonSchema"],y),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=l(e,["safetySettings"]);if(n!==void 0&&v!=null){let q=v;Array.isArray(q)&&(q=q.map(ye=>cI(ye))),u(n,["safetySettings"],q)}const E=l(e,["tools"]);if(n!==void 0&&E!=null){let q=po(E);Array.isArray(q)&&(q=q.map(ye=>yI(fo(ye)))),u(n,["tools"],q)}const S=l(e,["toolConfig"]);if(n!==void 0&&S!=null&&u(n,["toolConfig"],gI(S)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=l(e,["cachedContent"]);n!==void 0&&I!=null&&u(n,["cachedContent"],ln(t,I));const T=l(e,["responseModalities"]);T!=null&&u(r,["responseModalities"],T);const k=l(e,["mediaResolution"]);k!=null&&u(r,["mediaResolution"],k);const N=l(e,["speechConfig"]);if(N!=null&&u(r,["speechConfig"],ud(N)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=l(e,["thinkingConfig"]);R!=null&&u(r,["thinkingConfig"],R);const U=l(e,["imageConfig"]);return U!=null&&u(r,["imageConfig"],WC(U)),r}function xC(t,e,n){const r={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&u(n,["systemInstruction"],Be(o));const i=l(e,["temperature"]);i!=null&&u(r,["temperature"],i);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const p=l(e,["responseLogprobs"]);p!=null&&u(r,["responseLogprobs"],p);const h=l(e,["logprobs"]);h!=null&&u(r,["logprobs"],h);const g=l(e,["presencePenalty"]);g!=null&&u(r,["presencePenalty"],g);const w=l(e,["frequencyPenalty"]);w!=null&&u(r,["frequencyPenalty"],w);const x=l(e,["seed"]);x!=null&&u(r,["seed"],x);const C=l(e,["responseMimeType"]);C!=null&&u(r,["responseMimeType"],C);const _=l(e,["responseSchema"]);_!=null&&u(r,["responseSchema"],ad(_));const y=l(e,["responseJsonSchema"]);y!=null&&u(r,["responseJsonSchema"],y);const v=l(e,["routingConfig"]);v!=null&&u(r,["routingConfig"],v);const E=l(e,["modelSelectionConfig"]);E!=null&&u(r,["modelConfig"],E);const S=l(e,["safetySettings"]);if(n!==void 0&&S!=null){let ae=S;Array.isArray(ae)&&(ae=ae.map(j=>j)),u(n,["safetySettings"],ae)}const I=l(e,["tools"]);if(n!==void 0&&I!=null){let ae=po(I);Array.isArray(ae)&&(ae=ae.map(j=>ev(fo(j)))),u(n,["tools"],ae)}const T=l(e,["toolConfig"]);n!==void 0&&T!=null&&u(n,["toolConfig"],T);const k=l(e,["labels"]);n!==void 0&&k!=null&&u(n,["labels"],k);const N=l(e,["cachedContent"]);n!==void 0&&N!=null&&u(n,["cachedContent"],ln(t,N));const R=l(e,["responseModalities"]);R!=null&&u(r,["responseModalities"],R);const U=l(e,["mediaResolution"]);U!=null&&u(r,["mediaResolution"],U);const q=l(e,["speechConfig"]);q!=null&&u(r,["speechConfig"],jy(ud(q)));const ye=l(e,["audioTimestamp"]);ye!=null&&u(r,["audioTimestamp"],ye);const $e=l(e,["thinkingConfig"]);$e!=null&&u(r,["thinkingConfig"],$e);const Et=l(e,["imageConfig"]);return Et!=null&&u(r,["imageConfig"],YC(Et)),r}function Fh(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["contents"]);if(o!=null){let s=_t(o);Array.isArray(s)&&(s=s.map(a=>Ll(a))),u(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&u(n,["generationConfig"],wC(t,i,n)),n}function Uh(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["contents"]);if(o!=null){let s=_t(o);Array.isArray(s)&&(s=s.map(a=>a)),u(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&u(n,["generationConfig"],xC(t,i,n)),n}function bh(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>HT(d))),u(e,["candidates"],c)}const o=l(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const i=l(t,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function Gh(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),u(e,["candidates"],d)}const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const s=l(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const a=l(t,["responseId"]);a!=null&&u(e,["responseId"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function EC(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o);const i=l(t,["guidanceScale"]);if(e!==void 0&&i!=null&&u(e,["parameters","guidanceScale"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&u(e,["parameters","safetySetting"],s);const a=l(t,["personGeneration"]);e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&u(e,["parameters","includeRaiReason"],d);const f=l(t,["language"]);e!==void 0&&f!=null&&u(e,["parameters","language"],f);const p=l(t,["outputMimeType"]);e!==void 0&&p!=null&&u(e,["parameters","outputOptions","mimeType"],p);const h=l(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&u(e,["parameters","outputOptions","compressionQuality"],h),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=l(t,["imageSize"]);if(e!==void 0&&g!=null&&u(e,["parameters","sampleImageSize"],g),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function SC(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(t,["negativePrompt"]);e!==void 0&&o!=null&&u(e,["parameters","negativePrompt"],o);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&u(e,["parameters","includeSafetyAttributes"],p);const h=l(t,["includeRaiReason"]);e!==void 0&&h!=null&&u(e,["parameters","includeRaiReason"],h);const g=l(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);const w=l(t,["outputMimeType"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","mimeType"],w);const x=l(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&u(e,["parameters","outputOptions","compressionQuality"],x);const C=l(t,["addWatermark"]);e!==void 0&&C!=null&&u(e,["parameters","addWatermark"],C);const _=l(t,["labels"]);e!==void 0&&_!=null&&u(e,["labels"],_);const y=l(t,["imageSize"]);e!==void 0&&y!=null&&u(e,["parameters","sampleImageSize"],y);const v=l(t,["enhancePrompt"]);return e!==void 0&&v!=null&&u(e,["parameters","enhancePrompt"],v),n}function TC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const i=l(e,["config"]);return i!=null&&EC(i,n),n}function CC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const i=l(e,["config"]);return i!=null&&SC(i,n),n}function IC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>GC(s))),u(e,["generatedImages"],i)}const o=l(t,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],Qy(o)),e}function AC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Fl(s))),u(e,["generatedImages"],i)}const o=l(t,["positivePromptSafetyAttributes"]);return o!=null&&u(e,["positivePromptSafetyAttributes"],Zy(o)),e}function NC(t,e){const n={},r=l(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(t,["durationSeconds"]);if(e!==void 0&&o!=null&&u(e,["parameters","durationSeconds"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);const s=l(t,["resolution"]);e!==void 0&&s!=null&&u(e,["parameters","resolution"],s);const a=l(t,["personGeneration"]);if(e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&u(e,["parameters","negativePrompt"],c);const d=l(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&u(e,["parameters","enhancePrompt"],d),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=l(t,["lastFrame"]);e!==void 0&&f!=null&&u(e,["instances[0]","lastFrame"],Ul(f));const p=l(t,["referenceImages"]);if(e!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>PI(g))),u(e,["instances[0]","referenceImages"],h)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function RC(t,e){const n={},r=l(t,["numberOfVideos"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const i=l(t,["fps"]);e!==void 0&&i!=null&&u(e,["parameters","fps"],i);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s);const a=l(t,["seed"]);e!==void 0&&a!=null&&u(e,["parameters","seed"],a);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&u(e,["parameters","resolution"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const p=l(t,["pubsubTopic"]);e!==void 0&&p!=null&&u(e,["parameters","pubsubTopic"],p);const h=l(t,["negativePrompt"]);e!==void 0&&h!=null&&u(e,["parameters","negativePrompt"],h);const g=l(t,["enhancePrompt"]);e!==void 0&&g!=null&&u(e,["parameters","enhancePrompt"],g);const w=l(t,["generateAudio"]);e!==void 0&&w!=null&&u(e,["parameters","generateAudio"],w);const x=l(t,["lastFrame"]);e!==void 0&&x!=null&&u(e,["instances[0]","lastFrame"],Dt(x));const C=l(t,["referenceImages"]);if(e!==void 0&&C!=null){let v=C;Array.isArray(v)&&(v=v.map(E=>kI(E))),u(e,["instances[0]","referenceImages"],v)}const _=l(t,["mask"]);e!==void 0&&_!=null&&u(e,["instances[0]","mask"],RI(_));const y=l(t,["compressionQuality"]);return e!==void 0&&y!=null&&u(e,["parameters","compressionQuality"],y),n}function PC(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],LC(s)),e}function kC(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],FC(s)),e}function MC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const i=l(e,["image"]);i!=null&&u(n,["instances[0]","image"],Ul(i));const s=l(e,["video"]);s!=null&&u(n,["instances[0]","video"],tv(s));const a=l(e,["source"]);a!=null&&UC(a,n);const c=l(e,["config"]);return c!=null&&NC(c,n),n}function DC(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["prompt"]);o!=null&&u(n,["instances[0]","prompt"],o);const i=l(e,["image"]);i!=null&&u(n,["instances[0]","image"],Dt(i));const s=l(e,["video"]);s!=null&&u(n,["instances[0]","video"],nv(s));const a=l(e,["source"]);a!=null&&bC(a,n);const c=l(e,["config"]);return c!=null&&RC(c,n),n}function LC(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>BC(s))),u(e,["generatedVideos"],i)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function FC(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>OC(s))),u(e,["generatedVideos"],i)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&u(e,["raiMediaFilteredReasons"],o),e}function UC(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],Ul(o));const i=l(t,["video"]);return e!==void 0&&i!=null&&u(e,["instances[0]","video"],tv(i)),n}function bC(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],Dt(o));const i=l(t,["video"]);return e!==void 0&&i!=null&&u(e,["instances[0]","video"],nv(i)),n}function GC(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],KC(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const o=l(t,["_self"]);return o!=null&&u(e,["safetyAttributes"],Qy(o)),e}function Fl(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],Xy(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const o=l(t,["_self"]);o!=null&&u(e,["safetyAttributes"],Zy(o));const i=l(t,["prompt"]);return i!=null&&u(e,["enhancedPrompt"],i),e}function VC(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["mask"],Xy(n));const r=l(t,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),u(e,["labels"],o)}return e}function BC(t){const e={},n=l(t,["video"]);return n!=null&&u(e,["video"],AI(n)),e}function OC(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],NI(n)),e}function $C(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&u(e,["responseJsonSchema"],r);const o=l(t,["audioTimestamp"]);o!=null&&u(e,["audioTimestamp"],o);const i=l(t,["candidateCount"]);i!=null&&u(e,["candidateCount"],i);const s=l(t,["enableAffectiveDialog"]);s!=null&&u(e,["enableAffectiveDialog"],s);const a=l(t,["frequencyPenalty"]);a!=null&&u(e,["frequencyPenalty"],a);const c=l(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&u(e,["mediaResolution"],f);const p=l(t,["presencePenalty"]);p!=null&&u(e,["presencePenalty"],p);const h=l(t,["responseLogprobs"]);h!=null&&u(e,["responseLogprobs"],h);const g=l(t,["responseMimeType"]);g!=null&&u(e,["responseMimeType"],g);const w=l(t,["responseModalities"]);w!=null&&u(e,["responseModalities"],w);const x=l(t,["responseSchema"]);x!=null&&u(e,["responseSchema"],x);const C=l(t,["routingConfig"]);C!=null&&u(e,["routingConfig"],C);const _=l(t,["seed"]);_!=null&&u(e,["seed"],_);const y=l(t,["speechConfig"]);y!=null&&u(e,["speechConfig"],jy(y));const v=l(t,["stopSequences"]);v!=null&&u(e,["stopSequences"],v);const E=l(t,["temperature"]);E!=null&&u(e,["temperature"],E);const S=l(t,["thinkingConfig"]);S!=null&&u(e,["thinkingConfig"],S);const I=l(t,["topK"]);I!=null&&u(e,["topK"],I);const T=l(t,["topP"]);if(T!=null&&u(e,["topP"],T),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function HC(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],X(t,r)),n}function qC(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],X(t,r)),n}function zC(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function JC(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function WC(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&u(e,["imageSize"],r),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function YC(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);r!=null&&u(e,["imageSize"],r);const o=l(t,["outputMimeType"]);o!=null&&u(e,["imageOutputOptions","mimeType"],o);const i=l(t,["outputCompressionQuality"]);return i!=null&&u(e,["imageOutputOptions","compressionQuality"],i),e}function KC(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],Vn(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Xy(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["imageBytes"],Vn(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function Ul(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],Vn(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Dt(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["imageBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Vn(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function XC(t,e,n){const r={},o=l(e,["pageSize"]);n!==void 0&&o!=null&&u(n,["_query","pageSize"],o);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&u(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],$y(t,a)),r}function QC(t,e,n){const r={},o=l(e,["pageSize"]);n!==void 0&&o!=null&&u(n,["_query","pageSize"],o);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&u(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],$y(t,a)),r}function ZC(t,e){const n={},r=l(e,["config"]);return r!=null&&XC(t,r,n),n}function jC(t,e){const n={},r=l(e,["config"]);return r!=null&&QC(t,r,n),n}function eI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["_self"]);if(o!=null){let i=Hy(o);Array.isArray(i)&&(i=i.map(s=>zu(s))),u(e,["models"],i)}return e}function tI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["_self"]);if(o!=null){let i=Hy(o);Array.isArray(i)&&(i=i.map(s=>Ju(s))),u(e,["models"],i)}return e}function nI(t){const e={},n=l(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);const r=l(t,["segmentationClasses"]);r!=null&&u(e,["maskClasses"],r);const o=l(t,["maskDilation"]);return o!=null&&u(e,["dilation"],o),e}function zu(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);o!=null&&u(e,["description"],o);const i=l(t,["version"]);i!=null&&u(e,["version"],i);const s=l(t,["_self"]);s!=null&&u(e,["tunedModelInfo"],vI(s));const a=l(t,["inputTokenLimit"]);a!=null&&u(e,["inputTokenLimit"],a);const c=l(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);d!=null&&u(e,["supportedActions"],d);const f=l(t,["temperature"]);f!=null&&u(e,["temperature"],f);const p=l(t,["maxTemperature"]);p!=null&&u(e,["maxTemperature"],p);const h=l(t,["topP"]);h!=null&&u(e,["topP"],h);const g=l(t,["topK"]);g!=null&&u(e,["topK"],g);const w=l(t,["thinking"]);return w!=null&&u(e,["thinking"],w),e}function Ju(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);o!=null&&u(e,["description"],o);const i=l(t,["versionId"]);i!=null&&u(e,["version"],i);const s=l(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>mC(h))),u(e,["endpoints"],p)}const a=l(t,["labels"]);a!=null&&u(e,["labels"],a);const c=l(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],_I(c));const d=l(t,["defaultCheckpointId"]);d!=null&&u(e,["defaultCheckpointId"],d);const f=l(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>h)),u(e,["checkpoints"],p)}return e}function rI(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],gC(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],yC(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],$T(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const p=l(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);const h=l(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function oI(t){const e={},n=l(t,["productImage"]);return n!=null&&u(e,["image"],Dt(n)),e}function iI(t,e){const n={},r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(t,["baseSteps"]);e!==void 0&&o!=null&&u(e,["parameters","baseSteps"],o);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const s=l(t,["seed"]);e!==void 0&&s!=null&&u(e,["parameters","seed"],s);const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&u(e,["parameters","safetySetting"],a);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&u(e,["parameters","addWatermark"],d);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","mimeType"],f);const p=l(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&u(e,["parameters","outputOptions","compressionQuality"],p);const h=l(t,["enhancePrompt"]);e!==void 0&&h!=null&&u(e,["parameters","enhancePrompt"],h);const g=l(t,["labels"]);return e!==void 0&&g!=null&&u(e,["labels"],g),n}function sI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["source"]);o!=null&&aI(o,n);const i=l(e,["config"]);return i!=null&&iI(i,n),n}function lI(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Fl(o))),u(e,["generatedImages"],r)}return e}function aI(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["personImage"]);e!==void 0&&o!=null&&u(e,["instances[0]","personImage","image"],Dt(o));const i=l(t,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>oI(a))),u(e,["instances[0]","productImages"],s)}return n}function uI(t){const e={},n=l(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],Dt(n));const r=l(t,["referenceId"]);r!=null&&u(e,["referenceId"],r);const o=l(t,["referenceType"]);o!=null&&u(e,["referenceType"],o);const i=l(t,["maskImageConfig"]);i!=null&&u(e,["maskImageConfig"],nI(i));const s=l(t,["controlImageConfig"]);s!=null&&u(e,["controlImageConfig"],KT(s));const a=l(t,["styleImageConfig"]);a!=null&&u(e,["styleImageConfig"],a);const c=l(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],c),e}function Qy(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const o=l(t,["contentType"]);return o!=null&&u(e,["contentType"],o),e}function Zy(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const o=l(t,["contentType"]);return o!=null&&u(e,["contentType"],o),e}function cI(t){const e={},n=l(t,["category"]);if(n!=null&&u(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function dI(t){const e={},n=l(t,["image"]);return n!=null&&u(e,["image"],Dt(n)),e}function fI(t,e){const n={},r=l(t,["mode"]);e!==void 0&&r!=null&&u(e,["parameters","mode"],r);const o=l(t,["maxPredictions"]);e!==void 0&&o!=null&&u(e,["parameters","maxPredictions"],o);const i=l(t,["confidenceThreshold"]);e!==void 0&&i!=null&&u(e,["parameters","confidenceThreshold"],i);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&u(e,["parameters","maskDilation"],s);const a=l(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&u(e,["parameters","binaryColorThreshold"],a);const c=l(t,["labels"]);return e!==void 0&&c!=null&&u(e,["labels"],c),n}function pI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["source"]);o!=null&&mI(o,n);const i=l(e,["config"]);return i!=null&&fI(i,n),n}function hI(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>VC(o))),u(e,["generatedMasks"],r)}return e}function mI(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const o=l(t,["image"]);e!==void 0&&o!=null&&u(e,["instances[0]","image"],Dt(o));const i=l(t,["scribbleImage"]);return e!==void 0&&i!=null&&u(e,["instances[0]","scribble"],dI(i)),n}function jy(t){const e={},n=l(t,["languageCode"]);n!=null&&u(e,["languageCode"],n);const r=l(t,["voiceConfig"]);if(r!=null&&u(e,["voiceConfig"],r),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function gI(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],vC(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function yI(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const i=l(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],zC(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],JC(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function ev(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>_C(h))),u(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const o=l(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);const i=l(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function vI(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(t,["updateTime"]);return o!=null&&u(e,["updateTime"],o),e}function _I(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(t,["updateTime"]);return o!=null&&u(e,["updateTime"],o),e}function wI(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);e!==void 0&&o!=null&&u(e,["description"],o);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&u(e,["defaultCheckpointId"],i),n}function xI(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["description"]);e!==void 0&&o!=null&&u(e,["description"],o);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&u(e,["defaultCheckpointId"],i),n}function EI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],X(t,r));const o=l(e,["config"]);return o!=null&&wI(o,n),n}function SI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["config"]);return o!=null&&xI(o,n),n}function TI(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&u(e,["parameters","safetySetting"],o);const i=l(t,["personGeneration"]);e!==void 0&&i!=null&&u(e,["parameters","personGeneration"],i);const s=l(t,["includeRaiReason"]);e!==void 0&&s!=null&&u(e,["parameters","includeRaiReason"],s);const a=l(t,["outputMimeType"]);e!==void 0&&a!=null&&u(e,["parameters","outputOptions","mimeType"],a);const c=l(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&u(e,["parameters","outputOptions","compressionQuality"],c);const d=l(t,["enhanceInputImage"]);e!==void 0&&d!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=l(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=l(t,["labels"]);e!==void 0&&p!=null&&u(e,["labels"],p);const h=l(t,["numberOfImages"]);e!==void 0&&h!=null&&u(e,["parameters","sampleCount"],h);const g=l(t,["mode"]);return e!==void 0&&g!=null&&u(e,["parameters","mode"],g),n}function CI(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],X(t,r));const o=l(e,["image"]);o!=null&&u(n,["instances[0]","image"],Dt(o));const i=l(e,["upscaleFactor"]);i!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=l(e,["config"]);return s!=null&&TI(s,n),n}function II(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Fl(i))),u(e,["generatedImages"],o)}return e}function AI(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&u(e,["videoBytes"],Vn(r));const o=l(t,["encoding"]);return o!=null&&u(e,["mimeType"],o),e}function NI(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],Vn(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function RI(t){const e={},n=l(t,["image"]);n!=null&&u(e,["_self"],Dt(n));const r=l(t,["maskMode"]);return r!=null&&u(e,["maskMode"],r),e}function PI(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],Ul(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function kI(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],Dt(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function tv(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["encodedVideo"],Vn(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["encoding"],o),e}function nv(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Vn(r));const o=l(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MI="Content-Type",DI="X-Server-Timeout",LI="User-Agent",Wu="x-goog-api-client",FI="1.30.0",UI=`google-genai-sdk/${FI}`,bI="v1beta1",GI="v1beta",Vh=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class VI{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:bI,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:GI,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))o.searchParams.append(s,String(a));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.unaryApiCall(o,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[o,i]of Object.entries(n))typeof i=="object"?r[o]=Object.assign(Object.assign({},r[o]),i):i!==void 0&&(r[o]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.streamApiCall(o,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,o){if(n&&n.timeout||o){const i=new AbortController,s=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&BI(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Bh(o),new $u(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Bh(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return Xr(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="";for(;;){const{done:a,value:c}=yield se(o.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=i.decode(c,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const h=JSON.parse(JSON.stringify(p.error)),g=h.status,w=h.code,x=`got status: ${g}. ${JSON.stringify(p)}`;if(w>=400&&w<600)throw new Dl({message:x,status:w})}}catch(p){if(p.name==="ApiError")throw p}s+=d;let f=s.match(Vh);for(;f;){const p=f[1];try{const h=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield se(new $u(h)),s=s.slice(f[0].length),f=s.match(Vh)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=UI+" "+this.clientOptions.userAgentExtra;return e[LI]=n,e[Wu]=n,e[MI]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[o,i]of Object.entries(e.headers))r.append(o,i);e.timeout&&e.timeout>0&&r.append(DI,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const i=this.clientOptions.uploader,s=await i.stat(e);o.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const c={file:o},d=this.getFileName(e),f=D("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,d,c,n==null?void 0:n.httpOptions);return i.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var o;const i=this.clientOptions.uploader,s=await i.stat(n),a=String(s.size),c=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};r!=null&&r.customMetadata&&(p.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(p.chunkingConfig=r.chunkingConfig);const h=await this.fetchUploadUrl(d,a,c,f,p,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,o,i,s){var a;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(a=d==null?void 0:d.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Bh(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new Dl({message:o,status:n}):new Error(o)}}function BI(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,s){const a=Object.assign({},i);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=a[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?a[c]=r(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),a[c]=d)}return a}const o=r(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OI="mcp_used/unknown";let $I=!1;function rv(t){for(const e of t)if(HI(e)||typeof e=="object"&&"inputSchema"in e)return!0;return $I}function ov(t){var e;const n=(e=t[Wu])!==null&&e!==void 0?e:"";t[Wu]=(n+` ${OI}`).trimStart()}function HI(t){return t!==null&&typeof t=="object"&&t instanceof dd}function qI(t,e=100){return Xr(this,arguments,function*(){let r,o=0;for(;o<e;){const i=yield se(t.listTools({cursor:r}));for(const s of i.tools)yield yield se(s),o++;if(!i.nextCursor)break;r=i.nextCursor}})}class dd{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new dd(e,n)}async initialize(){var e,n,r,o;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var a=!0,c=(n=void 0,ei(qI(f))),d;d=await c.next(),e=d.done,!e;a=!0){o=d.value,a=!1;const p=o;s.push(p);const h=p.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=f}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),UE(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await o.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zI(t,e,n){const r=new NE;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),e(r)}class JI{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=KI(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`;let d=()=>{};const f=new Promise(v=>{d=v}),p=e.callbacks,h=function(){d({})},g=this.apiClient,w={onopen:h,onmessage:v=>{zI(g,p.onmessage,v)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(v){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(v){}},x=this.webSocketFactory.create(c,YI(s),w);x.connect(),await f;const y={setup:{model:X(this.apiClient,e.model)}};return x.send(JSON.stringify(y)),new WI(x,this.apiClient)}}class WI{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=DT(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=MT(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Or.PLAY)}pause(){this.sendPlaybackControl(Or.PAUSE)}stop(){this.sendPlaybackControl(Or.STOP)}resetContext(){this.sendPlaybackControl(Or.RESET_CONTEXT)}close(){this.conn.close()}}function YI(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function KI(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function QI(t,e,n){const r=new AE;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const i=JSON.parse(o);if(t.isVertexAI()){const s=UT(i);Object.assign(r,s)}else Object.assign(r,i);e(r)}class ZI{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new JI(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,o,i,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&rv(e.config.tools)&&ov(p);const h=nA(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{const N=this.apiClient.getApiKey();let R="BidiGenerateContent",U="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",U="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${R}?${U}=${N}`}let g=()=>{};const w=new Promise(N=>{g=N}),x=e.callbacks,C=function(){var N;(N=x==null?void 0:x.onopen)===null||N===void 0||N.call(x),g({})},_=this.apiClient,y={onopen:C,onmessage:N=>{QI(_,x.onmessage,N)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(N){}},v=this.webSocketFactory.create(f,tA(h),y);v.connect(),await w;let E=X(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const N=this.apiClient.getProject(),R=this.apiClient.getLocation();E=`projects/${N}/locations/${R}/`+E}let S={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[al.AUDIO]}:e.config.responseModalities=[al.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const I=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],T=[];for(const N of I)if(this.isCallableTool(N)){const R=N;T.push(await R.tool())}else T.push(N);T.length>0&&(e.config.tools=T);const k={model:E,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?S=kT(this.apiClient,k):S=PT(this.apiClient,k),delete S.config,v.send(JSON.stringify(S)),new eA(v,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const jI={turnComplete:!0};class eA{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=_t(n.turns),e.isVertexAI()||(r=r.map(o=>Ll(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(XI)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},jI),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:FT(e)}:n={realtimeInput:LT(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function tA(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function nA(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Oh=10;function $h(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Qr(s)){o=!0;break}if(!o)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Qr(t){return"callTool"in t&&typeof t.callTool=="function"}function rA(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Qr(o)))!==null&&r!==void 0?r:!1}function Hh(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,o)=>{if(Qr(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(o)}),n}function qh(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oA=class extends sn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,o,i,s,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!rA(n)||$h(n.config))return await this.generateContentInternal(c);const d=Hh(n);if(d.length>0){const x=d.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let f,p;const h=_t(c.contents),g=(i=(o=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:Oh;let w=0;for(;w<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const x=f.candidates[0].content,C=[];for(const _ of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Qr(_)){const v=await _.callTool(f.functionCalls);C.push(...v)}w++,p={role:"user",parts:C},c.contents=_t(c.contents),c.contents.push(x),c.contents.push(p),qh(c.config)&&(h.push(x),h.push(p))}return qh(c.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var r,o,i,s,a;if(this.maybeMoveToResponseJsonSchem(n),$h(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const c=Hh(n);if(c.length>0){const p=c.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(i=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let i;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((o=c==null?void 0:c.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:s.push(c);let a;return i?a={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new hr(rn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,i,s,a,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,o;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const s=await Promise.all(i.map(async c=>Qr(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&rv(e.config.tools)){const c=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),ov(d),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return a}async initAfcToolsMap(e){var n,r,o;const i=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Qr(s)){const a=s,c=await a.tool();for(const d of(o=c.functionDeclarations)!==null&&o!==void 0?o:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,a)}}return i}async processAfcStream(e){var n,r,o;const i=(o=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Oh;let s=!1,a=0;const c=await this.initAfcToolsMap(e);return function(d,f,p){var h,g;return Xr(this,arguments,function*(){for(var w,x,C,_;a<i;){s&&(a++,s=!1);const S=yield se(d.processParamsMaybeAddMcpUsage(p)),I=yield se(d.generateContentStreamInternal(S)),T=[],k=[];try{for(var y=!0,v=(x=void 0,ei(I)),E;E=yield se(v.next()),w=E.done,!w;y=!0){_=E.value,y=!1;const N=_;if(yield yield se(N),N.candidates&&(!((h=N.candidates[0])===null||h===void 0)&&h.content)){k.push(N.candidates[0].content);for(const R of(g=N.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(a<i&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(R.functionCall.name)){const U=yield se(f.get(R.functionCall.name).callTool([R.functionCall]));T.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(N){x={error:N}}finally{try{!y&&!w&&(C=v.return)&&(yield se(C.call(v)))}finally{if(x)throw x.error}}if(T.length>0){s=!0;const N=new ko;N.candidates=[{content:{role:"user",parts:T}}],yield yield se(N);const R=[];R.push(...k),R.push({role:"user",parts:T});const U=_t(p.contents).concat(R);p.contents=U}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=Uh(this.apiClient,e);return a=D("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=Gh(f),h=new ko;return Object.assign(h,p),h})}else{const d=Fh(this.apiClient,e);return a=D("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=bh(f),h=new ko;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=Uh(this.apiClient,e);return a=D("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Xr(this,arguments,function*(){var h,g,w,x;try{for(var C=!0,_=ei(p),y;y=yield se(_.next()),h=y.done,!h;C=!0){x=y.value,C=!1;const v=x,E=Gh(yield se(v.json()));E.sdkHttpResponse={headers:v.headers};const S=new ko;Object.assign(S,E),yield yield se(S)}}catch(v){g={error:v}}finally{try{!C&&!h&&(w=_.return)&&(yield se(w.call(_)))}finally{if(g)throw g.error}}})})}else{const d=Fh(this.apiClient,e);return a=D("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return Xr(this,arguments,function*(){var h,g,w,x;try{for(var C=!0,_=ei(p),y;y=yield se(_.next()),h=y.done,!h;C=!0){x=y.value,C=!1;const v=x,E=bh(yield se(v.json()));E.sdkHttpResponse={headers:v.headers};const S=new ko;Object.assign(S,E),yield yield se(S)}}catch(v){g={error:v}}finally{try{!C&&!h&&(w=_.return)&&(yield se(w.call(_)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=fC(this.apiClient,e);return a=D("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=hC(f),h=new _h;return Object.assign(h,p),h})}else{const d=dC(this.apiClient,e);return a=D("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=pC(f),h=new _h;return Object.assign(h,p),h})}}async generateImagesInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=CC(this.apiClient,e);return a=D("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=AC(f),h=new wh;return Object.assign(h,p),h})}else{const d=TC(this.apiClient,e);return a=D("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=IC(f),h=new wh;return Object.assign(h,p),h})}}async editImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=lC(this.apiClient,e);return i=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=aC(c),f=new gE;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=CI(this.apiClient,e);return i=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=II(c),f=new yE;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=sI(this.apiClient,e);return i=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=lI(c),f=new vE;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=pI(this.apiClient,e);return i=D("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=hI(c),f=new _E;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=qC(this.apiClient,e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ju(f))}else{const d=HC(this.apiClient,e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>zu(f))}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=jC(this.apiClient,e);return a=D("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=tI(f),h=new xh;return Object.assign(h,p),h})}else{const d=ZC(this.apiClient,e);return a=D("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=eI(f),h=new xh;return Object.assign(h,p),h})}}async update(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=SI(this.apiClient,e);return a=D("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Ju(f))}else{const d=EI(this.apiClient,e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>zu(f))}}async delete(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=rC(this.apiClient,e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=iC(f),h=new Eh;return Object.assign(h,p),h})}else{const d=nC(this.apiClient,e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=oC(f),h=new Eh;return Object.assign(h,p),h})}}async countTokens(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=jT(this.apiClient,e);return a=D("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=tC(f),h=new Sh;return Object.assign(h,p),h})}else{const d=ZT(this.apiClient,e);return a=D("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=eC(f),h=new Sh;return Object.assign(h,p),h})}}async computeTokens(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=zT(this.apiClient,e);return i=D("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>{const d=JT(c),f=new wE;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=DC(this.apiClient,e);return a=D("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const p=kC(f),h=new ul;return Object.assign(h,p),h})}else{const d=MC(this.apiClient,e);return a=D("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const p=PC(f),h=new ul;return Object.assign(h,p),h})}}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iA extends sn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=cE(e);return a=D("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const d=uE(e);return a=D("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=nE(e);return i=D("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sA(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function lA(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>gA(i))),u(e,["parts"],o)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function aA(t,e,n){const r={},o=l(e,["expireTime"]);n!==void 0&&o!=null&&u(n,["expireTime"],o);const i=l(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&u(n,["newSessionExpireTime"],i);const s=l(e,["uses"]);n!==void 0&&s!=null&&u(n,["uses"],s);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&u(n,["bidiGenerateContentSetup"],mA(t,a));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),r}function uA(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],aA(t,r,n)),n}function cA(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function dA(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const o=l(t,["name"]);if(o!=null&&u(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fA(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function pA(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function hA(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","responseModalities"],o);const i=l(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","speechConfig"],cd(p));const h=l(t,["thinkingConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","thinkingConfig"],h);const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);const w=l(t,["systemInstruction"]);e!==void 0&&w!=null&&u(e,["setup","systemInstruction"],lA(Be(w)));const x=l(t,["tools"]);if(e!==void 0&&x!=null){let I=po(x);Array.isArray(I)&&(I=I.map(T=>vA(fo(T)))),u(e,["setup","tools"],I)}const C=l(t,["sessionResumption"]);e!==void 0&&C!=null&&u(e,["setup","sessionResumption"],yA(C));const _=l(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&u(e,["setup","inputAudioTranscription"],_);const y=l(t,["outputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","outputAudioTranscription"],y);const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],v);const E=l(t,["contextWindowCompression"]);e!==void 0&&E!=null&&u(e,["setup","contextWindowCompression"],E);const S=l(t,["proactivity"]);return e!==void 0&&S!=null&&u(e,["setup","proactivity"],S),n}function mA(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],X(t,r));const o=l(e,["config"]);return o!=null&&u(n,["config"],hA(o,n)),n}function gA(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const o=l(t,["executableCode"]);o!=null&&u(e,["executableCode"],o);const i=l(t,["fileData"]);i!=null&&u(e,["fileData"],cA(i));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],dA(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],sA(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const p=l(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);const h=l(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function yA(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vA(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],o);const i=l(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],fA(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],pA(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _A(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(i=>`${n}.${i}`);e.push(...o)}else e.push(n)}return e.join(",")}function wA(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const i=_A(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class xA extends sn{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=uA(this.apiClient,e);i=D("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const c=wA(a,e.config);return o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EA(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&u(e,["displayName"],r),n}function SA(t){const e={},n=l(t,["config"]);return n!=null&&EA(n,e),e}function TA(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&u(e,["_query","force"],r),n}function CA(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&TA(r,e),e}function IA(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function AA(t,e){const n={},r=l(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["customMetadata"],i)}const o=l(t,["chunkingConfig"]);return e!==void 0&&o!=null&&u(e,["chunkingConfig"],o),n}function NA(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const o=l(t,["done"]);o!=null&&u(e,["done"],o);const i=l(t,["error"]);i!=null&&u(e,["error"],i);const s=l(t,["response"]);return s!=null&&u(e,["response"],PA(s)),e}function RA(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);const r=l(t,["fileName"]);r!=null&&u(e,["fileName"],r);const o=l(t,["config"]);return o!=null&&AA(o,e),e}function PA(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const o=l(t,["documentName"]);return o!=null&&u(e,["documentName"],o),e}function kA(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function MA(t){const e={},n=l(t,["config"]);return n!=null&&kA(n,e),e}function DA(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["fileSearchStores"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["fileSearchStores"],i)}return e}function LA(t,e){const n={},r=l(t,["mimeType"]);e!==void 0&&r!=null&&u(e,["mimeType"],r);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const i=l(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>c)),u(e,["customMetadata"],a)}const s=l(t,["chunkingConfig"]);return e!==void 0&&s!=null&&u(e,["chunkingConfig"],s),n}function FA(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);const r=l(t,["config"]);return r!=null&&LA(r,e),e}function UA(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bA(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&u(e,["_query","force"],r),n}function GA(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&bA(r,e),e}function VA(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function BA(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&u(e,["_query","pageToken"],o),n}function OA(t){const e={},n=l(t,["parent"]);n!=null&&u(e,["_url","parent"],n);const r=l(t,["config"]);return r!=null&&BA(r,e),e}function $A(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const o=l(t,["documents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HA extends sn{constructor(e){super(),this.apiClient=e,this.list=async n=>new hr(rn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=VA(e);return i=D("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=GA(e);o=D("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=OA(e);return i=D("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=$A(c),f=new xE;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qA extends sn{constructor(e,n=new HA(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new hr(rn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=SA(e);return i=D("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async get(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=IA(e);return i=D("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=CA(e);o=D("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=MA(e);return i=D("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=DA(c),f=new EE;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=FA(e);return i=D("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=UA(c),f=new SE;return Object.assign(f,d),f})}}async importFile(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=RA(e);return i=D("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>{const d=NA(c),f=new id;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zA(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function JA(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function WA(t,e,n){const r={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=l(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&u(e,["displayName"],o),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&u(e,["tuningTask","hyperparameters","epochCount"],i);const s=l(t,["learningRateMultiplier"]);if(s!=null&&u(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=l(t,["batchSize"]);e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","batchSize"],a);const c=l(t,["learningRate"]);if(e!==void 0&&c!=null&&u(e,["tuningTask","hyperparameters","learningRate"],c),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function YA(t,e,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec"],zh(g))}else if(o==="PREFERENCE_TUNING"){const g=l(t,["validationDataset"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec"],zh(g))}const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&u(e,["tunedModelDisplayName"],i);const s=l(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);let a=l(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=l(t,["epochCount"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){const g=l(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){const g=l(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=l(t,["adapterSize"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=l(t,["labels"]);e!==void 0&&p!=null&&u(e,["labels"],p);const h=l(t,["beta"]);return e!==void 0&&h!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function KA(t,e){const n={},r=l(t,["baseModel"]);r!=null&&u(n,["baseModel"],r);const o=l(t,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const i=l(t,["trainingDataset"]);i!=null&&sN(i);const s=l(t,["config"]);return s!=null&&WA(s,n),n}function XA(t,e){const n={},r=l(t,["baseModel"]);r!=null&&u(n,["baseModel"],r);const o=l(t,["preTunedModel"]);o!=null&&u(n,["preTunedModel"],o);const i=l(t,["trainingDataset"]);i!=null&&lN(i,n,e);const s=l(t,["config"]);return s!=null&&YA(s,n,e),n}function QA(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function ZA(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function jA(t,e,n){const r={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),r}function eN(t,e,n){const r={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),r}function tN(t,e){const n={},r=l(t,["config"]);return r!=null&&jA(r,n),n}function nN(t,e){const n={},r=l(t,["config"]);return r!=null&&eN(r,n),n}function rN(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const i=l(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>iv(a))),u(n,["tuningJobs"],s)}return n}function oN(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["nextPageToken"]);o!=null&&u(n,["nextPageToken"],o);const i=l(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Yu(a))),u(n,["tuningJobs"],s)}return n}function iN(t,e){const n={},r=l(t,["name"]);r!=null&&u(n,["model"],r);const o=l(t,["name"]);return o!=null&&u(n,["endpoint"],o),n}function sN(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=l(t,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),u(n,["examples","examples"],o)}return n}function lN(t,e,n){const r={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function iv(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const i=l(t,["state"]);i!=null&&u(n,["state"],By(i));const s=l(t,["createTime"]);s!=null&&u(n,["createTime"],s);const a=l(t,["tuningTask","startTime"]);a!=null&&u(n,["startTime"],a);const c=l(t,["tuningTask","completeTime"]);c!=null&&u(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=l(t,["description"]);f!=null&&u(n,["description"],f);const p=l(t,["baseModel"]);p!=null&&u(n,["baseModel"],p);const h=l(t,["_self"]);return h!=null&&u(n,["tunedModel"],iN(h)),n}function Yu(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const i=l(t,["state"]);i!=null&&u(n,["state"],By(i));const s=l(t,["createTime"]);s!=null&&u(n,["createTime"],s);const a=l(t,["startTime"]);a!=null&&u(n,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=l(t,["error"]);f!=null&&u(n,["error"],f);const p=l(t,["description"]);p!=null&&u(n,["description"],p);const h=l(t,["baseModel"]);h!=null&&u(n,["baseModel"],h);const g=l(t,["tunedModel"]);g!=null&&u(n,["tunedModel"],g);const w=l(t,["preTunedModel"]);w!=null&&u(n,["preTunedModel"],w);const x=l(t,["supervisedTuningSpec"]);x!=null&&u(n,["supervisedTuningSpec"],x);const C=l(t,["preferenceOptimizationSpec"]);C!=null&&u(n,["preferenceOptimizationSpec"],C);const _=l(t,["tuningDataStats"]);_!=null&&u(n,["tuningDataStats"],_);const y=l(t,["encryptionSpec"]);y!=null&&u(n,["encryptionSpec"],y);const v=l(t,["partnerModelTuningSpec"]);v!=null&&u(n,["partnerModelTuningSpec"],v);const E=l(t,["customBaseModel"]);E!=null&&u(n,["customBaseModel"],E);const S=l(t,["experiment"]);S!=null&&u(n,["experiment"],S);const I=l(t,["labels"]);I!=null&&u(n,["labels"],I);const T=l(t,["outputUri"]);T!=null&&u(n,["outputUri"],T);const k=l(t,["pipelineJob"]);k!=null&&u(n,["pipelineJob"],k);const N=l(t,["serviceAccount"]);N!=null&&u(n,["serviceAccount"],N);const R=l(t,["tunedModelDisplayName"]);R!=null&&u(n,["tunedModelDisplayName"],R);const U=l(t,["veoTuningSpec"]);return U!=null&&u(n,["veoTuningSpec"],U),n}function aN(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const o=l(t,["name"]);o!=null&&u(n,["name"],o);const i=l(t,["metadata"]);i!=null&&u(n,["metadata"],i);const s=l(t,["done"]);s!=null&&u(n,["done"],s);const a=l(t,["error"]);return a!=null&&u(n,["error"],a),n}function zh(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["validationDatasetUri"],r);const o=l(t,["vertexDatasetResource"]);return o!=null&&u(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uN extends sn{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new hr(rn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),i=await this.tuneMldevInternal(o);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:Ou.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=ZA(e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Yu(f))}else{const d=QA(e);return a=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>iv(f))}}async listInternal(e){var n,r,o,i;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=nN(e);return a=D("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=oN(f),h=new Th;return Object.assign(h,p),h})}else{const d=tN(e);return a=D("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{const p=rN(f),h=new Th;return Object.assign(h,p),h})}}async cancel(e){var n,r,o,i;let s="",a={};if(this.apiClient.isVertexAI()){const c=JA(e);s=D("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=zA(e);s=D("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){const a=XA(e,e);return i=D("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>Yu(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=KA(e);return i=D("tunedModels",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),o.then(c=>aN(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cN{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const dN=1024*1024*8,fN=3,pN=1e3,hN=2,dl="x-goog-upload-status";async function mN(t,e,n){var r;const o=await sv(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[dl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function gN(t,e,n){var r;const o=await sv(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[dl])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Ly(i),a=new sd;return Object.assign(a,s),a}async function sv(t,e,n){var r,o;let i=0,s=0,a=new $u(new Response),c="upload";for(i=t.size;s<i;){const d=Math.min(dN,i-s),f=t.slice(s,s+d);s+d>=i&&(c+=", finalize");let p=0,h=pN;for(;p<fN&&(a=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[dl]));)p++,await vN(h),h=h*hN;if(s+=d,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[dl])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function yN(t){return{size:t.size,type:t.type}}function vN(t){return new Promise(e=>setTimeout(e,t))}class _N{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mN(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gN(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yN(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wN{create(e,n,r){return new xN(e,n,r)}}class xN{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jh="x-goog-api-key";class EN{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Jh)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Jh,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SN="gl-node/";class fd{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=eE(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const o=new EN(this.apiKey);this.apiClient=new VI({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:SN+"web",uploader:new _N,downloader:new cN}),this.models=new oA(this.apiClient),this.live=new ZI(this.apiClient,o,new wN),this.batches=new RS(this.apiClient),this.chats=new cT(this.models,this.apiClient),this.caches=new lT(this.apiClient),this.files=new wT(this.apiClient),this.operations=new iA(this.apiClient),this.authTokens=new xA(this.apiClient),this.tunings=new uN(this.apiClient),this.fileSearchStores=new qA(this.apiClient)}}const Ku="RFC3986",Xu={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:t=>String(t)},TN="RFC1738",CN=Array.isArray,bt=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),Da=1024,IN=(t,e,n,r,o)=>{if(t.length===0)return t;let i=t;if(typeof t=="symbol"?i=Symbol.prototype.toString.call(t):typeof t!="string"&&(i=String(t)),n==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let s="";for(let a=0;a<i.length;a+=Da){const c=i.length>=Da?i.slice(a,a+Da):i,d=[];for(let f=0;f<c.length;++f){let p=c.charCodeAt(f);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||o===TN&&(p===40||p===41)){d[d.length]=c.charAt(f);continue}if(p<128){d[d.length]=bt[p];continue}if(p<2048){d[d.length]=bt[192|p>>6]+bt[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=bt[224|p>>12]+bt[128|p>>6&63]+bt[128|p&63];continue}f+=1,p=65536+((p&1023)<<10|c.charCodeAt(f)&1023),d[d.length]=bt[240|p>>18]+bt[128|p>>12&63]+bt[128|p>>6&63]+bt[128|p&63]}s+=d.join("")}return s};function AN(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Wh(t,e){if(CN(t)){const n=[];for(let r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)}const NN=Object.prototype.hasOwnProperty,lv={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Vt=Array.isArray,RN=Array.prototype.push,av=function(t,e){RN.apply(t,Vt(e)?e:[e])},PN=Date.prototype.toISOString,Se={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:IN,encodeValuesOnly:!1,format:Ku,formatter:Xu[Ku],indices:!1,serializeDate(t){return PN.call(t)},skipNulls:!1,strictNullHandling:!1};function kN(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const La={};function uv(t,e,n,r,o,i,s,a,c,d,f,p,h,g,w,x,C,_){let y=t,v=_,E=0,S=!1;for(;(v=v.get(La))!==void 0&&!S;){const R=v.get(t);if(E+=1,typeof R<"u"){if(R===E)throw new RangeError("Cyclic object value");S=!0}typeof v.get(La)>"u"&&(E=0)}if(typeof d=="function"?y=d(e,y):y instanceof Date?y=h==null?void 0:h(y):n==="comma"&&Vt(y)&&(y=Wh(y,function(R){return R instanceof Date?h==null?void 0:h(R):R})),y===null){if(i)return c&&!x?c(e,Se.encoder,C,"key",g):e;y=""}if(kN(y)||AN(y)){if(c){const R=x?e:c(e,Se.encoder,C,"key",g);return[(w==null?void 0:w(R))+"="+(w==null?void 0:w(c(y,Se.encoder,C,"value",g)))]}return[(w==null?void 0:w(e))+"="+(w==null?void 0:w(String(y)))]}const I=[];if(typeof y>"u")return I;let T;if(n==="comma"&&Vt(y))x&&c&&(y=Wh(y,c)),T=[{value:y.length>0?y.join(",")||null:void 0}];else if(Vt(d))T=d;else{const R=Object.keys(y);T=f?R.sort(f):R}const k=a?String(e).replace(/\./g,"%2E"):String(e),N=r&&Vt(y)&&y.length===1?k+"[]":k;if(o&&Vt(y)&&y.length===0)return N+"[]";for(let R=0;R<T.length;++R){const U=T[R],q=typeof U=="object"&&typeof U.value<"u"?U.value:y[U];if(s&&q===null)continue;const ye=p&&a?U.replace(/\./g,"%2E"):U,$e=Vt(y)?typeof n=="function"?n(N,ye):N:N+(p?"."+ye:"["+ye+"]");_.set(t,E);const Et=new WeakMap;Et.set(La,_),av(I,uv(q,$e,n,r,o,i,s,a,n==="comma"&&x&&Vt(y)?null:c,d,f,p,h,g,w,x,C,Et))}return I}function MN(t=Se){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Se.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Ku;if(typeof t.format<"u"){if(!NN.call(Xu,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const r=Xu[n];let o=Se.filter;(typeof t.filter=="function"||Vt(t.filter))&&(o=t.filter);let i;if(t.arrayFormat&&t.arrayFormat in lv?i=t.arrayFormat:"indices"in t?i=t.indices?"indices":"repeat":i=Se.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const s=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Se.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Se.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Se.allowEmptyArrays,arrayFormat:i,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Se.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Se.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Se.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Se.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Se.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Se.encodeValuesOnly,filter:o,format:n,formatter:r,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Se.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Se.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Se.strictNullHandling}}function DN(t,e={}){let n=t;const r=MN(e);let o,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):Vt(r.filter)&&(i=r.filter,o=i);const s=[];if(typeof n!="object"||n===null)return"";const a=lv[r.arrayFormat],c=a==="comma"&&r.commaRoundTrip;o||(o=Object.keys(n)),r.sort&&o.sort(r.sort);const d=new WeakMap;for(let h=0;h<o.length;++h){const g=o[h];r.skipNulls&&n[g]===null||av(s,uv(n[g],g,a,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}const f=s.join(r.delimiter);let p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""}const Ir="4.104.0";let Yh=!1,ti,cv,dv,Qu,fv,pv,hv,mv,gv;function LN(t,e={auto:!1}){if(Yh)throw new Error(`you must \`import 'openai/shims/${t.kind}'\` before importing anything else from openai`);if(ti)throw new Error(`can't \`import 'openai/shims/${t.kind}'\` after \`import 'openai/shims/${ti}'\``);Yh=e.auto,ti=t.kind,cv=t.fetch,dv=t.FormData,Qu=t.File,fv=t.ReadableStream,pv=t.getMultipartRequestOptions,hv=t.getDefaultAgent,mv=t.fileFromPath,gv=t.isFsReadStream}class FN{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function UN({manuallyImported:t}={}){const e=t?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,o,i;try{n=fetch,r=Request,o=Response,i=Headers}catch(s){throw new Error(`this environment is missing the following Web Fetch API type: ${s.message}. ${e}`)}return{kind:"web",fetch:n,Request:r,Response:o,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(s,a)=>({...a,body:new FN(s)}),getDefaultAgent:s=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:s=>!1}}const yv=()=>{ti||LN(UN(),{auto:!0})};yv();class B extends Error{}class Le extends B{constructor(e,n,r,o){super(`${Le.makeMessage(e,n,r)}`),this.status=e,this.headers=o,this.request_id=o==null?void 0:o["x-request-id"],this.error=n;const i=n;this.code=i==null?void 0:i.code,this.param=i==null?void 0:i.param,this.type=i==null?void 0:i.type}static makeMessage(e,n,r){const o=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,n,r,o){if(!e||!o)return new bl({message:r,cause:ju(n)});const i=n==null?void 0:n.error;return e===400?new vv(e,i,r,o):e===401?new _v(e,i,r,o):e===403?new wv(e,i,r,o):e===404?new xv(e,i,r,o):e===409?new Ev(e,i,r,o):e===422?new Sv(e,i,r,o):e===429?new Tv(e,i,r,o):e>=500?new Cv(e,i,r,o):new Le(e,i,r,o)}}class yt extends Le{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class bl extends Le{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class pd extends bl{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vv extends Le{}class _v extends Le{}class wv extends Le{}class xv extends Le{}class Ev extends Le{}class Sv extends Le{}class Tv extends Le{}class Cv extends Le{}class Iv extends B{constructor(){super("Could not parse response content as the length limit was reached")}}class Av extends B{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var rs=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Yn=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},rt;class Gl{constructor(){rt.set(this,void 0),this.buffer=new Uint8Array,rs(this,rt,null,"f")}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+n.length);r.set(this.buffer),r.set(n,this.buffer.length),this.buffer=r;const o=[];let i;for(;(i=bN(this.buffer,Yn(this,rt,"f")))!=null;){if(i.carriage&&Yn(this,rt,"f")==null){rs(this,rt,i.index,"f");continue}if(Yn(this,rt,"f")!=null&&(i.index!==Yn(this,rt,"f")+1||i.carriage)){o.push(this.decodeText(this.buffer.slice(0,Yn(this,rt,"f")-1))),this.buffer=this.buffer.slice(Yn(this,rt,"f")),rs(this,rt,null,"f");continue}const s=Yn(this,rt,"f")!==null?i.preceding-1:i.preceding,a=this.decodeText(this.buffer.slice(0,s));o.push(a),this.buffer=this.buffer.slice(i.index),rs(this,rt,null,"f")}return o}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new B(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new B(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new B("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}rt=new WeakMap;Gl.NEWLINE_CHARS=new Set([`
`,"\r"]);Gl.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function bN(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function GN(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}function Nv(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class $t{constructor(e,n){this.iterator=e,this.controller=n}static fromSSEResponse(e,n){let r=!1;async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const s of VN(e,n))if(!i){if(s.data.startsWith("[DONE]")){i=!0;continue}if(s.event===null||s.event.startsWith("response.")||s.event.startsWith("transcript.")){let a;try{a=JSON.parse(s.data)}catch(c){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),c}if(a&&a.error)throw new Le(void 0,a.error,void 0,Fv(e.headers));yield a}else{let a;try{a=JSON.parse(s.data)}catch(c){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),c}if(s.event=="error")throw new Le(void 0,a.error,a.message,void 0);yield{event:s.event,data:a}}}i=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{i||n.abort()}}return new $t(o,n)}static fromReadableStream(e,n){let r=!1;async function*o(){const s=new Gl,a=Nv(e);for await(const c of a)for(const d of s.decode(c))yield d;for(const c of s.flush())yield c}async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let s=!1;try{for await(const a of o())s||a&&(yield JSON.parse(a));s=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{s||n.abort()}}return new $t(i,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),o=i=>({next:()=>{if(i.length===0){const s=r.next();e.push(s),n.push(s)}return i.shift()}});return[new $t(()=>o(e),this.controller),new $t(()=>o(n),this.controller)]}toReadableStream(){const e=this;let n;const r=new TextEncoder;return new fv({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:i,done:s}=await n.next();if(s)return o.close();const a=r.encode(JSON.stringify(i)+`
`);o.enqueue(a)}catch(i){o.error(i)}},async cancel(){var o;await((o=n.return)==null?void 0:o.call(n))}})}}async function*VN(t,e){if(!t.body)throw e.abort(),new B("Attempted to iterate over a response with no body");const n=new ON,r=new Gl,o=Nv(t.body);for await(const i of BN(o))for(const s of r.decode(i)){const a=n.decode(s);a&&(yield a)}for(const i of r.flush()){const s=n.decode(i);s&&(yield s)}}async function*BN(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const r=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?new TextEncoder().encode(n):n;let o=new Uint8Array(e.length+r.length);o.set(e),o.set(r,e.length),e=o;let i;for(;(i=GN(e))!==-1;)yield e.slice(0,i),e=e.slice(i)}e.length>0&&(yield e)}class ON{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,o]=$N(e,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function $N(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}const Rv=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function",Pv=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Vl(t),Vl=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",HN=t=>Pv(t)||Rv(t)||gv(t);async function kv(t,e,n){var o;if(t=await t,Pv(t))return t;if(Rv(t)){const i=await t.blob();e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=Vl(i)?[await i.arrayBuffer()]:[i];return new Qu(s,e,n)}const r=await qN(t);if(e||(e=JN(t)??"unknown_file"),!(n!=null&&n.type)){const i=(o=r[0])==null?void 0:o.type;typeof i=="string"&&(n={...n,type:i})}return new Qu(r,e,n)}async function qN(t){var n;let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Vl(t))e.push(await t.arrayBuffer());else if(WN(t))for await(const r of t)e.push(r);else throw new Error(`Unexpected data type: ${typeof t}; constructor: ${(n=t==null?void 0:t.constructor)==null?void 0:n.name}; props: ${zN(t)}`);return e}function zN(t){return`[${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}function JN(t){var e;return Fa(t.name)||Fa(t.filename)||((e=Fa(t.path))==null?void 0:e.split(/[\\/]/).pop())}const Fa=t=>{if(typeof t=="string")return t;if(typeof Buffer<"u"&&t instanceof Buffer)return String(t)},WN=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Kh=t=>t&&typeof t=="object"&&t.body&&t[Symbol.toStringTag]==="MultipartBody",dr=async t=>{const e=await YN(t.body);return pv(e,t)},YN=async t=>{const e=new dv;return await Promise.all(Object.entries(t||{}).map(([n,r])=>Zu(e,n,r))),e},Zu=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(HN(n)){const r=await kv(n);t.append(e,r)}else if(Array.isArray(n))await Promise.all(n.map(r=>Zu(t,e+"[]",r)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([r,o])=>Zu(t,`${e}[${r}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}};var Zr={},KN=function(t,e,n,r,o){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n},XN=function(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},os;yv();async function Mv(t){var s;const{response:e}=t;if(t.options.stream)return Dn("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller):$t.fromSSEResponse(e,t.controller);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const n=e.headers.get("content-type"),r=(s=n==null?void 0:n.split(";")[0])==null?void 0:s.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const a=await e.json();return Dn("response",e.status,e.url,e.headers,a),Dv(a,e)}const i=await e.text();return Dn("response",e.status,e.url,e.headers,i),i}function Dv(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class Bl extends Promise{constructor(e,n=Mv){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=n}_thenUnwrap(e){return new Bl(this.responsePromise,async n=>Dv(e(await this.parseResponse(n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class QN{constructor({baseURL:e,maxRetries:n=2,timeout:r=6e5,httpAgent:o,fetch:i}){this.baseURL=e,this.maxRetries=Ua("maxRetries",n),this.timeout=Ua("timeout",r),this.httpAgent=o,this.fetch=i??cv}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...nR(),...this.authHeaders(e)}}validateHeaders(e,n){}defaultIdempotencyKey(){return`stainless-node-retry-${sR()}`}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(async o=>{const i=o&&Vl(o==null?void 0:o.body)?new DataView(await o.body.arrayBuffer()):(o==null?void 0:o.body)instanceof DataView?o.body:(o==null?void 0:o.body)instanceof ArrayBuffer?new DataView(o.body):o&&ArrayBuffer.isView(o==null?void 0:o.body)?new DataView(o.body.buffer):o==null?void 0:o.body;return{method:e,path:n,...o,body:i}}))}getAPIList(e,n,r){return this.requestAPIList(n,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:n=0}={}){var x;const r={...e},{method:o,path:i,query:s,headers:a={}}=r,c=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:Kh(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,d=this.calculateContentLength(c),f=this.buildURL(i,s);"timeout"in r&&Ua("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const p=r.httpAgent??this.httpAgent??hv(f),h=r.timeout+1e3;typeof((x=p==null?void 0:p.options)==null?void 0:x.timeout)=="number"&&h>(p.options.timeout??0)&&(p.options.timeout=h),this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const g=this.buildHeaders({options:r,headers:a,contentLength:d,retryCount:n});return{req:{method:o,...c&&{body:c},headers:g,...p&&{agent:p},signal:r.signal??null},url:f,timeout:r.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:o}){const i={};r&&(i["content-length"]=r);const s=this.defaultHeaders(e);return jh(i,s),jh(i,n),Kh(e.body)&&ti!=="node"&&delete i["content-type"],ss(s,"x-stainless-retry-count")===void 0&&ss(n,"x-stainless-retry-count")===void 0&&(i["x-stainless-retry-count"]=String(o)),ss(s,"x-stainless-timeout")===void 0&&ss(n,"x-stainless-timeout")===void 0&&e.timeout&&(i["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(i,n),i}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(n=>[...n])):{...e}:{}}makeStatusError(e,n,r,o){return Le.generate(e,n,r,o)}request(e,n=null){return new Bl(this.makeRequest(e,n))}async makeRequest(e,n){var p,h;const r=await e,o=r.maxRetries??this.maxRetries;n==null&&(n=o),await this.prepareOptions(r);const{req:i,url:s,timeout:a}=this.buildRequest(r,{retryCount:o-n});if(await this.prepareRequest(i,{url:s,options:r}),Dn("request",s,r,i.headers),(p=r.signal)!=null&&p.aborted)throw new yt;const c=new AbortController,d=await this.fetchWithTimeout(s,i,a,c).catch(ju);if(d instanceof Error){if((h=r.signal)!=null&&h.aborted)throw new yt;if(n)return this.retryRequest(r,n);throw d.name==="AbortError"?new pd:new bl({cause:d})}const f=Fv(d.headers);if(!d.ok){if(n&&this.shouldRetry(d)){const y=`retrying, ${n} attempts remaining`;return Dn(`response (error; ${y})`,d.status,s,f),this.retryRequest(r,n,f)}const g=await d.text().catch(y=>ju(y).message),w=rR(g),x=w?void 0:g;throw Dn(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,d.status,s,f,x),this.makeStatusError(d.status,w,x,f)}return{response:d,options:r,controller:c}}requestAPIList(e,n){const r=this.makeRequest(n,null);return new ZN(this,r,e)}buildURL(e,n){const r=iR(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Uv(o)||(n={...o,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new B(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,n,r,o){const{signal:i,...s}=n||{};i&&i.addEventListener("abort",()=>o.abort());const a=setTimeout(()=>o.abort(),r),c={signal:o.signal,...s};return c.method&&(c.method=c.method.toUpperCase()),this.fetch.call(void 0,e,c).finally(()=>{clearTimeout(a)})}shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r){let o;const i=r==null?void 0:r["retry-after-ms"];if(i){const a=parseFloat(i);Number.isNaN(a)||(o=a)}const s=r==null?void 0:r["retry-after"];if(s&&!o){const a=parseFloat(s);Number.isNaN(a)?o=Date.parse(s)-Date.now():o=a*1e3}if(!(o&&0<=o&&o<60*1e3)){const a=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,a)}return await Ni(o),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,n){const i=n-e,s=Math.min(.5*Math.pow(2,i),8),a=1-Math.random()*.25;return s*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Ir}`}}class Lv{constructor(e,n,r,o){os.set(this,void 0),KN(this,os,e),this.options=o,this.response=n,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new B("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const n={...this.options};if("params"in e&&typeof n.query=="object")n.query={...n.query,...e.params};else if("url"in e){const r=[...Object.entries(n.query||{}),...e.url.searchParams.entries()];for(const[o,i]of r)e.url.searchParams.set(o,i);n.query=void 0,n.path=e.url.toString()}return await XN(this,os,"f").requestAPIList(this.constructor,n)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(os=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class ZN extends Bl{constructor(e,n,r){super(n,async o=>new r(e,o.response,await Mv(o),o.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}const Fv=t=>new Proxy(Object.fromEntries(t.entries()),{get(e,n){const r=n.toString();return e[r.toLowerCase()]||e[r]}}),jN={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},ge=t=>typeof t=="object"&&t!==null&&!Uv(t)&&Object.keys(t).every(e=>bv(jN,e)),eR=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":Qh(Deno.build.os),"X-Stainless-Arch":Xh(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":Qh(process.platform),"X-Stainless-Arch":Xh(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=tR();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function tR(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const o=r[1]||0,i=r[2]||0,s=r[3]||0;return{browser:e,version:`${o}.${i}.${s}`}}}return null}const Xh=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Qh=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Zh;const nR=()=>Zh??(Zh=eR()),rR=t=>{try{return JSON.parse(t)}catch{return}},oR=/^[a-z][a-z0-9+.-]*:/i,iR=t=>oR.test(t),Ni=t=>new Promise(e=>setTimeout(e,t)),Ua=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new B(`${t} must be an integer`);if(e<0)throw new B(`${t} must be a positive integer`);return e},ju=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null)try{return new Error(JSON.stringify(t))}catch{}return new Error(t)},is=t=>{var e,n,r,o;if(typeof process<"u")return((e=Zr==null?void 0:Zr[t])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(o=(r=(n=Deno.env)==null?void 0:n.get)==null?void 0:r.call(n,t))==null?void 0:o.trim()};function Uv(t){if(!t)return!0;for(const e in t)return!1;return!0}function bv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function jh(t,e){for(const n in e){if(!bv(e,n))continue;const r=n.toLowerCase();if(!r)continue;const o=e[n];o===null?delete t[r]:o!==void 0&&(t[r]=o)}}const em=new Set(["authorization","api-key"]);function Dn(t,...e){if(typeof process<"u"&&(Zr==null?void 0:Zr.DEBUG)==="true"){const n=e.map(r=>{if(!r)return r;if(r.headers){const i={...r,headers:{...r.headers}};for(const s in r.headers)em.has(s.toLowerCase())&&(i.headers[s]="REDACTED");return i}let o=null;for(const i in r)em.has(i.toLowerCase())&&(o??(o={...r}),o[i]="REDACTED");return o??r});console.log(`OpenAI:DEBUG:${t}`,...n)}}const sR=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),lR=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",aR=t=>typeof(t==null?void 0:t.get)=="function",ss=(t,e)=>{var r;const n=e.toLowerCase();if(aR(t)){const o=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(i,s,a)=>s+a.toUpperCase());for(const i of[e,n,e.toUpperCase(),o]){const s=t.get(i);if(s)return s}}for(const[o,i]of Object.entries(t))if(o.toLowerCase()===n)return Array.isArray(i)?(i.length<=1||console.warn(`Received ${i.length} entries for the ${e} header, using the first entry.`),i[0]):i},uR=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.charCodeAt(o);return Array.from(new Float32Array(r.buffer))}};function ba(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}class Ol extends Lv{constructor(e,n,r,o){super(e,n,r,o),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Ie extends Lv{constructor(e,n,r,o){super(e,n,r,o),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const n=Object.fromEntries(e.url.searchParams);return Object.keys(n).length?n:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const n=(r=e[e.length-1])==null?void 0:r.id;return n?{params:{after:n}}:null}}class O{constructor(e){this._client=e}}let Gv=class extends O{list(e,n={},r){return ge(n)?this.list(e,{},n):this._client.getAPIList(`/chat/completions/${e}/messages`,cR,{query:n,...r})}},$l=class extends O{constructor(){super(...arguments),this.messages=new Gv(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(`/chat/completions/${e}`,n)}update(e,n,r){return this._client.post(`/chat/completions/${e}`,{body:n,...r})}list(e={},n){return ge(e)?this.list({},e):this._client.getAPIList("/chat/completions",Hl,{query:e,...n})}del(e,n){return this._client.delete(`/chat/completions/${e}`,n)}};class Hl extends Ie{}class cR extends Ie{}$l.ChatCompletionsPage=Hl;$l.Messages=Gv;let ql=class extends O{constructor(){super(...arguments),this.completions=new $l(this._client)}};ql.Completions=$l;ql.ChatCompletionsPage=Hl;class Vv extends O{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:{Accept:"application/octet-stream",...n==null?void 0:n.headers},__binaryResponse:!0})}}class Bv extends O{create(e,n){return this._client.post("/audio/transcriptions",dr({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}}))}}class Ov extends O{create(e,n){return this._client.post("/audio/translations",dr({body:e,...n,__metadata:{model:e.model}}))}}class Ri extends O{constructor(){super(...arguments),this.transcriptions=new Bv(this._client),this.translations=new Ov(this._client),this.speech=new Vv(this._client)}}Ri.Transcriptions=Bv;Ri.Translations=Ov;Ri.Speech=Vv;class hd extends O{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(`/batches/${e}`,n)}list(e={},n){return ge(e)?this.list({},e):this._client.getAPIList("/batches",md,{query:e,...n})}cancel(e,n){return this._client.post(`/batches/${e}/cancel`,n)}}class md extends Ie{}hd.BatchesPage=md;var Tt=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},fe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ec,As,Ns,Vo,Bo,Rs,Oo,Jt,$o,fl,pl,Ar,$v;class gd{constructor(){ec.add(this),this.controller=new AbortController,As.set(this,void 0),Ns.set(this,()=>{}),Vo.set(this,()=>{}),Bo.set(this,void 0),Rs.set(this,()=>{}),Oo.set(this,()=>{}),Jt.set(this,{}),$o.set(this,!1),fl.set(this,!1),pl.set(this,!1),Ar.set(this,!1),Tt(this,As,new Promise((e,n)=>{Tt(this,Ns,e,"f"),Tt(this,Vo,n,"f")}),"f"),Tt(this,Bo,new Promise((e,n)=>{Tt(this,Rs,e,"f"),Tt(this,Oo,n,"f")}),"f"),fe(this,As,"f").catch(()=>{}),fe(this,Bo,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},fe(this,ec,"m",$v).bind(this))},0)}_connected(){this.ended||(fe(this,Ns,"f").call(this),this._emit("connect"))}get ended(){return fe(this,$o,"f")}get errored(){return fe(this,fl,"f")}get aborted(){return fe(this,pl,"f")}abort(){this.controller.abort()}on(e,n){return(fe(this,Jt,"f")[e]||(fe(this,Jt,"f")[e]=[])).push({listener:n}),this}off(e,n){const r=fe(this,Jt,"f")[e];if(!r)return this;const o=r.findIndex(i=>i.listener===n);return o>=0&&r.splice(o,1),this}once(e,n){return(fe(this,Jt,"f")[e]||(fe(this,Jt,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,r)=>{Tt(this,Ar,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,n)})}async done(){Tt(this,Ar,!0,"f"),await fe(this,Bo,"f")}_emit(e,...n){if(fe(this,$o,"f"))return;e==="end"&&(Tt(this,$o,!0,"f"),fe(this,Rs,"f").call(this));const r=fe(this,Jt,"f")[e];if(r&&(fe(this,Jt,"f")[e]=r.filter(o=>!o.once),r.forEach(({listener:o})=>o(...n))),e==="abort"){const o=n[0];!fe(this,Ar,"f")&&!(r!=null&&r.length)&&Promise.reject(o),fe(this,Vo,"f").call(this,o),fe(this,Oo,"f").call(this,o),this._emit("end");return}if(e==="error"){const o=n[0];!fe(this,Ar,"f")&&!(r!=null&&r.length)&&Promise.reject(o),fe(this,Vo,"f").call(this,o),fe(this,Oo,"f").call(this,o),this._emit("end")}}_emitFinal(){}}As=new WeakMap,Ns=new WeakMap,Vo=new WeakMap,Bo=new WeakMap,Rs=new WeakMap,Oo=new WeakMap,Jt=new WeakMap,$o=new WeakMap,fl=new WeakMap,pl=new WeakMap,Ar=new WeakMap,ec=new WeakSet,$v=function(e){if(Tt(this,fl,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new yt),e instanceof yt)return Tt(this,pl,!0,"f"),this._emit("abort",e);if(e instanceof B)return this._emit("error",e);if(e instanceof Error){const n=new B(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new B(String(e)))};var b=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},nt=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},ke,tc,Bt,Ps,It,tr,$r,Qn,hl,ot,ks,Ms,ni,Ho,qo,tm,nm,rm,om,im,sm,lm;class Rt extends gd{constructor(){super(...arguments),ke.add(this),tc.set(this,[]),Bt.set(this,{}),Ps.set(this,{}),It.set(this,void 0),tr.set(this,void 0),$r.set(this,void 0),Qn.set(this,void 0),hl.set(this,void 0),ot.set(this,void 0),ks.set(this,void 0),Ms.set(this,void 0),ni.set(this,void 0)}[(tc=new WeakMap,Bt=new WeakMap,Ps=new WeakMap,It=new WeakMap,tr=new WeakMap,$r=new WeakMap,Qn=new WeakMap,hl=new WeakMap,ot=new WeakMap,ks=new WeakMap,Ms=new WeakMap,ni=new WeakMap,ke=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",o=>{const i=n.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,s)=>n.push({resolve:i,reject:s})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new Rt;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const o=$t.fromReadableStream(e,this.controller);for await(const s of o)b(this,ke,"m",Ho).call(this,s);if((i=o.controller.signal)!=null&&i.aborted)throw new yt;return this._addRun(b(this,ke,"m",qo).call(this))}toReadableStream(){return new $t(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,r,o,i){const s=new Rt;return s._run(()=>s._runToolAssistantStream(e,n,r,o,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,n,r,o,i){var d;const s=i==null?void 0:i.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...o,stream:!0},c=await e.submitToolOutputs(n,r,a,{...i,signal:this.controller.signal});this._connected();for await(const f of c)b(this,ke,"m",Ho).call(this,f);if((d=c.controller.signal)!=null&&d.aborted)throw new yt;return this._addRun(b(this,ke,"m",qo).call(this))}static createThreadAssistantStream(e,n,r){const o=new Rt;return o._run(()=>o._threadAssistantStream(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}static createAssistantStream(e,n,r,o){const i=new Rt;return i._run(()=>i._runAssistantStream(e,n,r,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return b(this,ks,"f")}currentRun(){return b(this,Ms,"f")}currentMessageSnapshot(){return b(this,It,"f")}currentRunStepSnapshot(){return b(this,ni,"f")}async finalRunSteps(){return await this.done(),Object.values(b(this,Bt,"f"))}async finalMessages(){return await this.done(),Object.values(b(this,Ps,"f"))}async finalRun(){if(await this.done(),!b(this,tr,"f"))throw Error("Final run was not received.");return b(this,tr,"f")}async _createThreadAssistantStream(e,n,r){var a;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},s=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const c of s)b(this,ke,"m",Ho).call(this,c);if((a=s.controller.signal)!=null&&a.aborted)throw new yt;return this._addRun(b(this,ke,"m",qo).call(this))}async _createAssistantStream(e,n,r,o){var c;const i=o==null?void 0:o.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},a=await e.create(n,s,{...o,signal:this.controller.signal});this._connected();for await(const d of a)b(this,ke,"m",Ho).call(this,d);if((c=a.controller.signal)!=null&&c.aborted)throw new yt;return this._addRun(b(this,ke,"m",qo).call(this))}static accumulateDelta(e,n){for(const[r,o]of Object.entries(n)){if(!e.hasOwnProperty(r)){e[r]=o;continue}let i=e[r];if(i==null){e[r]=o;continue}if(r==="index"||r==="type"){e[r]=o;continue}if(typeof i=="string"&&typeof o=="string")i+=o;else if(typeof i=="number"&&typeof o=="number")i+=o;else if(ba(i)&&ba(o))i=this.accumulateDelta(i,o);else if(Array.isArray(i)&&Array.isArray(o)){if(i.every(s=>typeof s=="string"||typeof s=="number")){i.push(...o);continue}for(const s of o){if(!ba(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);const a=s.index;if(a==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);const c=i[a];c==null?i.push(s):i[a]=this.accumulateDelta(c,s)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${o}, accValue: ${i}`);e[r]=i}return e}_addRun(e){return e}async _threadAssistantStream(e,n,r){return await this._createThreadAssistantStream(n,e,r)}async _runAssistantStream(e,n,r,o){return await this._createAssistantStream(n,e,r,o)}async _runToolAssistantStream(e,n,r,o,i){return await this._createToolAssistantStream(r,e,n,o,i)}}Ho=function(e){if(!this.ended)switch(nt(this,ks,e,"f"),b(this,ke,"m",rm).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":b(this,ke,"m",lm).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":b(this,ke,"m",nm).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":b(this,ke,"m",tm).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},qo=function(){if(this.ended)throw new B("stream has ended, this shouldn't happen");if(!b(this,tr,"f"))throw Error("Final run has not been received");return b(this,tr,"f")},tm=function(e){const[n,r]=b(this,ke,"m",im).call(this,e,b(this,It,"f"));nt(this,It,n,"f"),b(this,Ps,"f")[n.id]=n;for(const o of r){const i=n.content[o.index];(i==null?void 0:i.type)=="text"&&this._emit("textCreated",i.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const o of e.data.delta.content){if(o.type=="text"&&o.text){let i=o.text,s=n.content[o.index];if(s&&s.type=="text")this._emit("textDelta",i,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(o.index!=b(this,$r,"f")){if(b(this,Qn,"f"))switch(b(this,Qn,"f").type){case"text":this._emit("textDone",b(this,Qn,"f").text,b(this,It,"f"));break;case"image_file":this._emit("imageFileDone",b(this,Qn,"f").image_file,b(this,It,"f"));break}nt(this,$r,o.index,"f")}nt(this,Qn,n.content[o.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(b(this,$r,"f")!==void 0){const o=e.data.content[b(this,$r,"f")];if(o)switch(o.type){case"image_file":this._emit("imageFileDone",o.image_file,b(this,It,"f"));break;case"text":this._emit("textDone",o.text,b(this,It,"f"));break}}b(this,It,"f")&&this._emit("messageDone",e.data),nt(this,It,void 0,"f")}},nm=function(e){const n=b(this,ke,"m",om).call(this,e);switch(nt(this,ni,n,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const i of r.step_details.tool_calls)i.index==b(this,hl,"f")?this._emit("toolCallDelta",i,n.step_details.tool_calls[i.index]):(b(this,ot,"f")&&this._emit("toolCallDone",b(this,ot,"f")),nt(this,hl,i.index,"f"),nt(this,ot,n.step_details.tool_calls[i.index],"f"),b(this,ot,"f")&&this._emit("toolCallCreated",b(this,ot,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":nt(this,ni,void 0,"f"),e.data.step_details.type=="tool_calls"&&b(this,ot,"f")&&(this._emit("toolCallDone",b(this,ot,"f")),nt(this,ot,void 0,"f")),this._emit("runStepDone",e.data,n);break}},rm=function(e){b(this,tc,"f").push(e),this._emit("event",e)},om=function(e){switch(e.event){case"thread.run.step.created":return b(this,Bt,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=b(this,Bt,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const o=Rt.accumulateDelta(n,r.delta);b(this,Bt,"f")[e.data.id]=o}return b(this,Bt,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":b(this,Bt,"f")[e.data.id]=e.data;break}if(b(this,Bt,"f")[e.data.id])return b(this,Bt,"f")[e.data.id];throw new Error("No snapshot available")},im=function(e,n){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let o=e.data;if(o.delta.content)for(const i of o.delta.content)if(i.index in n.content){let s=n.content[i.index];n.content[i.index]=b(this,ke,"m",sm).call(this,i,s)}else n.content[i.index]=i,r.push(i);return[n,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},sm=function(e,n){return Rt.accumulateDelta(n,e)},lm=function(e){switch(nt(this,Ms,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":nt(this,tr,e.data,"f"),b(this,ot,"f")&&(this._emit("toolCallDone",b(this,ot,"f")),nt(this,ot,void 0,"f"));break}};class yd extends O{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/assistants/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return ge(e)?this.list({},e):this._client.getAPIList("/assistants",vd,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/assistants/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class vd extends Ie{}yd.AssistantsPage=vd;function am(t){return typeof t.parse=="function"}const jr=t=>(t==null?void 0:t.role)==="assistant",Hv=t=>(t==null?void 0:t.role)==="function",qv=t=>(t==null?void 0:t.role)==="tool";function _d(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Pi(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function dR(t,e){return!e||!zv(e)?{...t,choices:t.choices.map(n=>({...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:wd(t,e)}function wd(t,e){const n=t.choices.map(r=>{var o;if(r.finish_reason==="length")throw new Iv;if(r.finish_reason==="content_filter")throw new Av;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((o=r.message.tool_calls)==null?void 0:o.map(i=>pR(e,i)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?fR(e,r.message.content):null}}});return{...t,choices:n}}function fR(t,e){var n,r;return((n=t.response_format)==null?void 0:n.type)!=="json_schema"?null:((r=t.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function pR(t,e){var r;const n=(r=t.tools)==null?void 0:r.find(o=>{var i;return((i=o.function)==null?void 0:i.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Pi(n)?n.$parseRaw(e.function.arguments):n!=null&&n.function.strict?JSON.parse(e.function.arguments):null}}}function hR(t,e){var r;if(!t)return!1;const n=(r=t.tools)==null?void 0:r.find(o=>{var i;return((i=o.function)==null?void 0:i.name)===e.function.name});return Pi(n)||(n==null?void 0:n.function.strict)||!1}function zv(t){var e;return _d(t.response_format)?!0:((e=t.tools)==null?void 0:e.some(n=>Pi(n)||n.type==="function"&&n.function.strict===!0))??!1}function mR(t){for(const e of t??[]){if(e.type!=="function")throw new B(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new B(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Xe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ge,nc,ml,rc,oc,ic,Jv,sc;const um=10;class Wv extends gd{constructor(){super(...arguments),Ge.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=(r=e.choices[0])==null?void 0:r.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),(Hv(e)||qv(e))&&e.content)this._emit("functionCallResult",e.content);else if(jr(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(jr(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new B("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Xe(this,Ge,"m",nc).call(this)}async finalMessage(){return await this.done(),Xe(this,Ge,"m",ml).call(this)}async finalFunctionCall(){return await this.done(),Xe(this,Ge,"m",rc).call(this)}async finalFunctionCallResult(){return await this.done(),Xe(this,Ge,"m",oc).call(this)}async totalUsage(){return await this.done(),Xe(this,Ge,"m",ic).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=Xe(this,Ge,"m",ml).call(this);n&&this._emit("finalMessage",n);const r=Xe(this,Ge,"m",nc).call(this);r&&this._emit("finalContent",r);const o=Xe(this,Ge,"m",rc).call(this);o&&this._emit("finalFunctionCall",o);const i=Xe(this,Ge,"m",oc).call(this);i!=null&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",Xe(this,Ge,"m",ic).call(this))}async _createChatCompletion(e,n,r){const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),Xe(this,Ge,"m",Jv).call(this,n);const i=await e.chat.completions.create({...n,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(wd(i,n))}async _runChatCompletion(e,n,r){for(const o of n.messages)this._addMessage(o,!1);return await this._createChatCompletion(e,n,r)}async _runFunctions(e,n,r){var h;const o="function",{function_call:i="auto",stream:s,...a}=n,c=typeof i!="string"&&(i==null?void 0:i.name),{maxChatCompletions:d=um}=r||{},f={};for(const g of n.functions)f[g.name||g.function.name]=g;const p=n.functions.map(g=>({name:g.name||g.function.name,parameters:g.parameters,description:g.description}));for(const g of n.messages)this._addMessage(g,!1);for(let g=0;g<d;++g){const x=(h=(await this._createChatCompletion(e,{...a,function_call:i,functions:p,messages:[...this.messages]},r)).choices[0])==null?void 0:h.message;if(!x)throw new B("missing message in ChatCompletion response");if(!x.function_call)return;const{name:C,arguments:_}=x.function_call,y=f[C];if(y){if(c&&c!==C){const I=`Invalid function_call: ${JSON.stringify(C)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:o,name:C,content:I});continue}}else{const I=`Invalid function_call: ${JSON.stringify(C)}. Available options are: ${p.map(T=>JSON.stringify(T.name)).join(", ")}. Please try again`;this._addMessage({role:o,name:C,content:I});continue}let v;try{v=am(y)?await y.parse(_):_}catch(I){this._addMessage({role:o,name:C,content:I instanceof Error?I.message:String(I)});continue}const E=await y.function(v,this),S=Xe(this,Ge,"m",sc).call(this,E);if(this._addMessage({role:o,name:C,content:S}),c)return}}async _runTools(e,n,r){var g,w,x;const o="tool",{tool_choice:i="auto",stream:s,...a}=n,c=typeof i!="string"&&((g=i==null?void 0:i.function)==null?void 0:g.name),{maxChatCompletions:d=um}=r||{},f=n.tools.map(C=>{if(Pi(C)){if(!C.$callback)throw new B("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:C.$callback,name:C.function.name,description:C.function.description||"",parameters:C.function.parameters,parse:C.$parseRaw,strict:!0}}}return C}),p={};for(const C of f)C.type==="function"&&(p[C.function.name||C.function.function.name]=C.function);const h="tools"in n?f.map(C=>C.type==="function"?{type:"function",function:{name:C.function.name||C.function.function.name,parameters:C.function.parameters,description:C.function.description,strict:C.function.strict}}:C):void 0;for(const C of n.messages)this._addMessage(C,!1);for(let C=0;C<d;++C){const y=(w=(await this._createChatCompletion(e,{...a,tool_choice:i,tools:h,messages:[...this.messages]},r)).choices[0])==null?void 0:w.message;if(!y)throw new B("missing message in ChatCompletion response");if(!((x=y.tool_calls)!=null&&x.length))return;for(const v of y.tool_calls){if(v.type!=="function")continue;const E=v.id,{name:S,arguments:I}=v.function,T=p[S];if(T){if(c&&c!==S){const U=`Invalid tool_call: ${JSON.stringify(S)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:o,tool_call_id:E,content:U});continue}}else{const U=`Invalid tool_call: ${JSON.stringify(S)}. Available options are: ${Object.keys(p).map(q=>JSON.stringify(q)).join(", ")}. Please try again`;this._addMessage({role:o,tool_call_id:E,content:U});continue}let k;try{k=am(T)?await T.parse(I):I}catch(U){const q=U instanceof Error?U.message:String(U);this._addMessage({role:o,tool_call_id:E,content:q});continue}const N=await T.function(k,this),R=Xe(this,Ge,"m",sc).call(this,N);if(this._addMessage({role:o,tool_call_id:E,content:R}),c)return}}}}Ge=new WeakSet,nc=function(){return Xe(this,Ge,"m",ml).call(this).content??null},ml=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(jr(n)){const{function_call:r,...o}=n,i={...o,content:n.content??null,refusal:n.refusal??null};return r&&(i.function_call=r),i}}throw new B("stream ended without producing a ChatCompletionMessage with role=assistant")},rc=function(){var e,n;for(let r=this.messages.length-1;r>=0;r--){const o=this.messages[r];if(jr(o)&&(o!=null&&o.function_call))return o.function_call;if(jr(o)&&((e=o==null?void 0:o.tool_calls)!=null&&e.length))return(n=o.tool_calls.at(-1))==null?void 0:n.function}},oc=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Hv(n)&&n.content!=null||qv(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(r=>{var o;return r.role==="assistant"&&((o=r.tool_calls)==null?void 0:o.some(i=>i.type==="function"&&i.id===n.tool_call_id))}))return n.content}},ic=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},Jv=function(e){if(e.n!=null&&e.n>1)throw new B("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},sc=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class wi extends Wv{static runFunctions(e,n,r){const o=new wi,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return o._run(()=>o._runFunctions(e,n,i)),o}static runTools(e,n,r){const o=new wi,i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,n,i)),o}_addMessage(e,n=!0){super._addMessage(e,n),jr(e)&&e.content&&this._emit("content",e.content)}}const Yv=1,Kv=2,Xv=4,Qv=8,Zv=16,jv=32,e0=64,t0=128,n0=256,r0=t0|n0,o0=Zv|jv|r0|e0,i0=Yv|Kv|o0,s0=Xv|Qv,gR=i0|s0,Ae={STR:Yv,NUM:Kv,ARR:Xv,OBJ:Qv,NULL:Zv,BOOL:jv,NAN:e0,INFINITY:t0,MINUS_INFINITY:n0,INF:r0,SPECIAL:o0,ATOM:i0,COLLECTION:s0,ALL:gR};class yR extends Error{}class vR extends Error{}function _R(t,e=Ae.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return wR(t.trim(),e)}const wR=(t,e)=>{const n=t.length;let r=0;const o=h=>{throw new yR(`${h} at position ${r}`)},i=h=>{throw new vR(`${h} at position ${r}`)},s=()=>(p(),r>=n&&o("Unexpected end of input"),t[r]==='"'?a():t[r]==="{"?c():t[r]==="["?d():t.substring(r,r+4)==="null"||Ae.NULL&e&&n-r<4&&"null".startsWith(t.substring(r))?(r+=4,null):t.substring(r,r+4)==="true"||Ae.BOOL&e&&n-r<4&&"true".startsWith(t.substring(r))?(r+=4,!0):t.substring(r,r+5)==="false"||Ae.BOOL&e&&n-r<5&&"false".startsWith(t.substring(r))?(r+=5,!1):t.substring(r,r+8)==="Infinity"||Ae.INFINITY&e&&n-r<8&&"Infinity".startsWith(t.substring(r))?(r+=8,1/0):t.substring(r,r+9)==="-Infinity"||Ae.MINUS_INFINITY&e&&1<n-r&&n-r<9&&"-Infinity".startsWith(t.substring(r))?(r+=9,-1/0):t.substring(r,r+3)==="NaN"||Ae.NAN&e&&n-r<3&&"NaN".startsWith(t.substring(r))?(r+=3,NaN):f()),a=()=>{const h=r;let g=!1;for(r++;r<n&&(t[r]!=='"'||g&&t[r-1]==="\\");)g=t[r]==="\\"?!g:!1,r++;if(t.charAt(r)=='"')try{return JSON.parse(t.substring(h,++r-Number(g)))}catch(w){i(String(w))}else if(Ae.STR&e)try{return JSON.parse(t.substring(h,r-Number(g))+'"')}catch{return JSON.parse(t.substring(h,t.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},c=()=>{r++,p();const h={};try{for(;t[r]!=="}";){if(p(),r>=n&&Ae.OBJ&e)return h;const g=a();p(),r++;try{const w=s();Object.defineProperty(h,g,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(Ae.OBJ&e)return h;throw w}p(),t[r]===","&&r++}}catch{if(Ae.OBJ&e)return h;o("Expected '}' at end of object")}return r++,h},d=()=>{r++;const h=[];try{for(;t[r]!=="]";)h.push(s()),p(),t[r]===","&&r++}catch{if(Ae.ARR&e)return h;o("Expected ']' at end of array")}return r++,h},f=()=>{if(r===0){t==="-"&&Ae.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t)}catch(g){if(Ae.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}i(String(g))}}const h=r;for(t[r]==="-"&&r++;t[r]&&!",]}".includes(t[r]);)r++;r==n&&!(Ae.NUM&e)&&o("Unterminated number literal");try{return JSON.parse(t.substring(h,r))}catch{t.substring(h,r)==="-"&&Ae.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t.substring(h,t.lastIndexOf("e")))}catch(w){i(String(w))}}},p=()=>{for(;r<n&&` 
\r	`.includes(t[r]);)r++};return s()},cm=t=>_R(t,Ae.ALL^Ae.NUM);var xr=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},te=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Ee,zt,Er,hn,Ga,ls,Va,Ba,Oa,as,$a,dm;class xi extends Wv{constructor(e){super(),Ee.add(this),zt.set(this,void 0),Er.set(this,void 0),hn.set(this,void 0),xr(this,zt,e,"f"),xr(this,Er,[],"f")}get currentChatCompletionSnapshot(){return te(this,hn,"f")}static fromReadableStream(e){const n=new xi(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,r){const o=new xi(n);return o._run(()=>o._runChatCompletion(e,{...n,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createChatCompletion(e,n,r){var s;super._createChatCompletion;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),te(this,Ee,"m",Ga).call(this);const i=await e.chat.completions.create({...n,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const a of i)te(this,Ee,"m",Va).call(this,a);if((s=i.controller.signal)!=null&&s.aborted)throw new yt;return this._addChatCompletion(te(this,Ee,"m",as).call(this))}async _fromReadableStream(e,n){var s;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),te(this,Ee,"m",Ga).call(this),this._connected();const o=$t.fromReadableStream(e,this.controller);let i;for await(const a of o)i&&i!==a.id&&this._addChatCompletion(te(this,Ee,"m",as).call(this)),te(this,Ee,"m",Va).call(this,a),i=a.id;if((s=o.controller.signal)!=null&&s.aborted)throw new yt;return this._addChatCompletion(te(this,Ee,"m",as).call(this))}[(zt=new WeakMap,Er=new WeakMap,hn=new WeakMap,Ee=new WeakSet,Ga=function(){this.ended||xr(this,hn,void 0,"f")},ls=function(n){let r=te(this,Er,"f")[n.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},te(this,Er,"f")[n.index]=r,r)},Va=function(n){var o,i,s,a,c,d,f,p,h,g,w,x,C,_,y;if(this.ended)return;const r=te(this,Ee,"m",dm).call(this,n);this._emit("chunk",n,r);for(const v of n.choices){const E=r.choices[v.index];v.delta.content!=null&&((o=E.message)==null?void 0:o.role)==="assistant"&&((i=E.message)!=null&&i.content)&&(this._emit("content",v.delta.content,E.message.content),this._emit("content.delta",{delta:v.delta.content,snapshot:E.message.content,parsed:E.message.parsed})),v.delta.refusal!=null&&((s=E.message)==null?void 0:s.role)==="assistant"&&((a=E.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:v.delta.refusal,snapshot:E.message.refusal}),((c=v.logprobs)==null?void 0:c.content)!=null&&((d=E.message)==null?void 0:d.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(f=v.logprobs)==null?void 0:f.content,snapshot:((p=E.logprobs)==null?void 0:p.content)??[]}),((h=v.logprobs)==null?void 0:h.refusal)!=null&&((g=E.message)==null?void 0:g.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(w=v.logprobs)==null?void 0:w.refusal,snapshot:((x=E.logprobs)==null?void 0:x.refusal)??[]});const S=te(this,Ee,"m",ls).call(this,E);E.finish_reason&&(te(this,Ee,"m",Oa).call(this,E),S.current_tool_call_index!=null&&te(this,Ee,"m",Ba).call(this,E,S.current_tool_call_index));for(const I of v.delta.tool_calls??[])S.current_tool_call_index!==I.index&&(te(this,Ee,"m",Oa).call(this,E),S.current_tool_call_index!=null&&te(this,Ee,"m",Ba).call(this,E,S.current_tool_call_index)),S.current_tool_call_index=I.index;for(const I of v.delta.tool_calls??[]){const T=(C=E.message.tool_calls)==null?void 0:C[I.index];T!=null&&T.type&&((T==null?void 0:T.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(_=T.function)==null?void 0:_.name,index:I.index,arguments:T.function.arguments,parsed_arguments:T.function.parsed_arguments,arguments_delta:((y=I.function)==null?void 0:y.arguments)??""}):(T==null||T.type,void 0))}}},Ba=function(n,r){var s,a,c;if(te(this,Ee,"m",ls).call(this,n).done_tool_calls.has(r))return;const i=(s=n.message.tool_calls)==null?void 0:s[r];if(!i)throw new Error("no tool call snapshot");if(!i.type)throw new Error("tool call snapshot missing `type`");if(i.type==="function"){const d=(c=(a=te(this,zt,"f"))==null?void 0:a.tools)==null?void 0:c.find(f=>f.type==="function"&&f.function.name===i.function.name);this._emit("tool_calls.function.arguments.done",{name:i.function.name,index:r,arguments:i.function.arguments,parsed_arguments:Pi(d)?d.$parseRaw(i.function.arguments):d!=null&&d.function.strict?JSON.parse(i.function.arguments):null})}else i.type},Oa=function(n){var o,i;const r=te(this,Ee,"m",ls).call(this,n);if(n.message.content&&!r.content_done){r.content_done=!0;const s=te(this,Ee,"m",$a).call(this);this._emit("content.done",{content:n.message.content,parsed:s?s.$parseRaw(n.message.content):null})}n.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),(o=n.logprobs)!=null&&o.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),(i=n.logprobs)!=null&&i.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},as=function(){if(this.ended)throw new B("stream has ended, this shouldn't happen");const n=te(this,hn,"f");if(!n)throw new B("request ended without sending any chunks");return xr(this,hn,void 0,"f"),xr(this,Er,[],"f"),xR(n,te(this,zt,"f"))},$a=function(){var r;const n=(r=te(this,zt,"f"))==null?void 0:r.response_format;return _d(n)?n:null},dm=function(n){var r,o,i,s;let a=te(this,hn,"f");const{choices:c,...d}=n;a?Object.assign(a,d):a=xr(this,hn,{...d,choices:[]},"f");for(const{delta:f,finish_reason:p,index:h,logprobs:g=null,...w}of n.choices){let x=a.choices[h];if(x||(x=a.choices[h]={finish_reason:p,index:h,message:{},logprobs:g,...w}),g)if(!x.logprobs)x.logprobs=Object.assign({},g);else{const{content:I,refusal:T,...k}=g;Object.assign(x.logprobs,k),I&&((r=x.logprobs).content??(r.content=[]),x.logprobs.content.push(...I)),T&&((o=x.logprobs).refusal??(o.refusal=[]),x.logprobs.refusal.push(...T))}if(p&&(x.finish_reason=p,te(this,zt,"f")&&zv(te(this,zt,"f")))){if(p==="length")throw new Iv;if(p==="content_filter")throw new Av}if(Object.assign(x,w),!f)continue;const{content:C,refusal:_,function_call:y,role:v,tool_calls:E,...S}=f;if(Object.assign(x.message,S),_&&(x.message.refusal=(x.message.refusal||"")+_),v&&(x.message.role=v),y&&(x.message.function_call?(y.name&&(x.message.function_call.name=y.name),y.arguments&&((i=x.message.function_call).arguments??(i.arguments=""),x.message.function_call.arguments+=y.arguments)):x.message.function_call=y),C&&(x.message.content=(x.message.content||"")+C,!x.message.refusal&&te(this,Ee,"m",$a).call(this)&&(x.message.parsed=cm(x.message.content))),E){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:I,id:T,type:k,function:N,...R}of E){const U=(s=x.message.tool_calls)[I]??(s[I]={});Object.assign(U,R),T&&(U.id=T),k&&(U.type=k),N&&(U.function??(U.function={name:N.name??"",arguments:""})),N!=null&&N.name&&(U.function.name=N.name),N!=null&&N.arguments&&(U.function.arguments+=N.arguments,hR(te(this,zt,"f"),U)&&(U.function.parsed_arguments=cm(U.function.arguments)))}}}return a},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("chunk",o=>{const i=n.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,s)=>n.push({resolve:i,reject:s})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new $t(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function xR(t,e){const{id:n,choices:r,created:o,model:i,system_fingerprint:s,...a}=t,c={...a,id:n,choices:r.map(({message:d,finish_reason:f,index:p,logprobs:h,...g})=>{if(!f)throw new B(`missing finish_reason for choice ${p}`);const{content:w=null,function_call:x,tool_calls:C,..._}=d,y=d.role;if(!y)throw new B(`missing role for choice ${p}`);if(x){const{arguments:v,name:E}=x;if(v==null)throw new B(`missing function_call.arguments for choice ${p}`);if(!E)throw new B(`missing function_call.name for choice ${p}`);return{...g,message:{content:w,function_call:{arguments:v,name:E},role:y,refusal:d.refusal??null},finish_reason:f,index:p,logprobs:h}}return C?{...g,index:p,finish_reason:f,logprobs:h,message:{..._,role:y,content:w,refusal:d.refusal??null,tool_calls:C.map((v,E)=>{const{function:S,type:I,id:T,...k}=v,{arguments:N,name:R,...U}=S||{};if(T==null)throw new B(`missing choices[${p}].tool_calls[${E}].id
${us(t)}`);if(I==null)throw new B(`missing choices[${p}].tool_calls[${E}].type
${us(t)}`);if(R==null)throw new B(`missing choices[${p}].tool_calls[${E}].function.name
${us(t)}`);if(N==null)throw new B(`missing choices[${p}].tool_calls[${E}].function.arguments
${us(t)}`);return{...k,id:T,type:I,function:{...U,name:R,arguments:N}}})}}:{...g,message:{..._,content:w,role:y,refusal:d.refusal??null},finish_reason:f,index:p,logprobs:h}}),created:o,model:i,object:"chat.completion",...s?{system_fingerprint:s}:{}};return dR(c,e)}function us(t){return JSON.stringify(t)}class eo extends xi{static fromReadableStream(e){const n=new eo(null);return n._run(()=>n._fromReadableStream(e)),n}static runFunctions(e,n,r){const o=new eo(null),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return o._run(()=>o._runFunctions(e,n,i)),o}static runTools(e,n,r){const o=new eo(n),i={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,n,i)),o}}let l0=class extends O{parse(e,n){return mR(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>wd(r,e))}runFunctions(e,n){return e.stream?eo.runFunctions(this._client,e,n):wi.runFunctions(this._client,e,n)}runTools(e,n){return e.stream?eo.runTools(this._client,e,n):wi.runTools(this._client,e,n)}stream(e,n){return xi.createChatCompletion(this._client,e,n)}};class lc extends O{constructor(){super(...arguments),this.completions=new l0(this._client)}}(function(t){t.Completions=l0})(lc||(lc={}));class a0 extends O{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class u0 extends O{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class zl extends O{constructor(){super(...arguments),this.sessions=new a0(this._client),this.transcriptionSessions=new u0(this._client)}}zl.Sessions=a0;zl.TranscriptionSessions=u0;class xd extends O{create(e,n,r){return this._client.post(`/threads/${e}/messages`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,o){return this._client.post(`/threads/${e}/messages/${n}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,n={},r){return ge(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/messages`,Ed,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/threads/${e}/messages/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Ed extends Ie{}xd.MessagesPage=Ed;class Sd extends O{retrieve(e,n,r,o={},i){return ge(o)?this.retrieve(e,n,r,{},o):this._client.get(`/threads/${e}/runs/${n}/steps/${r}`,{query:o,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,n,r={},o){return ge(r)?this.list(e,n,{},r):this._client.getAPIList(`/threads/${e}/runs/${n}/steps`,Td,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}}class Td extends Ie{}Sd.RunStepsPage=Td;let ki=class extends O{constructor(){super(...arguments),this.steps=new Sd(this._client)}create(e,n,r){const{include:o,...i}=n;return this._client.post(`/threads/${e}/runs`,{query:{include:o},body:i,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}retrieve(e,n,r){return this._client.get(`/threads/${e}/runs/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,o){return this._client.post(`/threads/${e}/runs/${n}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,n={},r){return ge(n)?this.list(e,{},n):this._client.getAPIList(`/threads/${e}/runs`,Cd,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/threads/${e}/runs/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const o=await this.create(e,n,r);return await this.poll(e,o.id,r)}createAndStream(e,n,r){return Rt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}async poll(e,n,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:s}=await this.retrieve(e,n,{...r,headers:{...r==null?void 0:r.headers,...o}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await Ni(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,n,r){return Rt.createAssistantStream(e,this._client.beta.threads.runs,n,r)}submitToolOutputs(e,n,r,o){return this._client.post(`/threads/${e}/runs/${n}/submit_tool_outputs`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,n,r,o){const i=await this.submitToolOutputs(e,n,r,o);return await this.poll(e,i.id,o)}submitToolOutputsStream(e,n,r,o){return Rt.createToolAssistantStream(e,n,this._client.beta.threads.runs,r,o)}};class Cd extends Ie{}ki.RunsPage=Cd;ki.Steps=Sd;ki.RunStepsPage=Td;class mo extends O{constructor(){super(...arguments),this.runs=new ki(this._client),this.messages=new xd(this._client)}create(e={},n){return ge(e)?this.create({},e):this._client.post("/threads",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/threads/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n){return this._client.delete(`/threads/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:e.stream??!1})}async createAndRunPoll(e,n){const r=await this.createAndRun(e,n);return await this.runs.poll(r.thread_id,r.id,n)}createAndRunStream(e,n){return Rt.createThreadAssistantStream(e,this._client.beta.threads,n)}}mo.Runs=ki;mo.RunsPage=Cd;mo.Messages=xd;mo.MessagesPage=Ed;class go extends O{constructor(){super(...arguments),this.realtime=new zl(this._client),this.chat=new lc(this._client),this.assistants=new yd(this._client),this.threads=new mo(this._client)}}go.Realtime=zl;go.Assistants=yd;go.AssistantsPage=vd;go.Threads=mo;class c0 extends O{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class d0 extends O{retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}}let Jl=class extends O{constructor(){super(...arguments),this.content=new d0(this._client)}create(e,n,r){return this._client.post(`/containers/${e}/files`,dr({body:n,...r}))}retrieve(e,n,r){return this._client.get(`/containers/${e}/files/${n}`,r)}list(e,n={},r){return ge(n)?this.list(e,{},n):this._client.getAPIList(`/containers/${e}/files`,Id,{query:n,...r})}del(e,n,r){return this._client.delete(`/containers/${e}/files/${n}`,{...r,headers:{Accept:"*/*",...r==null?void 0:r.headers}})}};class Id extends Ie{}Jl.FileListResponsesPage=Id;Jl.Content=d0;class Mi extends O{constructor(){super(...arguments),this.files=new Jl(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(`/containers/${e}`,n)}list(e={},n){return ge(e)?this.list({},e):this._client.getAPIList("/containers",Ad,{query:e,...n})}del(e,n){return this._client.delete(`/containers/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class Ad extends Ie{}Mi.ContainerListResponsesPage=Ad;Mi.Files=Jl;Mi.FileListResponsesPage=Id;class f0 extends O{create(e,n){const r=!!e.encoding_format;let o=r?e.encoding_format:"base64";r&&Dn("Request","User defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:o},...n});return r?i:(Dn("response","Decoding base64 embeddings to float32 array"),i._thenUnwrap(s=>(s&&s.data&&s.data.forEach(a=>{const c=a.embedding;a.embedding=uR(c)}),s)))}}class Nd extends O{retrieve(e,n,r,o){return this._client.get(`/evals/${e}/runs/${n}/output_items/${r}`,o)}list(e,n,r={},o){return ge(r)?this.list(e,n,{},r):this._client.getAPIList(`/evals/${e}/runs/${n}/output_items`,Rd,{query:r,...o})}}class Rd extends Ie{}Nd.OutputItemListResponsesPage=Rd;class Di extends O{constructor(){super(...arguments),this.outputItems=new Nd(this._client)}create(e,n,r){return this._client.post(`/evals/${e}/runs`,{body:n,...r})}retrieve(e,n,r){return this._client.get(`/evals/${e}/runs/${n}`,r)}list(e,n={},r){return ge(n)?this.list(e,{},n):this._client.getAPIList(`/evals/${e}/runs`,Pd,{query:n,...r})}del(e,n,r){return this._client.delete(`/evals/${e}/runs/${n}`,r)}cancel(e,n,r){return this._client.post(`/evals/${e}/runs/${n}`,r)}}class Pd extends Ie{}Di.RunListResponsesPage=Pd;Di.OutputItems=Nd;Di.OutputItemListResponsesPage=Rd;class Li extends O{constructor(){super(...arguments),this.runs=new Di(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(`/evals/${e}`,n)}update(e,n,r){return this._client.post(`/evals/${e}`,{body:n,...r})}list(e={},n){return ge(e)?this.list({},e):this._client.getAPIList("/evals",kd,{query:e,...n})}del(e,n){return this._client.delete(`/evals/${e}`,n)}}class kd extends Ie{}Li.EvalListResponsesPage=kd;Li.Runs=Di;Li.RunListResponsesPage=Pd;let Md=class extends O{create(e,n){return this._client.post("/files",dr({body:e,...n}))}retrieve(e,n){return this._client.get(`/files/${e}`,n)}list(e={},n){return ge(e)?this.list({},e):this._client.getAPIList("/files",Dd,{query:e,...n})}del(e,n){return this._client.delete(`/files/${e}`,n)}content(e,n){return this._client.get(`/files/${e}/content`,{...n,headers:{Accept:"application/binary",...n==null?void 0:n.headers},__binaryResponse:!0})}retrieveContent(e,n){return this._client.get(`/files/${e}/content`,n)}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:r=30*60*1e3}={}){const o=new Set(["processed","error","deleted"]),i=Date.now();let s=await this.retrieve(e);for(;!s.status||!o.has(s.status);)if(await Ni(n),s=await this.retrieve(e),Date.now()-i>r)throw new pd({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return s}};class Dd extends Ie{}Md.FileObjectsPage=Dd;class p0 extends O{}let h0=class extends O{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Ld extends O{constructor(){super(...arguments),this.graders=new h0(this._client)}}Ld.Graders=h0;class Fd extends O{create(e,n,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Ud,{body:n,method:"post",...r})}retrieve(e,n={},r){return ge(n)?this.retrieve(e,{},n):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...r})}del(e,n,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${n}`,r)}}class Ud extends Ol{}Fd.PermissionCreateResponsesPage=Ud;let Wl=class extends O{constructor(){super(...arguments),this.permissions=new Fd(this._client)}};Wl.Permissions=Fd;Wl.PermissionCreateResponsesPage=Ud;class bd extends O{list(e,n={},r){return ge(n)?this.list(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Gd,{query:n,...r})}}class Gd extends Ie{}bd.FineTuningJobCheckpointsPage=Gd;class yo extends O{constructor(){super(...arguments),this.checkpoints=new bd(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(`/fine_tuning/jobs/${e}`,n)}list(e={},n){return ge(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Vd,{query:e,...n})}cancel(e,n){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},r){return ge(n)?this.listEvents(e,{},n):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Bd,{query:n,...r})}pause(e,n){return this._client.post(`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(`/fine_tuning/jobs/${e}/resume`,n)}}class Vd extends Ie{}class Bd extends Ie{}yo.FineTuningJobsPage=Vd;yo.FineTuningJobEventsPage=Bd;yo.Checkpoints=bd;yo.FineTuningJobCheckpointsPage=Gd;class Bn extends O{constructor(){super(...arguments),this.methods=new p0(this._client),this.jobs=new yo(this._client),this.checkpoints=new Wl(this._client),this.alpha=new Ld(this._client)}}Bn.Methods=p0;Bn.Jobs=yo;Bn.FineTuningJobsPage=Vd;Bn.FineTuningJobEventsPage=Bd;Bn.Checkpoints=Wl;Bn.Alpha=Ld;class m0 extends O{}class Od extends O{constructor(){super(...arguments),this.graderModels=new m0(this._client)}}Od.GraderModels=m0;class g0 extends O{createVariation(e,n){return this._client.post("/images/variations",dr({body:e,...n}))}edit(e,n){return this._client.post("/images/edits",dr({body:e,...n}))}generate(e,n){return this._client.post("/images/generations",{body:e,...n})}}class $d extends O{retrieve(e,n){return this._client.get(`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Hd,e)}del(e,n){return this._client.delete(`/models/${e}`,n)}}class Hd extends Ol{}$d.ModelsPage=Hd;class y0 extends O{create(e,n){return this._client.post("/moderations",{body:e,...n})}}function ER(t,e){return!e||!TR(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(r=>({...r,parsed:null}))}:n)}:v0(t,e)}function v0(t,e){const n=t.output.map(o=>{if(o.type==="function_call")return{...o,parsed_arguments:AR(e,o)};if(o.type==="message"){const i=o.content.map(s=>s.type==="output_text"?{...s,parsed:SR(e,s.text)}:s);return{...o,content:i}}return o}),r=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||_0(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const o of r.output)if(o.type==="message"){for(const i of o.content)if(i.type==="output_text"&&i.parsed!==null)return i.parsed}return null}}),r}function SR(t,e){var n,r,o,i;return((r=(n=t.text)==null?void 0:n.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((o=t.text)==null?void 0:o.format)?((i=t.text)==null?void 0:i.format).$parseRaw(e):JSON.parse(e)}function TR(t){var e;return!!_d((e=t.text)==null?void 0:e.format)}function CR(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function IR(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function AR(t,e){const n=IR(t.tools??[],e.name);return{...e,...e,parsed_arguments:CR(n)?n.$parseRaw(e.arguments):n!=null&&n.strict?JSON.parse(e.arguments):null}}function _0(t){const e=[];for(const n of t.output)if(n.type==="message")for(const r of n.content)r.type==="output_text"&&e.push(r.text);t.output_text=e.join("")}class w0 extends O{list(e,n={},r){return ge(n)?this.list(e,{},n):this._client.getAPIList(`/responses/${e}/input_items`,RR,{query:n,...r})}}var Sr=function(t,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},mn=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Tr,cs,gn,ds,fm,pm,hm,mm;class qd extends gd{constructor(e){super(),Tr.add(this),cs.set(this,void 0),gn.set(this,void 0),ds.set(this,void 0),Sr(this,cs,e,"f")}static createResponse(e,n,r){const o=new qd(n);return o._run(()=>o._createOrRetrieveResponse(e,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createOrRetrieveResponse(e,n,r){var a;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),mn(this,Tr,"m",fm).call(this);let i,s=null;"response_id"in n?(i=await e.responses.retrieve(n.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),s=n.starting_after??null):i=await e.responses.create({...n,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const c of i)mn(this,Tr,"m",pm).call(this,c,s);if((a=i.controller.signal)!=null&&a.aborted)throw new yt;return mn(this,Tr,"m",hm).call(this)}[(cs=new WeakMap,gn=new WeakMap,ds=new WeakMap,Tr=new WeakSet,fm=function(){this.ended||Sr(this,gn,void 0,"f")},pm=function(n,r){if(this.ended)return;const o=(s,a)=>{(r==null||a.sequence_number>r)&&this._emit(s,a)},i=mn(this,Tr,"m",mm).call(this,n);switch(o("event",n),n.type){case"response.output_text.delta":{const s=i.output[n.output_index];if(!s)throw new B(`missing output at index ${n.output_index}`);if(s.type==="message"){const a=s.content[n.content_index];if(!a)throw new B(`missing content at index ${n.content_index}`);if(a.type!=="output_text")throw new B(`expected content to be 'output_text', got ${a.type}`);o("response.output_text.delta",{...n,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const s=i.output[n.output_index];if(!s)throw new B(`missing output at index ${n.output_index}`);s.type==="function_call"&&o("response.function_call_arguments.delta",{...n,snapshot:s.arguments});break}default:o(n.type,n);break}},hm=function(){if(this.ended)throw new B("stream has ended, this shouldn't happen");const n=mn(this,gn,"f");if(!n)throw new B("request ended without sending any events");Sr(this,gn,void 0,"f");const r=NR(n,mn(this,cs,"f"));return Sr(this,ds,r,"f"),r},mm=function(n){let r=mn(this,gn,"f");if(!r){if(n.type!=="response.created")throw new B(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return r=Sr(this,gn,n.response,"f"),r}switch(n.type){case"response.output_item.added":{r.output.push(n.item);break}case"response.content_part.added":{const o=r.output[n.output_index];if(!o)throw new B(`missing output at index ${n.output_index}`);o.type==="message"&&o.content.push(n.part);break}case"response.output_text.delta":{const o=r.output[n.output_index];if(!o)throw new B(`missing output at index ${n.output_index}`);if(o.type==="message"){const i=o.content[n.content_index];if(!i)throw new B(`missing content at index ${n.content_index}`);if(i.type!=="output_text")throw new B(`expected content to be 'output_text', got ${i.type}`);i.text+=n.delta}break}case"response.function_call_arguments.delta":{const o=r.output[n.output_index];if(!o)throw new B(`missing output at index ${n.output_index}`);o.type==="function_call"&&(o.arguments+=n.delta);break}case"response.completed":{Sr(this,gn,n.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],n=[];let r=!1;return this.on("event",o=>{const i=n.shift();i?i.resolve(o):e.push(o)}),this.on("end",()=>{r=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),this.on("error",o=>{r=!0;for(const i of n)i.reject(o);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((i,s)=>n.push({resolve:i,reject:s})).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=mn(this,ds,"f");if(!e)throw new B("stream ended without producing a ChatCompletion");return e}}function NR(t,e){return ER(t,e)}class zd extends O{constructor(){super(...arguments),this.inputItems=new w0(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&_0(r),r))}retrieve(e,n={},r){return this._client.get(`/responses/${e}`,{query:n,...r,stream:(n==null?void 0:n.stream)??!1})}del(e,n){return this._client.delete(`/responses/${e}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(r=>v0(r,e))}stream(e,n){return qd.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(`/responses/${e}/cancel`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}}class RR extends Ie{}zd.InputItems=w0;class x0 extends O{create(e,n,r){return this._client.post(`/uploads/${e}/parts`,dr({body:n,...r}))}}class Jd extends O{constructor(){super(...arguments),this.parts=new x0(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(`/uploads/${e}/cancel`,n)}complete(e,n,r){return this._client.post(`/uploads/${e}/complete`,{body:n,...r})}}Jd.Parts=x0;const PR=async t=>{const e=await Promise.allSettled(t),n=e.filter(o=>o.status==="rejected");if(n.length){for(const o of n)console.error(o.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const o of e)o.status==="fulfilled"&&r.push(o.value);return r};class Yl extends O{create(e,n,r){return this._client.post(`/vector_stores/${e}/files`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,n,r,o){return this._client.post(`/vector_stores/${e}/files/${n}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,n={},r){return ge(n)?this.list(e,{},n):this._client.getAPIList(`/vector_stores/${e}/files`,Kl,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,n,r){return this._client.delete(`/vector_stores/${e}/files/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const o=await this.create(e,n,r);return await this.poll(e,o.id,r)}async poll(e,n,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const i=await this.retrieve(e,n,{...r,headers:o}).withResponse(),s=i.data;switch(s.status){case"in_progress":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const c=i.response.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await Ni(a);break;case"failed":case"completed":return s}}}async upload(e,n,r){const o=await this._client.files.create({file:n,purpose:"assistants"},r);return this.create(e,{file_id:o.id},r)}async uploadAndPoll(e,n,r){const o=await this.upload(e,n,r);return await this.poll(e,o.id,r)}content(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/files/${n}/content`,Wd,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Kl extends Ie{}class Wd extends Ol{}Yl.VectorStoreFilesPage=Kl;Yl.FileContentResponsesPage=Wd;class E0 extends O{create(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,n,r){return this._client.get(`/vector_stores/${e}/file_batches/${n}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,n,r){return this._client.post(`/vector_stores/${e}/file_batches/${n}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,n,r){const o=await this.create(e,n);return await this.poll(e,o.id,r)}listFiles(e,n,r={},o){return ge(r)?this.listFiles(e,n,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${n}/files`,Kl,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async poll(e,n,r){const o={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(o["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:i,response:s}=await this.retrieve(e,n,{...r,headers:o}).withResponse();switch(i.status){case"in_progress":let a=5e3;if(r!=null&&r.pollIntervalMs)a=r.pollIntervalMs;else{const c=s.headers.get("openai-poll-after-ms");if(c){const d=parseInt(c);isNaN(d)||(a=d)}}await Ni(a);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:n,fileIds:r=[]},o){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(o==null?void 0:o.maxConcurrency)??5,s=Math.min(i,n.length),a=this._client,c=n.values(),d=[...r];async function f(h){for(let g of h){const w=await a.files.create({file:g,purpose:"assistants"},o);d.push(w.id)}}const p=Array(s).fill(c).map(f);return await PR(p),await this.createAndPoll(e,{file_ids:d})}}class On extends O{constructor(){super(...arguments),this.files=new Yl(this._client),this.fileBatches=new E0(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,n){return this._client.get(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,n,r){return this._client.post(`/vector_stores/${e}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},n){return ge(e)?this.list({},e):this._client.getAPIList("/vector_stores",Yd,{query:e,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,n){return this._client.delete(`/vector_stores/${e}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}search(e,n,r){return this._client.getAPIList(`/vector_stores/${e}/search`,Kd,{body:n,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Yd extends Ie{}class Kd extends Ol{}On.VectorStoresPage=Yd;On.VectorStoreSearchResponsesPage=Kd;On.Files=Yl;On.VectorStoreFilesPage=Kl;On.FileContentResponsesPage=Wd;On.FileBatches=E0;var S0;class $ extends QN{constructor({baseURL:e=is("OPENAI_BASE_URL"),apiKey:n=is("OPENAI_API_KEY"),organization:r=is("OPENAI_ORG_ID")??null,project:o=is("OPENAI_PROJECT_ID")??null,...i}={}){if(n===void 0)throw new B("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:n,organization:r,project:o,...i,baseURL:e||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&lR())throw new B(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new c0(this),this.chat=new ql(this),this.embeddings=new f0(this),this.files=new Md(this),this.images=new g0(this),this.audio=new Ri(this),this.moderations=new y0(this),this.models=new $d(this),this.fineTuning=new Bn(this),this.graders=new Od(this),this.vectorStores=new On(this),this.beta=new go(this),this.batches=new hd(this),this.uploads=new Jd(this),this.responses=new zd(this),this.evals=new Li(this),this.containers=new Mi(this),this._options=s,this.apiKey=n,this.organization=r,this.project=o}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return DN(e,{arrayFormat:"brackets"})}}S0=$;$.OpenAI=S0;$.DEFAULT_TIMEOUT=6e5;$.OpenAIError=B;$.APIError=Le;$.APIConnectionError=bl;$.APIConnectionTimeoutError=pd;$.APIUserAbortError=yt;$.NotFoundError=xv;$.ConflictError=Ev;$.RateLimitError=Tv;$.BadRequestError=vv;$.AuthenticationError=_v;$.InternalServerError=Cv;$.PermissionDeniedError=wv;$.UnprocessableEntityError=Sv;$.toFile=kv;$.fileFromPath=mv;$.Completions=c0;$.Chat=ql;$.ChatCompletionsPage=Hl;$.Embeddings=f0;$.Files=Md;$.FileObjectsPage=Dd;$.Images=g0;$.Audio=Ri;$.Moderations=y0;$.Models=$d;$.ModelsPage=Hd;$.FineTuning=Bn;$.Graders=Od;$.VectorStores=On;$.VectorStoresPage=Yd;$.VectorStoreSearchResponsesPage=Kd;$.Beta=go;$.Batches=hd;$.BatchesPage=md;$.Uploads=Jd;$.Responses=zd;$.Evals=Li;$.EvalListResponsesPage=kd;$.Containers=Mi;$.ContainerListResponsesPage=Ad;const ac=10,gm=3,kR=2e3;let Ds=15,Nr=[];const Ha=t=>{Ds=t,Nr=[],console.log(`Global Rate Limit set to: ${t}`)},T0=t=>new Promise(e=>setTimeout(e,t)),mr=async()=>{if(Ds==="unlimited")return;const t=Date.now();if(Nr=Nr.filter(e=>t-e<6e4),Nr.length>=Ds){const e=Nr[0],n=6e4-(t-e)+100;console.warn(`Rate limit (${Ds} RPM) hit. Waiting ${n}ms...`),await T0(n),await mr()}else Nr.push(Date.now())};function MR(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let o=0;o<r;o++)e+=String.fromCharCode(n[o]);return window.btoa(e)}const DR=async t=>{if(!t||!t.startsWith("AIzaSy"))return!1;const e=["gemini-2.0-flash","gemini-2.5-flash"],n=new fd({apiKey:t});for(const r of e)try{return await mr(),await n.models.countTokens({model:r,contents:[{role:"user",parts:[{text:"test"}]}]}),!0}catch(o){if((o==null?void 0:o.status)==="NOT_FOUND"||(o==null?void 0:o.message)&&o.message.includes("NOT_FOUND"))console.warn(`Validation with model "${r}" failed (Not Found). Trying next model...`);else return console.error("Google API Key validation failed with a critical error:",o),!1}return console.error("All fallback models for Google API Key validation failed."),!1},LR=async t=>{if(!t||!t.startsWith("sk-"))return!1;try{return await mr(),await new $({apiKey:t,dangerouslyAllowBrowser:!0}).models.list(),!0}catch(e){return console.error("OpenAI API Key validation failed:",e),!1}};async function FR(t,e,n,r){const o=new fd({apiKey:n}),i=await t.arrayBuffer(),a=[{inlineData:{data:MR(i),mimeType:t.type}}],c=`You are a professional captioning AI.
    TASK: Transcribe the audio perfectly into SRT (SubRip) subtitle format.
    LANGUAGE: ${e==="auto"?"Detect the spoken language automatically":e}.
    
    CRITICAL FORMATTING RULES:
    1.  **Strict Segmentation**: You MUST split the audio into SHORT, distinct subtitle blocks.
    2.  **Timing**: Each block must have exact timestamps corresponding to when those specific words are spoken.
    3.  **Length Limit**: Max 42 characters per line. Max 2 lines per block.
    4.  **Duration**: No single subtitle block should last longer than 5 seconds. Split long sentences into multiple blocks.
    5.  **Output**: Return ONLY the SRT content. No markdown, no "Here is the SRT", no code blocks. Just the raw text.

    Bad Example (DO NOT DO THIS):
    1
    00:00:00,000 --> 00:00:30,000
    [30 seconds of text crammed into one block...]

    Good Example (DO THIS):
    1
    00:00:01,000 --> 00:00:03,500
    Welcome back to the channel.

    2
    00:00:03,600 --> 00:00:06,000
    Today we are discussing AI models.
    `;await mr();const f=(await o.models.generateContent({model:r,contents:[{role:"user",parts:[{text:c},...a]}]})).text;if(!f)throw new Error("No transcription generated.");return f.replace(/```srt\n|```/g,"").trim()}async function UR(t,e,n,r){const o=new $({apiKey:n,dangerouslyAllowBrowser:!0}),s={file:new File([t],"audio.mp3",{type:t.type}),model:r,response_format:"srt"};if(e!=="auto"){const c=Go.find(d=>d.name===e);c&&(s.language=c.code)}await mr();const a=await o.audio.transcriptions.create(s);if(typeof a!="string")throw new Error("OpenAI transcription returned an invalid result.");return a}async function bR(t,e,n,r){if(r.provider==="openai"){if(!r.transcriptionModel)throw new Error("Transcription model not defined for the selected OpenAI model.");return UR(t,e,n,r.transcriptionModel)}return FR(t,e,n,r.id)}const C0=(t,e,n)=>`You are a professional subtitle translator. 
    Your task is to translate subtitles from ${t==="auto"?"the detected language":t} to ${e}.
    
    CRITICAL RULES:
    1. Maintain the context of the dialogue. Look at surrounding lines in the batch to understand incomplete sentences.
    2. Keep the translation concise to fit within subtitle timing constraints.
    3. Do NOT translate proper nouns or technical terms if they are standard in the target region.
    4. Return ONLY a JSON array containing objects with 'id' and 'text' (the translated text).
    5. The 'id' must match the input 'id' exactly.
    6. Do not include timestamps in the output, only the ID and the translated text.
    
    The JSON to translate is below:
    ${JSON.stringify(n)}`;async function GR(t,e,n,r,o){const i=new fd({apiKey:r}),s=t.map(h=>({id:h.id,text:h.text})),a=C0(e,n,s),c={responseMimeType:"application/json"};await mr();const f=(await i.models.generateContent({model:o,contents:[{role:"user",parts:[{text:a}]}],config:c})).text;if(!f)throw new Error("Received empty response from Google AI.");const p=JSON.parse(f);if(!Array.isArray(p))throw new Error("Invalid JSON format from Google AI.");return p}async function VR(t,e,n,r,o){const i=new $({apiKey:r,dangerouslyAllowBrowser:!0}),s=t.map(h=>({id:h.id,text:h.text})),a=C0(e,n,s);await mr();const d=(await i.chat.completions.create({model:o,messages:[{role:"system",content:a}],response_format:{type:"json_object"}})).choices[0].message.content;if(!d)throw new Error("Received empty response from OpenAI.");const f=JSON.parse(d),p=Array.isArray(f)?f:Object.values(f).find(Array.isArray);if(!p)throw new Error("Invalid JSON format from OpenAI: could not find a JSON array in the response.");return p}const BR=async(t,e,n,r,o)=>{let i;for(let s=1;s<=gm;s++)try{return o.provider==="openai"?await VR(t,e,n,r,o.id):await GR(t,e,n,r,o.id)}catch(a){if(console.warn(`Attempt ${s} failed for ${o.provider}:`,a),i=a,s<gm){const c=kR*Math.pow(1.5,s-1);await T0(c)}}throw i},OR=async(t,e,n,r,o,i,s)=>{if(!r)throw new Error(`API Key for ${o.provider} is missing. Please add the appropriate key in Settings.`);const a=[...t];let c=0;for(let d=0;d<t.length;d+=ac){const f=t.slice(d,d+ac);try{(await BR(f,e,n,r,o)).forEach(h=>{const g=a.findIndex(w=>w.id===h.id);g!==-1&&(a[g]={...a[g],text:h.text})}),c+=f.length,i(Math.min(c,t.length)),s([...a])}catch(p){throw console.error(`Batch starting at ${d} failed after retries`,p),new Error(`Translation failed at subtitle #${f[0].id}. The server might be busy or the content too complex. Please try again.`)}}return a},$R="modulepreload",HR=function(t){return"/SubStream-AI/"+t},ym={},qR=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=HR(c),c in ym)return;ym[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":$R,d||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),d)return new Promise((h,g)=>{p.addEventListener("load",h),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var Q;(function(t){t.LOAD="LOAD",t.EXEC="EXEC",t.FFPROBE="FFPROBE",t.WRITE_FILE="WRITE_FILE",t.READ_FILE="READ_FILE",t.DELETE_FILE="DELETE_FILE",t.RENAME="RENAME",t.CREATE_DIR="CREATE_DIR",t.LIST_DIR="LIST_DIR",t.DELETE_DIR="DELETE_DIR",t.ERROR="ERROR",t.DOWNLOAD="DOWNLOAD",t.PROGRESS="PROGRESS",t.LOG="LOG",t.MOUNT="MOUNT",t.UNMOUNT="UNMOUNT"})(Q||(Q={}));const zR=(()=>{let t=0;return()=>t++})(),JR=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),WR=new Error("called FFmpeg.terminate()");var it,xn,Kt,nr,rr,gl,qe;class YR{constructor(){dn(this,it,null);dn(this,xn,{});dn(this,Kt,{});dn(this,nr,[]);dn(this,rr,[]);He(this,"loaded",!1);dn(this,gl,()=>{z(this,it)&&(z(this,it).onmessage=({data:{id:e,type:n,data:r}})=>{switch(n){case Q.LOAD:this.loaded=!0,z(this,xn)[e](r);break;case Q.MOUNT:case Q.UNMOUNT:case Q.EXEC:case Q.FFPROBE:case Q.WRITE_FILE:case Q.READ_FILE:case Q.DELETE_FILE:case Q.RENAME:case Q.CREATE_DIR:case Q.LIST_DIR:case Q.DELETE_DIR:z(this,xn)[e](r);break;case Q.LOG:z(this,nr).forEach(o=>o(r));break;case Q.PROGRESS:z(this,rr).forEach(o=>o(r));break;case Q.ERROR:z(this,Kt)[e](r);break}delete z(this,xn)[e],delete z(this,Kt)[e]})});dn(this,qe,({type:e,data:n},r=[],o)=>z(this,it)?new Promise((i,s)=>{const a=zR();z(this,it)&&z(this,it).postMessage({id:a,type:e,data:n},r),z(this,xn)[a]=i,z(this,Kt)[a]=s,o==null||o.addEventListener("abort",()=>{s(new DOMException(`Message # ${a} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(JR));He(this,"load",({classWorkerURL:e,...n}={},{signal:r}={})=>(z(this,it)||(Eo(this,it,e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL("/SubStream-AI/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),z(this,gl).call(this)),z(this,qe).call(this,{type:Q.LOAD,data:n},void 0,r)));He(this,"exec",(e,n=-1,{signal:r}={})=>z(this,qe).call(this,{type:Q.EXEC,data:{args:e,timeout:n}},void 0,r));He(this,"ffprobe",(e,n=-1,{signal:r}={})=>z(this,qe).call(this,{type:Q.FFPROBE,data:{args:e,timeout:n}},void 0,r));He(this,"terminate",()=>{const e=Object.keys(z(this,Kt));for(const n of e)z(this,Kt)[n](WR),delete z(this,Kt)[n],delete z(this,xn)[n];z(this,it)&&(z(this,it).terminate(),Eo(this,it,null),this.loaded=!1)});He(this,"writeFile",(e,n,{signal:r}={})=>{const o=[];return n instanceof Uint8Array&&o.push(n.buffer),z(this,qe).call(this,{type:Q.WRITE_FILE,data:{path:e,data:n}},o,r)});He(this,"mount",(e,n,r)=>{const o=[];return z(this,qe).call(this,{type:Q.MOUNT,data:{fsType:e,options:n,mountPoint:r}},o)});He(this,"unmount",e=>{const n=[];return z(this,qe).call(this,{type:Q.UNMOUNT,data:{mountPoint:e}},n)});He(this,"readFile",(e,n="binary",{signal:r}={})=>z(this,qe).call(this,{type:Q.READ_FILE,data:{path:e,encoding:n}},void 0,r));He(this,"deleteFile",(e,{signal:n}={})=>z(this,qe).call(this,{type:Q.DELETE_FILE,data:{path:e}},void 0,n));He(this,"rename",(e,n,{signal:r}={})=>z(this,qe).call(this,{type:Q.RENAME,data:{oldPath:e,newPath:n}},void 0,r));He(this,"createDir",(e,{signal:n}={})=>z(this,qe).call(this,{type:Q.CREATE_DIR,data:{path:e}},void 0,n));He(this,"listDir",(e,{signal:n}={})=>z(this,qe).call(this,{type:Q.LIST_DIR,data:{path:e}},void 0,n));He(this,"deleteDir",(e,{signal:n}={})=>z(this,qe).call(this,{type:Q.DELETE_DIR,data:{path:e}},void 0,n))}on(e,n){e==="log"?z(this,nr).push(n):e==="progress"&&z(this,rr).push(n)}off(e,n){e==="log"?Eo(this,nr,z(this,nr).filter(r=>r!==n)):e==="progress"&&Eo(this,rr,z(this,rr).filter(r=>r!==n))}}it=new WeakMap,xn=new WeakMap,Kt=new WeakMap,nr=new WeakMap,rr=new WeakMap,gl=new WeakMap,qe=new WeakMap;var vm;(function(t){t.MEMFS="MEMFS",t.NODEFS="NODEFS",t.NODERAWFS="NODERAWFS",t.IDBFS="IDBFS",t.WORKERFS="WORKERFS",t.PROXYFS="PROXYFS"})(vm||(vm={}));const KR=new Error("failed to get response body reader"),XR=new Error("failed to complete download"),QR="Content-Length",ZR=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const{result:o}=r;o instanceof ArrayBuffer?e(new Uint8Array(o)):e(new Uint8Array)},r.onerror=o=>{var i,s;n(Error(`File could not be read! Code=${((s=(i=o==null?void 0:o.target)==null?void 0:i.error)==null?void 0:s.code)||-1}`))},r.readAsArrayBuffer(t)}),Xd=async t=>{let e;if(typeof t=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(t instanceof URL)e=await(await fetch(t)).arrayBuffer();else if(t instanceof File||t instanceof Blob)e=await ZR(t);else return new Uint8Array;return new Uint8Array(e)},I0=async(t,e)=>{var o;const n=await fetch(t);let r;try{const i=parseInt(n.headers.get(QR)||"-1"),s=(o=n.body)==null?void 0:o.getReader();if(!s)throw KR;const a=[];let c=0;for(;;){const{done:p,value:h}=await s.read(),g=h?h.length:0;if(p){if(i!=-1&&i!==c)throw XR;e&&e({url:t,total:i,received:c,delta:g,done:p});break}a.push(h),c+=g,e&&e({url:t,total:i,received:c,delta:g,done:p})}const d=new Uint8Array(c);let f=0;for(const p of a)d.set(p,f),f+=p.length;r=d.buffer}catch(i){console.log("failed to send download progress event: ",i),r=await n.arrayBuffer(),e&&e({url:t,total:r.byteLength,received:r.byteLength,delta:0,done:!0})}return r},jR=async(t,e,n=!1,r)=>{const o=n?await I0(t,r):await(await fetch(t)).arrayBuffer(),i=new Blob([o],{type:e});return URL.createObjectURL(i)},eP=Object.freeze(Object.defineProperty({__proto__:null,downloadWithProgress:I0,fetchFile:Xd,toBlobURL:jR},Symbol.toStringTag,{value:"Module"})),Cr=new YR;async function tP(t){if(console.log("loadFFmpeg: Awaiting lock and checking if loaded..."),Cr.loaded)return console.log("loadFFmpeg: Already loaded."),t("Engine ready."),Cr;Cr.on("log",({message:n})=>{console.log("FFMPEG LOG:",n)}),Cr.on("progress",({progress:n})=>{console.log(`FFmpeg Progress: ${(n*100).toFixed(2)}%`)}),t("Loading core video engine...");const e="https://unpkg.com/@ffmpeg/core@0.12.6/dist/esm";try{console.log(`loadFFmpeg: Attempting to load core from CDN: ${e}`);const{toBlobURL:n}=await qR(async()=>{const{toBlobURL:r}=await Promise.resolve().then(()=>eP);return{toBlobURL:r}},void 0);console.log("loadFFmpeg: Dynamic import of toBlobURL successful."),await Cr.load({coreURL:await n(`${e}/ffmpeg-core.js`,"text/javascript"),wasmURL:await n(`${e}/ffmpeg-core.wasm`,"application/wasm")}),console.log("loadFFmpeg: ffmpeg.load() completed successfully."),t("Engine loaded.")}catch(n){throw console.error("CRITICAL ERROR during FFmpeg load:",n),n}return Cr}async function nP(t,e){console.log("analyzeVideoFile: Starting analysis..."),await t.writeFile("input.video",await Xd(e)),console.log("analyzeVideoFile: Video file written to FFmpeg memory.");const n=["-i","input.video","-hide_banner"];let r="";const o=({message:a})=>{r+=a+`
`};t.on("log",o),console.log("analyzeVideoFile: Executing probing command...");try{await t.exec(n)}catch(a){console.log("analyzeVideoFile: Caught an error during exec, which is expected for probing. Error:",a)}finally{t.off("log",o),console.log("analyzeVideoFile: Log listener removed.")}if(!r)throw console.error("analyzeVideoFile: FFmpeg returned no data. This indicates a critical failure."),new Error("Could not analyze video file. FFmpeg returned no data.");console.log("analyzeVideoFile: Parsing FFmpeg output for subtitle tracks.");const i=[];return r.split(`
`).forEach(a=>{if(a.trim().startsWith("Stream #")&&a.includes("Subtitle:")){const c=a.match(/Stream #\d+:(\d+)(\((\w+)\))?: Subtitle: .*?(?:\(default\))?/),d=a.match(/title\s+:\s+(.*)/);c&&i.push({index:parseInt(c[1]),language:c[3]||"und",title:d?d[1].trim():`Track ${c[1]}`})}}),console.log(`analyzeVideoFile: Found ${i.length} subtitle tracks.`),i}async function rP(t,e){const n=["-i","input.video","-map",`0:s:${e}`,"output.srt"];await t.exec(n);const r=await t.readFile("output.srt");return new TextDecoder().decode(r)}async function oP(t){const e=["-i","input.video","-vn","-acodec","libmp3lame","-q:a","2","output.mp3"];await t.exec(e);const n=await t.readFile("output.mp3");if(n instanceof Uint8Array){const r=new Uint8Array(n);return new Blob([r],{type:"audio/mp3"})}throw new Error("FFmpeg did not return a valid binary file for audio extraction.")}async function iP(t,e,n,r){await t.writeFile("input.video",await Xd(e)),await t.writeFile("subtitles.srt",new TextEncoder().encode(n));const o="output.mkv",i=["-i","input.video","-i","subtitles.srt","-c","copy","-map","0","-map","-0:s","-map","1","-c:s:0","srt","-metadata:s:s:0",`language=${r}`,o];await t.exec(i);const s=await t.readFile(o);if(s instanceof Uint8Array){const a=new Uint8Array(s);return new Blob([a],{type:"video/x-matroska"})}throw new Error("FFmpeg did not return a valid binary file for video muxing.")}const Qd="http://localhost:4000/api";function sP(t){const e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,n=t.match(e);return n&&n[7].length===11?n[7]:null}async function lP(t){try{const e=await fetch(`${Qd}/info?url=${encodeURIComponent(t)}`);if(!e.ok){const r=await e.json().catch(()=>({}));throw new Error(r.error||`Server returned ${e.status}: Failed to process video.`)}const n=await e.json();return n.meta.videoUrl=n.meta.videoUrl||t,{meta:n.meta,captions:n.captions}}catch(e){throw console.error("Backend API Error:",e),e.name==="TypeError"&&e.message==="Failed to fetch"?new Error("Could not connect to local server. Please run 'npm start' in the 'server' folder."):new Error(e.message||"Failed to fetch video details.")}}async function aP(t,e){e.startsWith("http");try{const n=new URLSearchParams({url:t,token:e}),r=await fetch(`${Qd}/caption?${n.toString()}`);if(!r.ok){const o=await r.text();throw new Error(o||"Failed to download caption track from backend.")}return await r.text()}catch(n){throw console.error("Subtitle download failed:",n),new Error(n.message||"Failed to download subtitles.")}}async function uP(t,e,n){const r=new URLSearchParams({url:t,token:e,name:n});try{const o=await fetch(`${Qd}/download-video?${r.toString()}`);if(!o.ok){const a=await o.text().catch(()=>"Unknown Server Error");throw new Error(a||"Download failed on server.")}const i=await o.blob(),s=n.endsWith(".mp4")?n:`${n}.mp4`;Vu(s,i)}catch(o){throw console.error("Video download failed:",o),new Error(o.message||"Failed to download video from server.")}}const pt=({children:t,variant:e="primary",icon:n,className:r="",progress:o,statusText:i,completed:s,disabled:a,...c})=>{const d="relative inline-flex items-center justify-center font-medium transition-all duration-500 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black overflow-hidden whitespace-nowrap",f={primary:"bg-white text-black hover:bg-neutral-200 focus:ring-white border border-transparent",secondary:"bg-neutral-800 text-white hover:bg-neutral-700 focus:ring-neutral-700 border border-neutral-700",outline:"bg-transparent text-neutral-300 border border-neutral-800 hover:border-white hover:text-white"},p=o!=null&&o>=0;return m.jsx("button",{className:`
        ${d} 
        ${p?"bg-neutral-800 border-neutral-700 text-white w-64 md:w-80":f[e]} 
        ${p?"px-0 py-0":"px-6 py-3"}
        ${r}
      `,disabled:a||p,...c,children:p?m.jsxs("div",{className:"relative w-full h-12 flex items-center justify-center px-4",children:[m.jsx("div",{className:"relative z-10 flex items-center gap-2 animate-fade-in w-full justify-center",children:s?m.jsxs(m.Fragment,{children:[m.jsx(Dx,{className:"w-5 h-5 text-green-400"}),m.jsx("span",{className:"text-green-400 font-bold",children:"Download Complete"})]}):m.jsxs("div",{className:"flex items-center justify-center gap-2 min-w-0",children:[i&&m.jsx("span",{className:"text-sm text-neutral-400 font-medium truncate",children:i}),m.jsxs("span",{className:"text-lg font-bold text-white shrink-0",children:[Math.round(o||0),"%"]})]})}),!s&&m.jsx("div",{className:"absolute left-0 bottom-0 h-1 bg-white transition-all duration-300 ease-out",style:{width:`${o}%`}})]}):m.jsxs(m.Fragment,{children:[n&&m.jsx("span",{className:"mr-2",children:n}),t]})})},cP=({subtitle:t,isActive:e,isSingleColumn:n})=>m.jsx("div",{className:`group relative p-6 transition-all duration-300 border-b border-neutral-900 hover:bg-neutral-900/50 ${e?"bg-neutral-900":""}`,children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsxs("div",{className:"w-24 shrink-0 flex flex-col gap-1",children:[m.jsxs("span",{className:"text-xs font-mono text-neutral-500",children:["#",t.id]}),m.jsx("span",{className:"text-[10px] font-mono text-neutral-600 bg-neutral-900/50 px-1 py-0.5 rounded w-fit",children:t.startTime.split(",")[0]})]}),m.jsxs("div",{className:`w-full ${n?"block":"grid grid-cols-1 md:grid-cols-2 gap-6"}`,children:[m.jsx("div",{className:"relative",children:m.jsx("p",{className:`font-medium leading-relaxed ${n?"text-white text-lg":"text-sm text-neutral-400 font-sans"}`,children:t.originalText})}),!n&&m.jsx("div",{className:"relative",children:m.jsx("p",{className:`text-base font-medium font-display leading-relaxed transition-colors duration-500 ${t.text===t.originalText?"text-neutral-600 italic":"text-white"}`,children:t.text===t.originalText?"(Pending...)":t.text})})]})]})}),fs=({number:t,title:e,isActive:n,isCompleted:r})=>m.jsxs("div",{className:`
      flex flex-col items-center gap-2 w-20 text-center
      lg:flex-row lg:w-auto lg:text-left lg:gap-3
      ${n?"opacity-100":"opacity-40"} transition-opacity duration-300
    `,children:[m.jsx("div",{className:`
        flex items-center justify-center w-8 h-8 rounded-full border text-sm font-bold transition-all shrink-0
        ${n||r?"bg-white text-black border-white":"bg-transparent text-white border-neutral-700"}
      `,children:r?"":t}),m.jsx("span",{className:"text-xs lg:text-sm font-medium tracking-wide uppercase",children:e})]}),Ls=({isOpen:t,onClose:e,title:n,children:r})=>{const[o,i]=M.useState(!1);return M.useEffect(()=>{if(t)i(!0),document.body.style.overflow="hidden";else{const s=setTimeout(()=>i(!1),300);return document.body.style.overflow="unset",()=>clearTimeout(s)}},[t]),!o&&!t?null:m.jsxs("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 transition-all duration-300 ${t?"opacity-100 visible":"opacity-0 invisible"}`,children:[m.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md transition-opacity duration-300",onClick:e}),m.jsxs("div",{className:`
          relative w-full max-w-3xl md:max-w-6xl max-h-[85vh] overflow-hidden rounded-3xl border border-neutral-800 
          bg-neutral-900/80 backdrop-blur-xl shadow-2xl flex flex-col transform transition-all duration-300 ease-out
          ${t?"scale-100 translate-y-0 opacity-100":"scale-95 translate-y-4 opacity-0"}
        `,children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-neutral-800 bg-neutral-900/50",children:[m.jsx("h2",{className:"text-2xl font-display font-bold text-white tracking-tight",children:n}),m.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-white/10 text-neutral-400 hover:text-white transition-colors focus:outline-none",children:m.jsx(Wx,{className:"w-5 h-5"})})]}),m.jsx("div",{className:"p-6 md:p-8 overflow-y-auto custom-scrollbar",children:r})]})]})},Mo=[{id:"intro",title:"Getting Started",category:"General",content:m.jsxs("div",{className:"space-y-6",children:[m.jsxs("p",{className:"text-lg leading-relaxed text-neutral-300",children:["SubStream AI is a next-generation subtitle translation tool powered by Google's ",m.jsx("strong",{className:"text-white",children:"Gemini"})," models. Unlike traditional translators that process line-by-line, SubStream understands the full context of a scene, ensuring dialogue flows naturally in the target language."]}),m.jsxs("div",{className:"p-6 bg-neutral-900/40 rounded-2xl border border-neutral-800",children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Quick Start"}),m.jsxs("ol",{className:"relative border-l border-neutral-800 ml-3 space-y-6",children:[m.jsxs("li",{className:"ml-6",children:[m.jsx("span",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-neutral-600 rounded-full ring-4 ring-neutral-900"}),m.jsx("h4",{className:"font-bold text-white text-sm",children:"Upload"}),m.jsxs("p",{className:"text-neutral-400 text-sm",children:["Drag & drop your ",m.jsx("code",{children:".srt"})," file into the upload zone."]})]}),m.jsxs("li",{className:"ml-6",children:[m.jsx("span",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-neutral-600 rounded-full ring-4 ring-neutral-900"}),m.jsx("h4",{className:"font-bold text-white text-sm",children:"Select Languages"}),m.jsx("p",{className:"text-neutral-400 text-sm",children:"Choose your target language. Source language is auto-detected by default."})]}),m.jsxs("li",{className:"ml-6",children:[m.jsx("span",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-neutral-600 rounded-full ring-4 ring-neutral-900"}),m.jsx("h4",{className:"font-bold text-white text-sm",children:"Translate"}),m.jsx("p",{className:"text-neutral-400 text-sm",children:'Click "Start Translation". The AI processes subtitles in smart batches.'})]}),m.jsxs("li",{className:"ml-6",children:[m.jsx("span",{className:"absolute -left-1.5 mt-1.5 w-3 h-3 bg-green-500 rounded-full ring-4 ring-neutral-900"}),m.jsx("h4",{className:"font-bold text-white text-sm",children:"Download"}),m.jsx("p",{className:"text-neutral-400 text-sm",children:"Review the side-by-side preview and download your new SRT file."})]})]})]})]})},{id:"limits",title:"File Limits & Formats",category:"General",content:m.jsxs("div",{className:"space-y-6",children:[m.jsx("p",{children:"Ensure your files meet the following criteria for optimal processing:"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"p-5 bg-neutral-800/20 border border-neutral-800 rounded-xl hover:bg-neutral-800/30 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx(Ai,{className:"w-5 h-5 text-blue-400"}),m.jsx("span",{className:"text-sm font-bold uppercase text-neutral-400",children:"Supported Format"})]}),m.jsx("span",{className:"text-xl text-white font-medium",children:".SRT (SubRip)"}),m.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"UTF-8 Encoding recommended"})]}),m.jsxs("div",{className:"p-5 bg-neutral-800/20 border border-neutral-800 rounded-xl hover:bg-neutral-800/30 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx(il,{className:"w-5 h-5 text-purple-400"}),m.jsx("span",{className:"text-sm font-bold uppercase text-neutral-400",children:"Max File Size"})]}),m.jsx("span",{className:"text-xl text-white font-medium",children:"~5 MB"}),m.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Approx. 2 hours of dialogue"})]})]}),m.jsxs("div",{className:"p-4 rounded-lg bg-yellow-900/10 border border-yellow-900/30 text-yellow-200/80 text-sm",children:[m.jsx("strong",{children:"Note:"})," Very large files are processed in chunks. Ensure you have a stable internet connection during the process."]})]})},{id:"api-config",title:"Model & API Config",category:"Setup",content:m.jsxs("div",{className:"space-y-4",children:[m.jsx("p",{children:"SubStream AI supports using your own Google Gemini API Key and selecting different AI models."}),m.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl bg-neutral-900/50 border border-neutral-800 mt-4",children:[m.jsx(il,{className:"w-6 h-6 text-green-400 shrink-0 mt-1"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-white",children:"Changing Models"}),m.jsxs("p",{className:"text-sm text-neutral-400 mt-2 mb-3",children:["Click the Model Name in the top right of the navigation bar. This opens the Configuration overlay where you can switch between ",m.jsx("strong",{children:"Gemini 3 Pro"})," (Best Quality), ",m.jsx("strong",{children:"Gemini 2.5 Pro/Flash"}),", and others to suit your needs."]})]})]}),m.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl bg-neutral-900/50 border border-neutral-800 mt-4",children:[m.jsx(bu,{className:"w-6 h-6 text-green-400 shrink-0 mt-1"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-white",children:"Using Custom API Keys"}),m.jsxs("p",{className:"text-sm text-neutral-400 mt-2 mb-3",children:["In the same Configuration overlay, paste your key starting with ",m.jsx("code",{children:"AIzaSy..."}),"."]}),m.jsxs("ul",{className:"list-disc list-inside text-xs text-neutral-500 space-y-1",children:[m.jsx("li",{children:"Your key is stored in your browser's local storage."}),m.jsx("li",{children:"It is never sent to our servers, only directly to Google APIs."}),m.jsx("li",{children:"You can clear it at any time."})]})]})]})]})},{id:"quota-estimation",title:"Quota & Estimations",category:"Setup",content:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(ky,{className:"w-6 h-6 text-cyan-400"}),m.jsx("h3",{className:"text-xl font-bold text-white",children:"Understanding Usage"})]}),m.jsx("p",{children:'The app displays an estimated "Cost" in API requests when you upload a file.'}),m.jsxs("div",{className:"p-4 rounded-lg bg-neutral-800/30 border-l-4 border-cyan-500",children:[m.jsx("p",{className:"text-white font-medium",children:"Formula:"}),m.jsx("code",{className:"block mt-2 text-cyan-300 font-mono text-sm",children:"Total API Requests = Total Subtitle Lines / 10"})]}),m.jsx("p",{className:"text-sm text-neutral-400",children:"We batch subtitles in groups of 10 to optimize for context and speed. A typical movie with 1,500 lines will consume approximately 150 API requests."}),m.jsx("p",{className:"text-sm text-neutral-400",children:'The "Remaining Requests" indicator in the top right is a local estimator based on the standard Gemini Free Tier limit (1,500 requests/day). It resets daily on your browser.'})]})},{id:"context-aware",title:"Context Awareness",category:"Features",content:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx($x,{className:"w-6 h-6 text-indigo-400"}),m.jsx("h3",{className:"text-xl font-bold text-white",children:"Smart Batching"})]}),m.jsx("p",{children:"Standard translators translate one line at a time, often resulting in broken sentences when a speaker's thought spans multiple subtitles."}),m.jsxs("p",{children:[m.jsx("strong",{children:"SubStream AI"}),' groups subtitles into "Semantic Batches" (typically 10-20 lines). It sends the entire batch to Gemini 3 Pro, allowing the model to:']}),m.jsxs("ul",{className:"space-y-2 list-disc list-inside text-neutral-300",children:[m.jsx("li",{children:"See the previous and next lines before translating."}),m.jsx("li",{children:'Understand gender and formality (e.g., distinct "You" in Spanish/French).'}),m.jsx("li",{children:"Maintain consistent terminology for names and places."})]})]})},{id:"advanced-settings",title:"Advanced Settings",category:"Features",content:m.jsxs("div",{className:"space-y-4",children:[m.jsx("p",{children:"Currently, the app uses optimized default settings for the best balance of speed and quality."}),m.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-4",children:[m.jsxs("div",{className:"p-4 rounded-lg border border-neutral-800 bg-neutral-900/30",children:[m.jsx("h4",{className:"font-bold text-white mb-1",children:"Temperature: 0.7"}),m.jsx("p",{className:"text-sm text-neutral-400",children:"Balanced for creativity and accuracy. Ensures translations aren't too robotic but stick to the original meaning."})]}),m.jsxs("div",{className:"p-4 rounded-lg border border-neutral-800 bg-neutral-900/30",children:[m.jsx("h4",{className:"font-bold text-white mb-1",children:"Model Selection"}),m.jsxs("p",{className:"text-sm text-neutral-400",children:["You can now switch between models via the top navigation bar. Use ",m.jsx("strong",{children:"Flash"})," models for speed and ",m.jsx("strong",{children:"Pro"})," models for quality."]})]})]})]})},{id:"common-errors",title:"Common Errors",category:"Support",content:m.jsxs("div",{className:"space-y-6",children:[m.jsx("p",{children:"If you encounter issues, check the error code or message displayed."}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex gap-4 p-4 bg-red-950/20 border border-red-900/30 rounded-xl",children:[m.jsx(rd,{className:"w-6 h-6 text-red-500 shrink-0"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-red-200 font-bold",children:"Translation Failed (500 / XHR Error)"}),m.jsx("p",{className:"text-sm text-red-200/70 mt-1",children:"This usually means the AI service is temporarily overloaded or the batch size was too large for the network."}),m.jsx("div",{className:"mt-3 p-2 bg-black/40 rounded text-xs font-mono text-red-300",children:"Fix: The app automatically retries. If it fails repeatedly, try refreshing the page or checking your internet connection."})]})]}),m.jsxs("div",{className:"flex gap-4 p-4 bg-neutral-800/30 border border-neutral-800 rounded-xl",children:[m.jsx(zx,{className:"w-6 h-6 text-orange-400 shrink-0"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-white font-bold",children:"Empty Output / Safety Filter"}),m.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:"Gemini has built-in safety filters. If your subtitle file contains extreme violence, hate speech, or explicit content, the model may refuse to generate text."})]})]}),m.jsxs("div",{className:"flex gap-4 p-4 bg-neutral-800/30 border border-neutral-800 rounded-xl",children:[m.jsx(Dy,{className:"w-6 h-6 text-yellow-400 shrink-0"}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-white font-bold",children:"Rate Limit Exceeded (429)"}),m.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:"You are sending too many requests too quickly. The app has a built-in delay (1 second) between batches to prevent this, but it can still happen under heavy load."})]})]})]})]})},{id:"parsing-issues",title:"Parsing Issues",category:"Support",content:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("p",{children:["If the app says ",m.jsx("strong",{children:'"Failed to parse SRT file"'})," or shows 0 lines:"]}),m.jsx("ul",{className:"list-disc list-inside space-y-2 text-neutral-300 text-sm",children:m.jsxs("li",{children:["Check if the file is a valid ",m.jsx("code",{children:".srt"}),". It should look like this:"]})}),m.jsxs("div",{className:"bg-black p-4 rounded-lg border border-neutral-800 font-mono text-xs text-neutral-400",children:["1",m.jsx("br",{}),"00:00:01,000 --> 00:00:04,000",m.jsx("br",{}),"Hello world."]}),m.jsxs("ul",{className:"list-disc list-inside space-y-2 text-neutral-300 text-sm pt-2",children:[m.jsxs("li",{children:["Ensure the file encoding is ",m.jsx("strong",{children:"UTF-8"}),"."]}),m.jsx("li",{children:"Some SRT files have malformed timestamps (e.g., using dots instead of commas). SubStream tries to correct this, but severe errors may fail."})]})]})}],dP=({onBack:t})=>{const[e,n]=M.useState(""),[r,o]=M.useState(Mo[0].id),i=M.useMemo(()=>{const a={};return Mo.filter(f=>f.title.toLowerCase().includes(e.toLowerCase())||typeof f.content=="string"&&f.content.toLowerCase().includes(e.toLowerCase())).forEach(f=>{a[f.category]||(a[f.category]=[]),a[f.category].push(f)}),Array.from(new Set(Mo.map(f=>f.category))).filter(f=>a[f]&&a[f].length>0).map(f=>({category:f,docs:a[f]}))},[e]),s=Mo.find(a=>a.id===r)||Mo[0];return m.jsxs("div",{className:"min-h-screen bg-black text-neutral-200 animate-fade-in flex flex-col",children:[m.jsx("div",{className:"fixed inset-0 pointer-events-none z-0",children:m.jsx("div",{className:"absolute top-0 right-0 w-[60%] h-[60%] bg-neutral-900/20 blur-[150px] rounded-full mix-blend-screen"})}),m.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto w-full px-6 py-8 md:py-12 flex flex-col h-screen",children:[m.jsxs("div",{className:"flex items-center justify-between mb-8 shrink-0",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-neutral-800 transition-colors group",children:m.jsx(Rx,{className:"w-6 h-6 text-neutral-400 group-hover:text-white"})}),m.jsx("h1",{className:"text-3xl font-display font-bold text-white",children:"Documentation"})]}),m.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[m.jsx(Gu,{className:"absolute left-4 top-3.5 w-5 h-5 text-neutral-500"}),m.jsx("input",{type:"text",placeholder:"Search guides...",value:e,onChange:a=>n(a.target.value),className:"w-full bg-neutral-900/50 border border-neutral-800 rounded-xl py-3 pl-12 pr-4 text-white focus:ring-1 focus:ring-white focus:border-white transition-all outline-none"})]})]}),m.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-12 gap-8 overflow-hidden min-h-0",children:[m.jsxs("div",{className:"lg:col-span-3 overflow-y-auto pr-2 custom-scrollbar pb-10",children:[m.jsxs("div",{className:"relative w-full md:hidden mb-6 sticky top-0 bg-black z-10 py-2",children:[m.jsx(Gu,{className:"absolute left-4 top-5 w-5 h-5 text-neutral-500"}),m.jsx("input",{type:"text",placeholder:"Search...",value:e,onChange:a=>n(a.target.value),className:"w-full bg-neutral-900/50 border border-neutral-800 rounded-xl py-3 pl-12 pr-4 text-white outline-none"})]}),m.jsx("div",{className:"space-y-2",children:i.length>0?i.map(a=>m.jsxs("div",{className:"animate-slide-up mb-6 relative",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-neutral-700"}),m.jsx("h3",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest",children:a.category})]}),m.jsx("div",{className:"absolute left-[3px] top-6 bottom-4 w-px bg-neutral-900"}),m.jsx("div",{className:"space-y-1 relative",children:a.docs.map((c,d)=>m.jsxs("div",{className:"relative pl-6",children:[m.jsx("div",{className:"absolute left-[3px] top-0 h-[24px] w-4 border-l border-b border-neutral-800 rounded-bl-xl"}),m.jsx("button",{onClick:()=>o(c.id),className:`w-full text-left px-4 py-2 rounded-lg text-sm transition-all flex items-center justify-between group relative
                              ${r===c.id?"text-white bg-neutral-800/50 font-medium":"text-neutral-400 hover:text-white hover:bg-neutral-900/30"}
                            `,children:m.jsx("span",{className:"truncate",children:c.title})})]},c.id))})]},a.category)):m.jsx("div",{className:"text-neutral-500 text-sm italic px-4",children:"No matching articles found."})})]}),m.jsx("div",{className:"lg:col-span-9 bg-neutral-900/30 border border-neutral-800 rounded-3xl p-8 md:p-12 overflow-y-auto custom-scrollbar backdrop-blur-sm relative",children:m.jsxs("div",{className:"max-w-3xl mx-auto pb-20",children:[m.jsx("div",{className:"flex items-center gap-3 mb-6",children:m.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono text-neutral-400 uppercase tracking-wider",children:[m.jsx("span",{children:s.category}),m.jsx("span",{className:"text-neutral-600",children:"/"}),m.jsx("span",{className:"text-white",children:s.title})]})}),m.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white mb-8 tracking-tight",children:s.title}),m.jsx("div",{className:"prose prose-invert prose-lg prose-neutral max-w-none text-neutral-300",children:s.content}),m.jsxs("div",{className:"mt-16 pt-8 border-t border-neutral-800 flex items-center justify-between text-sm text-neutral-500",children:[m.jsx("span",{children:"Last updated: November 2025"}),m.jsx("div",{className:"flex gap-4",children:m.jsxs("button",{className:"flex items-center gap-2 hover:text-white transition-colors",children:[m.jsx(Ai,{className:"w-4 h-4"})," Suggest Edit"]})})]})]})})]})]})]})},fP=({videoSrc:t,srtContent:e,isYouTube:n})=>{const r=M.useRef(null),o=M.useRef(null);return M.useEffect(()=>{if(!n&&r.current&&o.current){const i=new Blob([e],{type:"text/vtt"}),s=URL.createObjectURL(i);o.current.src=s;const a=r.current.currentTime,c=!r.current.paused;return r.current.load(),r.current.currentTime=a,c&&r.current.play().catch(d=>console.log("Auto-resume prevented",d)),()=>{URL.revokeObjectURL(s)}}},[e,n]),n?m.jsxs("div",{className:"w-full bg-black rounded-2xl overflow-hidden aspect-video border border-neutral-800 relative group",children:[m.jsx("iframe",{width:"100%",height:"100%",src:t,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}),m.jsx("div",{className:"absolute top-2 right-2 bg-black/80 px-2 py-1 rounded text-[10px] text-neutral-400 pointer-events-none",children:"YouTube Preview"})]}):m.jsx("div",{className:"w-full bg-black rounded-2xl overflow-hidden aspect-video border border-neutral-800",children:m.jsxs("video",{ref:r,controls:!0,crossOrigin:"anonymous",className:"w-full h-full",src:t,children:[m.jsx("track",{ref:o,label:"Translated",kind:"subtitles",srcLang:"en",default:!0}),"Your browser does not support the video tag."]})})},pP=({tracks:t,onSelectTrack:e,onGenerate:n,onGenerateYouTube:r,isYouTubeAuthenticated:o})=>m.jsxs("div",{className:"animate-fade-in space-y-6",children:[m.jsx("h2",{className:"text-xl font-bold text-white text-center",children:"Subtitle Source"}),m.jsx("p",{className:"text-center text-neutral-400 -mt-4",children:"Choose an existing track or generate new subtitles."}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("button",{onClick:n,className:"w-full flex items-center gap-4 p-4 rounded-xl border border-neutral-700 bg-neutral-900/50 hover:bg-neutral-800/50 hover:border-white transition-all text-left",children:[m.jsx("div",{className:"w-10 h-10 bg-indigo-900/50 border border-indigo-700/50 rounded-lg flex items-center justify-center shrink-0",children:m.jsx(Mx,{className:"w-5 h-5 text-indigo-300"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-white",children:"Generate with AI Model"}),m.jsx("p",{className:"text-xs text-neutral-400",children:"Uses the selected AI model (e.g., Gemini, GPT). Requires an API key."})]})]}),m.jsxs("button",{onClick:r,disabled:!o,className:"w-full flex items-center gap-4 p-4 rounded-xl border border-neutral-700 bg-neutral-900/50 hover:bg-neutral-800/50 hover:border-white transition-all text-left disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx("div",{className:"w-10 h-10 bg-red-900/50 border border-red-700/50 rounded-lg flex items-center justify-center shrink-0",children:m.jsx(ll,{className:"w-5 h-5 text-red-300"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-white",children:"Generate with YouTube"}),m.jsx("p",{className:"text-xs text-neutral-400",children:"Uploads video as 'unlisted' to your YouTube account to generate free captions."})]})]}),t.map(i=>m.jsxs("button",{onClick:()=>e(i.index),className:"w-full flex items-center gap-4 p-4 rounded-xl border border-neutral-800 bg-neutral-900/20 hover:bg-neutral-800/50 hover:border-neutral-600 transition-all text-left",children:[m.jsx("div",{className:"w-10 h-10 bg-neutral-800 rounded-lg flex items-center justify-center shrink-0",children:m.jsx(Ai,{className:"w-5 h-5 text-neutral-300"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-white",children:i.title}),m.jsx("p",{className:"text-xs text-neutral-500 uppercase",children:i.language})]})]},i.index))]})]}),hP=({isOpen:t,onClose:e,type:n,onImportFile:r,onImportYouTube:o})=>{const[i,s]=M.useState(""),[a,c]=M.useState("IDLE"),[d,f]=M.useState(null),[p,h]=M.useState(null),[g,w]=M.useState(null),[x,C]=M.useState(null),_=()=>{s(""),c("IDLE"),f(null),h(null),w(null),C(null)},y=async()=>{var S;if(f(null),c("LOADING"),n==="YOUTUBE"){if(!sP(i)){f("Invalid YouTube URL."),c("IDLE");return}try{const{meta:T,captions:k}=await lP(i);C({...T,availableCaptions:k}),c("PREVIEW")}catch(T){f(T.message||"Failed to fetch YouTube details."),c("IDLE")}}else if(n==="URL")try{const I=await fetch(i,{method:"HEAD"});if(!I.ok)throw new Error(`Failed to access URL: ${I.statusText}`);const T=I.headers.get("content-type")||"",k=I.headers.get("content-length"),N=((S=i.split("/").pop())==null?void 0:S.split("?")[0])||"downloaded_file",R=k?`${(parseInt(k)/(1024*1024)).toFixed(2)} MB`:"Unknown Size";if(T.includes("text")||N.endsWith(".srt")||N.endsWith(".vtt"))h("SRT"),w({name:N,size:R,type:"Subtitle File"}),c("PREVIEW");else if(T.includes("video")||N.match(/\.(mp4|mkv|mov|webm)$/i))h("VIDEO"),w({name:N,size:R,type:"Video File"}),c("PREVIEW");else throw new Error("Unsupported file type. Please provide a direct link to an SRT or Video file.")}catch(I){console.error(I),I.message.includes("Failed to access")?(f("CORS restricted or Invalid URL. We will attempt to force download, but it might fail."),h(i.endsWith(".srt")?"SRT":"VIDEO"),w({name:i.split("/").pop()||"file",size:"?",type:"Unknown"}),c("PREVIEW")):(f(I.message),c("IDLE"))}},v=async()=>{if(n==="YOUTUBE"&&x)o(x),e(),_();else if(n==="URL"&&g)try{const S=await fetch(i);if(!S.ok)throw new Error("Download failed.");const I=await S.blob(),T=new File([I],g.name,{type:I.type});r(T),e(),_()}catch(S){f("Download Failed: "+S.message)}},E=n==="YOUTUBE"?"Import from YouTube":n==="URL"?"Import from URL":"Import";return m.jsx(Ls,{isOpen:t,onClose:()=>{e(),_()},title:E,children:m.jsxs("div",{className:"space-y-6",children:[(a==="IDLE"||a==="LOADING")&&m.jsxs("div",{className:"space-y-4",children:[m.jsx("p",{className:"text-neutral-400 text-sm",children:n==="YOUTUBE"?"Paste a YouTube URL. We will fetch the video details and available captions using the local server.":"Paste a direct link to an .SRT file or a supported Video file (MP4, MKV, etc)."}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute left-4 top-3.5 text-neutral-500",children:n==="YOUTUBE"?m.jsx(ll,{className:"w-5 h-5"}):m.jsx(My,{className:"w-5 h-5"})}),m.jsx("input",{type:"text",placeholder:n==="YOUTUBE"?"https://www.youtube.com/watch?v=...":"https://example.com/movie.srt",className:"w-full bg-black border border-neutral-800 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-white transition-colors",value:i,onChange:S=>s(S.target.value),onKeyDown:S=>S.key==="Enter"&&y()})]}),d&&m.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-900/50 rounded-lg text-red-400 text-sm flex gap-2",children:[m.jsx(rd,{className:"w-4 h-4 mt-0.5"}),d]}),m.jsx("div",{className:"flex justify-end",children:m.jsx(pt,{onClick:y,disabled:!i||a==="LOADING",icon:a==="LOADING"?m.jsx(bo,{className:"animate-spin w-4 h-4"}):void 0,children:a==="LOADING"?"Checking...":"Continue"})})]}),a==="PREVIEW"&&n==="YOUTUBE"&&x&&m.jsxs("div",{className:"space-y-6 animate-fade-in",children:[m.jsxs("div",{className:"flex gap-4",children:[m.jsx("img",{src:x.thumbnailUrl,alt:"Thumb",className:"w-32 h-24 object-cover rounded-lg border border-neutral-800"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-white line-clamp-2",children:x.title}),m.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:x.channelTitle}),m.jsx("div",{className:"flex gap-2 mt-2",children:m.jsxs("span",{className:"text-[10px] bg-neutral-800 px-2 py-0.5 rounded text-neutral-400",children:["Duration: ",x.duration]})})]})]}),d&&m.jsx("div",{className:"text-red-400 text-sm",children:d}),m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx(pt,{variant:"outline",onClick:()=>c("IDLE"),children:"Back"}),m.jsx(pt,{onClick:v,icon:m.jsx(sl,{className:"w-4 h-4"}),children:"Import Video"})]})]}),a==="PREVIEW"&&n==="URL"&&g&&m.jsxs("div",{className:"space-y-6 animate-fade-in",children:[m.jsxs("div",{className:"p-6 bg-neutral-900/30 border border-neutral-800 rounded-xl flex items-center gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-full bg-neutral-800 flex items-center justify-center",children:p==="VIDEO"?m.jsx(Hx,{className:"w-6 h-6 text-blue-400"}):m.jsx(Ai,{className:"w-6 h-6 text-green-400"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-white break-all",children:g.name}),m.jsxs("p",{className:"text-sm text-neutral-500",children:[g.type,"  ",g.size]})]})]}),d&&m.jsx("div",{className:"text-red-400 text-sm",children:d}),m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx(pt,{variant:"outline",onClick:()=>c("IDLE"),children:"Back"}),m.jsx(pt,{onClick:v,icon:m.jsx(sl,{className:"w-4 h-4"}),children:"Download & Process"})]})]})]})})},mP=500,gP=()=>m.jsx(Xx,{clientId:"474943199780-akmhetcsrtcb9qej7rfepth49abt2fu8.apps.googleusercontent.com",children:m.jsx(yP,{})}),yP=()=>{var of,sf;const[t,e]=M.useState("HOME"),[n,r]=M.useState("NONE"),[o,i]=M.useState(!1),[s,a]=M.useState(null),[c,d]=M.useState(null),[f,p]=M.useState(null),[h,g]=M.useState([]),[w,x]=M.useState(ie.IDLE),[C,_]=M.useState(0),[y,v]=M.useState(null),[E,S]=M.useState(void 0),[I,T]=M.useState(""),[k,N]=M.useState(!1),[R,U]=M.useState("auto"),[q,ye]=M.useState("es"),[$e,Et]=M.useState(""),[ae,j]=M.useState(W.IDLE),[L,V]=M.useState(""),[H,ee]=M.useState(0),[we,an]=M.useState([]),[Fe,$n]=M.useState(null),[ne,Hn]=M.useState(null),[gr,Xl]=M.useState(""),[qn,Ql]=M.useState(""),[Lt,yr]=M.useState("idle"),[vr,Zl]=M.useState(""),[zn,jl]=M.useState(""),[Ft,_r]=M.useState("idle"),[un,ea]=M.useState(pn[0].id),[Jn,N0]=M.useState(""),[Zd,ta]=M.useState(0),[cn,jd]=M.useState(15),[R0,_P]=M.useState(null),[P0,wP]=M.useState(null),Fi=M.useRef(null),ef=M.useRef(null),vo=M.useRef(null),_o=M.useRef(null),Wn=M.useRef(null),wo=M.useRef(null);M.useEffect(()=>{h.length>0&&(w===ie.TRANSLATING||w===ie.COMPLETED||f==="youtube")&&setTimeout(()=>{var A;(A=ef.current)==null||A.scrollIntoView({behavior:"smooth",block:"start"})},300)},[h.length,w,f]),M.useEffect(()=>{if(qn===""){yr("idle");return}if(qn===gr){yr("valid");return}return yr("validating"),vo.current&&clearTimeout(vo.current),vo.current=setTimeout(()=>{DR(qn).then(A=>{yr(A?"valid":"invalid")})},800),()=>{vo.current&&clearTimeout(vo.current)}},[qn,gr]),M.useEffect(()=>{if(zn===""){_r("idle");return}if(zn===vr){_r("valid");return}return _r("validating"),_o.current&&clearTimeout(_o.current),_o.current=setTimeout(()=>{LR(zn).then(A=>{_r(A?"valid":"invalid")})},800),()=>{_o.current&&clearTimeout(_o.current)}},[zn,vr]),M.useEffect(()=>{const A=localStorage.getItem("substream_google_api_key"),G=localStorage.getItem("substream_openai_api_key"),ue=localStorage.getItem("substream_model_id"),de=localStorage.getItem("substream_rpm"),ft=localStorage.getItem("substream_daily_usage"),Ke=localStorage.getItem("substream_usage_date"),lf=new Date().toDateString();if(A&&(Xl(A),Ql(A),yr("valid")),G&&(Zl(G),jl(G),_r("valid")),ue&&pn.find(bi=>bi.id===ue)&&ea(ue),de){const bi=de==="unlimited"?"unlimited":parseInt(de,10);jd(bi),Ha(bi)}else Ha(15);Ke===lf&&ft?ta(parseInt(ft,10)):(ta(0),localStorage.setItem("substream_usage_date",lf),localStorage.setItem("substream_daily_usage","0"))},[]);const k0=A=>{const G=Zd+A;ta(G),localStorage.setItem("substream_daily_usage",G.toString()),localStorage.setItem("substream_usage_date",new Date().toDateString())},na=()=>{d(null),p(null),g([]),x(ie.IDLE),_(0),v(null),j(W.IDLE),V(""),ee(0),an([]),Hn(null),Et(""),S(void 0),T(""),N(!1),Fe&&Fe.startsWith("blob:")&&URL.revokeObjectURL(Fe),$n(null)},M0=()=>{Lt==="valid"&&(localStorage.setItem("substream_google_api_key",qn),Xl(qn)),Ft==="valid"&&(localStorage.setItem("substream_openai_api_key",zn),Zl(zn)),localStorage.setItem("substream_model_id",un),localStorage.setItem("substream_rpm",cn.toString()),Ha(cn),r("NONE")},D0=()=>{localStorage.removeItem("substream_google_api_key"),Xl(""),Ql(""),yr("idle")},L0=()=>{localStorage.removeItem("substream_openai_api_key"),Zl(""),jl(""),_r("idle")},F0=A=>{d(null),g([]),x(ie.IDLE),_(0),v(null),j(W.IDLE),V(""),ee(0),an([]),Et(""),S(void 0),T(""),N(!1),Fe&&Fe.startsWith("blob:")&&URL.revokeObjectURL(Fe),p("youtube"),Hn(A),$n(`https://www.youtube.com/embed/${A.id}`);const G=new File([""],A.title,{type:"video/youtube"});d(G)},U0=async()=>{if(!$e||!(ne!=null&&ne.videoUrl)){v("Please select a caption track first.");return}v(null),j(W.EXTRACTING_SUBTITLES),V("Downloading caption track...");try{const A=await aP(ne.videoUrl,$e),G=ns(A);if(G.length===0)throw new Error("Parsed subtitle file is empty.");g(G),x(ie.COMPLETED),j(W.DONE)}catch(A){A.message.includes("Stale data")?v(A.message):v("Failed to download captions: "+A.message),j(W.ERROR)}},b0=A=>{var ue;const G=(ue=A.target.files)==null?void 0:ue[0];G&&ra(G)},G0=A=>{A.preventDefault();const G=A.dataTransfer.files[0];G&&ra(G)},ra=A=>{na(),A.name.endsWith(".srt")||A.name.endsWith(".vtt")?(p("srt"),d(A),B0(A)):wp.includes(A.type)||A.name.match(/\.(mp4|mkv|mov|webm|avi)$/i)?(p("video"),d(A),O0(A)):v("Unsupported file type. Please upload an SRT or a supported video file.")},V0=A=>{ra(A)},B0=async A=>{x(ie.PARSING);try{const G=await A.text(),ue=ns(G);if(ue.length===0)throw new Error("No subtitles found in file.");g(ue),x(ie.IDLE)}catch(G){v(G.message||"Failed to parse SRT file."),x(ie.ERROR)}},O0=async A=>{try{j(W.LOADING_FFMPEG);const G=await tP(de=>V(de));Wn.current=G,G.on("progress",({progress:de})=>{ee(de*100)}),j(W.ANALYZING),V("Analyzing video for subtitle tracks...");const ue=await nP(G,A);an(ue),$n(URL.createObjectURL(A)),j(W.IDLE)}catch(G){v(`Failed to process video file: ${G.message}`),j(W.ERROR)}},$0=async A=>{if(Wn.current)try{ee(0),j(W.EXTRACTING_SUBTITLES),V("Extracting selected subtitle track...");const G=await rP(Wn.current,A),ue=ns(G);g(ue),j(W.DONE)}catch(G){v(`Failed to extract subtitle track: ${G.message}`),j(W.ERROR)}},H0=async()=>{const A=pn.find(de=>de.id===un),G=A.provider==="openai"?vr:gr;if(A.provider,f==="youtube"){v("AI Audio transcription for YouTube links is currently limited. Please select a caption track.");return}if(!Wn.current||!G){r("CONFIG"),v(`Please provide an API Key for ${A.provider} to generate subtitles.`),j(W.IDLE);return}const ue=G||"";if(ue)try{ee(0),j(W.EXTRACTING_AUDIO),V("Extracting audio from video...");const de=await oP(Wn.current);j(W.TRANSCRIBING),V(`Generating subtitles with ${A.name}, this may take a moment...`);const ft=await bR(de,R,ue,A),Ke=ns(ft);g(Ke),j(W.DONE)}catch(de){v(`Failed to generate subtitles: ${de.message}`),j(W.ERROR)}},q0=async()=>{},z0=async()=>{if(h.length===0)return;const A=pn.find(de=>de.id===un),G=A.provider==="openai"?vr:gr;if(A.provider,!G){r("CONFIG"),v(`Please Provide an API Key for ${A.provider} to continue.`);return}const ue=G||"";x(ie.TRANSLATING),_(0),v(null);try{const de=await OR(h,R,q,ue,A,ft=>_(Math.round(ft/h.length*100)),ft=>g(ft));g(de),k0(tf),x(ie.COMPLETED)}catch(de){console.error(de),v(de.message||"An error occurred during translation. Please try again."),x(ie.ERROR)}},J0=()=>{if(h.length===0)return;const A=Ma(h),G=c?`translated_${c.name.split(".")[0]}.srt`:"translated_subtitles.srt";Vu(G,A)},W0=async()=>{var A;if(f==="youtube"){if(!$e||!(ne!=null&&ne.videoUrl))return;const G=(A=ne.availableCaptions)==null?void 0:A.find(Ke=>Ke.id===$e),ue=G?` - ${G.name}`:"",ft=`${ne.title.replace(/[^a-z0-9 ]/gi,"").trim()}${ue}.mp4`;v(null),S(0),T("Initializing..."),N(!1),wo.current=setInterval(()=>{S(Ke=>Ke===void 0?0:(Ke<30?T("Fetching stream..."):Ke<60?T("Embedding subs..."):Ke<90&&T("Finalizing..."),Ke>=90?90:Ke+Math.random()*4))},600);try{await uP(ne.videoUrl,$e,ft),wo.current&&clearInterval(wo.current),S(100),T("Done"),N(!0),setTimeout(()=>{S(void 0),T(""),N(!1)},3e3)}catch(Ke){wo.current&&clearInterval(wo.current),S(void 0),T(""),v(`Video download failed: ${Ke.message}`)}return}if(!(!c||!Wn.current||w!==ie.COMPLETED))try{ee(0),j(W.MUXING),V("Packaging your new video file... This will not re-encode the video.");const G=Ma(h),ue=Go.find(ft=>ft.name===q),de=await iP(Wn.current,c,G,(ue==null?void 0:ue.code)||"eng");Vu(`translated_${c.name.split(".")[0]}.mkv`,de),j(W.DONE)}catch(G){v(`Failed to package video file: ${G.message}`),j(W.ERROR)}},tf=h.length>0?Math.ceil(h.length/ac):0,Y0=Math.max(0,mP-Zd),Ui=pn.find(A=>A.id===un)||pn[0],xo=gr||vr,nf=M.useMemo(()=>pn.filter(A=>A.provider==="google"&&(A.name.toLowerCase().includes(Jn.toLowerCase())||A.description.toLowerCase().includes(Jn.toLowerCase()))),[Jn]),rf=M.useMemo(()=>pn.filter(A=>A.provider==="openai"&&(A.name.toLowerCase().includes(Jn.toLowerCase())||A.description.toLowerCase().includes(Jn.toLowerCase()))),[Jn]),K0=[W.EXTRACTING_AUDIO,W.TRANSCRIBING,W.MUXING,W.EXTRACTING_SUBTITLES,W.UPLOADING_TO_YOUTUBE,W.AWAITING_YOUTUBE_CAPTIONS].includes(ae),X0=M.useMemo(()=>ka.findIndex(A=>A.value===cn),[cn]);return t==="DOCS"?m.jsx(dP,{onBack:()=>e("HOME")}):m.jsxs("div",{className:"min-h-screen bg-black text-neutral-200 font-sans selection:bg-white selection:text-black flex flex-col",children:[m.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[m.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-neutral-900/30 blur-[120px] rounded-full mix-blend-screen"}),m.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[40%] h-[40%] bg-neutral-800/20 blur-[100px] rounded-full mix-blend-screen"})]}),m.jsx("nav",{className:"relative z-20 border-b border-neutral-900 bg-black/80 backdrop-blur-xl sticky top-0 transition-all",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>window.location.reload(),children:[m.jsx("div",{className:"w-8 h-8 bg-white text-black flex items-center justify-center font-bold text-xl rounded-lg font-display",children:"S"}),m.jsxs("span",{className:"font-display font-bold text-lg tracking-tight",children:["SubStream ",m.jsx("span",{className:"text-neutral-600 font-sans font-normal text-sm ml-2",children:"AI"})]})]}),m.jsxs("div",{className:"flex items-center gap-2 md:gap-6 text-sm font-medium text-neutral-400",children:[m.jsx("button",{onClick:()=>e("DOCS"),className:"hidden md:block hover:text-white transition-colors focus:outline-none",children:"Documentation"}),m.jsx("button",{onClick:()=>e("DOCS"),className:"p-2 rounded-full hover:bg-neutral-800 transition-colors group md:hidden","aria-label":"Documentation",children:m.jsx(kx,{className:"w-5 h-5 text-neutral-400 group-hover:text-white"})}),m.jsxs("button",{onClick:()=>r("CONFIG"),className:`flex items-center gap-3 pl-3 pr-2 py-1.5 rounded-xl border transition-all group ${xo?"bg-neutral-900/50 border-neutral-800 hover:border-white/30":"bg-neutral-900/50 border-neutral-800 hover:border-neutral-600"}`,children:[m.jsxs("div",{className:"text-xs text-right",children:[m.jsx("div",{className:"font-bold text-white",children:Ui.name}),m.jsx("div",{className:`text-[10px] uppercase ${xo?"text-green-400":"text-neutral-500"}`,children:xo?"Pro Access":`${Y0} Credits`})]}),m.jsx("div",{className:`w-8 h-8 rounded-full border relative flex items-center justify-center ${xo?"border-green-900/50 bg-green-900/20":"border-neutral-700 bg-neutral-800/50"}`,children:m.jsx(il,{className:`w-4 h-4 ${xo?"text-green-400":"text-neutral-400 group-hover:text-white"}`})})]})]})]})}),m.jsxs("main",{className:"relative z-10 max-w-5xl mx-auto px-6 w-full flex-grow flex flex-col",children:[m.jsxs("div",{className:"flex-grow flex flex-col justify-start pt-16 md:pt-30",children:[m.jsxs("section",{className:"mb-14 text-center",children:[m.jsxs("h1",{className:"text-4xl md:text-6xl font-display font-bold tracking-tighter text-white mb-6 animate-slide-up",children:["Bridge the Language",m.jsx("br",{}),m.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-neutral-400 to-neutral-700",children:"Gap Instantly."})]}),m.jsxs("p",{className:"text-base md:text-lg text-neutral-400 max-w-2xl mx-auto leading-relaxed animate-slide-up",style:{animationDelay:"0.1s"},children:["Transform your subtitles with context-aware AI. Powered by ",Ui.provider==="google"?"Google's":"OpenAI's"," ",Ui.name," for nuance and accuracy across ",Go.length,"+ languages."]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12 items-stretch pb-12",children:[m.jsx("div",{className:"lg:col-span-3",children:m.jsx("div",{className:"lg:sticky lg:top-32 h-full",children:m.jsxs("div",{className:"h-full flex flex-row justify-around p-4 rounded-2xl border border-neutral-900 bg-neutral-950/50 backdrop-blur-sm lg:flex-col lg:p-6 lg:justify-between",children:[m.jsx(fs,{number:1,title:"Upload",isActive:w===ie.IDLE&&!c,isCompleted:!!c}),m.jsx(fs,{number:2,title:"Configure",isActive:!!c&&(h.length>0||f==="youtube")&&w!==ie.TRANSLATING&&w!==ie.COMPLETED,isCompleted:w===ie.TRANSLATING||w===ie.COMPLETED}),m.jsx(fs,{number:3,title:"Translate",isActive:w===ie.TRANSLATING,isCompleted:w===ie.COMPLETED}),m.jsx(fs,{number:4,title:"Download",isActive:w===ie.COMPLETED,isCompleted:!1})]})})}),m.jsxs("div",{className:"lg:col-span-9 space-y-8",children:[(f==="video"||f==="youtube")&&Fe&&(f==="youtube"&&ne?m.jsxs("div",{className:"w-full bg-black rounded-2xl overflow-hidden aspect-video border border-neutral-800 relative group",children:[m.jsx("img",{src:ne.thumbnailUrl,alt:ne.title,className:"w-full h-full object-cover opacity-50 group-hover:opacity-70 transition-opacity"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"px-4 py-2 bg-black/70 rounded-xl backdrop-blur border border-white/10 text-sm text-white font-medium flex items-center gap-2",children:[m.jsx(ll,{className:"w-4 h-4 text-red-500"})," YouTube Import"]})})]}):m.jsx(fP,{videoSrc:Fe,srtContent:Ma(h),isYouTube:!1})),m.jsx("div",{className:"group relative rounded-3xl border border-neutral-800 bg-neutral-900/20 p-6 hover:bg-neutral-900/30 transition-all duration-300",children:c?f==="video"&&ae!==W.IDLE&&ae!==W.DONE&&ae!==W.ERROR?m.jsxs("div",{className:"flex flex-col items-center justify-center text-center min-h-[200px] space-y-4",children:[m.jsx(bo,{className:"w-12 h-12 text-white animate-spin"}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-1 uppercase tracking-widest",children:ae.replace(/_/g," ")}),m.jsx("p",{className:"text-neutral-400",children:L})]}),K0&&m.jsxs("div",{className:"w-full max-w-sm",children:[m.jsx("div",{className:"w-full h-2 bg-neutral-800 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${H}%`}})}),m.jsxs("p",{className:"text-xs text-neutral-500 mt-1 text-right",children:[Math.round(H),"%"]})]})]}):f==="video"&&ae===W.IDLE&&h.length===0?m.jsx(pP,{tracks:we,onSelectTrack:$0,onGenerate:H0,onGenerateYouTube:q0,isYouTubeAuthenticated:!!R0}):m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-6",children:[m.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[m.jsx("div",{className:"w-24 aspect-video rounded-xl bg-neutral-800 text-black flex items-center justify-center overflow-hidden shrink-0 border border-neutral-700",children:f==="srt"?m.jsx(Ai,{className:"w-6 h-6 text-white"}):f==="youtube"&&ne?m.jsx("img",{src:ne.thumbnailUrl,className:"w-full h-full object-cover"}):m.jsx(Lx,{className:"w-6 h-6 text-white"})}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("h3",{className:"text-lg font-bold text-white truncate",children:c.name}),m.jsx("p",{className:"text-neutral-500 text-sm",children:h.length>0?`${h.length} lines loaded`:f==="youtube"?"Select a caption track below":"Ready to configure"})]})]}),m.jsx(pt,{variant:"outline",onClick:na,className:"shrink-0",children:"Change File"})]}),h.length>0&&f!=="youtube"&&m.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-indigo-900/20 border border-indigo-900/40 text-indigo-300 text-sm",children:[m.jsx(Vx,{className:"w-4 h-4 shrink-0"}),m.jsxs("span",{children:["Processing this file will require approximately ",m.jsxs("strong",{children:[tf," API requests"]}),"."]})]})]}):m.jsxs("div",{className:"flex flex-col items-center justify-center text-center cursor-pointer min-h-[200px]",onDragOver:A=>A.preventDefault(),onDrop:G0,children:[m.jsx("input",{type:"file",ref:Fi,className:"hidden",accept:`.srt, ${wp.join(",")}`,onChange:b0}),m.jsx("div",{className:"w-16 h-16 rounded-2xl bg-neutral-800 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform",onClick:()=>{var A;return(A=Fi.current)==null?void 0:A.click()},children:m.jsx(Jx,{className:"text-white w-8 h-8"})}),m.jsx("h2",{className:"text-xl font-bold text-white mb-2",onClick:()=>{var A;return(A=Fi.current)==null?void 0:A.click()},children:"Drop your SRT or Video file here"}),m.jsx("p",{className:"text-neutral-500 mb-8",onClick:()=>{var A;return(A=Fi.current)==null?void 0:A.click()},children:"or click to browse local files"}),m.jsxs("div",{className:"flex gap-4 z-20",children:[m.jsx("button",{onClick:()=>{a("URL"),i(!0)},className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-neutral-500 transition-all group/btn",title:"Import from URL",children:m.jsx(My,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-white"})}),m.jsx("button",{onClick:()=>{a("YOUTUBE"),i(!0)},className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-red-500/50 transition-all group/btn",title:"Import from YouTube",children:m.jsx(ll,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-red-500"})}),m.jsx("button",{onClick:()=>alert("Google Drive Integration Coming Soon!"),className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-blue-500/50 transition-all group/btn",title:"Import from Google Drive",children:m.jsx(bx,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-blue-500"})}),m.jsx("button",{onClick:()=>alert("Social Media Integration Coming Soon!"),className:"p-3 rounded-xl bg-neutral-800/50 border border-neutral-700 hover:bg-neutral-800 hover:border-pink-500/50 transition-all group/btn",title:"Other Sources",children:m.jsx(Bx,{className:"w-5 h-5 text-neutral-400 group-hover/btn:text-pink-500"})})]})]})}),(h.length>0||f==="youtube")&&m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[m.jsx("div",{className:"p-6 rounded-2xl border border-neutral-800 bg-neutral-900/20",children:f==="youtube"?m.jsxs(m.Fragment,{children:[m.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-wider mb-3",children:"YouTube Caption Track"}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{className:"w-full appearance-none bg-black border border-neutral-800 text-white px-4 py-3 rounded-xl focus:border-white focus:outline-none transition-colors",onChange:A=>Et(A.target.value),value:$e,disabled:ae===W.EXTRACTING_SUBTITLES,children:[m.jsx("option",{value:"",children:"-- Select Caption to Import --"}),(of=ne==null?void 0:ne.availableCaptions)==null?void 0:of.map((A,G)=>m.jsx("option",{value:A.id,children:A.name},G))]}),m.jsx(Pa,{className:"absolute right-4 top-3.5 w-5 h-5 text-neutral-600 pointer-events-none"})]})]}):m.jsxs(m.Fragment,{children:[m.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-wider mb-3",children:"Source Language"}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{className:"w-full appearance-none bg-black border border-neutral-800 text-white px-4 py-3 rounded-xl focus:border-white focus:outline-none transition-colors",value:R,onChange:A=>U(A.target.value),disabled:w===ie.TRANSLATING,children:[m.jsx("option",{value:"auto",children:" Auto Detect"}),Go.map(A=>m.jsx("option",{value:A.name,children:A.name},`source-${A.code}`))]}),m.jsx(Ox,{className:"absolute right-4 top-3.5 w-5 h-5 text-neutral-600 pointer-events-none"})]})]})}),m.jsx("div",{className:"p-6 rounded-2xl border border-neutral-800 bg-neutral-900/20 flex flex-col justify-end",children:f==="youtube"?m.jsx("div",{className:"h-full flex items-end",children:m.jsx(pt,{className:"w-full py-3.5 text-base",onClick:U0,disabled:!$e||ae===W.EXTRACTING_SUBTITLES,icon:ae===W.EXTRACTING_SUBTITLES?m.jsx(bo,{className:"w-5 h-5 animate-spin"}):m.jsx(sl,{className:"w-5 h-5"}),children:ae===W.EXTRACTING_SUBTITLES?"Downloading...":"Download & Process"})}):m.jsxs(m.Fragment,{children:[m.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-wider mb-3",children:"Target Language"}),m.jsxs("div",{className:"relative",children:[m.jsx("select",{className:"w-full appearance-none bg-black border border-neutral-800 text-white px-4 py-3 rounded-xl focus:border-white focus:outline-none transition-colors",value:q,onChange:A=>ye(A.target.value),disabled:w===ie.TRANSLATING,children:Go.map(A=>m.jsx("option",{value:A.name,children:A.name},`target-${A.code}`))}),m.jsx(Px,{className:"absolute right-4 top-3.5 w-5 h-5 text-neutral-600 pointer-events-none"})]})]})})]}),h.length>0&&f!=="youtube"&&m.jsx("div",{className:"flex justify-end gap-4 animate-fade-in",children:w===ie.TRANSLATING?m.jsxs("div",{className:"flex-1 p-4 rounded-xl border border-neutral-800 bg-neutral-900/50 flex items-center gap-4",children:[m.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between text-xs font-medium mb-1",children:[m.jsxs("span",{children:["Translating with ",Ui.name,"..."]}),m.jsxs("span",{children:[C,"%"]})]}),m.jsx("div",{className:"w-full h-1 bg-neutral-800 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-white transition-all duration-300",style:{width:`${C}%`}})})]})]}):m.jsx(pt,{onClick:z0,className:"w-full md:w-auto text-lg",icon:m.jsx(Dy,{className:"w-5 h-5"}),children:"Start Translation"})}),y&&m.jsxs("div",{className:"p-4 rounded-xl bg-red-900/10 border border-red-900/40 text-red-200 text-sm flex items-center gap-3 animate-fade-in",children:[m.jsx(rd,{className:"w-5 h-5 text-red-500"}),m.jsx("span",{children:y})]})]})]})]}),h.length>0&&m.jsxs("section",{ref:ef,className:"mt-24 border-t border-neutral-900 pt-12 animate-slide-up pb-24",children:[m.jsxs("div",{className:"flex items-center justify-between mb-8 flex-wrap gap-4",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-2",children:"Live Preview"}),m.jsx("p",{className:"text-neutral-500",children:"Comparing original vs translated output."})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[(f==="video"||f==="youtube")&&m.jsx("div",{className:"",children:m.jsx(pt,{variant:"secondary",onClick:W0,progress:E,statusText:I,completed:k,disabled:E!==void 0,icon:m.jsx(Fx,{className:"w-4 h-4"}),className:"",children:"Download Video"})}),m.jsx(pt,{variant:"primary",onClick:J0,icon:m.jsx(sl,{className:"w-4 h-4"}),children:"Download SRT"})]})]}),m.jsxs("div",{className:"rounded-3xl border border-neutral-800 bg-black/50 backdrop-blur overflow-hidden min-h-[400px]",children:[m.jsxs("div",{className:`grid ${f==="youtube"?"grid-cols-1":"grid-cols-[100px_1fr]"} border-b border-neutral-800 bg-neutral-900/50 p-4 text-xs font-bold text-neutral-500 uppercase tracking-wider sticky top-0 z-10`,children:[f!=="youtube"&&m.jsx("div",{className:"pl-2",children:"Timestamp"}),m.jsxs("div",{className:`grid ${f==="youtube"?"grid-cols-1":"grid-cols-1 md:grid-cols-2"} gap-6`,children:[m.jsxs("span",{children:["Original (",R,")"]}),f!=="youtube"&&m.jsxs("span",{className:"text-white",children:["Translated (",q,")"]})]})]}),m.jsx("div",{className:"max-h-[800px] overflow-y-auto",children:h.map(A=>m.jsx(cP,{subtitle:A,isActive:A.text!==A.originalText,isSingleColumn:f==="youtube"},A.id))})]}),m.jsx("div",{className:"mt-8 flex justify-center",children:m.jsx(pt,{variant:"secondary",onClick:na,icon:m.jsx(qx,{className:"w-4 h-4"}),children:"Translate Another File"})})]})]}),m.jsx("footer",{className:"relative z-10 border-t border-neutral-900 bg-black/80 backdrop-blur-xl mt-auto",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8 flex flex-col gap-8",children:[m.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 w-full",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-6 h-6 bg-neutral-800 text-white flex items-center justify-center font-bold text-sm rounded font-display",children:"S"}),m.jsx("span",{className:"font-display font-bold tracking-tight text-neutral-400",children:"SubStream AI"})]}),m.jsxs("div",{className:"text-xs text-neutral-600",children:[" ",new Date().getFullYear()," SubStream AI. Open Source."]}),m.jsxs("div",{className:"flex items-center gap-6 text-sm text-neutral-500",children:[m.jsx("button",{onClick:()=>r("TOS"),className:"hover:text-white transition-colors",children:"Terms"}),m.jsx("button",{onClick:()=>r("PRIVACY"),className:"hover:text-white transition-colors",children:"Privacy"}),m.jsx("a",{href:"https://github.com/imrovoid/SubStream-AI",target:"_blank",rel:"noopener noreferrer",className:"hover:text-white transition-colors",children:m.jsx(Ux,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 text-xs text-neutral-500 w-full",children:[m.jsxs("span",{children:["Developed by ",m.jsx("a",{href:"https://rovoid.ir",target:"_blank",rel:"noopener noreferrer",className:"text-neutral-300 hover:text-white transition-colors font-medium",children:"ROVOID"})]}),m.jsx("span",{className:"hidden md:block w-1 h-1 rounded-full bg-neutral-800"}),m.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-neutral-900/50 border border-neutral-800 text-xs hover:border-neutral-600 hover:bg-neutral-800 transition-all group",children:[m.jsx(Gx,{className:"w-3 h-3 text-pink-500 group-hover:scale-110 transition-transform"})," Support Me"]})]})]})}),m.jsx(Ls,{isOpen:n==="CONFIG",onClose:()=>r("NONE"),title:"AI Configuration",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-10",children:[m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[m.jsx(il,{className:"w-4 h-4"})," Select AI Model"]}),m.jsxs("div",{className:"relative",children:[m.jsx(Gu,{className:"absolute left-3 top-3.5 w-5 h-5 text-neutral-500 pointer-events-none"}),m.jsx("input",{type:"text",placeholder:"Search models...",value:Jn,onChange:A=>N0(A.target.value),className:"w-full bg-black/50 border border-neutral-700 rounded-xl py-2 pl-10 pr-4 text-white focus:border-white focus:outline-none transition-colors"})]}),m.jsxs("div",{className:"space-y-4 pr-2 overflow-y-auto max-h-[300px] md:max-h-[450px] custom-scrollbar",children:[nf.length>0&&m.jsxs("details",{open:!0,className:"group/google",children:[m.jsxs("summary",{className:"list-none flex items-center justify-between p-2 rounded-lg cursor-pointer hover:bg-neutral-800/50 transition-colors",children:[m.jsx("span",{className:"font-bold text-neutral-300",children:"Google Gemini Models"}),m.jsx(Pa,{className:"w-5 h-5 text-neutral-500 transition-transform duration-200 group-open/google:rotate-180"})]}),m.jsx("div",{className:"space-y-3 pt-2 pl-2 border-l border-neutral-800 ml-2",children:nf.map(A=>m.jsxs("div",{onClick:()=>ea(A.id),className:`relative cursor-pointer p-4 rounded-xl border transition-all duration-200 ${un===A.id?"bg-neutral-800 border-white":"bg-neutral-900/50 border-neutral-800 hover:bg-neutral-800/50 hover:border-neutral-700"}`,children:[m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-white mb-1",children:A.name}),m.jsx("p",{className:"text-xs text-neutral-400 leading-relaxed pr-8",children:A.description})]}),un===A.id&&m.jsx(ts,{className:"w-5 h-5 text-white shrink-0"})]}),m.jsx("div",{className:"flex gap-2 mt-3",children:A.tags.map(G=>m.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-black/50 text-neutral-400 border border-neutral-800",children:G},G))})]},A.id))})]}),rf.length>0&&m.jsxs("details",{open:!0,className:"group/openai",children:[m.jsxs("summary",{className:"list-none flex items-center justify-between p-2 rounded-lg cursor-pointer hover:bg-neutral-800/50 transition-colors",children:[m.jsx("span",{className:"font-bold text-neutral-300",children:"OpenAI Models"}),m.jsx(Pa,{className:"w-5 h-5 text-neutral-500 transition-transform duration-200 group-open/openai:rotate-180"})]}),m.jsx("div",{className:"space-y-3 pt-2 pl-2 border-l border-neutral-800 ml-2",children:rf.map(A=>m.jsxs("div",{onClick:()=>ea(A.id),className:`relative cursor-pointer p-4 rounded-xl border transition-all duration-200 ${un===A.id?"bg-neutral-800 border-white":"bg-neutral-900/50 border-neutral-800 hover:bg-neutral-800/50 hover:border-neutral-700"}`,children:[m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-white mb-1",children:A.name}),m.jsx("p",{className:"text-xs text-neutral-400 leading-relaxed pr-8",children:A.description})]}),un===A.id&&m.jsx(ts,{className:"w-5 h-5 text-white shrink-0"})]}),m.jsx("div",{className:"flex gap-2 mt-3",children:A.tags.map(G=>m.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-black/50 text-neutral-400 border border-neutral-800",children:G},G))})]},A.id))})]})]})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[m.jsx(bu,{className:"w-4 h-4"})," Google AI API Key"]}),gr&&m.jsx("button",{onClick:D0,className:"text-xs text-red-500 hover:text-red-400",children:"Clear Key"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"password",placeholder:"AIzaSy...",value:qn,onChange:A=>Ql(A.target.value),className:`w-full bg-black border rounded-xl px-4 py-3 text-white focus:outline-none transition-colors ${Lt==="idle"?"border-neutral-800 focus:border-white":""} ${Lt==="validating"?"border-neutral-700 animate-pulse":""} ${Lt==="valid"?"border-green-700/50 focus:border-green-500 focus:ring-1 focus:ring-green-500/50":""} ${Lt==="invalid"?"border-red-700/50 focus:border-red-500 focus:ring-1 focus:ring-red-500/50":""}`}),m.jsxs("div",{className:"absolute right-3 top-3.5",children:[Lt==="validating"&&m.jsx(bo,{className:"w-5 h-5 text-neutral-500 animate-spin"}),Lt==="valid"&&m.jsx(ts,{className:"w-5 h-5 text-green-500"}),Lt==="invalid"&&m.jsx(_p,{className:"w-5 h-5 text-red-500"})]})]}),m.jsx("p",{className:"text-xs text-neutral-500",children:"For Gemini models. Stored locally in your browser."})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[m.jsx(bu,{className:"w-4 h-4"})," OpenAI API Key"]}),vr&&m.jsx("button",{onClick:L0,className:"text-xs text-red-500 hover:text-red-400",children:"Clear Key"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"password",placeholder:"sk-...",value:zn,onChange:A=>jl(A.target.value),className:`w-full bg-black border rounded-xl px-4 py-3 text-white focus:outline-none transition-colors ${Ft==="idle"?"border-neutral-800 focus:border-white":""} ${Ft==="validating"?"border-neutral-700 animate-pulse":""} ${Ft==="valid"?"border-green-700/50 focus:border-green-500 focus:ring-1 focus:ring-green-500/50":""} ${Ft==="invalid"?"border-red-700/50 focus:border-red-500 focus:ring-1 focus:ring-red-500/50":""}`}),m.jsxs("div",{className:"absolute right-3 top-3.5",children:[Ft==="validating"&&m.jsx(bo,{className:"w-5 h-5 text-neutral-500 animate-spin"}),Ft==="valid"&&m.jsx(ts,{className:"w-5 h-5 text-green-500"}),Ft==="invalid"&&m.jsx(_p,{className:"w-5 h-5 text-red-500"})]})]}),m.jsx("p",{className:"text-xs text-neutral-500",children:"For GPT models. Stored locally in your browser."})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsxs("label",{className:"block text-sm font-bold text-white flex items-center gap-2",children:[m.jsx(ky,{className:"w-4 h-4"})," Rate Limit"]}),m.jsx("p",{className:"font-medium text-white text-sm",children:cn==="unlimited"?"Unlimited":`${cn} RPM`})]}),m.jsxs("div",{className:"relative flex w-full p-1 bg-neutral-900 border border-neutral-800 rounded-xl",children:[m.jsx("div",{className:"absolute top-1 bottom-1 left-1 w-1/4 bg-neutral-700 rounded-lg transition-all duration-300 ease-out",style:{transform:`translateX(${X0*100}%)`}}),ka.map(A=>m.jsx("button",{onClick:()=>jd(A.value),className:`relative z-10 w-1/4 py-2 text-sm font-medium transition-colors duration-300 rounded-lg ${cn===A.value?"text-white":"text-neutral-400 hover:text-white"}`,children:A.label},A.value))]}),m.jsx("p",{className:"text-xs text-neutral-500 text-center mt-2",children:(sf=ka.find(A=>A.value===cn))==null?void 0:sf.description})]}),m.jsx("div",{className:"flex justify-end gap-3 pt-4",children:m.jsx(pt,{onClick:M0,disabled:Lt==="invalid"||Lt==="validating"||Ft==="invalid"||Ft==="validating",children:"Save Settings"})})]})]})}),m.jsx(Ls,{isOpen:n==="PRIVACY",onClose:()=>r("NONE"),title:"Privacy Policy",children:m.jsxs("div",{className:"space-y-5 text-sm text-neutral-300",children:[m.jsx("p",{className:"text-neutral-500",children:"Last Updated: November 2025"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-white font-bold mb-2",children:"1. Data Collection"}),m.jsx("p",{children:"We do not store your subtitle files. All processing is done in-memory and via the Gemini API. Once your session ends, your data is cleared from our interface."})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-white font-bold mb-2",children:"2. Third-Party Services"}),m.jsx("p",{children:"We use Google's Gemini API for processing translations. Data sent to Google is subject to their data processing terms."})]})]})}),m.jsx(Ls,{isOpen:n==="TOS",onClose:()=>r("NONE"),title:"Terms of Service",children:m.jsxs("div",{className:"space-y-5 text-sm text-neutral-300",children:[m.jsx("p",{className:"text-neutral-500",children:"Last Updated: November 2025"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-white font-bold mb-2",children:"1. Usage"}),m.jsx("p",{children:'SubStream AI is provided "as is" for subtitle translation purposes. Do not use for illegal content.'})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-white font-bold mb-2",children:"2. Limitations"}),m.jsx("p",{children:"We do not guarantee 100% accuracy in translations. AI models can hallucinate or misinterpret context."})]})]})}),m.jsx(hP,{isOpen:o,onClose:()=>i(!1),type:s,onImportFile:V0,onImportYouTube:F0,googleAccessToken:P0})]})},A0=document.getElementById("root");if(!A0)throw new Error("Could not find root element to mount to");const vP=qa.createRoot(A0);vP.render(m.jsx(gP,{}));
